var ty=Object.defineProperty;var ny=(e,t,n)=>t in e?ty(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var K=(e,t,n)=>ny(e,typeof t!="symbol"?t+"":t,n);function sy(e,t){for(var n=0;n<t.length;n++){const s=t[n];if(typeof s!="string"&&!Array.isArray(s)){for(const r in s)if(r!=="default"&&!(r in e)){const i=Object.getOwnPropertyDescriptor(s,r);i&&Object.defineProperty(e,r,i.get?i:{enumerable:!0,get:()=>s[r]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();var ve=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function A0(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var z0={exports:{}},Pl={},F0={exports:{}},te={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=Symbol.for("react.element"),ry=Symbol.for("react.portal"),iy=Symbol.for("react.fragment"),ay=Symbol.for("react.strict_mode"),oy=Symbol.for("react.profiler"),ly=Symbol.for("react.provider"),cy=Symbol.for("react.context"),dy=Symbol.for("react.forward_ref"),uy=Symbol.for("react.suspense"),hy=Symbol.for("react.memo"),fy=Symbol.for("react.lazy"),kf=Symbol.iterator;function py(e){return e===null||typeof e!="object"?null:(e=kf&&e[kf]||e["@@iterator"],typeof e=="function"?e:null)}var I0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},W0=Object.assign,$0={};function Tr(e,t,n){this.props=e,this.context=t,this.refs=$0,this.updater=n||I0}Tr.prototype.isReactComponent={};Tr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Tr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function B0(){}B0.prototype=Tr.prototype;function Vu(e,t,n){this.props=e,this.context=t,this.refs=$0,this.updater=n||I0}var Yu=Vu.prototype=new B0;Yu.constructor=Vu;W0(Yu,Tr.prototype);Yu.isPureReactComponent=!0;var Sf=Array.isArray,H0=Object.prototype.hasOwnProperty,Xu={current:null},U0={key:!0,ref:!0,__self:!0,__source:!0};function V0(e,t,n){var s,r={},i=null,o=null;if(t!=null)for(s in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)H0.call(t,s)&&!U0.hasOwnProperty(s)&&(r[s]=t[s]);var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];r.children=c}if(e&&e.defaultProps)for(s in l=e.defaultProps,l)r[s]===void 0&&(r[s]=l[s]);return{$$typeof:aa,type:e,key:i,ref:o,props:r,_owner:Xu.current}}function my(e,t){return{$$typeof:aa,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function qu(e){return typeof e=="object"&&e!==null&&e.$$typeof===aa}function xy(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Cf=/\/+/g;function yc(e,t){return typeof e=="object"&&e!==null&&e.key!=null?xy(""+e.key):t.toString(36)}function ao(e,t,n,s,r){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case aa:case ry:o=!0}}if(o)return o=e,r=r(o),e=s===""?"."+yc(o,0):s,Sf(r)?(n="",e!=null&&(n=e.replace(Cf,"$&/")+"/"),ao(r,t,n,"",function(d){return d})):r!=null&&(qu(r)&&(r=my(r,n+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(Cf,"$&/")+"/")+e)),t.push(r)),1;if(o=0,s=s===""?".":s+":",Sf(e))for(var l=0;l<e.length;l++){i=e[l];var c=s+yc(i,l);o+=ao(i,t,n,c,r)}else if(c=py(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=s+yc(i,l++),o+=ao(i,t,n,c,r);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function ja(e,t,n){if(e==null)return e;var s=[],r=0;return ao(e,s,"","",function(i){return t.call(n,i,r++)}),s}function gy(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Je={current:null},oo={transition:null},by={ReactCurrentDispatcher:Je,ReactCurrentBatchConfig:oo,ReactCurrentOwner:Xu};function Y0(){throw Error("act(...) is not supported in production builds of React.")}te.Children={map:ja,forEach:function(e,t,n){ja(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return ja(e,function(){t++}),t},toArray:function(e){return ja(e,function(t){return t})||[]},only:function(e){if(!qu(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};te.Component=Tr;te.Fragment=iy;te.Profiler=oy;te.PureComponent=Vu;te.StrictMode=ay;te.Suspense=uy;te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=by;te.act=Y0;te.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=W0({},e.props),r=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=Xu.current),t.key!==void 0&&(r=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)H0.call(t,c)&&!U0.hasOwnProperty(c)&&(s[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)s.children=n;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];s.children=l}return{$$typeof:aa,type:e.type,key:r,ref:i,props:s,_owner:o}};te.createContext=function(e){return e={$$typeof:cy,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:ly,_context:e},e.Consumer=e};te.createElement=V0;te.createFactory=function(e){var t=V0.bind(null,e);return t.type=e,t};te.createRef=function(){return{current:null}};te.forwardRef=function(e){return{$$typeof:dy,render:e}};te.isValidElement=qu;te.lazy=function(e){return{$$typeof:fy,_payload:{_status:-1,_result:e},_init:gy}};te.memo=function(e,t){return{$$typeof:hy,type:e,compare:t===void 0?null:t}};te.startTransition=function(e){var t=oo.transition;oo.transition={};try{e()}finally{oo.transition=t}};te.unstable_act=Y0;te.useCallback=function(e,t){return Je.current.useCallback(e,t)};te.useContext=function(e){return Je.current.useContext(e)};te.useDebugValue=function(){};te.useDeferredValue=function(e){return Je.current.useDeferredValue(e)};te.useEffect=function(e,t){return Je.current.useEffect(e,t)};te.useId=function(){return Je.current.useId()};te.useImperativeHandle=function(e,t,n){return Je.current.useImperativeHandle(e,t,n)};te.useInsertionEffect=function(e,t){return Je.current.useInsertionEffect(e,t)};te.useLayoutEffect=function(e,t){return Je.current.useLayoutEffect(e,t)};te.useMemo=function(e,t){return Je.current.useMemo(e,t)};te.useReducer=function(e,t,n){return Je.current.useReducer(e,t,n)};te.useRef=function(e){return Je.current.useRef(e)};te.useState=function(e){return Je.current.useState(e)};te.useSyncExternalStore=function(e,t,n){return Je.current.useSyncExternalStore(e,t,n)};te.useTransition=function(){return Je.current.useTransition()};te.version="18.3.1";F0.exports=te;var w=F0.exports;const Ol=A0(w),vy=sy({__proto__:null,default:Ol},[w]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yy=w,wy=Symbol.for("react.element"),jy=Symbol.for("react.fragment"),_y=Object.prototype.hasOwnProperty,Ny=yy.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ky={key:!0,ref:!0,__self:!0,__source:!0};function X0(e,t,n){var s,r={},i=null,o=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(s in t)_y.call(t,s)&&!ky.hasOwnProperty(s)&&(r[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps,t)r[s]===void 0&&(r[s]=t[s]);return{$$typeof:wy,type:e,key:i,ref:o,props:r,_owner:Ny.current}}Pl.Fragment=jy;Pl.jsx=X0;Pl.jsxs=X0;z0.exports=Pl;var a=z0.exports,kd={},q0={exports:{}},bt={},G0={exports:{}},K0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(z,E){var k=z.length;z.push(E);e:for(;0<k;){var O=k-1>>>1,L=z[O];if(0<r(L,E))z[O]=E,z[k]=L,k=O;else break e}}function n(z){return z.length===0?null:z[0]}function s(z){if(z.length===0)return null;var E=z[0],k=z.pop();if(k!==E){z[0]=k;e:for(var O=0,L=z.length,H=L>>>1;O<H;){var Q=2*(O+1)-1,Z=z[Q],ee=Q+1,ut=z[ee];if(0>r(Z,k))ee<L&&0>r(ut,Z)?(z[O]=ut,z[ee]=k,O=ee):(z[O]=Z,z[Q]=k,O=Q);else if(ee<L&&0>r(ut,k))z[O]=ut,z[ee]=k,O=ee;else break e}}return E}function r(z,E){var k=z.sortIndex-E.sortIndex;return k!==0?k:z.id-E.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,h=null,f=3,p=!1,b=!1,g=!1,y=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(z){for(var E=n(d);E!==null;){if(E.callback===null)s(d);else if(E.startTime<=z)s(d),E.sortIndex=E.expirationTime,t(c,E);else break;E=n(d)}}function j(z){if(g=!1,v(z),!b)if(n(c)!==null)b=!0,G(_);else{var E=n(d);E!==null&&J(j,E.startTime-z)}}function _(z,E){b=!1,g&&(g=!1,x(T),T=-1),p=!0;var k=f;try{for(v(E),h=n(c);h!==null&&(!(h.expirationTime>E)||z&&!C());){var O=h.callback;if(typeof O=="function"){h.callback=null,f=h.priorityLevel;var L=O(h.expirationTime<=E);E=e.unstable_now(),typeof L=="function"?h.callback=L:h===n(c)&&s(c),v(E)}else s(c);h=n(c)}if(h!==null)var H=!0;else{var Q=n(d);Q!==null&&J(j,Q.startTime-E),H=!1}return H}finally{h=null,f=k,p=!1}}var N=!1,S=null,T=-1,M=5,D=-1;function C(){return!(e.unstable_now()-D<M)}function A(){if(S!==null){var z=e.unstable_now();D=z;var E=!0;try{E=S(!0,z)}finally{E?$():(N=!1,S=null)}}else N=!1}var $;if(typeof m=="function")$=function(){m(A)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,q=Y.port2;Y.port1.onmessage=A,$=function(){q.postMessage(null)}}else $=function(){y(A,0)};function G(z){S=z,N||(N=!0,$())}function J(z,E){T=y(function(){z(e.unstable_now())},E)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(z){z.callback=null},e.unstable_continueExecution=function(){b||p||(b=!0,G(_))},e.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<z?Math.floor(1e3/z):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(z){switch(f){case 1:case 2:case 3:var E=3;break;default:E=f}var k=f;f=E;try{return z()}finally{f=k}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(z,E){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var k=f;f=z;try{return E()}finally{f=k}},e.unstable_scheduleCallback=function(z,E,k){var O=e.unstable_now();switch(typeof k=="object"&&k!==null?(k=k.delay,k=typeof k=="number"&&0<k?O+k:O):k=O,z){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=k+L,z={id:u++,callback:E,priorityLevel:z,startTime:k,expirationTime:L,sortIndex:-1},k>O?(z.sortIndex=k,t(d,z),n(c)===null&&z===n(d)&&(g?(x(T),T=-1):g=!0,J(j,k-O))):(z.sortIndex=L,t(c,z),b||p||(b=!0,G(_))),z},e.unstable_shouldYield=C,e.unstable_wrapCallback=function(z){var E=f;return function(){var k=f;f=E;try{return z.apply(this,arguments)}finally{f=k}}}})(K0);G0.exports=K0;var Sy=G0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cy=w,gt=Sy;function F(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Q0=new Set,Mi={};function zs(e,t){xr(e,t),xr(e+"Capture",t)}function xr(e,t){for(Mi[e]=t,e=0;e<t.length;e++)Q0.add(t[e])}var xn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Sd=Object.prototype.hasOwnProperty,Ey=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ef={},Tf={};function Ty(e){return Sd.call(Tf,e)?!0:Sd.call(Ef,e)?!1:Ey.test(e)?Tf[e]=!0:(Ef[e]=!0,!1)}function My(e,t,n,s){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Py(e,t,n,s){if(t===null||typeof t>"u"||My(e,t,n,s))return!0;if(s)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ze(e,t,n,s,r,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var We={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){We[e]=new Ze(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];We[t]=new Ze(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){We[e]=new Ze(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){We[e]=new Ze(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){We[e]=new Ze(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){We[e]=new Ze(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){We[e]=new Ze(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){We[e]=new Ze(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){We[e]=new Ze(e,5,!1,e.toLowerCase(),null,!1,!1)});var Gu=/[\-:]([a-z])/g;function Ku(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Gu,Ku);We[t]=new Ze(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Gu,Ku);We[t]=new Ze(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Gu,Ku);We[t]=new Ze(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){We[e]=new Ze(e,1,!1,e.toLowerCase(),null,!1,!1)});We.xlinkHref=new Ze("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){We[e]=new Ze(e,1,!1,e.toLowerCase(),null,!0,!0)});function Qu(e,t,n,s){var r=We.hasOwnProperty(t)?We[t]:null;(r!==null?r.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Py(t,n,r,s)&&(n=null),s||r===null?Ty(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):r.mustUseProperty?e[r.propertyName]=n===null?r.type===3?!1:"":n:(t=r.attributeName,s=r.attributeNamespace,n===null?e.removeAttribute(t):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,s?e.setAttributeNS(s,t,n):e.setAttribute(t,n))))}var _n=Cy.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_a=Symbol.for("react.element"),Ys=Symbol.for("react.portal"),Xs=Symbol.for("react.fragment"),Ju=Symbol.for("react.strict_mode"),Cd=Symbol.for("react.profiler"),J0=Symbol.for("react.provider"),Z0=Symbol.for("react.context"),Zu=Symbol.for("react.forward_ref"),Ed=Symbol.for("react.suspense"),Td=Symbol.for("react.suspense_list"),eh=Symbol.for("react.memo"),Mn=Symbol.for("react.lazy"),ex=Symbol.for("react.offscreen"),Mf=Symbol.iterator;function Fr(e){return e===null||typeof e!="object"?null:(e=Mf&&e[Mf]||e["@@iterator"],typeof e=="function"?e:null)}var _e=Object.assign,wc;function ei(e){if(wc===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);wc=t&&t[1]||""}return`
`+wc+e}var jc=!1;function _c(e,t){if(!e||jc)return"";jc=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var s=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){s=d}e.call(t.prototype)}else{try{throw Error()}catch(d){s=d}e()}}catch(d){if(d&&s&&typeof d.stack=="string"){for(var r=d.stack.split(`
`),i=s.stack.split(`
`),o=r.length-1,l=i.length-1;1<=o&&0<=l&&r[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(r[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||r[o]!==i[l]){var c=`
`+r[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{jc=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?ei(e):""}function Oy(e){switch(e.tag){case 5:return ei(e.type);case 16:return ei("Lazy");case 13:return ei("Suspense");case 19:return ei("SuspenseList");case 0:case 2:case 15:return e=_c(e.type,!1),e;case 11:return e=_c(e.type.render,!1),e;case 1:return e=_c(e.type,!0),e;default:return""}}function Md(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Xs:return"Fragment";case Ys:return"Portal";case Cd:return"Profiler";case Ju:return"StrictMode";case Ed:return"Suspense";case Td:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Z0:return(e.displayName||"Context")+".Consumer";case J0:return(e._context.displayName||"Context")+".Provider";case Zu:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case eh:return t=e.displayName||null,t!==null?t:Md(e.type)||"Memo";case Mn:t=e._payload,e=e._init;try{return Md(e(t))}catch{}}return null}function Ry(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Md(t);case 8:return t===Ju?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ns(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function tx(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Dy(e){var t=tx(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(o){s=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(o){s=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Na(e){e._valueTracker||(e._valueTracker=Dy(e))}function nx(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),s="";return e&&(s=tx(e)?e.checked?"true":"false":e.value),e=s,e!==n?(t.setValue(e),!0):!1}function Ro(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Pd(e,t){var n=t.checked;return _e({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Pf(e,t){var n=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;n=ns(t.value!=null?t.value:n),e._wrapperState={initialChecked:s,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function sx(e,t){t=t.checked,t!=null&&Qu(e,"checked",t,!1)}function Od(e,t){sx(e,t);var n=ns(t.value),s=t.type;if(n!=null)s==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Rd(e,t.type,n):t.hasOwnProperty("defaultValue")&&Rd(e,t.type,ns(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Of(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Rd(e,t,n){(t!=="number"||Ro(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var ti=Array.isArray;function ir(e,t,n,s){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&s&&(e[n].defaultSelected=!0)}else{for(n=""+ns(n),t=null,r=0;r<e.length;r++){if(e[r].value===n){e[r].selected=!0,s&&(e[r].defaultSelected=!0);return}t!==null||e[r].disabled||(t=e[r])}t!==null&&(t.selected=!0)}}function Dd(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(F(91));return _e({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Rf(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(F(92));if(ti(n)){if(1<n.length)throw Error(F(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:ns(n)}}function rx(e,t){var n=ns(t.value),s=ns(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),s!=null&&(e.defaultValue=""+s)}function Df(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function ix(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ld(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?ix(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ka,ax=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,s,r){MSApp.execUnsafeLocalFunction(function(){return e(t,n,s,r)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(ka=ka||document.createElement("div"),ka.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ka.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Pi(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var di={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ly=["Webkit","ms","Moz","O"];Object.keys(di).forEach(function(e){Ly.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),di[t]=di[e]})});function ox(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||di.hasOwnProperty(e)&&di[e]?(""+t).trim():t+"px"}function lx(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var s=n.indexOf("--")===0,r=ox(n,t[n],s);n==="float"&&(n="cssFloat"),s?e.setProperty(n,r):e[n]=r}}var Ay=_e({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ad(e,t){if(t){if(Ay[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(F(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(F(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(F(61))}if(t.style!=null&&typeof t.style!="object")throw Error(F(62))}}function zd(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Fd=null;function th(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Id=null,ar=null,or=null;function Lf(e){if(e=ca(e)){if(typeof Id!="function")throw Error(F(280));var t=e.stateNode;t&&(t=zl(t),Id(e.stateNode,e.type,t))}}function cx(e){ar?or?or.push(e):or=[e]:ar=e}function dx(){if(ar){var e=ar,t=or;if(or=ar=null,Lf(e),t)for(e=0;e<t.length;e++)Lf(t[e])}}function ux(e,t){return e(t)}function hx(){}var Nc=!1;function fx(e,t,n){if(Nc)return e(t,n);Nc=!0;try{return ux(e,t,n)}finally{Nc=!1,(ar!==null||or!==null)&&(hx(),dx())}}function Oi(e,t){var n=e.stateNode;if(n===null)return null;var s=zl(n);if(s===null)return null;n=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(F(231,t,typeof n));return n}var Wd=!1;if(xn)try{var Ir={};Object.defineProperty(Ir,"passive",{get:function(){Wd=!0}}),window.addEventListener("test",Ir,Ir),window.removeEventListener("test",Ir,Ir)}catch{Wd=!1}function zy(e,t,n,s,r,i,o,l,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(n,d)}catch(u){this.onError(u)}}var ui=!1,Do=null,Lo=!1,$d=null,Fy={onError:function(e){ui=!0,Do=e}};function Iy(e,t,n,s,r,i,o,l,c){ui=!1,Do=null,zy.apply(Fy,arguments)}function Wy(e,t,n,s,r,i,o,l,c){if(Iy.apply(this,arguments),ui){if(ui){var d=Do;ui=!1,Do=null}else throw Error(F(198));Lo||(Lo=!0,$d=d)}}function Fs(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function px(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Af(e){if(Fs(e)!==e)throw Error(F(188))}function $y(e){var t=e.alternate;if(!t){if(t=Fs(e),t===null)throw Error(F(188));return t!==e?null:e}for(var n=e,s=t;;){var r=n.return;if(r===null)break;var i=r.alternate;if(i===null){if(s=r.return,s!==null){n=s;continue}break}if(r.child===i.child){for(i=r.child;i;){if(i===n)return Af(r),e;if(i===s)return Af(r),t;i=i.sibling}throw Error(F(188))}if(n.return!==s.return)n=r,s=i;else{for(var o=!1,l=r.child;l;){if(l===n){o=!0,n=r,s=i;break}if(l===s){o=!0,s=r,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,s=r;break}if(l===s){o=!0,s=i,n=r;break}l=l.sibling}if(!o)throw Error(F(189))}}if(n.alternate!==s)throw Error(F(190))}if(n.tag!==3)throw Error(F(188));return n.stateNode.current===n?e:t}function mx(e){return e=$y(e),e!==null?xx(e):null}function xx(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=xx(e);if(t!==null)return t;e=e.sibling}return null}var gx=gt.unstable_scheduleCallback,zf=gt.unstable_cancelCallback,By=gt.unstable_shouldYield,Hy=gt.unstable_requestPaint,Se=gt.unstable_now,Uy=gt.unstable_getCurrentPriorityLevel,nh=gt.unstable_ImmediatePriority,bx=gt.unstable_UserBlockingPriority,Ao=gt.unstable_NormalPriority,Vy=gt.unstable_LowPriority,vx=gt.unstable_IdlePriority,Rl=null,Zt=null;function Yy(e){if(Zt&&typeof Zt.onCommitFiberRoot=="function")try{Zt.onCommitFiberRoot(Rl,e,void 0,(e.current.flags&128)===128)}catch{}}var zt=Math.clz32?Math.clz32:Gy,Xy=Math.log,qy=Math.LN2;function Gy(e){return e>>>=0,e===0?32:31-(Xy(e)/qy|0)|0}var Sa=64,Ca=4194304;function ni(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function zo(e,t){var n=e.pendingLanes;if(n===0)return 0;var s=0,r=e.suspendedLanes,i=e.pingedLanes,o=n&268435455;if(o!==0){var l=o&~r;l!==0?s=ni(l):(i&=o,i!==0&&(s=ni(i)))}else o=n&~r,o!==0?s=ni(o):i!==0&&(s=ni(i));if(s===0)return 0;if(t!==0&&t!==s&&!(t&r)&&(r=s&-s,i=t&-t,r>=i||r===16&&(i&4194240)!==0))return t;if(s&4&&(s|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)n=31-zt(t),r=1<<n,s|=e[n],t&=~r;return s}function Ky(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Qy(e,t){for(var n=e.suspendedLanes,s=e.pingedLanes,r=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-zt(i),l=1<<o,c=r[o];c===-1?(!(l&n)||l&s)&&(r[o]=Ky(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function Bd(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function yx(){var e=Sa;return Sa<<=1,!(Sa&4194240)&&(Sa=64),e}function kc(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function oa(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-zt(t),e[t]=n}function Jy(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<n;){var r=31-zt(n),i=1<<r;t[r]=0,s[r]=-1,e[r]=-1,n&=~i}}function sh(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var s=31-zt(n),r=1<<s;r&t|e[s]&t&&(e[s]|=t),n&=~r}}var ce=0;function wx(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var jx,rh,_x,Nx,kx,Hd=!1,Ea=[],Hn=null,Un=null,Vn=null,Ri=new Map,Di=new Map,Dn=[],Zy="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ff(e,t){switch(e){case"focusin":case"focusout":Hn=null;break;case"dragenter":case"dragleave":Un=null;break;case"mouseover":case"mouseout":Vn=null;break;case"pointerover":case"pointerout":Ri.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Di.delete(t.pointerId)}}function Wr(e,t,n,s,r,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:s,nativeEvent:i,targetContainers:[r]},t!==null&&(t=ca(t),t!==null&&rh(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,r!==null&&t.indexOf(r)===-1&&t.push(r),e)}function ew(e,t,n,s,r){switch(t){case"focusin":return Hn=Wr(Hn,e,t,n,s,r),!0;case"dragenter":return Un=Wr(Un,e,t,n,s,r),!0;case"mouseover":return Vn=Wr(Vn,e,t,n,s,r),!0;case"pointerover":var i=r.pointerId;return Ri.set(i,Wr(Ri.get(i)||null,e,t,n,s,r)),!0;case"gotpointercapture":return i=r.pointerId,Di.set(i,Wr(Di.get(i)||null,e,t,n,s,r)),!0}return!1}function Sx(e){var t=ys(e.target);if(t!==null){var n=Fs(t);if(n!==null){if(t=n.tag,t===13){if(t=px(n),t!==null){e.blockedOn=t,kx(e.priority,function(){_x(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function lo(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Ud(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var s=new n.constructor(n.type,n);Fd=s,n.target.dispatchEvent(s),Fd=null}else return t=ca(n),t!==null&&rh(t),e.blockedOn=n,!1;t.shift()}return!0}function If(e,t,n){lo(e)&&n.delete(t)}function tw(){Hd=!1,Hn!==null&&lo(Hn)&&(Hn=null),Un!==null&&lo(Un)&&(Un=null),Vn!==null&&lo(Vn)&&(Vn=null),Ri.forEach(If),Di.forEach(If)}function $r(e,t){e.blockedOn===t&&(e.blockedOn=null,Hd||(Hd=!0,gt.unstable_scheduleCallback(gt.unstable_NormalPriority,tw)))}function Li(e){function t(r){return $r(r,e)}if(0<Ea.length){$r(Ea[0],e);for(var n=1;n<Ea.length;n++){var s=Ea[n];s.blockedOn===e&&(s.blockedOn=null)}}for(Hn!==null&&$r(Hn,e),Un!==null&&$r(Un,e),Vn!==null&&$r(Vn,e),Ri.forEach(t),Di.forEach(t),n=0;n<Dn.length;n++)s=Dn[n],s.blockedOn===e&&(s.blockedOn=null);for(;0<Dn.length&&(n=Dn[0],n.blockedOn===null);)Sx(n),n.blockedOn===null&&Dn.shift()}var lr=_n.ReactCurrentBatchConfig,Fo=!0;function nw(e,t,n,s){var r=ce,i=lr.transition;lr.transition=null;try{ce=1,ih(e,t,n,s)}finally{ce=r,lr.transition=i}}function sw(e,t,n,s){var r=ce,i=lr.transition;lr.transition=null;try{ce=4,ih(e,t,n,s)}finally{ce=r,lr.transition=i}}function ih(e,t,n,s){if(Fo){var r=Ud(e,t,n,s);if(r===null)Lc(e,t,s,Io,n),Ff(e,s);else if(ew(r,e,t,n,s))s.stopPropagation();else if(Ff(e,s),t&4&&-1<Zy.indexOf(e)){for(;r!==null;){var i=ca(r);if(i!==null&&jx(i),i=Ud(e,t,n,s),i===null&&Lc(e,t,s,Io,n),i===r)break;r=i}r!==null&&s.stopPropagation()}else Lc(e,t,s,null,n)}}var Io=null;function Ud(e,t,n,s){if(Io=null,e=th(s),e=ys(e),e!==null)if(t=Fs(e),t===null)e=null;else if(n=t.tag,n===13){if(e=px(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Io=e,null}function Cx(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Uy()){case nh:return 1;case bx:return 4;case Ao:case Vy:return 16;case vx:return 536870912;default:return 16}default:return 16}}var zn=null,ah=null,co=null;function Ex(){if(co)return co;var e,t=ah,n=t.length,s,r="value"in zn?zn.value:zn.textContent,i=r.length;for(e=0;e<n&&t[e]===r[e];e++);var o=n-e;for(s=1;s<=o&&t[n-s]===r[i-s];s++);return co=r.slice(e,1<s?1-s:void 0)}function uo(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ta(){return!0}function Wf(){return!1}function vt(e){function t(n,s,r,i,o){this._reactName=n,this._targetInst=r,this.type=s,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ta:Wf,this.isPropagationStopped=Wf,this}return _e(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ta)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ta)},persist:function(){},isPersistent:Ta}),t}var Mr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},oh=vt(Mr),la=_e({},Mr,{view:0,detail:0}),rw=vt(la),Sc,Cc,Br,Dl=_e({},la,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:lh,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Br&&(Br&&e.type==="mousemove"?(Sc=e.screenX-Br.screenX,Cc=e.screenY-Br.screenY):Cc=Sc=0,Br=e),Sc)},movementY:function(e){return"movementY"in e?e.movementY:Cc}}),$f=vt(Dl),iw=_e({},Dl,{dataTransfer:0}),aw=vt(iw),ow=_e({},la,{relatedTarget:0}),Ec=vt(ow),lw=_e({},Mr,{animationName:0,elapsedTime:0,pseudoElement:0}),cw=vt(lw),dw=_e({},Mr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),uw=vt(dw),hw=_e({},Mr,{data:0}),Bf=vt(hw),fw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xw(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=mw[e])?!!t[e]:!1}function lh(){return xw}var gw=_e({},la,{key:function(e){if(e.key){var t=fw[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=uo(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?pw[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:lh,charCode:function(e){return e.type==="keypress"?uo(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?uo(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),bw=vt(gw),vw=_e({},Dl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Hf=vt(vw),yw=_e({},la,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:lh}),ww=vt(yw),jw=_e({},Mr,{propertyName:0,elapsedTime:0,pseudoElement:0}),_w=vt(jw),Nw=_e({},Dl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),kw=vt(Nw),Sw=[9,13,27,32],ch=xn&&"CompositionEvent"in window,hi=null;xn&&"documentMode"in document&&(hi=document.documentMode);var Cw=xn&&"TextEvent"in window&&!hi,Tx=xn&&(!ch||hi&&8<hi&&11>=hi),Uf=" ",Vf=!1;function Mx(e,t){switch(e){case"keyup":return Sw.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Px(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var qs=!1;function Ew(e,t){switch(e){case"compositionend":return Px(t);case"keypress":return t.which!==32?null:(Vf=!0,Uf);case"textInput":return e=t.data,e===Uf&&Vf?null:e;default:return null}}function Tw(e,t){if(qs)return e==="compositionend"||!ch&&Mx(e,t)?(e=Ex(),co=ah=zn=null,qs=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Tx&&t.locale!=="ko"?null:t.data;default:return null}}var Mw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Yf(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Mw[e.type]:t==="textarea"}function Ox(e,t,n,s){cx(s),t=Wo(t,"onChange"),0<t.length&&(n=new oh("onChange","change",null,n,s),e.push({event:n,listeners:t}))}var fi=null,Ai=null;function Pw(e){Hx(e,0)}function Ll(e){var t=Qs(e);if(nx(t))return e}function Ow(e,t){if(e==="change")return t}var Rx=!1;if(xn){var Tc;if(xn){var Mc="oninput"in document;if(!Mc){var Xf=document.createElement("div");Xf.setAttribute("oninput","return;"),Mc=typeof Xf.oninput=="function"}Tc=Mc}else Tc=!1;Rx=Tc&&(!document.documentMode||9<document.documentMode)}function qf(){fi&&(fi.detachEvent("onpropertychange",Dx),Ai=fi=null)}function Dx(e){if(e.propertyName==="value"&&Ll(Ai)){var t=[];Ox(t,Ai,e,th(e)),fx(Pw,t)}}function Rw(e,t,n){e==="focusin"?(qf(),fi=t,Ai=n,fi.attachEvent("onpropertychange",Dx)):e==="focusout"&&qf()}function Dw(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ll(Ai)}function Lw(e,t){if(e==="click")return Ll(t)}function Aw(e,t){if(e==="input"||e==="change")return Ll(t)}function zw(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var It=typeof Object.is=="function"?Object.is:zw;function zi(e,t){if(It(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var r=n[s];if(!Sd.call(t,r)||!It(e[r],t[r]))return!1}return!0}function Gf(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Kf(e,t){var n=Gf(e);e=0;for(var s;n;){if(n.nodeType===3){if(s=e+n.textContent.length,e<=t&&s>=t)return{node:n,offset:t-e};e=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Gf(n)}}function Lx(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Lx(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Ax(){for(var e=window,t=Ro();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Ro(e.document)}return t}function dh(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Fw(e){var t=Ax(),n=e.focusedElem,s=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Lx(n.ownerDocument.documentElement,n)){if(s!==null&&dh(n)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var r=n.textContent.length,i=Math.min(s.start,r);s=s.end===void 0?i:Math.min(s.end,r),!e.extend&&i>s&&(r=s,s=i,i=r),r=Kf(n,i);var o=Kf(n,s);r&&o&&(e.rangeCount!==1||e.anchorNode!==r.node||e.anchorOffset!==r.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(r.node,r.offset),e.removeAllRanges(),i>s?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Iw=xn&&"documentMode"in document&&11>=document.documentMode,Gs=null,Vd=null,pi=null,Yd=!1;function Qf(e,t,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Yd||Gs==null||Gs!==Ro(s)||(s=Gs,"selectionStart"in s&&dh(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),pi&&zi(pi,s)||(pi=s,s=Wo(Vd,"onSelect"),0<s.length&&(t=new oh("onSelect","select",null,t,n),e.push({event:t,listeners:s}),t.target=Gs)))}function Ma(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Ks={animationend:Ma("Animation","AnimationEnd"),animationiteration:Ma("Animation","AnimationIteration"),animationstart:Ma("Animation","AnimationStart"),transitionend:Ma("Transition","TransitionEnd")},Pc={},zx={};xn&&(zx=document.createElement("div").style,"AnimationEvent"in window||(delete Ks.animationend.animation,delete Ks.animationiteration.animation,delete Ks.animationstart.animation),"TransitionEvent"in window||delete Ks.transitionend.transition);function Al(e){if(Pc[e])return Pc[e];if(!Ks[e])return e;var t=Ks[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in zx)return Pc[e]=t[n];return e}var Fx=Al("animationend"),Ix=Al("animationiteration"),Wx=Al("animationstart"),$x=Al("transitionend"),Bx=new Map,Jf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ls(e,t){Bx.set(e,t),zs(t,[e])}for(var Oc=0;Oc<Jf.length;Oc++){var Rc=Jf[Oc],Ww=Rc.toLowerCase(),$w=Rc[0].toUpperCase()+Rc.slice(1);ls(Ww,"on"+$w)}ls(Fx,"onAnimationEnd");ls(Ix,"onAnimationIteration");ls(Wx,"onAnimationStart");ls("dblclick","onDoubleClick");ls("focusin","onFocus");ls("focusout","onBlur");ls($x,"onTransitionEnd");xr("onMouseEnter",["mouseout","mouseover"]);xr("onMouseLeave",["mouseout","mouseover"]);xr("onPointerEnter",["pointerout","pointerover"]);xr("onPointerLeave",["pointerout","pointerover"]);zs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));zs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));zs("onBeforeInput",["compositionend","keypress","textInput","paste"]);zs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));zs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));zs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var si="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Bw=new Set("cancel close invalid load scroll toggle".split(" ").concat(si));function Zf(e,t,n){var s=e.type||"unknown-event";e.currentTarget=n,Wy(s,t,void 0,e),e.currentTarget=null}function Hx(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var s=e[n],r=s.event;s=s.listeners;e:{var i=void 0;if(t)for(var o=s.length-1;0<=o;o--){var l=s[o],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==i&&r.isPropagationStopped())break e;Zf(r,l,d),i=c}else for(o=0;o<s.length;o++){if(l=s[o],c=l.instance,d=l.currentTarget,l=l.listener,c!==i&&r.isPropagationStopped())break e;Zf(r,l,d),i=c}}}if(Lo)throw e=$d,Lo=!1,$d=null,e}function pe(e,t){var n=t[Qd];n===void 0&&(n=t[Qd]=new Set);var s=e+"__bubble";n.has(s)||(Ux(t,e,2,!1),n.add(s))}function Dc(e,t,n){var s=0;t&&(s|=4),Ux(n,e,s,t)}var Pa="_reactListening"+Math.random().toString(36).slice(2);function Fi(e){if(!e[Pa]){e[Pa]=!0,Q0.forEach(function(n){n!=="selectionchange"&&(Bw.has(n)||Dc(n,!1,e),Dc(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Pa]||(t[Pa]=!0,Dc("selectionchange",!1,t))}}function Ux(e,t,n,s){switch(Cx(t)){case 1:var r=nw;break;case 4:r=sw;break;default:r=ih}n=r.bind(null,t,n,e),r=void 0,!Wd||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(r=!0),s?r!==void 0?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):r!==void 0?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function Lc(e,t,n,s,r){var i=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var o=s.tag;if(o===3||o===4){var l=s.stateNode.containerInfo;if(l===r||l.nodeType===8&&l.parentNode===r)break;if(o===4)for(o=s.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===r||c.nodeType===8&&c.parentNode===r))return;o=o.return}for(;l!==null;){if(o=ys(l),o===null)return;if(c=o.tag,c===5||c===6){s=i=o;continue e}l=l.parentNode}}s=s.return}fx(function(){var d=i,u=th(n),h=[];e:{var f=Bx.get(e);if(f!==void 0){var p=oh,b=e;switch(e){case"keypress":if(uo(n)===0)break e;case"keydown":case"keyup":p=bw;break;case"focusin":b="focus",p=Ec;break;case"focusout":b="blur",p=Ec;break;case"beforeblur":case"afterblur":p=Ec;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=$f;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=aw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=ww;break;case Fx:case Ix:case Wx:p=cw;break;case $x:p=_w;break;case"scroll":p=rw;break;case"wheel":p=kw;break;case"copy":case"cut":case"paste":p=uw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=Hf}var g=(t&4)!==0,y=!g&&e==="scroll",x=g?f!==null?f+"Capture":null:f;g=[];for(var m=d,v;m!==null;){v=m;var j=v.stateNode;if(v.tag===5&&j!==null&&(v=j,x!==null&&(j=Oi(m,x),j!=null&&g.push(Ii(m,j,v)))),y)break;m=m.return}0<g.length&&(f=new p(f,b,null,n,u),h.push({event:f,listeners:g}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",f&&n!==Fd&&(b=n.relatedTarget||n.fromElement)&&(ys(b)||b[gn]))break e;if((p||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,p?(b=n.relatedTarget||n.toElement,p=d,b=b?ys(b):null,b!==null&&(y=Fs(b),b!==y||b.tag!==5&&b.tag!==6)&&(b=null)):(p=null,b=d),p!==b)){if(g=$f,j="onMouseLeave",x="onMouseEnter",m="mouse",(e==="pointerout"||e==="pointerover")&&(g=Hf,j="onPointerLeave",x="onPointerEnter",m="pointer"),y=p==null?f:Qs(p),v=b==null?f:Qs(b),f=new g(j,m+"leave",p,n,u),f.target=y,f.relatedTarget=v,j=null,ys(u)===d&&(g=new g(x,m+"enter",b,n,u),g.target=v,g.relatedTarget=y,j=g),y=j,p&&b)t:{for(g=p,x=b,m=0,v=g;v;v=$s(v))m++;for(v=0,j=x;j;j=$s(j))v++;for(;0<m-v;)g=$s(g),m--;for(;0<v-m;)x=$s(x),v--;for(;m--;){if(g===x||x!==null&&g===x.alternate)break t;g=$s(g),x=$s(x)}g=null}else g=null;p!==null&&ep(h,f,p,g,!1),b!==null&&y!==null&&ep(h,y,b,g,!0)}}e:{if(f=d?Qs(d):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var _=Ow;else if(Yf(f))if(Rx)_=Aw;else{_=Dw;var N=Rw}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(_=Lw);if(_&&(_=_(e,d))){Ox(h,_,n,u);break e}N&&N(e,f,d),e==="focusout"&&(N=f._wrapperState)&&N.controlled&&f.type==="number"&&Rd(f,"number",f.value)}switch(N=d?Qs(d):window,e){case"focusin":(Yf(N)||N.contentEditable==="true")&&(Gs=N,Vd=d,pi=null);break;case"focusout":pi=Vd=Gs=null;break;case"mousedown":Yd=!0;break;case"contextmenu":case"mouseup":case"dragend":Yd=!1,Qf(h,n,u);break;case"selectionchange":if(Iw)break;case"keydown":case"keyup":Qf(h,n,u)}var S;if(ch)e:{switch(e){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else qs?Mx(e,n)&&(T="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(Tx&&n.locale!=="ko"&&(qs||T!=="onCompositionStart"?T==="onCompositionEnd"&&qs&&(S=Ex()):(zn=u,ah="value"in zn?zn.value:zn.textContent,qs=!0)),N=Wo(d,T),0<N.length&&(T=new Bf(T,e,null,n,u),h.push({event:T,listeners:N}),S?T.data=S:(S=Px(n),S!==null&&(T.data=S)))),(S=Cw?Ew(e,n):Tw(e,n))&&(d=Wo(d,"onBeforeInput"),0<d.length&&(u=new Bf("onBeforeInput","beforeinput",null,n,u),h.push({event:u,listeners:d}),u.data=S))}Hx(h,t)})}function Ii(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wo(e,t){for(var n=t+"Capture",s=[];e!==null;){var r=e,i=r.stateNode;r.tag===5&&i!==null&&(r=i,i=Oi(e,n),i!=null&&s.unshift(Ii(e,i,r)),i=Oi(e,t),i!=null&&s.push(Ii(e,i,r))),e=e.return}return s}function $s(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function ep(e,t,n,s,r){for(var i=t._reactName,o=[];n!==null&&n!==s;){var l=n,c=l.alternate,d=l.stateNode;if(c!==null&&c===s)break;l.tag===5&&d!==null&&(l=d,r?(c=Oi(n,i),c!=null&&o.unshift(Ii(n,c,l))):r||(c=Oi(n,i),c!=null&&o.push(Ii(n,c,l)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var Hw=/\r\n?/g,Uw=/\u0000|\uFFFD/g;function tp(e){return(typeof e=="string"?e:""+e).replace(Hw,`
`).replace(Uw,"")}function Oa(e,t,n){if(t=tp(t),tp(e)!==t&&n)throw Error(F(425))}function $o(){}var Xd=null,qd=null;function Gd(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Kd=typeof setTimeout=="function"?setTimeout:void 0,Vw=typeof clearTimeout=="function"?clearTimeout:void 0,np=typeof Promise=="function"?Promise:void 0,Yw=typeof queueMicrotask=="function"?queueMicrotask:typeof np<"u"?function(e){return np.resolve(null).then(e).catch(Xw)}:Kd;function Xw(e){setTimeout(function(){throw e})}function Ac(e,t){var n=t,s=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(s===0){e.removeChild(r),Li(t);return}s--}else n!=="$"&&n!=="$?"&&n!=="$!"||s++;n=r}while(n);Li(t)}function Yn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function sp(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Pr=Math.random().toString(36).slice(2),Qt="__reactFiber$"+Pr,Wi="__reactProps$"+Pr,gn="__reactContainer$"+Pr,Qd="__reactEvents$"+Pr,qw="__reactListeners$"+Pr,Gw="__reactHandles$"+Pr;function ys(e){var t=e[Qt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[gn]||n[Qt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=sp(e);e!==null;){if(n=e[Qt])return n;e=sp(e)}return t}e=n,n=e.parentNode}return null}function ca(e){return e=e[Qt]||e[gn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Qs(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(F(33))}function zl(e){return e[Wi]||null}var Jd=[],Js=-1;function cs(e){return{current:e}}function xe(e){0>Js||(e.current=Jd[Js],Jd[Js]=null,Js--)}function fe(e,t){Js++,Jd[Js]=e.current,e.current=t}var ss={},Xe=cs(ss),at=cs(!1),Ms=ss;function gr(e,t){var n=e.type.contextTypes;if(!n)return ss;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var r={},i;for(i in n)r[i]=t[i];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=r),r}function ot(e){return e=e.childContextTypes,e!=null}function Bo(){xe(at),xe(Xe)}function rp(e,t,n){if(Xe.current!==ss)throw Error(F(168));fe(Xe,t),fe(at,n)}function Vx(e,t,n){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return n;s=s.getChildContext();for(var r in s)if(!(r in t))throw Error(F(108,Ry(e)||"Unknown",r));return _e({},n,s)}function Ho(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ss,Ms=Xe.current,fe(Xe,e),fe(at,at.current),!0}function ip(e,t,n){var s=e.stateNode;if(!s)throw Error(F(169));n?(e=Vx(e,t,Ms),s.__reactInternalMemoizedMergedChildContext=e,xe(at),xe(Xe),fe(Xe,e)):xe(at),fe(at,n)}var ln=null,Fl=!1,zc=!1;function Yx(e){ln===null?ln=[e]:ln.push(e)}function Kw(e){Fl=!0,Yx(e)}function ds(){if(!zc&&ln!==null){zc=!0;var e=0,t=ce;try{var n=ln;for(ce=1;e<n.length;e++){var s=n[e];do s=s(!0);while(s!==null)}ln=null,Fl=!1}catch(r){throw ln!==null&&(ln=ln.slice(e+1)),gx(nh,ds),r}finally{ce=t,zc=!1}}return null}var Zs=[],er=0,Uo=null,Vo=0,wt=[],jt=0,Ps=null,un=1,hn="";function xs(e,t){Zs[er++]=Vo,Zs[er++]=Uo,Uo=e,Vo=t}function Xx(e,t,n){wt[jt++]=un,wt[jt++]=hn,wt[jt++]=Ps,Ps=e;var s=un;e=hn;var r=32-zt(s)-1;s&=~(1<<r),n+=1;var i=32-zt(t)+r;if(30<i){var o=r-r%5;i=(s&(1<<o)-1).toString(32),s>>=o,r-=o,un=1<<32-zt(t)+r|n<<r|s,hn=i+e}else un=1<<i|n<<r|s,hn=e}function uh(e){e.return!==null&&(xs(e,1),Xx(e,1,0))}function hh(e){for(;e===Uo;)Uo=Zs[--er],Zs[er]=null,Vo=Zs[--er],Zs[er]=null;for(;e===Ps;)Ps=wt[--jt],wt[jt]=null,hn=wt[--jt],wt[jt]=null,un=wt[--jt],wt[jt]=null}var xt=null,pt=null,ye=!1,Lt=null;function qx(e,t){var n=_t(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function ap(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,xt=e,pt=Yn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,xt=e,pt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Ps!==null?{id:un,overflow:hn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=_t(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,xt=e,pt=null,!0):!1;default:return!1}}function Zd(e){return(e.mode&1)!==0&&(e.flags&128)===0}function eu(e){if(ye){var t=pt;if(t){var n=t;if(!ap(e,t)){if(Zd(e))throw Error(F(418));t=Yn(n.nextSibling);var s=xt;t&&ap(e,t)?qx(s,n):(e.flags=e.flags&-4097|2,ye=!1,xt=e)}}else{if(Zd(e))throw Error(F(418));e.flags=e.flags&-4097|2,ye=!1,xt=e}}}function op(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;xt=e}function Ra(e){if(e!==xt)return!1;if(!ye)return op(e),ye=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Gd(e.type,e.memoizedProps)),t&&(t=pt)){if(Zd(e))throw Gx(),Error(F(418));for(;t;)qx(e,t),t=Yn(t.nextSibling)}if(op(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(F(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){pt=Yn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}pt=null}}else pt=xt?Yn(e.stateNode.nextSibling):null;return!0}function Gx(){for(var e=pt;e;)e=Yn(e.nextSibling)}function br(){pt=xt=null,ye=!1}function fh(e){Lt===null?Lt=[e]:Lt.push(e)}var Qw=_n.ReactCurrentBatchConfig;function Hr(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(F(309));var s=n.stateNode}if(!s)throw Error(F(147,e));var r=s,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=r.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(F(284));if(!n._owner)throw Error(F(290,e))}return e}function Da(e,t){throw e=Object.prototype.toString.call(t),Error(F(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function lp(e){var t=e._init;return t(e._payload)}function Kx(e){function t(x,m){if(e){var v=x.deletions;v===null?(x.deletions=[m],x.flags|=16):v.push(m)}}function n(x,m){if(!e)return null;for(;m!==null;)t(x,m),m=m.sibling;return null}function s(x,m){for(x=new Map;m!==null;)m.key!==null?x.set(m.key,m):x.set(m.index,m),m=m.sibling;return x}function r(x,m){return x=Kn(x,m),x.index=0,x.sibling=null,x}function i(x,m,v){return x.index=v,e?(v=x.alternate,v!==null?(v=v.index,v<m?(x.flags|=2,m):v):(x.flags|=2,m)):(x.flags|=1048576,m)}function o(x){return e&&x.alternate===null&&(x.flags|=2),x}function l(x,m,v,j){return m===null||m.tag!==6?(m=Uc(v,x.mode,j),m.return=x,m):(m=r(m,v),m.return=x,m)}function c(x,m,v,j){var _=v.type;return _===Xs?u(x,m,v.props.children,j,v.key):m!==null&&(m.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Mn&&lp(_)===m.type)?(j=r(m,v.props),j.ref=Hr(x,m,v),j.return=x,j):(j=bo(v.type,v.key,v.props,null,x.mode,j),j.ref=Hr(x,m,v),j.return=x,j)}function d(x,m,v,j){return m===null||m.tag!==4||m.stateNode.containerInfo!==v.containerInfo||m.stateNode.implementation!==v.implementation?(m=Vc(v,x.mode,j),m.return=x,m):(m=r(m,v.children||[]),m.return=x,m)}function u(x,m,v,j,_){return m===null||m.tag!==7?(m=Ss(v,x.mode,j,_),m.return=x,m):(m=r(m,v),m.return=x,m)}function h(x,m,v){if(typeof m=="string"&&m!==""||typeof m=="number")return m=Uc(""+m,x.mode,v),m.return=x,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case _a:return v=bo(m.type,m.key,m.props,null,x.mode,v),v.ref=Hr(x,null,m),v.return=x,v;case Ys:return m=Vc(m,x.mode,v),m.return=x,m;case Mn:var j=m._init;return h(x,j(m._payload),v)}if(ti(m)||Fr(m))return m=Ss(m,x.mode,v,null),m.return=x,m;Da(x,m)}return null}function f(x,m,v,j){var _=m!==null?m.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return _!==null?null:l(x,m,""+v,j);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case _a:return v.key===_?c(x,m,v,j):null;case Ys:return v.key===_?d(x,m,v,j):null;case Mn:return _=v._init,f(x,m,_(v._payload),j)}if(ti(v)||Fr(v))return _!==null?null:u(x,m,v,j,null);Da(x,v)}return null}function p(x,m,v,j,_){if(typeof j=="string"&&j!==""||typeof j=="number")return x=x.get(v)||null,l(m,x,""+j,_);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case _a:return x=x.get(j.key===null?v:j.key)||null,c(m,x,j,_);case Ys:return x=x.get(j.key===null?v:j.key)||null,d(m,x,j,_);case Mn:var N=j._init;return p(x,m,v,N(j._payload),_)}if(ti(j)||Fr(j))return x=x.get(v)||null,u(m,x,j,_,null);Da(m,j)}return null}function b(x,m,v,j){for(var _=null,N=null,S=m,T=m=0,M=null;S!==null&&T<v.length;T++){S.index>T?(M=S,S=null):M=S.sibling;var D=f(x,S,v[T],j);if(D===null){S===null&&(S=M);break}e&&S&&D.alternate===null&&t(x,S),m=i(D,m,T),N===null?_=D:N.sibling=D,N=D,S=M}if(T===v.length)return n(x,S),ye&&xs(x,T),_;if(S===null){for(;T<v.length;T++)S=h(x,v[T],j),S!==null&&(m=i(S,m,T),N===null?_=S:N.sibling=S,N=S);return ye&&xs(x,T),_}for(S=s(x,S);T<v.length;T++)M=p(S,x,T,v[T],j),M!==null&&(e&&M.alternate!==null&&S.delete(M.key===null?T:M.key),m=i(M,m,T),N===null?_=M:N.sibling=M,N=M);return e&&S.forEach(function(C){return t(x,C)}),ye&&xs(x,T),_}function g(x,m,v,j){var _=Fr(v);if(typeof _!="function")throw Error(F(150));if(v=_.call(v),v==null)throw Error(F(151));for(var N=_=null,S=m,T=m=0,M=null,D=v.next();S!==null&&!D.done;T++,D=v.next()){S.index>T?(M=S,S=null):M=S.sibling;var C=f(x,S,D.value,j);if(C===null){S===null&&(S=M);break}e&&S&&C.alternate===null&&t(x,S),m=i(C,m,T),N===null?_=C:N.sibling=C,N=C,S=M}if(D.done)return n(x,S),ye&&xs(x,T),_;if(S===null){for(;!D.done;T++,D=v.next())D=h(x,D.value,j),D!==null&&(m=i(D,m,T),N===null?_=D:N.sibling=D,N=D);return ye&&xs(x,T),_}for(S=s(x,S);!D.done;T++,D=v.next())D=p(S,x,T,D.value,j),D!==null&&(e&&D.alternate!==null&&S.delete(D.key===null?T:D.key),m=i(D,m,T),N===null?_=D:N.sibling=D,N=D);return e&&S.forEach(function(A){return t(x,A)}),ye&&xs(x,T),_}function y(x,m,v,j){if(typeof v=="object"&&v!==null&&v.type===Xs&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case _a:e:{for(var _=v.key,N=m;N!==null;){if(N.key===_){if(_=v.type,_===Xs){if(N.tag===7){n(x,N.sibling),m=r(N,v.props.children),m.return=x,x=m;break e}}else if(N.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Mn&&lp(_)===N.type){n(x,N.sibling),m=r(N,v.props),m.ref=Hr(x,N,v),m.return=x,x=m;break e}n(x,N);break}else t(x,N);N=N.sibling}v.type===Xs?(m=Ss(v.props.children,x.mode,j,v.key),m.return=x,x=m):(j=bo(v.type,v.key,v.props,null,x.mode,j),j.ref=Hr(x,m,v),j.return=x,x=j)}return o(x);case Ys:e:{for(N=v.key;m!==null;){if(m.key===N)if(m.tag===4&&m.stateNode.containerInfo===v.containerInfo&&m.stateNode.implementation===v.implementation){n(x,m.sibling),m=r(m,v.children||[]),m.return=x,x=m;break e}else{n(x,m);break}else t(x,m);m=m.sibling}m=Vc(v,x.mode,j),m.return=x,x=m}return o(x);case Mn:return N=v._init,y(x,m,N(v._payload),j)}if(ti(v))return b(x,m,v,j);if(Fr(v))return g(x,m,v,j);Da(x,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,m!==null&&m.tag===6?(n(x,m.sibling),m=r(m,v),m.return=x,x=m):(n(x,m),m=Uc(v,x.mode,j),m.return=x,x=m),o(x)):n(x,m)}return y}var vr=Kx(!0),Qx=Kx(!1),Yo=cs(null),Xo=null,tr=null,ph=null;function mh(){ph=tr=Xo=null}function xh(e){var t=Yo.current;xe(Yo),e._currentValue=t}function tu(e,t,n){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===n)break;e=e.return}}function cr(e,t){Xo=e,ph=tr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(rt=!0),e.firstContext=null)}function St(e){var t=e._currentValue;if(ph!==e)if(e={context:e,memoizedValue:t,next:null},tr===null){if(Xo===null)throw Error(F(308));tr=e,Xo.dependencies={lanes:0,firstContext:e}}else tr=tr.next=e;return t}var ws=null;function gh(e){ws===null?ws=[e]:ws.push(e)}function Jx(e,t,n,s){var r=t.interleaved;return r===null?(n.next=n,gh(t)):(n.next=r.next,r.next=n),t.interleaved=n,bn(e,s)}function bn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Pn=!1;function bh(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Zx(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function pn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Xn(e,t,n){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,se&2){var r=s.pending;return r===null?t.next=t:(t.next=r.next,r.next=t),s.pending=t,bn(e,n)}return r=s.interleaved,r===null?(t.next=t,gh(s)):(t.next=r.next,r.next=t),s.interleaved=t,bn(e,n)}function ho(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,sh(e,n)}}function cp(e,t){var n=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var r=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?r=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?r=i=t:i=i.next=t}else r=i=t;n={baseState:s.baseState,firstBaseUpdate:r,lastBaseUpdate:i,shared:s.shared,effects:s.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function qo(e,t,n,s){var r=e.updateQueue;Pn=!1;var i=r.firstBaseUpdate,o=r.lastBaseUpdate,l=r.shared.pending;if(l!==null){r.shared.pending=null;var c=l,d=c.next;c.next=null,o===null?i=d:o.next=d,o=c;var u=e.alternate;u!==null&&(u=u.updateQueue,l=u.lastBaseUpdate,l!==o&&(l===null?u.firstBaseUpdate=d:l.next=d,u.lastBaseUpdate=c))}if(i!==null){var h=r.baseState;o=0,u=d=c=null,l=i;do{var f=l.lane,p=l.eventTime;if((s&f)===f){u!==null&&(u=u.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var b=e,g=l;switch(f=t,p=n,g.tag){case 1:if(b=g.payload,typeof b=="function"){h=b.call(p,h,f);break e}h=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=g.payload,f=typeof b=="function"?b.call(p,h,f):b,f==null)break e;h=_e({},h,f);break e;case 2:Pn=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,f=r.effects,f===null?r.effects=[l]:f.push(l))}else p={eventTime:p,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},u===null?(d=u=p,c=h):u=u.next=p,o|=f;if(l=l.next,l===null){if(l=r.shared.pending,l===null)break;f=l,l=f.next,f.next=null,r.lastBaseUpdate=f,r.shared.pending=null}}while(!0);if(u===null&&(c=h),r.baseState=c,r.firstBaseUpdate=d,r.lastBaseUpdate=u,t=r.shared.interleaved,t!==null){r=t;do o|=r.lane,r=r.next;while(r!==t)}else i===null&&(r.shared.lanes=0);Rs|=o,e.lanes=o,e.memoizedState=h}}function dp(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],r=s.callback;if(r!==null){if(s.callback=null,s=n,typeof r!="function")throw Error(F(191,r));r.call(s)}}}var da={},en=cs(da),$i=cs(da),Bi=cs(da);function js(e){if(e===da)throw Error(F(174));return e}function vh(e,t){switch(fe(Bi,t),fe($i,e),fe(en,da),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ld(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Ld(t,e)}xe(en),fe(en,t)}function yr(){xe(en),xe($i),xe(Bi)}function eg(e){js(Bi.current);var t=js(en.current),n=Ld(t,e.type);t!==n&&(fe($i,e),fe(en,n))}function yh(e){$i.current===e&&(xe(en),xe($i))}var we=cs(0);function Go(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Fc=[];function wh(){for(var e=0;e<Fc.length;e++)Fc[e]._workInProgressVersionPrimary=null;Fc.length=0}var fo=_n.ReactCurrentDispatcher,Ic=_n.ReactCurrentBatchConfig,Os=0,je=null,Me=null,Le=null,Ko=!1,mi=!1,Hi=0,Jw=0;function $e(){throw Error(F(321))}function jh(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!It(e[n],t[n]))return!1;return!0}function _h(e,t,n,s,r,i){if(Os=i,je=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fo.current=e===null||e.memoizedState===null?n1:s1,e=n(s,r),mi){i=0;do{if(mi=!1,Hi=0,25<=i)throw Error(F(301));i+=1,Le=Me=null,t.updateQueue=null,fo.current=r1,e=n(s,r)}while(mi)}if(fo.current=Qo,t=Me!==null&&Me.next!==null,Os=0,Le=Me=je=null,Ko=!1,t)throw Error(F(300));return e}function Nh(){var e=Hi!==0;return Hi=0,e}function qt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Le===null?je.memoizedState=Le=e:Le=Le.next=e,Le}function Ct(){if(Me===null){var e=je.alternate;e=e!==null?e.memoizedState:null}else e=Me.next;var t=Le===null?je.memoizedState:Le.next;if(t!==null)Le=t,Me=e;else{if(e===null)throw Error(F(310));Me=e,e={memoizedState:Me.memoizedState,baseState:Me.baseState,baseQueue:Me.baseQueue,queue:Me.queue,next:null},Le===null?je.memoizedState=Le=e:Le=Le.next=e}return Le}function Ui(e,t){return typeof t=="function"?t(e):t}function Wc(e){var t=Ct(),n=t.queue;if(n===null)throw Error(F(311));n.lastRenderedReducer=e;var s=Me,r=s.baseQueue,i=n.pending;if(i!==null){if(r!==null){var o=r.next;r.next=i.next,i.next=o}s.baseQueue=r=i,n.pending=null}if(r!==null){i=r.next,s=s.baseState;var l=o=null,c=null,d=i;do{var u=d.lane;if((Os&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),s=d.hasEagerState?d.eagerState:e(s,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=h,o=s):c=c.next=h,je.lanes|=u,Rs|=u}d=d.next}while(d!==null&&d!==i);c===null?o=s:c.next=l,It(s,t.memoizedState)||(rt=!0),t.memoizedState=s,t.baseState=o,t.baseQueue=c,n.lastRenderedState=s}if(e=n.interleaved,e!==null){r=e;do i=r.lane,je.lanes|=i,Rs|=i,r=r.next;while(r!==e)}else r===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function $c(e){var t=Ct(),n=t.queue;if(n===null)throw Error(F(311));n.lastRenderedReducer=e;var s=n.dispatch,r=n.pending,i=t.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do i=e(i,o.action),o=o.next;while(o!==r);It(i,t.memoizedState)||(rt=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,s]}function tg(){}function ng(e,t){var n=je,s=Ct(),r=t(),i=!It(s.memoizedState,r);if(i&&(s.memoizedState=r,rt=!0),s=s.queue,kh(ig.bind(null,n,s,e),[e]),s.getSnapshot!==t||i||Le!==null&&Le.memoizedState.tag&1){if(n.flags|=2048,Vi(9,rg.bind(null,n,s,r,t),void 0,null),Ae===null)throw Error(F(349));Os&30||sg(n,t,r)}return r}function sg(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=je.updateQueue,t===null?(t={lastEffect:null,stores:null},je.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function rg(e,t,n,s){t.value=n,t.getSnapshot=s,ag(t)&&og(e)}function ig(e,t,n){return n(function(){ag(t)&&og(e)})}function ag(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!It(e,n)}catch{return!0}}function og(e){var t=bn(e,1);t!==null&&Ft(t,e,1,-1)}function up(e){var t=qt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ui,lastRenderedState:e},t.queue=e,e=e.dispatch=t1.bind(null,je,e),[t.memoizedState,e]}function Vi(e,t,n,s){return e={tag:e,create:t,destroy:n,deps:s,next:null},t=je.updateQueue,t===null?(t={lastEffect:null,stores:null},je.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(s=n.next,n.next=e,e.next=s,t.lastEffect=e)),e}function lg(){return Ct().memoizedState}function po(e,t,n,s){var r=qt();je.flags|=e,r.memoizedState=Vi(1|t,n,void 0,s===void 0?null:s)}function Il(e,t,n,s){var r=Ct();s=s===void 0?null:s;var i=void 0;if(Me!==null){var o=Me.memoizedState;if(i=o.destroy,s!==null&&jh(s,o.deps)){r.memoizedState=Vi(t,n,i,s);return}}je.flags|=e,r.memoizedState=Vi(1|t,n,i,s)}function hp(e,t){return po(8390656,8,e,t)}function kh(e,t){return Il(2048,8,e,t)}function cg(e,t){return Il(4,2,e,t)}function dg(e,t){return Il(4,4,e,t)}function ug(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function hg(e,t,n){return n=n!=null?n.concat([e]):null,Il(4,4,ug.bind(null,t,e),n)}function Sh(){}function fg(e,t){var n=Ct();t=t===void 0?null:t;var s=n.memoizedState;return s!==null&&t!==null&&jh(t,s[1])?s[0]:(n.memoizedState=[e,t],e)}function pg(e,t){var n=Ct();t=t===void 0?null:t;var s=n.memoizedState;return s!==null&&t!==null&&jh(t,s[1])?s[0]:(e=e(),n.memoizedState=[e,t],e)}function mg(e,t,n){return Os&21?(It(n,t)||(n=yx(),je.lanes|=n,Rs|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,rt=!0),e.memoizedState=n)}function Zw(e,t){var n=ce;ce=n!==0&&4>n?n:4,e(!0);var s=Ic.transition;Ic.transition={};try{e(!1),t()}finally{ce=n,Ic.transition=s}}function xg(){return Ct().memoizedState}function e1(e,t,n){var s=Gn(e);if(n={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null},gg(e))bg(t,n);else if(n=Jx(e,t,n,s),n!==null){var r=Ke();Ft(n,e,s,r),vg(n,t,s)}}function t1(e,t,n){var s=Gn(e),r={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null};if(gg(e))bg(t,r);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,n);if(r.hasEagerState=!0,r.eagerState=l,It(l,o)){var c=t.interleaved;c===null?(r.next=r,gh(t)):(r.next=c.next,c.next=r),t.interleaved=r;return}}catch{}finally{}n=Jx(e,t,r,s),n!==null&&(r=Ke(),Ft(n,e,s,r),vg(n,t,s))}}function gg(e){var t=e.alternate;return e===je||t!==null&&t===je}function bg(e,t){mi=Ko=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function vg(e,t,n){if(n&4194240){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,sh(e,n)}}var Qo={readContext:St,useCallback:$e,useContext:$e,useEffect:$e,useImperativeHandle:$e,useInsertionEffect:$e,useLayoutEffect:$e,useMemo:$e,useReducer:$e,useRef:$e,useState:$e,useDebugValue:$e,useDeferredValue:$e,useTransition:$e,useMutableSource:$e,useSyncExternalStore:$e,useId:$e,unstable_isNewReconciler:!1},n1={readContext:St,useCallback:function(e,t){return qt().memoizedState=[e,t===void 0?null:t],e},useContext:St,useEffect:hp,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,po(4194308,4,ug.bind(null,t,e),n)},useLayoutEffect:function(e,t){return po(4194308,4,e,t)},useInsertionEffect:function(e,t){return po(4,2,e,t)},useMemo:function(e,t){var n=qt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var s=qt();return t=n!==void 0?n(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=e1.bind(null,je,e),[s.memoizedState,e]},useRef:function(e){var t=qt();return e={current:e},t.memoizedState=e},useState:up,useDebugValue:Sh,useDeferredValue:function(e){return qt().memoizedState=e},useTransition:function(){var e=up(!1),t=e[0];return e=Zw.bind(null,e[1]),qt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var s=je,r=qt();if(ye){if(n===void 0)throw Error(F(407));n=n()}else{if(n=t(),Ae===null)throw Error(F(349));Os&30||sg(s,t,n)}r.memoizedState=n;var i={value:n,getSnapshot:t};return r.queue=i,hp(ig.bind(null,s,i,e),[e]),s.flags|=2048,Vi(9,rg.bind(null,s,i,n,t),void 0,null),n},useId:function(){var e=qt(),t=Ae.identifierPrefix;if(ye){var n=hn,s=un;n=(s&~(1<<32-zt(s)-1)).toString(32)+n,t=":"+t+"R"+n,n=Hi++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Jw++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},s1={readContext:St,useCallback:fg,useContext:St,useEffect:kh,useImperativeHandle:hg,useInsertionEffect:cg,useLayoutEffect:dg,useMemo:pg,useReducer:Wc,useRef:lg,useState:function(){return Wc(Ui)},useDebugValue:Sh,useDeferredValue:function(e){var t=Ct();return mg(t,Me.memoizedState,e)},useTransition:function(){var e=Wc(Ui)[0],t=Ct().memoizedState;return[e,t]},useMutableSource:tg,useSyncExternalStore:ng,useId:xg,unstable_isNewReconciler:!1},r1={readContext:St,useCallback:fg,useContext:St,useEffect:kh,useImperativeHandle:hg,useInsertionEffect:cg,useLayoutEffect:dg,useMemo:pg,useReducer:$c,useRef:lg,useState:function(){return $c(Ui)},useDebugValue:Sh,useDeferredValue:function(e){var t=Ct();return Me===null?t.memoizedState=e:mg(t,Me.memoizedState,e)},useTransition:function(){var e=$c(Ui)[0],t=Ct().memoizedState;return[e,t]},useMutableSource:tg,useSyncExternalStore:ng,useId:xg,unstable_isNewReconciler:!1};function Ot(e,t){if(e&&e.defaultProps){t=_e({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function nu(e,t,n,s){t=e.memoizedState,n=n(s,t),n=n==null?t:_e({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Wl={isMounted:function(e){return(e=e._reactInternals)?Fs(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var s=Ke(),r=Gn(e),i=pn(s,r);i.payload=t,n!=null&&(i.callback=n),t=Xn(e,i,r),t!==null&&(Ft(t,e,r,s),ho(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var s=Ke(),r=Gn(e),i=pn(s,r);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=Xn(e,i,r),t!==null&&(Ft(t,e,r,s),ho(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ke(),s=Gn(e),r=pn(n,s);r.tag=2,t!=null&&(r.callback=t),t=Xn(e,r,s),t!==null&&(Ft(t,e,s,n),ho(t,e,s))}};function fp(e,t,n,s,r,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,i,o):t.prototype&&t.prototype.isPureReactComponent?!zi(n,s)||!zi(r,i):!0}function yg(e,t,n){var s=!1,r=ss,i=t.contextType;return typeof i=="object"&&i!==null?i=St(i):(r=ot(t)?Ms:Xe.current,s=t.contextTypes,i=(s=s!=null)?gr(e,r):ss),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Wl,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=i),t}function pp(e,t,n,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,s),t.state!==e&&Wl.enqueueReplaceState(t,t.state,null)}function su(e,t,n,s){var r=e.stateNode;r.props=n,r.state=e.memoizedState,r.refs={},bh(e);var i=t.contextType;typeof i=="object"&&i!==null?r.context=St(i):(i=ot(t)?Ms:Xe.current,r.context=gr(e,i)),r.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(nu(e,t,i,n),r.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(t=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),t!==r.state&&Wl.enqueueReplaceState(r,r.state,null),qo(e,n,r,s),r.state=e.memoizedState),typeof r.componentDidMount=="function"&&(e.flags|=4194308)}function wr(e,t){try{var n="",s=t;do n+=Oy(s),s=s.return;while(s);var r=n}catch(i){r=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:r,digest:null}}function Bc(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function ru(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var i1=typeof WeakMap=="function"?WeakMap:Map;function wg(e,t,n){n=pn(-1,n),n.tag=3,n.payload={element:null};var s=t.value;return n.callback=function(){Zo||(Zo=!0,pu=s),ru(e,t)},n}function jg(e,t,n){n=pn(-1,n),n.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var r=t.value;n.payload=function(){return s(r)},n.callback=function(){ru(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){ru(e,t),typeof s!="function"&&(qn===null?qn=new Set([this]):qn.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function mp(e,t,n){var s=e.pingCache;if(s===null){s=e.pingCache=new i1;var r=new Set;s.set(t,r)}else r=s.get(t),r===void 0&&(r=new Set,s.set(t,r));r.has(n)||(r.add(n),e=v1.bind(null,e,t,n),t.then(e,e))}function xp(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function gp(e,t,n,s,r){return e.mode&1?(e.flags|=65536,e.lanes=r,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=pn(-1,1),t.tag=2,Xn(n,t,1))),n.lanes|=1),e)}var a1=_n.ReactCurrentOwner,rt=!1;function Ge(e,t,n,s){t.child=e===null?Qx(t,null,n,s):vr(t,e.child,n,s)}function bp(e,t,n,s,r){n=n.render;var i=t.ref;return cr(t,r),s=_h(e,t,n,s,i,r),n=Nh(),e!==null&&!rt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,vn(e,t,r)):(ye&&n&&uh(t),t.flags|=1,Ge(e,t,s,r),t.child)}function vp(e,t,n,s,r){if(e===null){var i=n.type;return typeof i=="function"&&!Dh(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,_g(e,t,i,s,r)):(e=bo(n.type,null,s,t,t.mode,r),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&r)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:zi,n(o,s)&&e.ref===t.ref)return vn(e,t,r)}return t.flags|=1,e=Kn(i,s),e.ref=t.ref,e.return=t,t.child=e}function _g(e,t,n,s,r){if(e!==null){var i=e.memoizedProps;if(zi(i,s)&&e.ref===t.ref)if(rt=!1,t.pendingProps=s=i,(e.lanes&r)!==0)e.flags&131072&&(rt=!0);else return t.lanes=e.lanes,vn(e,t,r)}return iu(e,t,n,s,r)}function Ng(e,t,n){var s=t.pendingProps,r=s.children,i=e!==null?e.memoizedState:null;if(s.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},fe(sr,ft),ft|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,fe(sr,ft),ft|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=i!==null?i.baseLanes:n,fe(sr,ft),ft|=s}else i!==null?(s=i.baseLanes|n,t.memoizedState=null):s=n,fe(sr,ft),ft|=s;return Ge(e,t,r,n),t.child}function kg(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function iu(e,t,n,s,r){var i=ot(n)?Ms:Xe.current;return i=gr(t,i),cr(t,r),n=_h(e,t,n,s,i,r),s=Nh(),e!==null&&!rt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,vn(e,t,r)):(ye&&s&&uh(t),t.flags|=1,Ge(e,t,n,r),t.child)}function yp(e,t,n,s,r){if(ot(n)){var i=!0;Ho(t)}else i=!1;if(cr(t,r),t.stateNode===null)mo(e,t),yg(t,n,s),su(t,n,s,r),s=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=St(d):(d=ot(n)?Ms:Xe.current,d=gr(t,d));var u=n.getDerivedStateFromProps,h=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==s||c!==d)&&pp(t,o,s,d),Pn=!1;var f=t.memoizedState;o.state=f,qo(t,s,o,r),c=t.memoizedState,l!==s||f!==c||at.current||Pn?(typeof u=="function"&&(nu(t,n,u,s),c=t.memoizedState),(l=Pn||fp(t,n,l,s,f,c,d))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=c),o.props=s,o.state=c,o.context=d,s=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{o=t.stateNode,Zx(e,t),l=t.memoizedProps,d=t.type===t.elementType?l:Ot(t.type,l),o.props=d,h=t.pendingProps,f=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=St(c):(c=ot(n)?Ms:Xe.current,c=gr(t,c));var p=n.getDerivedStateFromProps;(u=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||f!==c)&&pp(t,o,s,c),Pn=!1,f=t.memoizedState,o.state=f,qo(t,s,o,r);var b=t.memoizedState;l!==h||f!==b||at.current||Pn?(typeof p=="function"&&(nu(t,n,p,s),b=t.memoizedState),(d=Pn||fp(t,n,d,s,f,b,c)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(s,b,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(s,b,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=b),o.props=s,o.state=b,o.context=c,s=d):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),s=!1)}return au(e,t,n,s,i,r)}function au(e,t,n,s,r,i){kg(e,t);var o=(t.flags&128)!==0;if(!s&&!o)return r&&ip(t,n,!1),vn(e,t,i);s=t.stateNode,a1.current=t;var l=o&&typeof n.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&o?(t.child=vr(t,e.child,null,i),t.child=vr(t,null,l,i)):Ge(e,t,l,i),t.memoizedState=s.state,r&&ip(t,n,!0),t.child}function Sg(e){var t=e.stateNode;t.pendingContext?rp(e,t.pendingContext,t.pendingContext!==t.context):t.context&&rp(e,t.context,!1),vh(e,t.containerInfo)}function wp(e,t,n,s,r){return br(),fh(r),t.flags|=256,Ge(e,t,n,s),t.child}var ou={dehydrated:null,treeContext:null,retryLane:0};function lu(e){return{baseLanes:e,cachePool:null,transitions:null}}function Cg(e,t,n){var s=t.pendingProps,r=we.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(r&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(r|=1),fe(we,r&1),e===null)return eu(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=s.children,e=s.fallback,i?(s=t.mode,i=t.child,o={mode:"hidden",children:o},!(s&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Hl(o,s,0,null),e=Ss(e,s,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=lu(n),t.memoizedState=ou,e):Ch(t,o));if(r=e.memoizedState,r!==null&&(l=r.dehydrated,l!==null))return o1(e,t,o,s,l,r,n);if(i){i=s.fallback,o=t.mode,r=e.child,l=r.sibling;var c={mode:"hidden",children:s.children};return!(o&1)&&t.child!==r?(s=t.child,s.childLanes=0,s.pendingProps=c,t.deletions=null):(s=Kn(r,c),s.subtreeFlags=r.subtreeFlags&14680064),l!==null?i=Kn(l,i):(i=Ss(i,o,n,null),i.flags|=2),i.return=t,s.return=t,s.sibling=i,t.child=s,s=i,i=t.child,o=e.child.memoizedState,o=o===null?lu(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~n,t.memoizedState=ou,s}return i=e.child,e=i.sibling,s=Kn(i,{mode:"visible",children:s.children}),!(t.mode&1)&&(s.lanes=n),s.return=t,s.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=s,t.memoizedState=null,s}function Ch(e,t){return t=Hl({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function La(e,t,n,s){return s!==null&&fh(s),vr(t,e.child,null,n),e=Ch(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function o1(e,t,n,s,r,i,o){if(n)return t.flags&256?(t.flags&=-257,s=Bc(Error(F(422))),La(e,t,o,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=s.fallback,r=t.mode,s=Hl({mode:"visible",children:s.children},r,0,null),i=Ss(i,r,o,null),i.flags|=2,s.return=t,i.return=t,s.sibling=i,t.child=s,t.mode&1&&vr(t,e.child,null,o),t.child.memoizedState=lu(o),t.memoizedState=ou,i);if(!(t.mode&1))return La(e,t,o,null);if(r.data==="$!"){if(s=r.nextSibling&&r.nextSibling.dataset,s)var l=s.dgst;return s=l,i=Error(F(419)),s=Bc(i,s,void 0),La(e,t,o,s)}if(l=(o&e.childLanes)!==0,rt||l){if(s=Ae,s!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(s.suspendedLanes|o)?0:r,r!==0&&r!==i.retryLane&&(i.retryLane=r,bn(e,r),Ft(s,e,r,-1))}return Rh(),s=Bc(Error(F(421))),La(e,t,o,s)}return r.data==="$?"?(t.flags|=128,t.child=e.child,t=y1.bind(null,e),r._reactRetry=t,null):(e=i.treeContext,pt=Yn(r.nextSibling),xt=t,ye=!0,Lt=null,e!==null&&(wt[jt++]=un,wt[jt++]=hn,wt[jt++]=Ps,un=e.id,hn=e.overflow,Ps=t),t=Ch(t,s.children),t.flags|=4096,t)}function jp(e,t,n){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),tu(e.return,t,n)}function Hc(e,t,n,s,r){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:r}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=s,i.tail=n,i.tailMode=r)}function Eg(e,t,n){var s=t.pendingProps,r=s.revealOrder,i=s.tail;if(Ge(e,t,s.children,n),s=we.current,s&2)s=s&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&jp(e,n,t);else if(e.tag===19)jp(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(fe(we,s),!(t.mode&1))t.memoizedState=null;else switch(r){case"forwards":for(n=t.child,r=null;n!==null;)e=n.alternate,e!==null&&Go(e)===null&&(r=n),n=n.sibling;n=r,n===null?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),Hc(t,!1,r,n,i);break;case"backwards":for(n=null,r=t.child,t.child=null;r!==null;){if(e=r.alternate,e!==null&&Go(e)===null){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}Hc(t,!0,n,null,i);break;case"together":Hc(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function mo(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function vn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Rs|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(F(153));if(t.child!==null){for(e=t.child,n=Kn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Kn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function l1(e,t,n){switch(t.tag){case 3:Sg(t),br();break;case 5:eg(t);break;case 1:ot(t.type)&&Ho(t);break;case 4:vh(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,r=t.memoizedProps.value;fe(Yo,s._currentValue),s._currentValue=r;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(fe(we,we.current&1),t.flags|=128,null):n&t.child.childLanes?Cg(e,t,n):(fe(we,we.current&1),e=vn(e,t,n),e!==null?e.sibling:null);fe(we,we.current&1);break;case 19:if(s=(n&t.childLanes)!==0,e.flags&128){if(s)return Eg(e,t,n);t.flags|=128}if(r=t.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),fe(we,we.current),s)break;return null;case 22:case 23:return t.lanes=0,Ng(e,t,n)}return vn(e,t,n)}var Tg,cu,Mg,Pg;Tg=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};cu=function(){};Mg=function(e,t,n,s){var r=e.memoizedProps;if(r!==s){e=t.stateNode,js(en.current);var i=null;switch(n){case"input":r=Pd(e,r),s=Pd(e,s),i=[];break;case"select":r=_e({},r,{value:void 0}),s=_e({},s,{value:void 0}),i=[];break;case"textarea":r=Dd(e,r),s=Dd(e,s),i=[];break;default:typeof r.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=$o)}Ad(n,s);var o;n=null;for(d in r)if(!s.hasOwnProperty(d)&&r.hasOwnProperty(d)&&r[d]!=null)if(d==="style"){var l=r[d];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Mi.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in s){var c=s[d];if(l=r!=null?r[d]:void 0,s.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Mi.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&pe("scroll",e),i||l===c||(i=[])):(i=i||[]).push(d,c))}n&&(i=i||[]).push("style",n);var d=i;(t.updateQueue=d)&&(t.flags|=4)}};Pg=function(e,t,n,s){n!==s&&(t.flags|=4)};function Ur(e,t){if(!ye)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function Be(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,s=0;if(t)for(var r=e.child;r!==null;)n|=r.lanes|r.childLanes,s|=r.subtreeFlags&14680064,s|=r.flags&14680064,r.return=e,r=r.sibling;else for(r=e.child;r!==null;)n|=r.lanes|r.childLanes,s|=r.subtreeFlags,s|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=s,e.childLanes=n,t}function c1(e,t,n){var s=t.pendingProps;switch(hh(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Be(t),null;case 1:return ot(t.type)&&Bo(),Be(t),null;case 3:return s=t.stateNode,yr(),xe(at),xe(Xe),wh(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(Ra(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Lt!==null&&(gu(Lt),Lt=null))),cu(e,t),Be(t),null;case 5:yh(t);var r=js(Bi.current);if(n=t.type,e!==null&&t.stateNode!=null)Mg(e,t,n,s,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(F(166));return Be(t),null}if(e=js(en.current),Ra(t)){s=t.stateNode,n=t.type;var i=t.memoizedProps;switch(s[Qt]=t,s[Wi]=i,e=(t.mode&1)!==0,n){case"dialog":pe("cancel",s),pe("close",s);break;case"iframe":case"object":case"embed":pe("load",s);break;case"video":case"audio":for(r=0;r<si.length;r++)pe(si[r],s);break;case"source":pe("error",s);break;case"img":case"image":case"link":pe("error",s),pe("load",s);break;case"details":pe("toggle",s);break;case"input":Pf(s,i),pe("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!i.multiple},pe("invalid",s);break;case"textarea":Rf(s,i),pe("invalid",s)}Ad(n,i),r=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?s.textContent!==l&&(i.suppressHydrationWarning!==!0&&Oa(s.textContent,l,e),r=["children",l]):typeof l=="number"&&s.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Oa(s.textContent,l,e),r=["children",""+l]):Mi.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&pe("scroll",s)}switch(n){case"input":Na(s),Of(s,i,!0);break;case"textarea":Na(s),Df(s);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(s.onclick=$o)}s=r,t.updateQueue=s,s!==null&&(t.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=ix(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=o.createElement(n,{is:s.is}):(e=o.createElement(n),n==="select"&&(o=e,s.multiple?o.multiple=!0:s.size&&(o.size=s.size))):e=o.createElementNS(e,n),e[Qt]=t,e[Wi]=s,Tg(e,t,!1,!1),t.stateNode=e;e:{switch(o=zd(n,s),n){case"dialog":pe("cancel",e),pe("close",e),r=s;break;case"iframe":case"object":case"embed":pe("load",e),r=s;break;case"video":case"audio":for(r=0;r<si.length;r++)pe(si[r],e);r=s;break;case"source":pe("error",e),r=s;break;case"img":case"image":case"link":pe("error",e),pe("load",e),r=s;break;case"details":pe("toggle",e),r=s;break;case"input":Pf(e,s),r=Pd(e,s),pe("invalid",e);break;case"option":r=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},r=_e({},s,{value:void 0}),pe("invalid",e);break;case"textarea":Rf(e,s),r=Dd(e,s),pe("invalid",e);break;default:r=s}Ad(n,r),l=r;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?lx(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&ax(e,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Pi(e,c):typeof c=="number"&&Pi(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Mi.hasOwnProperty(i)?c!=null&&i==="onScroll"&&pe("scroll",e):c!=null&&Qu(e,i,c,o))}switch(n){case"input":Na(e),Of(e,s,!1);break;case"textarea":Na(e),Df(e);break;case"option":s.value!=null&&e.setAttribute("value",""+ns(s.value));break;case"select":e.multiple=!!s.multiple,i=s.value,i!=null?ir(e,!!s.multiple,i,!1):s.defaultValue!=null&&ir(e,!!s.multiple,s.defaultValue,!0);break;default:typeof r.onClick=="function"&&(e.onclick=$o)}switch(n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Be(t),null;case 6:if(e&&t.stateNode!=null)Pg(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(F(166));if(n=js(Bi.current),js(en.current),Ra(t)){if(s=t.stateNode,n=t.memoizedProps,s[Qt]=t,(i=s.nodeValue!==n)&&(e=xt,e!==null))switch(e.tag){case 3:Oa(s.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Oa(s.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else s=(n.nodeType===9?n:n.ownerDocument).createTextNode(s),s[Qt]=t,t.stateNode=s}return Be(t),null;case 13:if(xe(we),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ye&&pt!==null&&t.mode&1&&!(t.flags&128))Gx(),br(),t.flags|=98560,i=!1;else if(i=Ra(t),s!==null&&s.dehydrated!==null){if(e===null){if(!i)throw Error(F(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(F(317));i[Qt]=t}else br(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Be(t),i=!1}else Lt!==null&&(gu(Lt),Lt=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,t.mode&1&&(e===null||we.current&1?Oe===0&&(Oe=3):Rh())),t.updateQueue!==null&&(t.flags|=4),Be(t),null);case 4:return yr(),cu(e,t),e===null&&Fi(t.stateNode.containerInfo),Be(t),null;case 10:return xh(t.type._context),Be(t),null;case 17:return ot(t.type)&&Bo(),Be(t),null;case 19:if(xe(we),i=t.memoizedState,i===null)return Be(t),null;if(s=(t.flags&128)!==0,o=i.rendering,o===null)if(s)Ur(i,!1);else{if(Oe!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Go(e),o!==null){for(t.flags|=128,Ur(i,!1),s=o.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=n,n=t.child;n!==null;)i=n,e=s,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return fe(we,we.current&1|2),t.child}e=e.sibling}i.tail!==null&&Se()>jr&&(t.flags|=128,s=!0,Ur(i,!1),t.lanes=4194304)}else{if(!s)if(e=Go(o),e!==null){if(t.flags|=128,s=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Ur(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!ye)return Be(t),null}else 2*Se()-i.renderingStartTime>jr&&n!==1073741824&&(t.flags|=128,s=!0,Ur(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(n=i.last,n!==null?n.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Se(),t.sibling=null,n=we.current,fe(we,s?n&1|2:n&1),t):(Be(t),null);case 22:case 23:return Oh(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&t.mode&1?ft&1073741824&&(Be(t),t.subtreeFlags&6&&(t.flags|=8192)):Be(t),null;case 24:return null;case 25:return null}throw Error(F(156,t.tag))}function d1(e,t){switch(hh(t),t.tag){case 1:return ot(t.type)&&Bo(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return yr(),xe(at),xe(Xe),wh(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return yh(t),null;case 13:if(xe(we),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(F(340));br()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return xe(we),null;case 4:return yr(),null;case 10:return xh(t.type._context),null;case 22:case 23:return Oh(),null;case 24:return null;default:return null}}var Aa=!1,Ve=!1,u1=typeof WeakSet=="function"?WeakSet:Set,B=null;function nr(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(s){Ne(e,t,s)}else n.current=null}function du(e,t,n){try{n()}catch(s){Ne(e,t,s)}}var _p=!1;function h1(e,t){if(Xd=Fo,e=Ax(),dh(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var r=s.anchorOffset,i=s.focusNode;s=s.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,d=0,u=0,h=e,f=null;t:for(;;){for(var p;h!==n||r!==0&&h.nodeType!==3||(l=o+r),h!==i||s!==0&&h.nodeType!==3||(c=o+s),h.nodeType===3&&(o+=h.nodeValue.length),(p=h.firstChild)!==null;)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++d===r&&(l=o),f===i&&++u===s&&(c=o),(p=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=p}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(qd={focusedElem:e,selectionRange:n},Fo=!1,B=t;B!==null;)if(t=B,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,B=e;else for(;B!==null;){t=B;try{var b=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var g=b.memoizedProps,y=b.memoizedState,x=t.stateNode,m=x.getSnapshotBeforeUpdate(t.elementType===t.type?g:Ot(t.type,g),y);x.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var v=t.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(F(163))}}catch(j){Ne(t,t.return,j)}if(e=t.sibling,e!==null){e.return=t.return,B=e;break}B=t.return}return b=_p,_p=!1,b}function xi(e,t,n){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var r=s=s.next;do{if((r.tag&e)===e){var i=r.destroy;r.destroy=void 0,i!==void 0&&du(t,n,i)}r=r.next}while(r!==s)}}function $l(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var s=n.create;n.destroy=s()}n=n.next}while(n!==t)}}function uu(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Og(e){var t=e.alternate;t!==null&&(e.alternate=null,Og(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Qt],delete t[Wi],delete t[Qd],delete t[qw],delete t[Gw])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Rg(e){return e.tag===5||e.tag===3||e.tag===4}function Np(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Rg(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function hu(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=$o));else if(s!==4&&(e=e.child,e!==null))for(hu(e,t,n),e=e.sibling;e!==null;)hu(e,t,n),e=e.sibling}function fu(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(fu(e,t,n),e=e.sibling;e!==null;)fu(e,t,n),e=e.sibling}var Fe=null,Dt=!1;function Cn(e,t,n){for(n=n.child;n!==null;)Dg(e,t,n),n=n.sibling}function Dg(e,t,n){if(Zt&&typeof Zt.onCommitFiberUnmount=="function")try{Zt.onCommitFiberUnmount(Rl,n)}catch{}switch(n.tag){case 5:Ve||nr(n,t);case 6:var s=Fe,r=Dt;Fe=null,Cn(e,t,n),Fe=s,Dt=r,Fe!==null&&(Dt?(e=Fe,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Fe.removeChild(n.stateNode));break;case 18:Fe!==null&&(Dt?(e=Fe,n=n.stateNode,e.nodeType===8?Ac(e.parentNode,n):e.nodeType===1&&Ac(e,n),Li(e)):Ac(Fe,n.stateNode));break;case 4:s=Fe,r=Dt,Fe=n.stateNode.containerInfo,Dt=!0,Cn(e,t,n),Fe=s,Dt=r;break;case 0:case 11:case 14:case 15:if(!Ve&&(s=n.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){r=s=s.next;do{var i=r,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&du(n,t,o),r=r.next}while(r!==s)}Cn(e,t,n);break;case 1:if(!Ve&&(nr(n,t),s=n.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=n.memoizedProps,s.state=n.memoizedState,s.componentWillUnmount()}catch(l){Ne(n,t,l)}Cn(e,t,n);break;case 21:Cn(e,t,n);break;case 22:n.mode&1?(Ve=(s=Ve)||n.memoizedState!==null,Cn(e,t,n),Ve=s):Cn(e,t,n);break;default:Cn(e,t,n)}}function kp(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new u1),t.forEach(function(s){var r=w1.bind(null,e,s);n.has(s)||(n.add(s),s.then(r,r))})}}function Mt(e,t){var n=t.deletions;if(n!==null)for(var s=0;s<n.length;s++){var r=n[s];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:Fe=l.stateNode,Dt=!1;break e;case 3:Fe=l.stateNode.containerInfo,Dt=!0;break e;case 4:Fe=l.stateNode.containerInfo,Dt=!0;break e}l=l.return}if(Fe===null)throw Error(F(160));Dg(i,o,r),Fe=null,Dt=!1;var c=r.alternate;c!==null&&(c.return=null),r.return=null}catch(d){Ne(r,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Lg(t,e),t=t.sibling}function Lg(e,t){var n=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Mt(t,e),Ht(e),s&4){try{xi(3,e,e.return),$l(3,e)}catch(g){Ne(e,e.return,g)}try{xi(5,e,e.return)}catch(g){Ne(e,e.return,g)}}break;case 1:Mt(t,e),Ht(e),s&512&&n!==null&&nr(n,n.return);break;case 5:if(Mt(t,e),Ht(e),s&512&&n!==null&&nr(n,n.return),e.flags&32){var r=e.stateNode;try{Pi(r,"")}catch(g){Ne(e,e.return,g)}}if(s&4&&(r=e.stateNode,r!=null)){var i=e.memoizedProps,o=n!==null?n.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&sx(r,i),zd(l,o);var d=zd(l,i);for(o=0;o<c.length;o+=2){var u=c[o],h=c[o+1];u==="style"?lx(r,h):u==="dangerouslySetInnerHTML"?ax(r,h):u==="children"?Pi(r,h):Qu(r,u,h,d)}switch(l){case"input":Od(r,i);break;case"textarea":rx(r,i);break;case"select":var f=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?ir(r,!!i.multiple,p,!1):f!==!!i.multiple&&(i.defaultValue!=null?ir(r,!!i.multiple,i.defaultValue,!0):ir(r,!!i.multiple,i.multiple?[]:"",!1))}r[Wi]=i}catch(g){Ne(e,e.return,g)}}break;case 6:if(Mt(t,e),Ht(e),s&4){if(e.stateNode===null)throw Error(F(162));r=e.stateNode,i=e.memoizedProps;try{r.nodeValue=i}catch(g){Ne(e,e.return,g)}}break;case 3:if(Mt(t,e),Ht(e),s&4&&n!==null&&n.memoizedState.isDehydrated)try{Li(t.containerInfo)}catch(g){Ne(e,e.return,g)}break;case 4:Mt(t,e),Ht(e);break;case 13:Mt(t,e),Ht(e),r=e.child,r.flags&8192&&(i=r.memoizedState!==null,r.stateNode.isHidden=i,!i||r.alternate!==null&&r.alternate.memoizedState!==null||(Mh=Se())),s&4&&kp(e);break;case 22:if(u=n!==null&&n.memoizedState!==null,e.mode&1?(Ve=(d=Ve)||u,Mt(t,e),Ve=d):Mt(t,e),Ht(e),s&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!u&&e.mode&1)for(B=e,u=e.child;u!==null;){for(h=B=u;B!==null;){switch(f=B,p=f.child,f.tag){case 0:case 11:case 14:case 15:xi(4,f,f.return);break;case 1:nr(f,f.return);var b=f.stateNode;if(typeof b.componentWillUnmount=="function"){s=f,n=f.return;try{t=s,b.props=t.memoizedProps,b.state=t.memoizedState,b.componentWillUnmount()}catch(g){Ne(s,n,g)}}break;case 5:nr(f,f.return);break;case 22:if(f.memoizedState!==null){Cp(h);continue}}p!==null?(p.return=f,B=p):Cp(h)}u=u.sibling}e:for(u=null,h=e;;){if(h.tag===5){if(u===null){u=h;try{r=h.stateNode,d?(i=r.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=h.stateNode,c=h.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=ox("display",o))}catch(g){Ne(e,e.return,g)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(g){Ne(e,e.return,g)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Mt(t,e),Ht(e),s&4&&kp(e);break;case 21:break;default:Mt(t,e),Ht(e)}}function Ht(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Rg(n)){var s=n;break e}n=n.return}throw Error(F(160))}switch(s.tag){case 5:var r=s.stateNode;s.flags&32&&(Pi(r,""),s.flags&=-33);var i=Np(e);fu(e,i,r);break;case 3:case 4:var o=s.stateNode.containerInfo,l=Np(e);hu(e,l,o);break;default:throw Error(F(161))}}catch(c){Ne(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function f1(e,t,n){B=e,Ag(e)}function Ag(e,t,n){for(var s=(e.mode&1)!==0;B!==null;){var r=B,i=r.child;if(r.tag===22&&s){var o=r.memoizedState!==null||Aa;if(!o){var l=r.alternate,c=l!==null&&l.memoizedState!==null||Ve;l=Aa;var d=Ve;if(Aa=o,(Ve=c)&&!d)for(B=r;B!==null;)o=B,c=o.child,o.tag===22&&o.memoizedState!==null?Ep(r):c!==null?(c.return=o,B=c):Ep(r);for(;i!==null;)B=i,Ag(i),i=i.sibling;B=r,Aa=l,Ve=d}Sp(e)}else r.subtreeFlags&8772&&i!==null?(i.return=r,B=i):Sp(e)}}function Sp(e){for(;B!==null;){var t=B;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ve||$l(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!Ve)if(n===null)s.componentDidMount();else{var r=t.elementType===t.type?n.memoizedProps:Ot(t.type,n.memoizedProps);s.componentDidUpdate(r,n.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&dp(t,i,s);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}dp(t,o,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&Li(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(F(163))}Ve||t.flags&512&&uu(t)}catch(f){Ne(t,t.return,f)}}if(t===e){B=null;break}if(n=t.sibling,n!==null){n.return=t.return,B=n;break}B=t.return}}function Cp(e){for(;B!==null;){var t=B;if(t===e){B=null;break}var n=t.sibling;if(n!==null){n.return=t.return,B=n;break}B=t.return}}function Ep(e){for(;B!==null;){var t=B;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{$l(4,t)}catch(c){Ne(t,n,c)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var r=t.return;try{s.componentDidMount()}catch(c){Ne(t,r,c)}}var i=t.return;try{uu(t)}catch(c){Ne(t,i,c)}break;case 5:var o=t.return;try{uu(t)}catch(c){Ne(t,o,c)}}}catch(c){Ne(t,t.return,c)}if(t===e){B=null;break}var l=t.sibling;if(l!==null){l.return=t.return,B=l;break}B=t.return}}var p1=Math.ceil,Jo=_n.ReactCurrentDispatcher,Eh=_n.ReactCurrentOwner,kt=_n.ReactCurrentBatchConfig,se=0,Ae=null,Ee=null,Ie=0,ft=0,sr=cs(0),Oe=0,Yi=null,Rs=0,Bl=0,Th=0,gi=null,nt=null,Mh=0,jr=1/0,on=null,Zo=!1,pu=null,qn=null,za=!1,Fn=null,el=0,bi=0,mu=null,xo=-1,go=0;function Ke(){return se&6?Se():xo!==-1?xo:xo=Se()}function Gn(e){return e.mode&1?se&2&&Ie!==0?Ie&-Ie:Qw.transition!==null?(go===0&&(go=yx()),go):(e=ce,e!==0||(e=window.event,e=e===void 0?16:Cx(e.type)),e):1}function Ft(e,t,n,s){if(50<bi)throw bi=0,mu=null,Error(F(185));oa(e,n,s),(!(se&2)||e!==Ae)&&(e===Ae&&(!(se&2)&&(Bl|=n),Oe===4&&Ln(e,Ie)),lt(e,s),n===1&&se===0&&!(t.mode&1)&&(jr=Se()+500,Fl&&ds()))}function lt(e,t){var n=e.callbackNode;Qy(e,t);var s=zo(e,e===Ae?Ie:0);if(s===0)n!==null&&zf(n),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(n!=null&&zf(n),t===1)e.tag===0?Kw(Tp.bind(null,e)):Yx(Tp.bind(null,e)),Yw(function(){!(se&6)&&ds()}),n=null;else{switch(wx(s)){case 1:n=nh;break;case 4:n=bx;break;case 16:n=Ao;break;case 536870912:n=vx;break;default:n=Ao}n=Ug(n,zg.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function zg(e,t){if(xo=-1,go=0,se&6)throw Error(F(327));var n=e.callbackNode;if(dr()&&e.callbackNode!==n)return null;var s=zo(e,e===Ae?Ie:0);if(s===0)return null;if(s&30||s&e.expiredLanes||t)t=tl(e,s);else{t=s;var r=se;se|=2;var i=Ig();(Ae!==e||Ie!==t)&&(on=null,jr=Se()+500,ks(e,t));do try{g1();break}catch(l){Fg(e,l)}while(!0);mh(),Jo.current=i,se=r,Ee!==null?t=0:(Ae=null,Ie=0,t=Oe)}if(t!==0){if(t===2&&(r=Bd(e),r!==0&&(s=r,t=xu(e,r))),t===1)throw n=Yi,ks(e,0),Ln(e,s),lt(e,Se()),n;if(t===6)Ln(e,s);else{if(r=e.current.alternate,!(s&30)&&!m1(r)&&(t=tl(e,s),t===2&&(i=Bd(e),i!==0&&(s=i,t=xu(e,i))),t===1))throw n=Yi,ks(e,0),Ln(e,s),lt(e,Se()),n;switch(e.finishedWork=r,e.finishedLanes=s,t){case 0:case 1:throw Error(F(345));case 2:gs(e,nt,on);break;case 3:if(Ln(e,s),(s&130023424)===s&&(t=Mh+500-Se(),10<t)){if(zo(e,0)!==0)break;if(r=e.suspendedLanes,(r&s)!==s){Ke(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=Kd(gs.bind(null,e,nt,on),t);break}gs(e,nt,on);break;case 4:if(Ln(e,s),(s&4194240)===s)break;for(t=e.eventTimes,r=-1;0<s;){var o=31-zt(s);i=1<<o,o=t[o],o>r&&(r=o),s&=~i}if(s=r,s=Se()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*p1(s/1960))-s,10<s){e.timeoutHandle=Kd(gs.bind(null,e,nt,on),s);break}gs(e,nt,on);break;case 5:gs(e,nt,on);break;default:throw Error(F(329))}}}return lt(e,Se()),e.callbackNode===n?zg.bind(null,e):null}function xu(e,t){var n=gi;return e.current.memoizedState.isDehydrated&&(ks(e,t).flags|=256),e=tl(e,t),e!==2&&(t=nt,nt=n,t!==null&&gu(t)),e}function gu(e){nt===null?nt=e:nt.push.apply(nt,e)}function m1(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var s=0;s<n.length;s++){var r=n[s],i=r.getSnapshot;r=r.value;try{if(!It(i(),r))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ln(e,t){for(t&=~Th,t&=~Bl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-zt(t),s=1<<n;e[n]=-1,t&=~s}}function Tp(e){if(se&6)throw Error(F(327));dr();var t=zo(e,0);if(!(t&1))return lt(e,Se()),null;var n=tl(e,t);if(e.tag!==0&&n===2){var s=Bd(e);s!==0&&(t=s,n=xu(e,s))}if(n===1)throw n=Yi,ks(e,0),Ln(e,t),lt(e,Se()),n;if(n===6)throw Error(F(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,gs(e,nt,on),lt(e,Se()),null}function Ph(e,t){var n=se;se|=1;try{return e(t)}finally{se=n,se===0&&(jr=Se()+500,Fl&&ds())}}function Ds(e){Fn!==null&&Fn.tag===0&&!(se&6)&&dr();var t=se;se|=1;var n=kt.transition,s=ce;try{if(kt.transition=null,ce=1,e)return e()}finally{ce=s,kt.transition=n,se=t,!(se&6)&&ds()}}function Oh(){ft=sr.current,xe(sr)}function ks(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Vw(n)),Ee!==null)for(n=Ee.return;n!==null;){var s=n;switch(hh(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&Bo();break;case 3:yr(),xe(at),xe(Xe),wh();break;case 5:yh(s);break;case 4:yr();break;case 13:xe(we);break;case 19:xe(we);break;case 10:xh(s.type._context);break;case 22:case 23:Oh()}n=n.return}if(Ae=e,Ee=e=Kn(e.current,null),Ie=ft=t,Oe=0,Yi=null,Th=Bl=Rs=0,nt=gi=null,ws!==null){for(t=0;t<ws.length;t++)if(n=ws[t],s=n.interleaved,s!==null){n.interleaved=null;var r=s.next,i=n.pending;if(i!==null){var o=i.next;i.next=r,s.next=o}n.pending=s}ws=null}return e}function Fg(e,t){do{var n=Ee;try{if(mh(),fo.current=Qo,Ko){for(var s=je.memoizedState;s!==null;){var r=s.queue;r!==null&&(r.pending=null),s=s.next}Ko=!1}if(Os=0,Le=Me=je=null,mi=!1,Hi=0,Eh.current=null,n===null||n.return===null){Oe=1,Yi=t,Ee=null;break}e:{var i=e,o=n.return,l=n,c=t;if(t=Ie,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,u=l,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=xp(o);if(p!==null){p.flags&=-257,gp(p,o,l,i,t),p.mode&1&&mp(i,d,t),t=p,c=d;var b=t.updateQueue;if(b===null){var g=new Set;g.add(c),t.updateQueue=g}else b.add(c);break e}else{if(!(t&1)){mp(i,d,t),Rh();break e}c=Error(F(426))}}else if(ye&&l.mode&1){var y=xp(o);if(y!==null){!(y.flags&65536)&&(y.flags|=256),gp(y,o,l,i,t),fh(wr(c,l));break e}}i=c=wr(c,l),Oe!==4&&(Oe=2),gi===null?gi=[i]:gi.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var x=wg(i,c,t);cp(i,x);break e;case 1:l=c;var m=i.type,v=i.stateNode;if(!(i.flags&128)&&(typeof m.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(qn===null||!qn.has(v)))){i.flags|=65536,t&=-t,i.lanes|=t;var j=jg(i,l,t);cp(i,j);break e}}i=i.return}while(i!==null)}$g(n)}catch(_){t=_,Ee===n&&n!==null&&(Ee=n=n.return);continue}break}while(!0)}function Ig(){var e=Jo.current;return Jo.current=Qo,e===null?Qo:e}function Rh(){(Oe===0||Oe===3||Oe===2)&&(Oe=4),Ae===null||!(Rs&268435455)&&!(Bl&268435455)||Ln(Ae,Ie)}function tl(e,t){var n=se;se|=2;var s=Ig();(Ae!==e||Ie!==t)&&(on=null,ks(e,t));do try{x1();break}catch(r){Fg(e,r)}while(!0);if(mh(),se=n,Jo.current=s,Ee!==null)throw Error(F(261));return Ae=null,Ie=0,Oe}function x1(){for(;Ee!==null;)Wg(Ee)}function g1(){for(;Ee!==null&&!By();)Wg(Ee)}function Wg(e){var t=Hg(e.alternate,e,ft);e.memoizedProps=e.pendingProps,t===null?$g(e):Ee=t,Eh.current=null}function $g(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=d1(n,t),n!==null){n.flags&=32767,Ee=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Oe=6,Ee=null;return}}else if(n=c1(n,t,ft),n!==null){Ee=n;return}if(t=t.sibling,t!==null){Ee=t;return}Ee=t=e}while(t!==null);Oe===0&&(Oe=5)}function gs(e,t,n){var s=ce,r=kt.transition;try{kt.transition=null,ce=1,b1(e,t,n,s)}finally{kt.transition=r,ce=s}return null}function b1(e,t,n,s){do dr();while(Fn!==null);if(se&6)throw Error(F(327));n=e.finishedWork;var r=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(F(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(Jy(e,i),e===Ae&&(Ee=Ae=null,Ie=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||za||(za=!0,Ug(Ao,function(){return dr(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=kt.transition,kt.transition=null;var o=ce;ce=1;var l=se;se|=4,Eh.current=null,h1(e,n),Lg(n,e),Fw(qd),Fo=!!Xd,qd=Xd=null,e.current=n,f1(n),Hy(),se=l,ce=o,kt.transition=i}else e.current=n;if(za&&(za=!1,Fn=e,el=r),i=e.pendingLanes,i===0&&(qn=null),Yy(n.stateNode),lt(e,Se()),t!==null)for(s=e.onRecoverableError,n=0;n<t.length;n++)r=t[n],s(r.value,{componentStack:r.stack,digest:r.digest});if(Zo)throw Zo=!1,e=pu,pu=null,e;return el&1&&e.tag!==0&&dr(),i=e.pendingLanes,i&1?e===mu?bi++:(bi=0,mu=e):bi=0,ds(),null}function dr(){if(Fn!==null){var e=wx(el),t=kt.transition,n=ce;try{if(kt.transition=null,ce=16>e?16:e,Fn===null)var s=!1;else{if(e=Fn,Fn=null,el=0,se&6)throw Error(F(331));var r=se;for(se|=4,B=e.current;B!==null;){var i=B,o=i.child;if(B.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(B=d;B!==null;){var u=B;switch(u.tag){case 0:case 11:case 15:xi(8,u,i)}var h=u.child;if(h!==null)h.return=u,B=h;else for(;B!==null;){u=B;var f=u.sibling,p=u.return;if(Og(u),u===d){B=null;break}if(f!==null){f.return=p,B=f;break}B=p}}}var b=i.alternate;if(b!==null){var g=b.child;if(g!==null){b.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(g!==null)}}B=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,B=o;else e:for(;B!==null;){if(i=B,i.flags&2048)switch(i.tag){case 0:case 11:case 15:xi(9,i,i.return)}var x=i.sibling;if(x!==null){x.return=i.return,B=x;break e}B=i.return}}var m=e.current;for(B=m;B!==null;){o=B;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,B=v;else e:for(o=m;B!==null;){if(l=B,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:$l(9,l)}}catch(_){Ne(l,l.return,_)}if(l===o){B=null;break e}var j=l.sibling;if(j!==null){j.return=l.return,B=j;break e}B=l.return}}if(se=r,ds(),Zt&&typeof Zt.onPostCommitFiberRoot=="function")try{Zt.onPostCommitFiberRoot(Rl,e)}catch{}s=!0}return s}finally{ce=n,kt.transition=t}}return!1}function Mp(e,t,n){t=wr(n,t),t=wg(e,t,1),e=Xn(e,t,1),t=Ke(),e!==null&&(oa(e,1,t),lt(e,t))}function Ne(e,t,n){if(e.tag===3)Mp(e,e,n);else for(;t!==null;){if(t.tag===3){Mp(t,e,n);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(qn===null||!qn.has(s))){e=wr(n,e),e=jg(t,e,1),t=Xn(t,e,1),e=Ke(),t!==null&&(oa(t,1,e),lt(t,e));break}}t=t.return}}function v1(e,t,n){var s=e.pingCache;s!==null&&s.delete(t),t=Ke(),e.pingedLanes|=e.suspendedLanes&n,Ae===e&&(Ie&n)===n&&(Oe===4||Oe===3&&(Ie&130023424)===Ie&&500>Se()-Mh?ks(e,0):Th|=n),lt(e,t)}function Bg(e,t){t===0&&(e.mode&1?(t=Ca,Ca<<=1,!(Ca&130023424)&&(Ca=4194304)):t=1);var n=Ke();e=bn(e,t),e!==null&&(oa(e,t,n),lt(e,n))}function y1(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Bg(e,n)}function w1(e,t){var n=0;switch(e.tag){case 13:var s=e.stateNode,r=e.memoizedState;r!==null&&(n=r.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(F(314))}s!==null&&s.delete(t),Bg(e,n)}var Hg;Hg=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||at.current)rt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return rt=!1,l1(e,t,n);rt=!!(e.flags&131072)}else rt=!1,ye&&t.flags&1048576&&Xx(t,Vo,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;mo(e,t),e=t.pendingProps;var r=gr(t,Xe.current);cr(t,n),r=_h(null,t,s,e,r,n);var i=Nh();return t.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ot(s)?(i=!0,Ho(t)):i=!1,t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,bh(t),r.updater=Wl,t.stateNode=r,r._reactInternals=t,su(t,s,e,n),t=au(null,t,s,!0,i,n)):(t.tag=0,ye&&i&&uh(t),Ge(null,t,r,n),t=t.child),t;case 16:s=t.elementType;e:{switch(mo(e,t),e=t.pendingProps,r=s._init,s=r(s._payload),t.type=s,r=t.tag=_1(s),e=Ot(s,e),r){case 0:t=iu(null,t,s,e,n);break e;case 1:t=yp(null,t,s,e,n);break e;case 11:t=bp(null,t,s,e,n);break e;case 14:t=vp(null,t,s,Ot(s.type,e),n);break e}throw Error(F(306,s,""))}return t;case 0:return s=t.type,r=t.pendingProps,r=t.elementType===s?r:Ot(s,r),iu(e,t,s,r,n);case 1:return s=t.type,r=t.pendingProps,r=t.elementType===s?r:Ot(s,r),yp(e,t,s,r,n);case 3:e:{if(Sg(t),e===null)throw Error(F(387));s=t.pendingProps,i=t.memoizedState,r=i.element,Zx(e,t),qo(t,s,null,n);var o=t.memoizedState;if(s=o.element,i.isDehydrated)if(i={element:s,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){r=wr(Error(F(423)),t),t=wp(e,t,s,n,r);break e}else if(s!==r){r=wr(Error(F(424)),t),t=wp(e,t,s,n,r);break e}else for(pt=Yn(t.stateNode.containerInfo.firstChild),xt=t,ye=!0,Lt=null,n=Qx(t,null,s,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(br(),s===r){t=vn(e,t,n);break e}Ge(e,t,s,n)}t=t.child}return t;case 5:return eg(t),e===null&&eu(t),s=t.type,r=t.pendingProps,i=e!==null?e.memoizedProps:null,o=r.children,Gd(s,r)?o=null:i!==null&&Gd(s,i)&&(t.flags|=32),kg(e,t),Ge(e,t,o,n),t.child;case 6:return e===null&&eu(t),null;case 13:return Cg(e,t,n);case 4:return vh(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=vr(t,null,s,n):Ge(e,t,s,n),t.child;case 11:return s=t.type,r=t.pendingProps,r=t.elementType===s?r:Ot(s,r),bp(e,t,s,r,n);case 7:return Ge(e,t,t.pendingProps,n),t.child;case 8:return Ge(e,t,t.pendingProps.children,n),t.child;case 12:return Ge(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(s=t.type._context,r=t.pendingProps,i=t.memoizedProps,o=r.value,fe(Yo,s._currentValue),s._currentValue=o,i!==null)if(It(i.value,o)){if(i.children===r.children&&!at.current){t=vn(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===s){if(i.tag===1){c=pn(-1,n&-n),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),tu(i.return,n,t),l.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(F(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),tu(o,n,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Ge(e,t,r.children,n),t=t.child}return t;case 9:return r=t.type,s=t.pendingProps.children,cr(t,n),r=St(r),s=s(r),t.flags|=1,Ge(e,t,s,n),t.child;case 14:return s=t.type,r=Ot(s,t.pendingProps),r=Ot(s.type,r),vp(e,t,s,r,n);case 15:return _g(e,t,t.type,t.pendingProps,n);case 17:return s=t.type,r=t.pendingProps,r=t.elementType===s?r:Ot(s,r),mo(e,t),t.tag=1,ot(s)?(e=!0,Ho(t)):e=!1,cr(t,n),yg(t,s,r),su(t,s,r,n),au(null,t,s,!0,e,n);case 19:return Eg(e,t,n);case 22:return Ng(e,t,n)}throw Error(F(156,t.tag))};function Ug(e,t){return gx(e,t)}function j1(e,t,n,s){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _t(e,t,n,s){return new j1(e,t,n,s)}function Dh(e){return e=e.prototype,!(!e||!e.isReactComponent)}function _1(e){if(typeof e=="function")return Dh(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Zu)return 11;if(e===eh)return 14}return 2}function Kn(e,t){var n=e.alternate;return n===null?(n=_t(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function bo(e,t,n,s,r,i){var o=2;if(s=e,typeof e=="function")Dh(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Xs:return Ss(n.children,r,i,t);case Ju:o=8,r|=8;break;case Cd:return e=_t(12,n,t,r|2),e.elementType=Cd,e.lanes=i,e;case Ed:return e=_t(13,n,t,r),e.elementType=Ed,e.lanes=i,e;case Td:return e=_t(19,n,t,r),e.elementType=Td,e.lanes=i,e;case ex:return Hl(n,r,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case J0:o=10;break e;case Z0:o=9;break e;case Zu:o=11;break e;case eh:o=14;break e;case Mn:o=16,s=null;break e}throw Error(F(130,e==null?e:typeof e,""))}return t=_t(o,n,t,r),t.elementType=e,t.type=s,t.lanes=i,t}function Ss(e,t,n,s){return e=_t(7,e,s,t),e.lanes=n,e}function Hl(e,t,n,s){return e=_t(22,e,s,t),e.elementType=ex,e.lanes=n,e.stateNode={isHidden:!1},e}function Uc(e,t,n){return e=_t(6,e,null,t),e.lanes=n,e}function Vc(e,t,n){return t=_t(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function N1(e,t,n,s,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=kc(0),this.expirationTimes=kc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=kc(0),this.identifierPrefix=s,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Lh(e,t,n,s,r,i,o,l,c){return e=new N1(e,t,n,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=_t(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:s,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},bh(i),e}function k1(e,t,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ys,key:s==null?null:""+s,children:e,containerInfo:t,implementation:n}}function Vg(e){if(!e)return ss;e=e._reactInternals;e:{if(Fs(e)!==e||e.tag!==1)throw Error(F(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ot(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(F(171))}if(e.tag===1){var n=e.type;if(ot(n))return Vx(e,n,t)}return t}function Yg(e,t,n,s,r,i,o,l,c){return e=Lh(n,s,!0,e,r,i,o,l,c),e.context=Vg(null),n=e.current,s=Ke(),r=Gn(n),i=pn(s,r),i.callback=t??null,Xn(n,i,r),e.current.lanes=r,oa(e,r,s),lt(e,s),e}function Ul(e,t,n,s){var r=t.current,i=Ke(),o=Gn(r);return n=Vg(n),t.context===null?t.context=n:t.pendingContext=n,t=pn(i,o),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=Xn(r,t,o),e!==null&&(Ft(e,r,o,i),ho(e,r,o)),o}function nl(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Pp(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Ah(e,t){Pp(e,t),(e=e.alternate)&&Pp(e,t)}function S1(){return null}var Xg=typeof reportError=="function"?reportError:function(e){console.error(e)};function zh(e){this._internalRoot=e}Vl.prototype.render=zh.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(F(409));Ul(e,t,null,null)};Vl.prototype.unmount=zh.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ds(function(){Ul(null,e,null,null)}),t[gn]=null}};function Vl(e){this._internalRoot=e}Vl.prototype.unstable_scheduleHydration=function(e){if(e){var t=Nx();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Dn.length&&t!==0&&t<Dn[n].priority;n++);Dn.splice(n,0,e),n===0&&Sx(e)}};function Fh(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Yl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Op(){}function C1(e,t,n,s,r){if(r){if(typeof s=="function"){var i=s;s=function(){var d=nl(o);i.call(d)}}var o=Yg(t,s,e,0,null,!1,!1,"",Op);return e._reactRootContainer=o,e[gn]=o.current,Fi(e.nodeType===8?e.parentNode:e),Ds(),o}for(;r=e.lastChild;)e.removeChild(r);if(typeof s=="function"){var l=s;s=function(){var d=nl(c);l.call(d)}}var c=Lh(e,0,!1,null,null,!1,!1,"",Op);return e._reactRootContainer=c,e[gn]=c.current,Fi(e.nodeType===8?e.parentNode:e),Ds(function(){Ul(t,c,n,s)}),c}function Xl(e,t,n,s,r){var i=n._reactRootContainer;if(i){var o=i;if(typeof r=="function"){var l=r;r=function(){var c=nl(o);l.call(c)}}Ul(t,o,e,r)}else o=C1(n,t,e,r,s);return nl(o)}jx=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ni(t.pendingLanes);n!==0&&(sh(t,n|1),lt(t,Se()),!(se&6)&&(jr=Se()+500,ds()))}break;case 13:Ds(function(){var s=bn(e,1);if(s!==null){var r=Ke();Ft(s,e,1,r)}}),Ah(e,1)}};rh=function(e){if(e.tag===13){var t=bn(e,134217728);if(t!==null){var n=Ke();Ft(t,e,134217728,n)}Ah(e,134217728)}};_x=function(e){if(e.tag===13){var t=Gn(e),n=bn(e,t);if(n!==null){var s=Ke();Ft(n,e,t,s)}Ah(e,t)}};Nx=function(){return ce};kx=function(e,t){var n=ce;try{return ce=e,t()}finally{ce=n}};Id=function(e,t,n){switch(t){case"input":if(Od(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var s=n[t];if(s!==e&&s.form===e.form){var r=zl(s);if(!r)throw Error(F(90));nx(s),Od(s,r)}}}break;case"textarea":rx(e,n);break;case"select":t=n.value,t!=null&&ir(e,!!n.multiple,t,!1)}};ux=Ph;hx=Ds;var E1={usingClientEntryPoint:!1,Events:[ca,Qs,zl,cx,dx,Ph]},Vr={findFiberByHostInstance:ys,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},T1={bundleType:Vr.bundleType,version:Vr.version,rendererPackageName:Vr.rendererPackageName,rendererConfig:Vr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_n.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=mx(e),e===null?null:e.stateNode},findFiberByHostInstance:Vr.findFiberByHostInstance||S1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fa.isDisabled&&Fa.supportsFiber)try{Rl=Fa.inject(T1),Zt=Fa}catch{}}bt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=E1;bt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Fh(t))throw Error(F(200));return k1(e,t,null,n)};bt.createRoot=function(e,t){if(!Fh(e))throw Error(F(299));var n=!1,s="",r=Xg;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(r=t.onRecoverableError)),t=Lh(e,1,!1,null,null,n,!1,s,r),e[gn]=t.current,Fi(e.nodeType===8?e.parentNode:e),new zh(t)};bt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(F(188)):(e=Object.keys(e).join(","),Error(F(268,e)));return e=mx(t),e=e===null?null:e.stateNode,e};bt.flushSync=function(e){return Ds(e)};bt.hydrate=function(e,t,n){if(!Yl(t))throw Error(F(200));return Xl(null,e,t,!0,n)};bt.hydrateRoot=function(e,t,n){if(!Fh(e))throw Error(F(405));var s=n!=null&&n.hydratedSources||null,r=!1,i="",o=Xg;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=Yg(t,null,e,1,n??null,r,!1,i,o),e[gn]=t.current,Fi(e),s)for(e=0;e<s.length;e++)n=s[e],r=n._getVersion,r=r(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,r]:t.mutableSourceEagerHydrationData.push(n,r);return new Vl(t)};bt.render=function(e,t,n){if(!Yl(t))throw Error(F(200));return Xl(null,e,t,!1,n)};bt.unmountComponentAtNode=function(e){if(!Yl(e))throw Error(F(40));return e._reactRootContainer?(Ds(function(){Xl(null,null,e,!1,function(){e._reactRootContainer=null,e[gn]=null})}),!0):!1};bt.unstable_batchedUpdates=Ph;bt.unstable_renderSubtreeIntoContainer=function(e,t,n,s){if(!Yl(n))throw Error(F(200));if(e==null||e._reactInternals===void 0)throw Error(F(38));return Xl(e,t,n,!1,s)};bt.version="18.3.1-next-f1338f8080-20240426";function qg(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(qg)}catch(e){console.error(e)}}qg(),q0.exports=bt;var Gg=q0.exports,Rp=Gg;kd.createRoot=Rp.createRoot,kd.hydrateRoot=Rp.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Xi(){return Xi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Xi.apply(this,arguments)}var In;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(In||(In={}));const Dp="popstate";function M1(e){e===void 0&&(e={});function t(s,r){let{pathname:i,search:o,hash:l}=s.location;return bu("",{pathname:i,search:o,hash:l},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(s,r){return typeof r=="string"?r:sl(r)}return O1(t,n,null,e)}function ke(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Ih(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function P1(){return Math.random().toString(36).substr(2,8)}function Lp(e,t){return{usr:e.state,key:e.key,idx:t}}function bu(e,t,n,s){return n===void 0&&(n=null),Xi({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Or(t):t,{state:n,key:t&&t.key||s||P1()})}function sl(e){let{pathname:t="/",search:n="",hash:s=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),s&&s!=="#"&&(t+=s.charAt(0)==="#"?s:"#"+s),t}function Or(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let s=e.indexOf("?");s>=0&&(t.search=e.substr(s),e=e.substr(0,s)),e&&(t.pathname=e)}return t}function O1(e,t,n,s){s===void 0&&(s={});let{window:r=document.defaultView,v5Compat:i=!1}=s,o=r.history,l=In.Pop,c=null,d=u();d==null&&(d=0,o.replaceState(Xi({},o.state,{idx:d}),""));function u(){return(o.state||{idx:null}).idx}function h(){l=In.Pop;let y=u(),x=y==null?null:y-d;d=y,c&&c({action:l,location:g.location,delta:x})}function f(y,x){l=In.Push;let m=bu(g.location,y,x);d=u()+1;let v=Lp(m,d),j=g.createHref(m);try{o.pushState(v,"",j)}catch(_){if(_ instanceof DOMException&&_.name==="DataCloneError")throw _;r.location.assign(j)}i&&c&&c({action:l,location:g.location,delta:1})}function p(y,x){l=In.Replace;let m=bu(g.location,y,x);d=u();let v=Lp(m,d),j=g.createHref(m);o.replaceState(v,"",j),i&&c&&c({action:l,location:g.location,delta:0})}function b(y){let x=r.location.origin!=="null"?r.location.origin:r.location.href,m=typeof y=="string"?y:sl(y);return m=m.replace(/ $/,"%20"),ke(x,"No window.location.(origin|href) available to create URL for href: "+m),new URL(m,x)}let g={get action(){return l},get location(){return e(r,o)},listen(y){if(c)throw new Error("A history only accepts one active listener");return r.addEventListener(Dp,h),c=y,()=>{r.removeEventListener(Dp,h),c=null}},createHref(y){return t(r,y)},createURL:b,encodeLocation(y){let x=b(y);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:f,replace:p,go(y){return o.go(y)}};return g}var Ap;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Ap||(Ap={}));function R1(e,t,n){return n===void 0&&(n="/"),D1(e,t,n)}function D1(e,t,n,s){let r=typeof t=="string"?Or(t):t,i=_r(r.pathname||"/",n);if(i==null)return null;let o=Kg(e);L1(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let d=Y1(i);l=U1(o[c],d)}return l}function Kg(e,t,n,s){t===void 0&&(t=[]),n===void 0&&(n=[]),s===void 0&&(s="");let r=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(ke(c.relativePath.startsWith(s),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(s.length));let d=Qn([s,c.relativePath]),u=n.concat(c);i.children&&i.children.length>0&&(ke(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),Kg(i.children,t,u,d)),!(i.path==null&&!i.index)&&t.push({path:d,score:B1(d,i.index),routesMeta:u})};return e.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))r(i,o);else for(let c of Qg(i.path))r(i,o,c)}),t}function Qg(e){let t=e.split("/");if(t.length===0)return[];let[n,...s]=t,r=n.endsWith("?"),i=n.replace(/\?$/,"");if(s.length===0)return r?[i,""]:[i];let o=Qg(s.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),r&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function L1(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:H1(t.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}const A1=/^:[\w-]+$/,z1=3,F1=2,I1=1,W1=10,$1=-2,zp=e=>e==="*";function B1(e,t){let n=e.split("/"),s=n.length;return n.some(zp)&&(s+=$1),t&&(s+=F1),n.filter(r=>!zp(r)).reduce((r,i)=>r+(A1.test(i)?z1:i===""?I1:W1),s)}function H1(e,t){return e.length===t.length&&e.slice(0,-1).every((s,r)=>s===t[r])?e[e.length-1]-t[t.length-1]:0}function U1(e,t,n){let{routesMeta:s}=e,r={},i="/",o=[];for(let l=0;l<s.length;++l){let c=s[l],d=l===s.length-1,u=i==="/"?t:t.slice(i.length)||"/",h=vu({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},u),f=c.route;if(!h)return null;Object.assign(r,h.params),o.push({params:r,pathname:Qn([i,h.pathname]),pathnameBase:Q1(Qn([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=Qn([i,h.pathnameBase]))}return o}function vu(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,s]=V1(e.path,e.caseSensitive,e.end),r=t.match(n);if(!r)return null;let i=r[0],o=i.replace(/(.)\/+$/,"$1"),l=r.slice(1);return{params:s.reduce((d,u,h)=>{let{paramName:f,isOptional:p}=u;if(f==="*"){let g=l[h]||"";o=i.slice(0,i.length-g.length).replace(/(.)\/+$/,"$1")}const b=l[h];return p&&!b?d[f]=void 0:d[f]=(b||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:e}}function V1(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),Ih(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let s=[],r="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(s.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(s.push({paramName:"*"}),r+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":e!==""&&e!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,t?void 0:"i"),s]}function Y1(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Ih(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function _r(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,s=e.charAt(n);return s&&s!=="/"?null:e.slice(n)||"/"}const X1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,q1=e=>X1.test(e);function G1(e,t){t===void 0&&(t="/");let{pathname:n,search:s="",hash:r=""}=typeof e=="string"?Or(e):e,i;if(n)if(q1(n))i=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),Ih(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?i=Fp(n.substring(1),"/"):i=Fp(n,t)}else i=t;return{pathname:i,search:J1(s),hash:Z1(r)}}function Fp(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function Yc(e,t,n,s){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function K1(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Jg(e,t){let n=K1(e);return t?n.map((s,r)=>r===n.length-1?s.pathname:s.pathnameBase):n.map(s=>s.pathnameBase)}function Zg(e,t,n,s){s===void 0&&(s=!1);let r;typeof e=="string"?r=Or(e):(r=Xi({},e),ke(!r.pathname||!r.pathname.includes("?"),Yc("?","pathname","search",r)),ke(!r.pathname||!r.pathname.includes("#"),Yc("#","pathname","hash",r)),ke(!r.search||!r.search.includes("#"),Yc("#","search","hash",r)));let i=e===""||r.pathname==="",o=i?"/":r.pathname,l;if(o==null)l=n;else{let h=t.length-1;if(!s&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;r.pathname=f.join("/")}l=h>=0?t[h]:"/"}let c=G1(r,l),d=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(d||u)&&(c.pathname+="/"),c}const Qn=e=>e.join("/").replace(/\/\/+/g,"/"),Q1=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),J1=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Z1=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function ej(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const eb=["post","put","patch","delete"];new Set(eb);const tj=["get",...eb];new Set(tj);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function qi(){return qi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},qi.apply(this,arguments)}const ql=w.createContext(null),tb=w.createContext(null),us=w.createContext(null),Gl=w.createContext(null),Nn=w.createContext({outlet:null,matches:[],isDataRoute:!1}),nb=w.createContext(null);function nj(e,t){let{relative:n}=t===void 0?{}:t;ua()||ke(!1);let{basename:s,navigator:r}=w.useContext(us),{hash:i,pathname:o,search:l}=Kl(e,{relative:n}),c=o;return s!=="/"&&(c=o==="/"?s:Qn([s,o])),r.createHref({pathname:c,search:l,hash:i})}function ua(){return w.useContext(Gl)!=null}function Is(){return ua()||ke(!1),w.useContext(Gl).location}function sb(e){w.useContext(us).static||w.useLayoutEffect(e)}function kn(){let{isDataRoute:e}=w.useContext(Nn);return e?gj():sj()}function sj(){ua()||ke(!1);let e=w.useContext(ql),{basename:t,future:n,navigator:s}=w.useContext(us),{matches:r}=w.useContext(Nn),{pathname:i}=Is(),o=JSON.stringify(Jg(r,n.v7_relativeSplatPath)),l=w.useRef(!1);return sb(()=>{l.current=!0}),w.useCallback(function(d,u){if(u===void 0&&(u={}),!l.current)return;if(typeof d=="number"){s.go(d);return}let h=Zg(d,JSON.parse(o),i,u.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:Qn([t,h.pathname])),(u.replace?s.replace:s.push)(h,u.state,u)},[t,s,o,i,e])}const rj=w.createContext(null);function ij(e){let t=w.useContext(Nn).outlet;return t&&w.createElement(rj.Provider,{value:e},t)}function Wh(){let{matches:e}=w.useContext(Nn),t=e[e.length-1];return t?t.params:{}}function Kl(e,t){let{relative:n}=t===void 0?{}:t,{future:s}=w.useContext(us),{matches:r}=w.useContext(Nn),{pathname:i}=Is(),o=JSON.stringify(Jg(r,s.v7_relativeSplatPath));return w.useMemo(()=>Zg(e,JSON.parse(o),i,n==="path"),[e,o,i,n])}function aj(e,t){return oj(e,t)}function oj(e,t,n,s){ua()||ke(!1);let{navigator:r}=w.useContext(us),{matches:i}=w.useContext(Nn),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let d=Is(),u;if(t){var h;let y=typeof t=="string"?Or(t):t;c==="/"||(h=y.pathname)!=null&&h.startsWith(c)||ke(!1),u=y}else u=d;let f=u.pathname||"/",p=f;if(c!=="/"){let y=c.replace(/^\//,"").split("/");p="/"+f.replace(/^\//,"").split("/").slice(y.length).join("/")}let b=R1(e,{pathname:p}),g=hj(b&&b.map(y=>Object.assign({},y,{params:Object.assign({},l,y.params),pathname:Qn([c,r.encodeLocation?r.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?c:Qn([c,r.encodeLocation?r.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),i,n,s);return t&&g?w.createElement(Gl.Provider,{value:{location:qi({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:In.Pop}},g):g}function lj(){let e=xj(),t=ej(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return w.createElement(w.Fragment,null,w.createElement("h2",null,"Unexpected Application Error!"),w.createElement("h3",{style:{fontStyle:"italic"}},t),n?w.createElement("pre",{style:r},n):null,null)}const cj=w.createElement(lj,null);class dj extends w.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?w.createElement(Nn.Provider,{value:this.props.routeContext},w.createElement(nb.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function uj(e){let{routeContext:t,match:n,children:s}=e,r=w.useContext(ql);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),w.createElement(Nn.Provider,{value:t},s)}function hj(e,t,n,s){var r;if(t===void 0&&(t=[]),n===void 0&&(n=null),s===void 0&&(s=null),e==null){var i;if(!n)return null;if(n.errors)e=n.matches;else if((i=s)!=null&&i.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let o=e,l=(r=n)==null?void 0:r.errors;if(l!=null){let u=o.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);u>=0||ke(!1),o=o.slice(0,Math.min(o.length,u+1))}let c=!1,d=-1;if(n&&s&&s.v7_partialHydration)for(let u=0;u<o.length;u++){let h=o[u];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(d=u),h.route.id){let{loaderData:f,errors:p}=n,b=h.route.loader&&f[h.route.id]===void 0&&(!p||p[h.route.id]===void 0);if(h.route.lazy||b){c=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((u,h,f)=>{let p,b=!1,g=null,y=null;n&&(p=l&&h.route.id?l[h.route.id]:void 0,g=h.route.errorElement||cj,c&&(d<0&&f===0?(bj("route-fallback"),b=!0,y=null):d===f&&(b=!0,y=h.route.hydrateFallbackElement||null)));let x=t.concat(o.slice(0,f+1)),m=()=>{let v;return p?v=g:b?v=y:h.route.Component?v=w.createElement(h.route.Component,null):h.route.element?v=h.route.element:v=u,w.createElement(uj,{match:h,routeContext:{outlet:u,matches:x,isDataRoute:n!=null},children:v})};return n&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?w.createElement(dj,{location:n.location,revalidation:n.revalidation,component:g,error:p,children:m(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):m()},null)}var rb=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(rb||{}),ib=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(ib||{});function fj(e){let t=w.useContext(ql);return t||ke(!1),t}function pj(e){let t=w.useContext(tb);return t||ke(!1),t}function mj(e){let t=w.useContext(Nn);return t||ke(!1),t}function ab(e){let t=mj(),n=t.matches[t.matches.length-1];return n.route.id||ke(!1),n.route.id}function xj(){var e;let t=w.useContext(nb),n=pj(),s=ab();return t!==void 0?t:(e=n.errors)==null?void 0:e[s]}function gj(){let{router:e}=fj(rb.UseNavigateStable),t=ab(ib.UseNavigateStable),n=w.useRef(!1);return sb(()=>{n.current=!0}),w.useCallback(function(r,i){i===void 0&&(i={}),n.current&&(typeof r=="number"?e.navigate(r):e.navigate(r,qi({fromRouteId:t},i)))},[e,t])}const Ip={};function bj(e,t,n){Ip[e]||(Ip[e]=!0)}function vj(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function yj(e){return ij(e.context)}function ie(e){ke(!1)}function wj(e){let{basename:t="/",children:n=null,location:s,navigationType:r=In.Pop,navigator:i,static:o=!1,future:l}=e;ua()&&ke(!1);let c=t.replace(/^\/*/,"/"),d=w.useMemo(()=>({basename:c,navigator:i,static:o,future:qi({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);typeof s=="string"&&(s=Or(s));let{pathname:u="/",search:h="",hash:f="",state:p=null,key:b="default"}=s,g=w.useMemo(()=>{let y=_r(u,c);return y==null?null:{location:{pathname:y,search:h,hash:f,state:p,key:b},navigationType:r}},[c,u,h,f,p,b,r]);return g==null?null:w.createElement(us.Provider,{value:d},w.createElement(Gl.Provider,{children:n,value:g}))}function jj(e){let{children:t,location:n}=e;return aj(yu(t),n)}new Promise(()=>{});function yu(e,t){t===void 0&&(t=[]);let n=[];return w.Children.forEach(e,(s,r)=>{if(!w.isValidElement(s))return;let i=[...t,r];if(s.type===w.Fragment){n.push.apply(n,yu(s.props.children,i));return}s.type!==ie&&ke(!1),!s.props.index||!s.props.children||ke(!1);let o={id:s.props.id||i.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(o.children=yu(s.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function rl(){return rl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},rl.apply(this,arguments)}function ob(e,t){if(e==null)return{};var n={},s=Object.keys(e),r,i;for(i=0;i<s.length;i++)r=s[i],!(t.indexOf(r)>=0)&&(n[r]=e[r]);return n}function _j(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Nj(e,t){return e.button===0&&(!t||t==="_self")&&!_j(e)}function wu(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let s=e[n];return t.concat(Array.isArray(s)?s.map(r=>[n,r]):[[n,s]])},[]))}function kj(e,t){let n=wu(e);return t&&t.forEach((s,r)=>{n.has(r)||t.getAll(r).forEach(i=>{n.append(r,i)})}),n}const Sj=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Cj=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],Ej="6";try{window.__reactRouterVersion=Ej}catch{}const Tj=w.createContext({isTransitioning:!1}),Mj="startTransition",Wp=vy[Mj];function Pj(e){let{basename:t,children:n,future:s,window:r}=e,i=w.useRef();i.current==null&&(i.current=M1({window:r,v5Compat:!0}));let o=i.current,[l,c]=w.useState({action:o.action,location:o.location}),{v7_startTransition:d}=s||{},u=w.useCallback(h=>{d&&Wp?Wp(()=>c(h)):c(h)},[c,d]);return w.useLayoutEffect(()=>o.listen(u),[o,u]),w.useEffect(()=>vj(s),[s]),w.createElement(wj,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:o,future:s})}const Oj=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Rj=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Re=w.forwardRef(function(t,n){let{onClick:s,relative:r,reloadDocument:i,replace:o,state:l,target:c,to:d,preventScrollReset:u,viewTransition:h}=t,f=ob(t,Sj),{basename:p}=w.useContext(us),b,g=!1;if(typeof d=="string"&&Rj.test(d)&&(b=d,Oj))try{let v=new URL(window.location.href),j=d.startsWith("//")?new URL(v.protocol+d):new URL(d),_=_r(j.pathname,p);j.origin===v.origin&&_!=null?d=_+j.search+j.hash:g=!0}catch{}let y=nj(d,{relative:r}),x=Lj(d,{replace:o,state:l,target:c,preventScrollReset:u,relative:r,viewTransition:h});function m(v){s&&s(v),v.defaultPrevented||x(v)}return w.createElement("a",rl({},f,{href:b||y,onClick:g||i?s:m,ref:n,target:c}))}),qe=w.forwardRef(function(t,n){let{"aria-current":s="page",caseSensitive:r=!1,className:i="",end:o=!1,style:l,to:c,viewTransition:d,children:u}=t,h=ob(t,Cj),f=Kl(c,{relative:h.relative}),p=Is(),b=w.useContext(tb),{navigator:g,basename:y}=w.useContext(us),x=b!=null&&Aj(f)&&d===!0,m=g.encodeLocation?g.encodeLocation(f).pathname:f.pathname,v=p.pathname,j=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;r||(v=v.toLowerCase(),j=j?j.toLowerCase():null,m=m.toLowerCase()),j&&y&&(j=_r(j,y)||j);const _=m!=="/"&&m.endsWith("/")?m.length-1:m.length;let N=v===m||!o&&v.startsWith(m)&&v.charAt(_)==="/",S=j!=null&&(j===m||!o&&j.startsWith(m)&&j.charAt(m.length)==="/"),T={isActive:N,isPending:S,isTransitioning:x},M=N?s:void 0,D;typeof i=="function"?D=i(T):D=[i,N?"active":null,S?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let C=typeof l=="function"?l(T):l;return w.createElement(Re,rl({},h,{"aria-current":M,className:D,ref:n,style:C,to:c,viewTransition:d}),typeof u=="function"?u(T):u)});var ju;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(ju||(ju={}));var $p;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})($p||($p={}));function Dj(e){let t=w.useContext(ql);return t||ke(!1),t}function Lj(e,t){let{target:n,replace:s,state:r,preventScrollReset:i,relative:o,viewTransition:l}=t===void 0?{}:t,c=kn(),d=Is(),u=Kl(e,{relative:o});return w.useCallback(h=>{if(Nj(h,n)){h.preventDefault();let f=s!==void 0?s:sl(d)===sl(u);c(e,{replace:f,state:r,preventScrollReset:i,relative:o,viewTransition:l})}},[d,c,u,s,r,n,e,i,o,l])}function $h(e){let t=w.useRef(wu(e)),n=w.useRef(!1),s=Is(),r=w.useMemo(()=>kj(s.search,n.current?null:t.current),[s.search]),i=kn(),o=w.useCallback((l,c)=>{const d=wu(typeof l=="function"?l(r):l);n.current=!0,i("?"+d,c)},[i,r]);return[r,o]}function Aj(e,t){t===void 0&&(t={});let n=w.useContext(Tj);n==null&&ke(!1);let{basename:s}=Dj(ju.useViewTransitionState),r=Kl(e,{relative:t.relative});if(!n.isTransitioning)return!1;let i=_r(n.currentLocation.pathname,s)||n.currentLocation.pathname,o=_r(n.nextLocation.pathname,s)||n.nextLocation.pathname;return vu(r.pathname,o)!=null||vu(r.pathname,i)!=null}var lb={exports:{}},cb={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ha=w;function zj(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Fj=typeof Object.is=="function"?Object.is:zj,Ij=ha.useSyncExternalStore,Wj=ha.useRef,$j=ha.useEffect,Bj=ha.useMemo,Hj=ha.useDebugValue;cb.useSyncExternalStoreWithSelector=function(e,t,n,s,r){var i=Wj(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=Bj(function(){function c(p){if(!d){if(d=!0,u=p,p=s(p),r!==void 0&&o.hasValue){var b=o.value;if(r(b,p))return h=b}return h=p}if(b=h,Fj(u,p))return b;var g=s(p);return r!==void 0&&r(b,g)?(u=p,b):(u=p,h=g)}var d=!1,u,h,f=n===void 0?null:n;return[function(){return c(t())},f===null?void 0:function(){return c(f())}]},[t,n,s,r]);var l=Ij(e,i[0],i[1]);return $j(function(){o.hasValue=!0,o.value=l},[l]),Hj(l),l};lb.exports=cb;var Uj=lb.exports;function Vj(e){e()}function Yj(){let e=null,t=null;return{clear(){e=null,t=null},notify(){Vj(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let s=e;for(;s;)n.push(s),s=s.next;return n},subscribe(n){let s=!0;const r=t={callback:n,next:null,prev:t};return r.prev?r.prev.next=r:e=r,function(){!s||e===null||(s=!1,r.next?r.next.prev=r.prev:t=r.prev,r.prev?r.prev.next=r.next:e=r.next)}}}}var Bp={notify(){},get:()=>[]};function Xj(e,t){let n,s=Bp,r=0,i=!1;function o(g){u();const y=s.subscribe(g);let x=!1;return()=>{x||(x=!0,y(),h())}}function l(){s.notify()}function c(){b.onStateChange&&b.onStateChange()}function d(){return i}function u(){r++,n||(n=e.subscribe(c),s=Yj())}function h(){r--,n&&r===0&&(n(),n=void 0,s.clear(),s=Bp)}function f(){i||(i=!0,u())}function p(){i&&(i=!1,h())}const b={addNestedSub:o,notifyNestedSubs:l,handleChangeWrapper:c,isSubscribed:d,trySubscribe:f,tryUnsubscribe:p,getListeners:()=>s};return b}var qj=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Gj=qj(),Kj=()=>typeof navigator<"u"&&navigator.product==="ReactNative",Qj=Kj(),Jj=()=>Gj||Qj?w.useLayoutEffect:w.useEffect,Zj=Jj(),Xc=Symbol.for("react-redux-context"),qc=typeof globalThis<"u"?globalThis:{};function e_(){if(!w.createContext)return{};const e=qc[Xc]??(qc[Xc]=new Map);let t=e.get(w.createContext);return t||(t=w.createContext(null),e.set(w.createContext,t)),t}var rs=e_();function t_(e){const{children:t,context:n,serverState:s,store:r}=e,i=w.useMemo(()=>{const c=Xj(r);return{store:r,subscription:c,getServerState:s?()=>s:void 0}},[r,s]),o=w.useMemo(()=>r.getState(),[r]);Zj(()=>{const{subscription:c}=i;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),o!==r.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[i,o]);const l=n||rs;return w.createElement(l.Provider,{value:i},t)}var n_=t_;function Bh(e=rs){return function(){return w.useContext(e)}}var db=Bh();function ub(e=rs){const t=e===rs?db:Bh(e),n=()=>{const{store:s}=t();return s};return Object.assign(n,{withTypes:()=>n}),n}var s_=ub();function r_(e=rs){const t=e===rs?s_:ub(e),n=()=>t().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var dt=r_(),i_=(e,t)=>e===t;function a_(e=rs){const t=e===rs?db:Bh(e),n=(s,r={})=>{const{equalityFn:i=i_}=typeof r=="function"?{equalityFn:r}:r,o=t(),{store:l,subscription:c,getServerState:d}=o;w.useRef(!0);const u=w.useCallback({[s.name](f){return s(f)}}[s.name],[s]),h=Uj.useSyncExternalStoreWithSelector(c.addNestedSub,l.getState,d||l.getState,u,i);return w.useDebugValue(h),h};return Object.assign(n,{withTypes:()=>n}),n}var U=a_();function ze(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var o_=typeof Symbol=="function"&&Symbol.observable||"@@observable",Hp=o_,Gc=()=>Math.random().toString(36).substring(7).split("").join("."),l_={INIT:`@@redux/INIT${Gc()}`,REPLACE:`@@redux/REPLACE${Gc()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Gc()}`},il=l_;function Hh(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function hb(e,t,n){if(typeof e!="function")throw new Error(ze(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(ze(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(ze(1));return n(hb)(e,t)}let s=e,r=t,i=new Map,o=i,l=0,c=!1;function d(){o===i&&(o=new Map,i.forEach((y,x)=>{o.set(x,y)}))}function u(){if(c)throw new Error(ze(3));return r}function h(y){if(typeof y!="function")throw new Error(ze(4));if(c)throw new Error(ze(5));let x=!0;d();const m=l++;return o.set(m,y),function(){if(x){if(c)throw new Error(ze(6));x=!1,d(),o.delete(m),i=null}}}function f(y){if(!Hh(y))throw new Error(ze(7));if(typeof y.type>"u")throw new Error(ze(8));if(typeof y.type!="string")throw new Error(ze(17));if(c)throw new Error(ze(9));try{c=!0,r=s(r,y)}finally{c=!1}return(i=o).forEach(m=>{m()}),y}function p(y){if(typeof y!="function")throw new Error(ze(10));s=y,f({type:il.REPLACE})}function b(){const y=h;return{subscribe(x){if(typeof x!="object"||x===null)throw new Error(ze(11));function m(){const j=x;j.next&&j.next(u())}return m(),{unsubscribe:y(m)}},[Hp](){return this}}}return f({type:il.INIT}),{dispatch:f,subscribe:h,getState:u,replaceReducer:p,[Hp]:b}}function c_(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:il.INIT})>"u")throw new Error(ze(12));if(typeof n(void 0,{type:il.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(ze(13))})}function d_(e){const t=Object.keys(e),n={};for(let i=0;i<t.length;i++){const o=t[i];typeof e[o]=="function"&&(n[o]=e[o])}const s=Object.keys(n);let r;try{c_(n)}catch(i){r=i}return function(o={},l){if(r)throw r;let c=!1;const d={};for(let u=0;u<s.length;u++){const h=s[u],f=n[h],p=o[h],b=f(p,l);if(typeof b>"u")throw l&&l.type,new Error(ze(14));d[h]=b,c=c||b!==p}return c=c||s.length!==Object.keys(o).length,c?d:o}}function al(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...s)=>t(n(...s)))}function u_(...e){return t=>(n,s)=>{const r=t(n,s);let i=()=>{throw new Error(ze(15))};const o={getState:r.getState,dispatch:(c,...d)=>i(c,...d)},l=e.map(c=>c(o));return i=al(...l)(r.dispatch),{...r,dispatch:i}}}function h_(e){return Hh(e)&&"type"in e&&typeof e.type=="string"}var fb=Symbol.for("immer-nothing"),Up=Symbol.for("immer-draftable"),Qe=Symbol.for("immer-state");function At(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var mt=Object,Nr=mt.getPrototypeOf,ol="constructor",Ql="prototype",_u="configurable",ll="enumerable",vo="writable",Gi="value",yn=e=>!!e&&!!e[Qe];function Wt(e){var t;return e?pb(e)||Jl(e)||!!e[Up]||!!((t=e[ol])!=null&&t[Up])||Zl(e)||ec(e):!1}var f_=mt[Ql][ol].toString(),Vp=new WeakMap;function pb(e){if(!e||!Uh(e))return!1;const t=Nr(e);if(t===null||t===mt[Ql])return!0;const n=mt.hasOwnProperty.call(t,ol)&&t[ol];if(n===Object)return!0;if(!Vs(n))return!1;let s=Vp.get(n);return s===void 0&&(s=Function.toString.call(n),Vp.set(n,s)),s===f_}function fa(e,t,n=!0){pa(e)===0?(n?Reflect.ownKeys(e):mt.keys(e)).forEach(r=>{t(r,e[r],e)}):e.forEach((s,r)=>t(r,s,e))}function pa(e){const t=e[Qe];return t?t.type_:Jl(e)?1:Zl(e)?2:ec(e)?3:0}var Yp=(e,t,n=pa(e))=>n===2?e.has(t):mt[Ql].hasOwnProperty.call(e,t),Nu=(e,t,n=pa(e))=>n===2?e.get(t):e[t],cl=(e,t,n,s=pa(e))=>{s===2?e.set(t,n):s===3?e.add(n):e[t]=n};function p_(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}var Jl=Array.isArray,Zl=e=>e instanceof Map,ec=e=>e instanceof Set,Uh=e=>typeof e=="object",Vs=e=>typeof e=="function",Kc=e=>typeof e=="boolean",cn=e=>e.copy_||e.base_,Vh=e=>e.modified_?e.copy_:e.base_;function ku(e,t){if(Zl(e))return new Map(e);if(ec(e))return new Set(e);if(Jl(e))return Array[Ql].slice.call(e);const n=pb(e);if(t===!0||t==="class_only"&&!n){const s=mt.getOwnPropertyDescriptors(e);delete s[Qe];let r=Reflect.ownKeys(s);for(let i=0;i<r.length;i++){const o=r[i],l=s[o];l[vo]===!1&&(l[vo]=!0,l[_u]=!0),(l.get||l.set)&&(s[o]={[_u]:!0,[vo]:!0,[ll]:l[ll],[Gi]:e[o]})}return mt.create(Nr(e),s)}else{const s=Nr(e);if(s!==null&&n)return{...e};const r=mt.create(s);return mt.assign(r,e)}}function Yh(e,t=!1){return tc(e)||yn(e)||!Wt(e)||(pa(e)>1&&mt.defineProperties(e,{set:Ia,add:Ia,clear:Ia,delete:Ia}),mt.freeze(e),t&&fa(e,(n,s)=>{Yh(s,!0)},!1)),e}function m_(){At(2)}var Ia={[Gi]:m_};function tc(e){return e===null||!Uh(e)?!0:mt.isFrozen(e)}var dl="MapSet",Su="Patches",mb={};function kr(e){const t=mb[e];return t||At(0,e),t}var x_=e=>!!mb[e],Ki,xb=()=>Ki,g_=(e,t)=>({drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:x_(dl)?kr(dl):void 0});function Xp(e,t){t&&(e.patchPlugin_=kr(Su),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Cu(e){Eu(e),e.drafts_.forEach(b_),e.drafts_=null}function Eu(e){e===Ki&&(Ki=e.parent_)}var qp=e=>Ki=g_(Ki,e);function b_(e){const t=e[Qe];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function Gp(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];if(e!==void 0&&e!==n){n[Qe].modified_&&(Cu(t),At(4)),Wt(e)&&(e=Kp(t,e));const{patchPlugin_:r}=t;r&&r.generateReplacementPatches_(n[Qe].base_,e,t)}else e=Kp(t,n);return v_(t,e,!0),Cu(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==fb?e:void 0}function Kp(e,t){if(tc(t))return t;const n=t[Qe];if(!n)return Xh(t,e.handledSet_,e);if(!nc(n,e))return t;if(!n.modified_)return n.base_;if(!n.finalized_){const{callbacks_:s}=n;if(s)for(;s.length>0;)s.pop()(e);vb(n,e)}return n.copy_}function v_(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Yh(t,n)}function gb(e){e.finalized_=!0,e.scope_.unfinalizedDrafts_--}var nc=(e,t)=>e.scope_===t,y_=[];function bb(e,t,n,s){const r=cn(e),i=e.type_;if(s!==void 0&&Nu(r,s,i)===t){cl(r,s,n,i);return}if(!e.draftLocations_){const l=e.draftLocations_=new Map;fa(r,(c,d)=>{if(yn(d)){const u=l.get(d)||[];u.push(c),l.set(d,u)}})}const o=e.draftLocations_.get(t)??y_;for(const l of o)cl(r,l,n,i)}function w_(e,t,n){e.callbacks_.push(function(r){var l;const i=t;if(!i||!nc(i,r))return;(l=r.mapSetPlugin_)==null||l.fixSetContents(i);const o=Vh(i);bb(e,i.draft_??i,o,n),vb(i,r)})}function vb(e,t){var s;if(e.modified_&&!e.finalized_&&(e.type_===3||(((s=e.assigned_)==null?void 0:s.size)??0)>0)){const{patchPlugin_:r}=t;if(r){const i=r.getPath(e);i&&r.generatePatches_(e,i,t)}gb(e)}}function j_(e,t,n){const{scope_:s}=e;if(yn(n)){const r=n[Qe];nc(r,s)&&r.callbacks_.push(function(){yo(e);const o=Vh(r);bb(e,n,o,t)})}else Wt(n)&&e.callbacks_.push(function(){const i=cn(e);Nu(i,t,e.type_)===n&&s.drafts_.length>1&&(e.assigned_.get(t)??!1)===!0&&e.copy_&&Xh(Nu(e.copy_,t,e.type_),s.handledSet_,s)})}function Xh(e,t,n){return!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1||yn(e)||t.has(e)||!Wt(e)||tc(e)||(t.add(e),fa(e,(s,r)=>{if(yn(r)){const i=r[Qe];if(nc(i,n)){const o=Vh(i);cl(e,s,o,e.type_),gb(i)}}else Wt(r)&&Xh(r,t,n)})),e}function __(e,t){const n=Jl(e),s={type_:n?1:0,scope_:t?t.scope_:xb(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let r=s,i=qh;n&&(r=[s],i=Qi);const{revoke:o,proxy:l}=Proxy.revocable(r,i);return s.draft_=l,s.revoke_=o,[l,s]}var qh={get(e,t){if(t===Qe)return e;const n=cn(e);if(!Yp(n,t,e.type_))return N_(e,n,t);const s=n[t];if(e.finalized_||!Wt(s))return s;if(s===Qc(e.base_,t)){yo(e);const r=e.type_===1?+t:t,i=Mu(e.scope_,s,e,r);return e.copy_[r]=i}return s},has(e,t){return t in cn(e)},ownKeys(e){return Reflect.ownKeys(cn(e))},set(e,t,n){const s=yb(cn(e),t);if(s!=null&&s.set)return s.set.call(e.draft_,n),!0;if(!e.modified_){const r=Qc(cn(e),t),i=r==null?void 0:r[Qe];if(i&&i.base_===n)return e.copy_[t]=n,e.assigned_.set(t,!1),!0;if(p_(n,r)&&(n!==void 0||Yp(e.base_,t,e.type_)))return!0;yo(e),Tu(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_.set(t,!0),j_(e,t,n)),!0},deleteProperty(e,t){return yo(e),Qc(e.base_,t)!==void 0||t in e.base_?(e.assigned_.set(t,!1),Tu(e)):e.assigned_.delete(t),e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=cn(e),s=Reflect.getOwnPropertyDescriptor(n,t);return s&&{[vo]:!0,[_u]:e.type_!==1||t!=="length",[ll]:s[ll],[Gi]:n[t]}},defineProperty(){At(11)},getPrototypeOf(e){return Nr(e.base_)},setPrototypeOf(){At(12)}},Qi={};fa(qh,(e,t)=>{Qi[e]=function(){const n=arguments;return n[0]=n[0][0],t.apply(this,n)}});Qi.deleteProperty=function(e,t){return Qi.set.call(this,e,t,void 0)};Qi.set=function(e,t,n){return qh.set.call(this,e[0],t,n,e[0])};function Qc(e,t){const n=e[Qe];return(n?cn(n):e)[t]}function N_(e,t,n){var r;const s=yb(t,n);return s?Gi in s?s[Gi]:(r=s.get)==null?void 0:r.call(e.draft_):void 0}function yb(e,t){if(!(t in e))return;let n=Nr(e);for(;n;){const s=Object.getOwnPropertyDescriptor(n,t);if(s)return s;n=Nr(n)}}function Tu(e){e.modified_||(e.modified_=!0,e.parent_&&Tu(e.parent_))}function yo(e){e.copy_||(e.assigned_=new Map,e.copy_=ku(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var k_=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(t,n,s)=>{if(Vs(t)&&!Vs(n)){const i=n;n=t;const o=this;return function(c=i,...d){return o.produce(c,u=>n.call(this,u,...d))}}Vs(n)||At(6),s!==void 0&&!Vs(s)&&At(7);let r;if(Wt(t)){const i=qp(this),o=Mu(i,t,void 0);let l=!0;try{r=n(o),l=!1}finally{l?Cu(i):Eu(i)}return Xp(i,s),Gp(r,i)}else if(!t||!Uh(t)){if(r=n(t),r===void 0&&(r=t),r===fb&&(r=void 0),this.autoFreeze_&&Yh(r,!0),s){const i=[],o=[];kr(Su).generateReplacementPatches_(t,r,{patches_:i,inversePatches_:o}),s(i,o)}return r}else At(1,t)},this.produceWithPatches=(t,n)=>{if(Vs(t))return(o,...l)=>this.produceWithPatches(o,c=>t(c,...l));let s,r;return[this.produce(t,n,(o,l)=>{s=o,r=l}),s,r]},Kc(e==null?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),Kc(e==null?void 0:e.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),Kc(e==null?void 0:e.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){Wt(e)||At(8),yn(e)&&(e=S_(e));const t=qp(this),n=Mu(t,e,void 0);return n[Qe].isManual_=!0,Eu(t),n}finishDraft(e,t){const n=e&&e[Qe];(!n||!n.isManual_)&&At(9);const{scope_:s}=n;return Xp(s,t),Gp(void 0,s)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const r=t[n];if(r.path.length===0&&r.op==="replace"){e=r.value;break}}n>-1&&(t=t.slice(n+1));const s=kr(Su).applyPatches_;return yn(e)?s(e,t):this.produce(e,r=>s(r,t))}};function Mu(e,t,n,s){const[r,i]=Zl(t)?kr(dl).proxyMap_(t,n):ec(t)?kr(dl).proxySet_(t,n):__(t,n);return((n==null?void 0:n.scope_)??xb()).drafts_.push(r),i.callbacks_=(n==null?void 0:n.callbacks_)??[],i.key_=s,n&&s!==void 0?w_(n,i,s):i.callbacks_.push(function(c){var u;(u=c.mapSetPlugin_)==null||u.fixSetContents(i);const{patchPlugin_:d}=c;i.modified_&&d&&d.generatePatches_(i,[],c)}),r}function S_(e){return yn(e)||At(10,e),wb(e)}function wb(e){if(!Wt(e)||tc(e))return e;const t=e[Qe];let n,s=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=ku(e,t.scope_.immer_.useStrictShallowCopy_),s=t.scope_.immer_.shouldUseStrictIteration()}else n=ku(e,!0);return fa(n,(r,i)=>{cl(n,r,wb(i))},s),t&&(t.finalized_=!1),n}var C_=new k_,jb=C_.produce;function _b(e){return({dispatch:n,getState:s})=>r=>i=>typeof i=="function"?i(n,s,e):r(i)}var E_=_b(),T_=_b,M_=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?al:al.apply(null,arguments)},P_=e=>e&&typeof e.match=="function";function vi(e,t){function n(...s){if(t){let r=t(...s);if(!r)throw new Error(mn(0));return{type:e,payload:r.payload,..."meta"in r&&{meta:r.meta},..."error"in r&&{error:r.error}}}return{type:e,payload:s[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=s=>h_(s)&&s.type===e,n}var Nb=class ri extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,ri.prototype)}static get[Symbol.species](){return ri}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new ri(...t[0].concat(this)):new ri(...t.concat(this))}};function Qp(e){return Wt(e)?jb(e,()=>{}):e}function Wa(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}function O_(e){return typeof e=="boolean"}var R_=()=>function(t){const{thunk:n=!0,immutableCheck:s=!0,serializableCheck:r=!0,actionCreatorCheck:i=!0}=t??{};let o=new Nb;return n&&(O_(n)?o.push(E_):o.push(T_(n.extraArgument))),o},D_="RTK_autoBatch",Jp=e=>t=>{setTimeout(t,e)},L_=(e={type:"raf"})=>t=>(...n)=>{const s=t(...n);let r=!0,i=!1,o=!1;const l=new Set,c=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:Jp(10):e.type==="callback"?e.queueNotification:Jp(e.timeout),d=()=>{o=!1,i&&(i=!1,l.forEach(u=>u()))};return Object.assign({},s,{subscribe(u){const h=()=>r&&u(),f=s.subscribe(h);return l.add(u),()=>{f(),l.delete(u)}},dispatch(u){var h;try{return r=!((h=u==null?void 0:u.meta)!=null&&h[D_]),i=!r,i&&(o||(o=!0,c(d))),s.dispatch(u)}finally{r=!0}}})},A_=e=>function(n){const{autoBatch:s=!0}=n??{};let r=new Nb(e);return s&&r.push(L_(typeof s=="object"?s:void 0)),r};function z_(e){const t=R_(),{reducer:n=void 0,middleware:s,devTools:r=!0,preloadedState:i=void 0,enhancers:o=void 0}=e||{};let l;if(typeof n=="function")l=n;else if(Hh(n))l=d_(n);else throw new Error(mn(1));let c;typeof s=="function"?c=s(t):c=t();let d=al;r&&(d=M_({trace:!1,...typeof r=="object"&&r}));const u=u_(...c),h=A_(u);let f=typeof o=="function"?o(h):h();const p=d(...f);return hb(l,i,p)}function kb(e){const t={},n=[];let s;const r={addCase(i,o){const l=typeof i=="string"?i:i.type;if(!l)throw new Error(mn(28));if(l in t)throw new Error(mn(29));return t[l]=o,r},addAsyncThunk(i,o){return o.pending&&(t[i.pending.type]=o.pending),o.rejected&&(t[i.rejected.type]=o.rejected),o.fulfilled&&(t[i.fulfilled.type]=o.fulfilled),o.settled&&n.push({matcher:i.settled,reducer:o.settled}),r},addMatcher(i,o){return n.push({matcher:i,reducer:o}),r},addDefaultCase(i){return s=i,r}};return e(r),[t,n,s]}function F_(e){return typeof e=="function"}function I_(e,t){let[n,s,r]=kb(t),i;if(F_(e))i=()=>Qp(e());else{const l=Qp(e);i=()=>l}function o(l=i(),c){let d=[n[c.type],...s.filter(({matcher:u})=>u(c)).map(({reducer:u})=>u)];return d.filter(u=>!!u).length===0&&(d=[r]),d.reduce((u,h)=>{if(h)if(yn(u)){const p=h(u,c);return p===void 0?u:p}else{if(Wt(u))return jb(u,f=>h(f,c));{const f=h(u,c);if(f===void 0){if(u===null)return u;throw Error("A case reducer on a non-draftable value must not return undefined")}return f}}return u},l)}return o.getInitialState=i,o}var W_=(e,t)=>P_(e)?e.match(t):e(t);function $_(...e){return t=>e.some(n=>W_(n,t))}var B_="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",H_=(e=21)=>{let t="",n=e;for(;n--;)t+=B_[Math.random()*64|0];return t},U_=["name","message","stack","code"],Jc=class{constructor(e,t){K(this,"_type");this.payload=e,this.meta=t}},Zp=class{constructor(e,t){K(this,"_type");this.payload=e,this.meta=t}},V_=e=>{if(typeof e=="object"&&e!==null){const t={};for(const n of U_)typeof e[n]=="string"&&(t[n]=e[n]);return t}return{message:String(e)}},em="External signal was aborted",de=(()=>{function e(t,n,s){const r=vi(t+"/fulfilled",(c,d,u,h)=>({payload:c,meta:{...h||{},arg:u,requestId:d,requestStatus:"fulfilled"}})),i=vi(t+"/pending",(c,d,u)=>({payload:void 0,meta:{...u||{},arg:d,requestId:c,requestStatus:"pending"}})),o=vi(t+"/rejected",(c,d,u,h,f)=>({payload:h,error:(s&&s.serializeError||V_)(c||"Rejected"),meta:{...f||{},arg:u,requestId:d,rejectedWithValue:!!h,requestStatus:"rejected",aborted:(c==null?void 0:c.name)==="AbortError",condition:(c==null?void 0:c.name)==="ConditionError"}}));function l(c,{signal:d}={}){return(u,h,f)=>{const p=s!=null&&s.idGenerator?s.idGenerator(c):H_(),b=new AbortController;let g,y;function x(v){y=v,b.abort()}d&&(d.aborted?x(em):d.addEventListener("abort",()=>x(em),{once:!0}));const m=async function(){var _,N;let v;try{let S=(_=s==null?void 0:s.condition)==null?void 0:_.call(s,c,{getState:h,extra:f});if(X_(S)&&(S=await S),S===!1||b.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};const T=new Promise((M,D)=>{g=()=>{D({name:"AbortError",message:y||"Aborted"})},b.signal.addEventListener("abort",g,{once:!0})});u(i(p,c,(N=s==null?void 0:s.getPendingMeta)==null?void 0:N.call(s,{requestId:p,arg:c},{getState:h,extra:f}))),v=await Promise.race([T,Promise.resolve(n(c,{dispatch:u,getState:h,extra:f,requestId:p,signal:b.signal,abort:x,rejectWithValue:(M,D)=>new Jc(M,D),fulfillWithValue:(M,D)=>new Zp(M,D)})).then(M=>{if(M instanceof Jc)throw M;return M instanceof Zp?r(M.payload,p,c,M.meta):r(M,p,c)})])}catch(S){v=S instanceof Jc?o(null,p,c,S.payload,S.meta):o(S,p,c)}finally{g&&b.signal.removeEventListener("abort",g)}return s&&!s.dispatchConditionRejection&&o.match(v)&&v.meta.condition||u(v),v}();return Object.assign(m,{abort:x,requestId:p,arg:c,unwrap(){return m.then(Y_)}})}}return Object.assign(l,{pending:i,rejected:o,fulfilled:r,settled:$_(o,r),typePrefix:t})}return e.withTypes=()=>e,e})();function Y_(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function X_(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var q_=Symbol.for("rtk-slice-createasyncthunk");function G_(e,t){return`${e}/${t}`}function K_({creators:e}={}){var n;const t=(n=e==null?void 0:e.asyncThunk)==null?void 0:n[q_];return function(r){const{name:i,reducerPath:o=i}=r;if(!i)throw new Error(mn(11));const l=(typeof r.reducers=="function"?r.reducers(J_()):r.reducers)||{},c=Object.keys(l),d={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},u={addCase(j,_){const N=typeof j=="string"?j:j.type;if(!N)throw new Error(mn(12));if(N in d.sliceCaseReducersByType)throw new Error(mn(13));return d.sliceCaseReducersByType[N]=_,u},addMatcher(j,_){return d.sliceMatchers.push({matcher:j,reducer:_}),u},exposeAction(j,_){return d.actionCreators[j]=_,u},exposeCaseReducer(j,_){return d.sliceCaseReducersByName[j]=_,u}};c.forEach(j=>{const _=l[j],N={reducerName:j,type:G_(i,j),createNotation:typeof r.reducers=="function"};eN(_)?nN(N,_,u,t):Z_(N,_,u)});function h(){const[j={},_=[],N=void 0]=typeof r.extraReducers=="function"?kb(r.extraReducers):[r.extraReducers],S={...j,...d.sliceCaseReducersByType};return I_(r.initialState,T=>{for(let M in S)T.addCase(M,S[M]);for(let M of d.sliceMatchers)T.addMatcher(M.matcher,M.reducer);for(let M of _)T.addMatcher(M.matcher,M.reducer);N&&T.addDefaultCase(N)})}const f=j=>j,p=new Map,b=new WeakMap;let g;function y(j,_){return g||(g=h()),g(j,_)}function x(){return g||(g=h()),g.getInitialState()}function m(j,_=!1){function N(T){let M=T[j];return typeof M>"u"&&_&&(M=Wa(b,N,x)),M}function S(T=f){const M=Wa(p,_,()=>new WeakMap);return Wa(M,T,()=>{const D={};for(const[C,A]of Object.entries(r.selectors??{}))D[C]=Q_(A,T,()=>Wa(b,T,x),_);return D})}return{reducerPath:j,getSelectors:S,get selectors(){return S(N)},selectSlice:N}}const v={name:i,reducer:y,actions:d.actionCreators,caseReducers:d.sliceCaseReducersByName,getInitialState:x,...m(o),injectInto(j,{reducerPath:_,...N}={}){const S=_??o;return j.inject({reducerPath:S,reducer:y},N),{...v,...m(S,!0)}}};return v}}function Q_(e,t,n,s){function r(i,...o){let l=t(i);return typeof l>"u"&&s&&(l=n()),e(l,...o)}return r.unwrapped=e,r}var Sn=K_();function J_(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function Z_({type:e,reducerName:t,createNotation:n},s,r){let i,o;if("reducer"in s){if(n&&!tN(s))throw new Error(mn(17));i=s.reducer,o=s.prepare}else i=s;r.addCase(e,i).exposeCaseReducer(t,i).exposeAction(t,o?vi(e,o):vi(e))}function eN(e){return e._reducerDefinitionType==="asyncThunk"}function tN(e){return e._reducerDefinitionType==="reducerWithPrepare"}function nN({type:e,reducerName:t},n,s,r){if(!r)throw new Error(mn(18));const{payloadCreator:i,fulfilled:o,pending:l,rejected:c,settled:d,options:u}=n,h=r(e,i,u);s.exposeAction(t,h),o&&s.addCase(h.fulfilled,o),l&&s.addCase(h.pending,l),c&&s.addCase(h.rejected,c),d&&s.addMatcher(h.settled,d),s.exposeCaseReducer(t,{fulfilled:o||$a,pending:l||$a,rejected:c||$a,settled:d||$a})}function $a(){}function mn(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}const yi=de("auth/fetchUserMe",async(e,{rejectWithValue:t})=>{try{const n=await fetch("/api/me/");return n.ok?await n.json():null}catch(n){return console.error("Failed to fetch user:",n),t(n.message)}}),sN={user:null,status:"idle",error:null},Sb=Sn({name:"auth",initialState:sN,reducers:{clearUser:e=>{e.user=null,e.status="idle"}},extraReducers:e=>{e.addCase(yi.pending,t=>{t.status="loading"}).addCase(yi.fulfilled,(t,n)=>{t.status="succeeded",t.user=n.payload,n.payload&&n.payload.is_banned}).addCase(yi.rejected,(t,n)=>{t.status="failed",t.error=n.payload,t.user=null})}}),{clearUser:jT}=Sb.actions,Gh=e=>e.auth.user,rN=e=>e.auth.status==="loading"||e.auth.status==="idle",tt=e=>t=>{var n,s,r;return((s=(n=t.auth.user)==null?void 0:n.capabilities)==null?void 0:s.includes(e))||((r=t.auth.user)==null?void 0:r.is_superuser)},iN=Sb.reducer,Cb=w.createContext(null),aN=({children:e})=>{const t=dt(),n=U(Gh),s=U(rN);w.useEffect(()=>{t(yi())},[t]),w.useEffect(()=>{n&&n.is_banned},[n]);const r=async()=>t(yi()).unwrap();return a.jsx(Cb.Provider,{value:{user:n,loading:s,refreshUser:r},children:e})},Rr=()=>w.useContext(Cb);function Eb(e){var t,n,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var r=e.length;for(t=0;t<r;t++)e[t]&&(n=Eb(e[t]))&&(s&&(s+=" "),s+=n)}else for(n in e)e[n]&&(s&&(s+=" "),s+=n);return s}function V(){for(var e,t,n=0,s="",r=arguments.length;n<r;n++)(e=arguments[n])&&(t=Eb(e))&&(s&&(s+=" "),s+=t);return s}/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var oN={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lN=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=(e,t)=>{const n=w.forwardRef(({color:s="currentColor",size:r=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:l="",children:c,...d},u)=>w.createElement("svg",{ref:u,...oN,width:r,height:r,stroke:s,strokeWidth:o?Number(i)*24/Number(r):i,className:["lucide",`lucide-${lN(e)}`,l].join(" "),...d},[...t.map(([h,f])=>w.createElement(h,f)),...Array.isArray(c)?c:[c]]));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zc=X("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cN=X("Anchor",[["path",{d:"M12 22V8",key:"qkxhtm"}],["path",{d:"M5 12H2a10 10 0 0 0 20 0h-3",key:"1hv3nh"}],["circle",{cx:"12",cy:"5",r:"3",key:"rqqgnr"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sc=X("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dN=X("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uN=X("BarChart2",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hN=X("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rc=X("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kh=X("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fN=X("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pu=X("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pN=X("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tb=X("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qh=X("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mN=X("Crosshair",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"22",x2:"18",y1:"12",y2:"12",key:"l9bcsi"}],["line",{x1:"6",x2:"2",y1:"12",y2:"12",key:"13hhkx"}],["line",{x1:"12",x2:"12",y1:"6",y2:"2",key:"10w3f3"}],["line",{x1:"12",x2:"12",y1:"22",y2:"18",key:"15g9kq"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xN=X("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mb=X("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gN=X("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pb=X("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bN=X("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tm=X("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ob=X("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vN=X("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yN=X("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wN=X("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jh=X("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rb=X("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nm=X("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sr=X("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jN=X("Power",[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _N=X("Radio",[["path",{d:"M4.9 19.1C1 15.2 1 8.8 4.9 4.9",key:"1vaf9d"}],["path",{d:"M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5",key:"u1ii0m"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5",key:"1j5fej"}],["path",{d:"M19.1 4.9C23 8.8 23 15.1 19.1 19",key:"10b0cb"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jn=X("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NN=X("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Db=X("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ji=X("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lb=X("Scroll",[["path",{d:"M8 21h12a2 2 0 0 0 2-2v-2H10v2a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v3h4",key:"13a6an"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const is=X("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ab=X("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zh=X("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kN=X("ShieldAlert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ic=X("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ef=X("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SN=X("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CN=X("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wi=X("Terminal",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EN=X("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ma=X("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zn=X("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zb=X("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TN=X("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sm=X("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MN=X("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ct=X("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fb=X("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),PN={theme:"default",sidebarOpen:!1},Ib=Sn({name:"ui",initialState:PN,reducers:{setTheme:(e,t)=>{e.theme=t.payload},toggleSidebar:e=>{e.sidebarOpen=!e.sidebarOpen},closeSidebar:e=>{e.sidebarOpen=!1}}}),{setTheme:rm,toggleSidebar:_T,closeSidebar:NT}=Ib.actions,ON=e=>e.ui.theme,RN=Ib.reducer,DN=({children:e})=>{const t=U(ON),n=dt(),{user:s}=Rr();w.useEffect(()=>{const i=document.cookie.match(new RegExp("(^| )site_theme=([^;]+)"));i&&n(rm(i[2])),document.body.classList.remove("theme-default","theme-caldari","theme-gallente","theme-amarr","theme-light"),document.body.classList.add(`theme-${t}`)},[t,n]);const r=i=>{n(rm(i));const o=new Date;o.setTime(o.getTime()+365*24*60*60*1e3),document.cookie=`site_theme=${i};expires=${o.toUTCString()};path=/`};return a.jsxs("div",{className:"flex flex-col h-full overflow-hidden text-slate-300",children:[a.jsx("nav",{className:"glass-header z-50 flex-shrink-0 relative",children:a.jsxs("div",{className:"container mx-auto px-4 h-16 flex justify-between items-center",children:[a.jsxs("div",{className:"flex items-center gap-8",children:[a.jsxs(Re,{to:"/",className:"flex items-center gap-3 group",children:[a.jsx("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-brand-400 to-brand-600 flex items-center justify-center text-slate-900 font-bold text-xl shadow-lg shadow-brand-500/20 group-hover:scale-105 transition",children:"W"}),a.jsx("span",{className:"text-xl font-bold text-white tracking-tight group-hover:text-brand-400 transition",children:"WarpToMe"})]}),s&&(s.is_staff||s.is_superuser)&&a.jsx("span",{className:"badge badge-red hidden md:inline-block",children:"System Admin"}),a.jsx("div",{className:"hidden md:flex items-center gap-1 border-l border-white/10 pl-6 h-8",children:a.jsx(Re,{to:"/doctrines",className:"px-3 py-1.5 rounded-md text-sm font-medium text-slate-400 hover:text-white hover:bg-white/5 transition",children:"Doctrines"})})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("div",{className:"relative group",children:[a.jsx("button",{className:"p-2 text-slate-400 hover:text-brand-400 transition rounded-full hover:bg-white/5 relative z-10 pb-4 mb-[-1rem]",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})})}),a.jsx("div",{className:"absolute right-0 pt-2 w-48 hidden group-hover:block z-50",children:a.jsx("div",{className:"bg-slate-900 border border-white/10 rounded-xl shadow-2xl overflow-hidden",children:a.jsxs("div",{className:"p-2 space-y-1",children:[a.jsx("div",{className:"px-3 py-1 text-[10px] uppercase font-bold text-slate-400 tracking-wider",children:"Mode"}),a.jsxs("button",{onClick:()=>r("light"),className:"flex items-center gap-3 w-full text-left px-3 py-2 rounded hover:bg-white/5 text-xs text-slate-300 hover:text-white transition",children:[a.jsx("span",{className:"w-3 h-3 rounded-full bg-slate-200 border border-slate-400"})," Light Mode"]}),a.jsx("div",{className:"px-3 py-1 mt-2 text-[10px] uppercase font-bold text-slate-400 tracking-wider",children:"Faction"}),a.jsxs("button",{onClick:()=>r("default"),className:"flex items-center gap-3 w-full text-left px-3 py-2 rounded hover:bg-white/5 text-xs text-slate-300 hover:text-white transition",children:[a.jsx("span",{className:"w-3 h-3 rounded-full bg-orange-700"})," Minmatar (Rust)"]}),a.jsxs("button",{onClick:()=>r("caldari"),className:"flex items-center gap-3 w-full text-left px-3 py-2 rounded hover:bg-white/5 text-xs text-slate-300 hover:text-white transition",children:[a.jsx("span",{className:"w-3 h-3 rounded-full bg-blue-600"})," Caldari (Steel)"]}),a.jsxs("button",{onClick:()=>r("gallente"),className:"flex items-center gap-3 w-full text-left px-3 py-2 rounded hover:bg-white/5 text-xs text-slate-300 hover:text-white transition",children:[a.jsx("span",{className:"w-3 h-3 rounded-full bg-emerald-600"})," Gallente (Teal)"]}),a.jsxs("button",{onClick:()=>r("amarr"),className:"flex items-center gap-3 w-full text-left px-3 py-2 rounded hover:bg-white/5 text-xs text-slate-300 hover:text-white transition",children:[a.jsx("span",{className:"w-3 h-3 rounded-full bg-yellow-600"})," Amarr (Gold)"]})]})})})]}),s?a.jsxs(a.Fragment,{children:[s.navbar_char&&a.jsxs(Re,{to:"/profile",className:"flex items-center gap-3 pl-1 pr-3 py-1 rounded-full border border-slate-700/50 bg-slate-800/50 hover:bg-slate-700 hover:border-brand-500/50 transition group",children:[a.jsx("img",{src:`https://images.evetech.net/characters/${s.navbar_char.character_id}/portrait?size=64`,className:"w-8 h-8 rounded-full border border-slate-600 group-hover:border-brand-400 transition",alt:"Portrait"}),a.jsxs("div",{className:"flex flex-col text-left",children:[a.jsx("span",{className:"text-xs font-bold text-white leading-none",children:s.navbar_char.character_name}),a.jsx("span",{className:V("text-[10px] leading-none mt-0.5",s.navbar_char.is_main?"text-brand-400":"text-slate-500"),children:s.navbar_char.is_main?"MAIN":"ALT"})]})]}),a.jsxs("div",{className:"flex items-center gap-2 pl-2 border-l border-white/10 ml-2",children:[s.is_management&&a.jsx(Re,{to:"/management",className:"btn-ghost p-2",title:"Management Console",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"})})}),a.jsx("a",{href:"/auth/logout/",className:"btn-ghost text-xs font-bold uppercase tracking-wider",children:"Logout"})]})]}):a.jsx("a",{href:"/auth/login",className:"btn-primary py-1.5 text-sm",children:a.jsx("span",{children:"Log In"})})]})]})}),a.jsx("main",{className:"flex-1 relative overflow-hidden flex flex-col",id:"main-content",children:e}),a.jsx(LN,{user:s})]})},LN=({user:e})=>{const[t,n]=w.useState({});return w.useEffect(()=>{if(!e)return;const r=`${window.location.protocol==="https:"?"wss://":"ws://"}${window.location.host}/ws/user/notify/`,i=new WebSocket(r);return i.onmessage=o=>{const l=JSON.parse(o.data);l.type==="ratelimit"&&n(c=>({...c,[l.bucket]:l}))},()=>i.close()},[e]),a.jsx("div",{className:"fixed bottom-4 right-4 z-50 flex flex-col gap-2 items-end pointer-events-none",children:Object.values(t).map(s=>a.jsx(AN,{data:s},s.bucket))})},AN=({data:e})=>{const t=e.remaining/e.limit*100;let n="bg-green-500";return t<50&&(n="bg-yellow-500"),t<20&&(n="bg-red-500"),a.jsxs("div",{className:"bg-slate-900/90 backdrop-blur border border-white/10 p-2 rounded-lg shadow-xl w-48 pointer-events-auto animate-fade-in",children:[a.jsxs("div",{className:"flex justify-between items-end mb-1",children:[a.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider",children:e.bucket.toUpperCase()}),a.jsx("span",{className:"text-[10px] font-mono text-white font-bold ml-4",children:e.remaining})]}),a.jsx("div",{className:"w-full h-1.5 bg-dark-900 rounded-full overflow-hidden border border-white/10",children:a.jsx("div",{className:`h-full ${n} transition-all duration-500 ease-out shadow-[0_0_8px_rgba(255,255,255,0.2)]`,style:{width:`${t}%`}})})]})},zN=({children:e})=>{const{user:t,loading:n}=Rr(),s=Is(),r=kn();return w.useEffect(()=>{if(!n&&t)if(t.is_banned){const i=s.pathname;["/profile","/doctrines","/banned"].includes(i)||r("/banned",{replace:!0})}else s.pathname==="/banned"&&r("/",{replace:!0})},[t,n,s,r]),e},im=()=>{const{user:e,loading:t}=Rr(),[n,s]=w.useState([]),[r,i]=w.useState(!0),o=kn();return w.useEffect(()=>{fetch("/api/landing/").then(l=>l.json()).then(l=>{l.should_redirect&&l.redirect_token&&e&&o(`/fleet/${l.redirect_token}`),s(l.fleets||l.active_fleets||[]),i(!1)}).catch(l=>{console.error(l),i(!1)})},[o,e]),t||r?a.jsx("div",{className:"p-10 text-center animate-pulse text-slate-500",children:"Loading..."}):a.jsx("div",{className:"absolute inset-0 overflow-y-auto custom-scrollbar",children:a.jsxs("div",{className:"container mx-auto p-8 flex flex-col items-center justify-center text-center min-h-[80vh]",children:[a.jsx("div",{className:"mb-12 relative",children:a.jsx("div",{className:"absolute -inset-10 bg-brand-500/20 blur-[100px] rounded-full pointer-events-none"})}),e?a.jsxs("div",{className:"w-full max-w-4xl space-y-6 relative z-10",children:[a.jsxs("div",{className:"flex items-center justify-between border-b border-white/10 pb-4 mb-6",children:[a.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[a.jsx("span",{className:"text-brand-500",children:""})," Fleets"]}),a.jsxs("span",{className:"badge badge-brand",children:[n.length," Detected"]})]}),n.length>0?a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 text-left",children:n.map(l=>a.jsxs(Re,{to:`/fleet/${l.join_token}`,className:"glass-panel p-6 group hover:border-brand-500/50 transition duration-300 relative overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 bg-brand-500/0 group-hover:bg-brand-500/5 transition duration-500"}),a.jsxs("div",{className:"flex justify-between items-start mb-4 relative z-10",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-bold text-white group-hover:text-brand-400 transition",children:l.name}),a.jsxs("p",{className:"text-sm text-slate-400 mt-1",children:["FC: ",a.jsx("span",{className:"text-slate-200 font-semibold",children:l.fc_name})]})]}),a.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500 animate-pulse shadow-[0_0_10px_rgba(34,197,94,0.6)]"})]}),a.jsxs("div",{className:"flex justify-between items-center relative z-10 mt-6",children:[a.jsxs("span",{className:"badge badge-slate flex items-center gap-1",children:[a.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),new Date(l.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),a.jsxs("span",{className:"text-brand-400 text-sm font-bold flex items-center gap-1 opacity-0 group-hover:opacity-100 transition transform translate-x-2 group-hover:translate-x-0",children:["Join Fleet ",a.jsx("span",{className:"text-lg",children:""})]})]})]},l.id))}):a.jsxs("div",{className:"glass-panel p-12 flex flex-col items-center justify-center text-slate-500 border-dashed border-2 border-slate-800 bg-transparent",children:[a.jsx("div",{className:"text-5xl mb-4 grayscale opacity-30",children:""}),a.jsx("h3",{className:"text-xl font-bold text-slate-400",children:"No Fleets Active"}),a.jsx("p",{className:"mt-2 text-sm",children:"Stand by for pings on Discord."})]})]}):a.jsx("div",{className:"max-w-xl mx-auto space-y-8 relative z-10",children:a.jsxs("div",{className:"glass-panel p-8 border-brand-500/20",children:[a.jsxs("p",{className:"text-slate-300 mb-8 leading-relaxed",children:["Authentication is required to access fleet services. ",a.jsx("br",{}),"Please log in using your primary EVE Online character."]}),a.jsx("div",{className:"flex justify-center",children:a.jsxs(Re,{to:"/auth/login",className:"btn-primary py-4 px-12 text-lg rounded-xl flex items-center gap-2",children:[a.jsx(Jh,{size:24}),"Log In with SSO"]})})]})})]})})},FN=()=>{const[e,t]=w.useState([]),[n,s]=w.useState([]),[r,i]=w.useState(new Set),[o,l]=w.useState(!0),[c,d]=w.useState(!1);kn();const[u]=$h(),h=u.get("mode"),f=g=>{let y=null;if(document.cookie&&document.cookie!==""){const x=document.cookie.split(";");for(let m=0;m<x.length;m++){const v=x[m].trim();if(v.substring(0,g.length+1)===g+"="){y=decodeURIComponent(v.substring(g.length+1));break}}}return y};w.useEffect(()=>{const g=h?`/auth/login-options/?mode=${h}`:"/auth/login-options/";fetch(g).then(y=>y.json()).then(y=>{t(y.base_scopes||[]),s(y.optional_scopes||[]),y.preselected_scopes&&i(new Set(y.preselected_scopes)),l(!1)}).catch(y=>{console.error("Failed to load scopes",y),l(!1)})},[h]);const p=g=>{d(!0);let y=[];g&&(y=Array.from(r)),fetch("/auth/login-options/",{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":f("csrftoken")},body:JSON.stringify({scopes:y,mode:h})}).then(x=>x.json()).then(x=>{x.redirect_url?window.location.href=x.redirect_url:(d(!1),alert("Failed to get login URL"))}).catch(x=>{console.error(x),d(!1)})},b=g=>{const y=new Set(r);y.has(g)?y.delete(g):y.add(g),i(y)};return o?a.jsx("div",{className:"min-h-screen flex items-center justify-center text-slate-500 animate-pulse",children:"Loading login options..."}):a.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:a.jsxs("div",{className:"glass-panel w-full max-w-2xl p-0 overflow-hidden relative flex flex-col max-h-[85vh]",children:[a.jsxs("div",{className:"p-8 bg-gradient-to-br from-brand-900/50 to-transparent border-b border-white/5 shrink-0",children:[a.jsxs("h1",{className:"text-3xl font-bold text-white flex items-center gap-3",children:[a.jsx(ic,{className:"text-brand-500",size:32}),"Login Configuration"]}),a.jsx("p",{className:"text-slate-400 mt-2",children:"Customize the permissions you grant to this application."})]}),a.jsxs("div",{className:"p-8 space-y-8 overflow-y-auto custom-scrollbar flex-1",children:[a.jsxs("div",{children:[a.jsxs("h3",{className:"text-sm font-bold text-slate-300 uppercase tracking-wider mb-4 flex items-center gap-2",children:[a.jsx("span",{className:"w-2 h-2 rounded-full bg-brand-500"}),"Required Permissions"]}),a.jsx("div",{className:"space-y-3",children:e.map(g=>a.jsxs("div",{className:"flex items-start gap-3 p-1.5 rounded-lg bg-white/5 border border-white/5 opacity-75 cursor-not-allowed",children:[a.jsx("div",{className:"mt-0.5 text-brand-500",children:a.jsx(Pu,{size:18,fill:"currentColor",className:"text-black"})}),a.jsxs("div",{children:[a.jsx("div",{className:"font-bold text-slate-300 text-sm",children:g.label}),a.jsx("div",{className:"text-xs text-slate-500",children:g.description})]})]},g.scope))})]}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-sm font-bold text-slate-300 uppercase tracking-wider mb-4 flex items-center gap-2",children:[a.jsx("span",{className:"w-2 h-2 rounded-full bg-blue-500"}),"Optional Permissions"]}),a.jsx("div",{className:"grid grid-cols-1 gap-3",children:n.map(g=>a.jsxs("label",{className:"flex items-start gap-3 p-1.5 rounded-lg bg-white/5 border border-white/5 hover:bg-white/10 hover:border-white/20 transition cursor-pointer group",children:[a.jsxs("div",{className:"relative flex items-center mt-0.5",children:[a.jsx("input",{type:"checkbox",className:"peer appearance-none w-5 h-5 rounded border border-slate-600 bg-black checked:bg-blue-500 checked:border-blue-500 transition",checked:r.has(g.scope),onChange:()=>b(g.scope)}),a.jsx(Pu,{size:14,className:"absolute inset-0 m-auto text-white pointer-events-none opacity-0 peer-checked:opacity-100"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"font-bold text-slate-300 group-hover:text-white text-sm transition",children:g.label}),a.jsx("div",{className:"text-xs text-slate-500",children:g.description})]})]},g.scope))})]})]}),a.jsxs("div",{className:"p-6 bg-black/20 border-t border-white/5 flex flex-col sm:flex-row gap-4 justify-between items-center shrink-0",children:[a.jsx("button",{onClick:()=>p(!1),disabled:c,className:"text-slate-400 hover:text-white text-sm font-bold px-4 py-2 rounded hover:bg-white/5 transition",children:"Login with Base Only"}),a.jsx("button",{onClick:()=>p(!0),disabled:c,className:"btn-primary px-8 py-3 flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:c?a.jsx(a.Fragment,{children:"Connecting to EVE SSO..."}):a.jsxs(a.Fragment,{children:[a.jsx(Jh,{size:18}),"Login with Selected"]})})]})]})})},IN=()=>{const[e,t]=w.useState([]),[n,s]=w.useState(!0),[r,i]=w.useState(""),[o,l]=w.useState(null),[c,d]=w.useState(!1);w.useEffect(()=>{fetch("/api/doctrines/").then(p=>p.json()).then(p=>{t(p),s(!1)}).catch(p=>{console.error(p),s(!1)})},[]);const u=p=>{d(!0),l(null),fetch(`/doctrines/api/${p}/`).then(b=>b.json()).then(b=>{l(b),d(!1)}).catch(()=>d(!1))},h=()=>l(null),f=()=>{o&&(navigator.clipboard.writeText(o.eft_format),alert("Copied to clipboard!"))};return n?a.jsx("div",{className:"p-10 text-center animate-pulse text-slate-500",children:"Loading fittings..."}):a.jsxs("div",{className:"absolute inset-0 overflow-y-auto custom-scrollbar",id:"doctrine-scroll-wrapper",children:[a.jsxs("div",{className:"container mx-auto p-4 md:p-8 pb-32",children:[a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-end gap-6 mb-8 border-b border-white/5 pb-6",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"heading-1",children:[a.jsx("span",{className:"text-brand-500",children:"Doctrine"})," Fittings"]}),a.jsx("p",{className:"text-slate-400 text-sm mt-2 font-medium",children:"Approved fleet compositions. Click on a category to expand it."})]}),a.jsxs("div",{className:"relative w-full md:w-96",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:a.jsx(is,{className:"w-5 h-5 text-slate-500"})}),a.jsx("input",{type:"text",className:"input-field pl-10",placeholder:"Search ship, fit name, or role...",value:r,onChange:p=>i(p.target.value)})]})]}),a.jsx("div",{id:"doctrine-container",className:"animate-fade-in space-y-4",children:e.map(p=>a.jsx(Wb,{category:p,searchQuery:r,onSelectFit:u},p.id))})]}),(o||c)&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-dark-950/80 backdrop-blur-sm",onClick:h,children:a.jsxs("div",{className:"relative transform rounded-xl bg-slate-900 border border-white/10 shadow-2xl w-full max-w-2xl flex flex-col max-h-[85vh] overflow-hidden",onClick:p=>p.stopPropagation(),children:[a.jsxs("div",{className:"glass-header px-4 py-3 flex justify-between items-center shrink-0 bg-slate-900/95 z-20",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[o&&a.jsxs(a.Fragment,{children:[a.jsx("img",{src:`https://images.evetech.net/types/${o.hull_id}/icon?size=64`,className:"w-10 h-10 rounded border border-white/10 bg-dark-900 shadow-lg",alt:""}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-bold text-white tracking-tight leading-none",children:o.hull}),a.jsx("p",{className:"text-xs text-brand-500 font-mono mt-1",children:o.name})]})]}),c&&a.jsx("div",{className:"text-slate-400",children:"Loading..."})]}),a.jsx("button",{onClick:h,className:"text-slate-400 hover:text-white transition p-1 hover:bg-white/5 rounded-full",children:a.jsx(ct,{size:20})})]}),o&&a.jsxs("div",{className:"flex flex-col flex-grow overflow-hidden bg-dark-950 relative",children:[a.jsxs("div",{className:"px-4 py-3 bg-slate-900/50 border-b border-white/5 shrink-0",children:[a.jsx("h4",{className:"label-text mb-1 text-[10px]",children:"Fitting Notes"}),a.jsx("p",{className:"text-xs text-slate-400 leading-relaxed whitespace-pre-wrap font-sans max-h-24 overflow-y-auto custom-scrollbar",children:o.description||"No fitting notes available."})]}),a.jsx("div",{className:"overflow-y-auto custom-scrollbar flex-grow bg-dark-950",id:"modal-slots",children:o.slots&&o.slots.length>0?o.slots.map((p,b)=>p.key==="subsystem"&&(!p.total||p.total===0)?null:a.jsxs("div",{children:[a.jsxs("div",{className:"bg-slate-900/90 backdrop-blur-sm px-4 py-1.5 border-b border-white/5 flex justify-between items-center sticky top-0 z-10",children:[a.jsx("h5",{className:"text-slate-400 text-[10px] uppercase font-bold tracking-wider",children:p.name}),p.is_hardpoint&&a.jsxs("span",{className:"text-[9px] text-slate-600 font-mono tracking-tight",children:["(",p.used,"/",p.total,")"]})]}),a.jsxs("div",{className:"px-4 py-1 space-y-px",children:[p.modules.map((g,y)=>a.jsxs("div",{className:`flex items-center gap-2 px-2 py-0.5 rounded border border-transparent hover:border-white/10 ${y%2===0?"bg-white/5":"bg-transparent"} transition-all duration-300`,children:[a.jsx("img",{src:`https://images.evetech.net/types/${g.id}/icon?size=32`,className:"w-4 h-4 rounded shadow-inner flex-shrink-0",alt:""}),a.jsx("div",{className:"flex-grow min-w-0 text-[11px]",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"font-medium text-slate-300 truncate leading-tight",children:g.name}),g.quantity>1&&a.jsxs("span",{className:"text-[9px] text-brand-400 font-mono leading-none bg-brand-900/20 px-1 rounded border border-brand-500/20",children:["x",g.quantity]})]})})]},y)),p.is_hardpoint&&Array.from({length:p.empties_count}).map((g,y)=>a.jsxs("div",{className:"flex items-center gap-2 px-2 py-0.5 opacity-30 select-none",children:[a.jsx("div",{className:"w-4 h-4 rounded bg-white/10 ml-0.5"}),a.jsx("span",{className:"text-[9px] text-slate-500 font-mono italic",children:"[Empty Slot]"})]},`empty-${y}`))]})]},b)):a.jsx("div",{className:"text-center text-slate-500 italic mt-10 p-4",children:"No module data available."})}),a.jsx("div",{className:"p-3 border-t border-white/5 bg-slate-900 shrink-0 z-20 shadow-[0_-10px_20px_rgba(0,0,0,0.3)]",children:a.jsxs("button",{onClick:f,className:"btn-primary w-full text-xs justify-center py-2 shadow-lg shadow-brand-500/10 font-bold uppercase tracking-wider flex items-center gap-2",children:[a.jsx(Qh,{size:14})," Copy EFT to Clipboard"]})})]})]})})]})},Wb=({category:e,searchQuery:t,onSelectFit:n})=>{const[s,r]=w.useState(!0),i=o=>{if(!t)return!0;const l=t.toLowerCase();return!!(o.name.toLowerCase().includes(l)||o.fits.some(c=>c.name.toLowerCase().includes(l)||c.hull.toLowerCase().includes(l))||o.subcategories.some(c=>i(c)))};return i(e)?a.jsxs("div",{className:"glass-panel overflow-hidden border border-white/5 bg-slate-900/40",children:[a.jsxs("div",{className:"p-4 flex items-center justify-between cursor-pointer hover:bg-white/5 transition border-b border-white/5",onClick:()=>r(!s),children:[a.jsxs("div",{className:"flex items-center gap-3",children:[s?a.jsx(rc,{size:16,className:"text-brand-500"}):a.jsx(Kh,{size:16,className:"text-slate-500"}),a.jsx("h2",{className:"text-lg font-bold text-slate-200 tracking-tight",children:e.name})]}),a.jsxs("span",{className:"badge badge-slate",children:[e.fits.length," Fits"]})]}),s&&a.jsxs("div",{className:"bg-black/20 p-2 space-y-2",children:[e.fits.map(o=>{const l=t.toLowerCase();return t&&!o.name.toLowerCase().includes(l)&&!o.hull.toLowerCase().includes(l)?null:a.jsx("div",{onClick:()=>n(o.id),className:"group relative overflow-hidden bg-white/5 hover:bg-brand-900/20 border border-white/5 hover:border-brand-500/30 rounded-lg p-3 cursor-pointer transition-all duration-300",children:a.jsxs("div",{className:"flex justify-between items-center relative z-10",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("img",{src:`https://images.evetech.net/types/${o.hull_id}/icon?size=64`,className:"w-10 h-10 rounded border border-white/10 bg-black/50 shadow-inner",alt:""}),a.jsxs("div",{children:[a.jsx("div",{className:"font-bold text-slate-200 group-hover:text-white transition",children:o.name}),a.jsx("div",{className:"text-xs text-slate-500 font-mono mt-0.5",children:o.hull})]})]}),a.jsx("div",{className:"flex flex-wrap gap-1 max-w-[50%] justify-end",children:o.tags&&o.tags.map(c=>a.jsx("span",{className:"badge badge-slate text-[9px]",children:c},c))})]})},o.id)}),e.subcategories.map(o=>a.jsx(Wb,{category:o,searchQuery:t,onSelectFit:n},o.id))]})]}):null},Rt=de("profile/fetchData",async(e,{rejectWithValue:t})=>{try{let n="/api/profile/";const s=e==null?void 0:e.userId,r=e==null?void 0:e.charId;s&&(n=`/api/management/users/${s}/inspect/`,r&&(n+=`${r}/`));const i=await fetch(n);if(!i.ok)throw new Error("Failed to fetch profile data");return await i.json()}catch(n){return t(n.message)}}),WN={data:null,status:"idle",error:null},$b=Sn({name:"profile",initialState:WN,reducers:{resetProfileStatus:e=>{e.status="idle"},optimisticToggleAggregate:(e,t)=>{const{character_id:n,setting:s,value:r}=t.payload;if(e.data&&e.data.characters){const i=e.data.characters.find(o=>o.character_id===n);i&&(s==="wallet"&&(i.include_wallet=r),s==="lp"&&(i.include_lp=r),s==="sp"&&(i.include_sp=r)),e.data.active_char&&e.data.active_char.character_id===n&&(s==="wallet"&&(e.data.active_char.include_wallet=r),s==="lp"&&(e.data.active_char.include_lp=r),s==="sp"&&(e.data.active_char.include_sp=r))}},optimisticBulkToggleAggregate:(e,t)=>{const{setting:n,value:s}=t.payload;e.data&&e.data.characters&&(e.data.characters.forEach(r=>{n==="wallet"&&(r.include_wallet=s),n==="lp"&&(r.include_lp=s),n==="sp"&&(r.include_sp=s)}),e.data.active_char&&(n==="wallet"&&(e.data.active_char.include_wallet=s),n==="lp"&&(e.data.active_char.include_lp=s),n==="sp"&&(e.data.active_char.include_sp=s)))}},extraReducers:e=>{e.addCase(Rt.pending,t=>{t.status="loading",t.error=null}).addCase(Rt.fulfilled,(t,n)=>{t.status="succeeded",t.data=n.payload}).addCase(Rt.rejected,(t,n)=>{t.status="failed",t.error=n.payload})}}),{resetProfileStatus:kT,optimisticToggleAggregate:am,optimisticBulkToggleAggregate:$N}=$b.actions,BN=e=>e.profile.data,HN=e=>e.profile.status,UN=$b.reducer,VN=()=>{var ba,va,ya,wa,R,ae;const e=dt(),[t]=$h(),n=t.get("user_id"),s=U(BN),r=U(tt("access_admin")),o=U(HN)==="loading"&&!s,[l,c]=w.useState("service"),[d,u]=w.useState(!1),[h,f]=w.useState(""),[p,b]=w.useState(new Set),[g,y]=w.useState(!1);kn();const{refreshUser:x}=Rr(),m={x_up:a.jsx("span",{className:"text-lg",children:""}),approved:a.jsx("span",{className:"text-lg",children:""}),invited:a.jsx("span",{className:"text-lg",children:""}),esi_join:a.jsx("span",{className:"text-lg",children:""}),left_waitlist:a.jsx("span",{className:"text-lg",children:""}),left_fleet:a.jsx("span",{className:"text-lg",children:""}),fit_update:a.jsx("span",{className:"text-lg",children:""}),ship_change:a.jsx("span",{className:"text-lg",children:""}),moved:a.jsx("span",{className:"text-lg",children:""}),promoted:a.jsx("span",{className:"text-lg",children:""}),demoted:a.jsx("span",{className:"text-lg",children:""}),kicked:a.jsx("span",{className:"text-lg",children:""}),denied:a.jsx("span",{className:"text-lg",children:""}),create:a.jsx("span",{className:"text-lg",children:""}),remove:a.jsx("span",{className:"text-lg",children:""}),update:a.jsx("span",{className:"text-lg",children:""}),expire:a.jsx("span",{className:"text-lg",children:""})},v={x_up:"X-Up",approved:"Approved",invited:"Invited",esi_join:"Detected",left_waitlist:"Left WL",left_fleet:"Left Fleet",fit_update:"Update",ship_change:"Reship",moved:"Moved",promoted:"Promoted",demoted:"Demoted",kicked:"Kicked",denied:"Denied",create:"Ban",remove:"Lift Ban",update:"Update Ban",expire:"Ban Expired"},j=Object.keys(v);w.useEffect(()=>{e(Rt({userId:n}))},[e,n]),w.useEffect(()=>{if(s&&s.active_char&&s.active_char.last_updated){const P=new Date(s.active_char.last_updated);(new Date-P)/1e3/60>5&&!s.is_inspection_mode&&!g&&!n&&N(s.active_char.character_id)}},[s,g,n]);const _=async P=>{if(n){e(Rt({userId:n,charId:P}));return}try{(await fetch(`/api/profile/switch/${P}/`,{method:"GET"})).ok&&(await x(),e(Rt()))}catch(I){console.error("Failed to switch character",I)}},N=P=>{var ge;const I=P||((ge=s==null?void 0:s.active_char)==null?void 0:ge.character_id);I&&(y(!0),fetch(`/api/refresh_profile/${I}/`,{method:"POST",headers:{"X-CSRFToken":T("csrftoken")}}).then(ht=>ht.json()).then(ht=>{ht.success?S(I):y(!1)}).catch(()=>y(!1)))},S=P=>{let I=0;const ge=setInterval(()=>{if(I++,I>30){clearInterval(ge),y(!1);return}fetch(`/api/profile/status/${P}/`).then(ht=>ht.json()).then(ht=>{s&&ht.last_updated!==s.active_char.last_updated&&(clearInterval(ge),e(Rt()),y(!1))})},2e3)},T=P=>{const I=document.cookie.match(new RegExp("(^| )"+P+"=([^;]+)"));if(I)return I[2]};if(o)return a.jsxs("div",{className:"flex items-center justify-center min-h-screen text-slate-500 gap-2",children:[a.jsx(Jn,{className:"animate-spin"})," Loading Pilot Data..."]});if(!s)return null;const{active_char:M,characters:D,esi:C,service_record:A,totals:$,is_inspection_mode:Y,token_missing:q,scopes_missing:G,obfuscate_financials:J}=s;if(!M)return a.jsx("div",{className:"flex items-center justify-center min-h-screen",children:a.jsxs("div",{className:"glass-panel p-8 text-center max-w-md",children:[a.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"No Characters Found"}),a.jsx("p",{className:"text-slate-400 mb-6",children:"You don't have any characters linked to this account."}),a.jsxs("a",{href:"/auth/add_alt",className:"btn-primary inline-flex items-center gap-2",children:[a.jsx(Sr,{size:16})," Link Character"]})]})});const z=async(P,I)=>{if(!Y){e(am({character_id:M.character_id,setting:P,value:!I}));try{const ge=await fetch("/api/profile/toggle_aggregate/",{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":T("csrftoken")},body:JSON.stringify({character_id:M.character_id,setting:P,value:!I})})}catch(ge){console.error("Failed to toggle aggregate setting",ge)}}},E=async P=>{try{(await fetch("/api/profile/toggle_xup/",{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":T("csrftoken")},body:JSON.stringify({character_id:P})})).ok&&e(Rt())}catch(I){console.error(I)}},k=async P=>{if(window.confirm("Are you sure you want to remove this character from the account?"))try{const I=s.is_inspection_mode?"/api/mgmt/unlink_alt/":"/api/profile/unlink/",ge=await fetch(I,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":T("csrftoken")},body:JSON.stringify({character_id:P})});ge.ok&&((await ge.json()).new_active_id?(await x(),e(Rt())):(e(Rt()),x()))}catch(I){console.error(I)}},O=async P=>{try{(await fetch(`/api/profile/make_main/${P}/`,{method:"POST",headers:{"X-CSRFToken":T("csrftoken")}})).ok&&(e(Rt()),x())}catch(I){console.error(I)}},L=async(P,I)=>{e($N({setting:P,value:!I}));try{await fetch("/api/profile/toggle_aggregate/bulk/",{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":T("csrftoken")},body:JSON.stringify({setting:P,value:!I})})}catch(ge){console.error(ge)}},H=async(P,I,ge)=>{e(am({character_id:P,setting:I,value:!ge}));try{await fetch("/api/profile/toggle_aggregate/",{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":T("csrftoken")},body:JSON.stringify({character_id:P,setting:I,value:!ge})})}catch(ht){console.error(ht)}},Q=((A==null?void 0:A.history_logs)||[]).filter(P=>p.size===0||p.has(P.action)),Z=D.filter(P=>h===""||P.character_name.toLowerCase().includes(h.toLowerCase())||(P.corporation_name||"").toLowerCase().includes(h.toLowerCase())),ee=D.every(P=>P.include_wallet),ut=D.every(P=>P.include_lp),Ws=D.every(P=>P.include_sp);return a.jsxs("div",{className:"absolute inset-0 overflow-y-auto custom-scrollbar",children:[a.jsxs("div",{className:"container mx-auto p-4 md:p-8 relative",children:[Y&&a.jsx("div",{className:"absolute top-0 left-0 w-full bg-blue-600/90 text-white text-xs font-bold px-2 py-0.5 z-50 text-center backdrop-blur",children:"READ-ONLY INSPECTION MODE"}),a.jsxs("div",{className:"glass-panel mb-8 relative overflow-hidden flex flex-col lg:flex-row",children:[a.jsxs("div",{className:"w-full lg:w-auto lg:flex-1 lg:min-w-0 p-6 border-b lg:border-b-0 lg:border-r border-white/5 relative flex flex-col justify-center",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[" Pilots ",a.jsx("span",{className:"badge badge-slate",children:D.length})]}),!Y&&a.jsxs("a",{href:"/auth/login?mode=add_alt",className:"btn-primary text-xs px-3 py-1.5 shadow-lg shadow-brand-500/20 inline-flex items-center gap-2",children:[a.jsx(Sr,{size:14})," Link Alt"]})]}),a.jsxs("div",{className:"flex flex-wrap gap-4",children:[D.filter(P=>P.is_main).map(P=>a.jsx(om,{char:P,isActive:P.character_id===M.character_id,onClick:()=>_(P.character_id),isInspection:Y},P.character_id)),!M.is_main&&a.jsx(om,{char:M,isActive:!0,isInspection:Y})]}),D.length>1&&a.jsxs("div",{className:"flex flex-wrap gap-2 items-center pt-2 border-t border-white/5 mt-4",children:[a.jsx("span",{className:"text-[10px] font-bold text-slate-600 uppercase tracking-wider mr-1",children:"Recent"}),D.filter(P=>!P.is_main&&P.character_id!==M.character_id).slice(0,8).map(P=>a.jsxs("button",{onClick:()=>_(P.character_id),className:"flex items-center gap-2 p-1 pr-3 rounded-lg border border-white/5 bg-white/5 hover:bg-white/10 hover:border-white/20 transition group",title:P.character_name,children:[a.jsx("img",{src:`https://images.evetech.net/characters/${P.character_id}/portrait?size=32`,className:"w-6 h-6 rounded border border-slate-600 group-hover:border-slate-400 transition",alt:""}),a.jsx("div",{className:"text-xs font-bold text-slate-400 group-hover:text-white truncate max-w-[80px]",children:P.character_name})]},P.character_id)),D.length>1&&a.jsxs("button",{onClick:()=>u(!0),className:"ml-auto btn-secondary text-[10px] px-2 py-1 h-8 border-white/10 hover:border-white/30 text-slate-400 hover:text-white flex items-center gap-1",children:[a.jsx(is,{size:12})," All Pilots"]})]})]}),a.jsxs("div",{className:"w-full lg:w-96 flex-shrink-0 p-6 bg-black/20 flex flex-col justify-center border-t lg:border-t-0 border-white/5",children:[a.jsxs("h3",{className:"label-text mb-4 pb-2 border-b border-white/5 flex items-center gap-2",children:[a.jsx("span",{children:""})," Account Aggregate"]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx(Ba,{label:"Total Pilots",value:D.length,badge:!0}),a.jsx(Ba,{label:"Total Skillpoints",value:(ba=$.sp)==null?void 0:ba.toLocaleString(),highlight:"brand"}),a.jsx(Ba,{label:"Total Wealth",value:`${(va=$.wallet)==null?void 0:va.toLocaleString()} ISK`,highlight:"green",obfuscated:J}),a.jsx(Ba,{label:"Concord LP",value:`${(ya=$.lp)==null?void 0:ya.toLocaleString()} LP`,highlight:"purple",obfuscated:J})]})]})]}),q&&!Y?a.jsxs("div",{className:"glass-panel p-12 text-center border-red-500/20 shadow-red-900/10 mb-8",children:[a.jsx("div",{className:"inline-block p-4 bg-red-900/20 rounded-full mb-4 border border-red-900/50",children:a.jsx("span",{className:"text-4xl",children:""})}),a.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Authorization Required"}),a.jsxs("p",{className:"text-slate-400 max-w-lg mx-auto mb-8 text-lg",children:["The EVE Online authorization token for ",a.jsx("strong",{className:"text-white",children:M.character_name})," has expired or is missing."]}),a.jsxs("a",{href:"/auth/add_alt/",className:"btn-primary bg-red-600 hover:bg-red-500 border-red-500 shadow-red-900/20 inline-flex items-center gap-2",children:[a.jsx(wN,{size:16})," Re-Authorize Character"]})]}):a.jsxs("div",{className:"glass-panel mb-8 relative overflow-hidden flex flex-col lg:flex-row",children:[a.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-brand-500 via-brand-400 to-brand-600"}),a.jsx("div",{className:"p-6 flex-grow border-b lg:border-b-0 lg:border-r border-white/5",children:a.jsxs("div",{className:"flex flex-col md:flex-row gap-6 h-full items-start",children:[a.jsxs("div",{className:"flex flex-col items-center md:items-start min-w-[140px]",children:[a.jsx("img",{src:`https://images.evetech.net/characters/${M.character_id}/portrait?size=128`,className:"w-28 h-28 rounded-lg border-2 border-white/10 shadow-2xl mb-2",alt:""}),a.jsx("h1",{className:"text-xl font-bold text-white text-center md:text-left leading-tight",children:M.character_name}),a.jsxs("div",{className:"text-[10px] text-slate-500 mt-1 mb-2 flex items-center gap-1",children:["Updated: ",a.jsx("span",{id:"last-updated-time",children:M.last_updated?new Date(M.last_updated).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"Never"}),g&&a.jsxs("span",{className:"text-brand-400 animate-pulse flex items-center gap-1 ml-1",children:[a.jsx(Jn,{size:10,className:"animate-spin"})," Syncing..."]})]}),!Y&&!g&&a.jsxs("button",{onClick:()=>N(),className:"text-[10px] btn-secondary py-1 px-2 border-slate-700 text-slate-400 hover:text-white",children:[a.jsx(Jn,{size:10,className:"mr-1"})," Refresh"]}),G&&!Y&&a.jsxs("a",{href:"/auth/login?mode=fc_auth",className:"flex items-center gap-1 text-[10px] bg-amber-500/10 text-amber-400 border border-amber-500/30 px-2 py-1 rounded hover:bg-amber-500/20 transition cursor-pointer font-bold mt-2",title:"Fleet Command scopes are missing. Click to add them.",children:[a.jsx("span",{children:""})," Add FC Scopes"]})]}),a.jsxs("div",{className:"flex-grow grid grid-cols-1 sm:grid-cols-2 gap-3 w-full text-sm",children:[a.jsx(Ha,{label:"Corporation",value:M.corporation_name||"Unknown"}),a.jsx(Ha,{label:"Alliance",value:M.alliance_name||"-"}),a.jsx(Ha,{label:"Wallet",value:M.wallet_balance!==null?`${(wa=M.wallet_balance)==null?void 0:wa.toLocaleString()} ISK`:"Missing Scope",color:M.wallet_balance!==null?"text-green-400":"text-slate-500 italic",font:"mono",obfuscated:J,canToggle:!Y&&!M.missing_wallet_scope,includeInAggregate:M.include_wallet,onToggle:()=>z("wallet",M.include_wallet)}),a.jsx(Ha,{label:"CONCORD LP",value:M.concord_lp!==null?`${(R=M.concord_lp)==null?void 0:R.toLocaleString()} LP`:"Missing Scope",color:M.concord_lp!==null?"text-purple-400":"text-slate-500 italic",font:"mono",obfuscated:J,canToggle:!Y&&!M.missing_lp_scope,includeInAggregate:M.include_lp,onToggle:()=>z("lp",M.include_lp)}),a.jsxs("div",{className:"col-span-1 sm:col-span-2 bg-white/5 p-3 rounded-lg border border-white/5 flex items-center justify-between gap-4 group relative",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-0",children:[a.jsx("div",{className:"label-text",children:"Skill Points"}),!Y&&a.jsxs("label",{className:V("flex items-center gap-1",M.missing_sp_scope?"opacity-50 cursor-not-allowed":"cursor-pointer"),children:[a.jsx("input",{type:"checkbox",checked:M.include_sp,onChange:M.missing_sp_scope?void 0:()=>z("sp",M.include_sp),disabled:M.missing_sp_scope,className:"checkbox checkbox-xs rounded-sm border-white/20 bg-black/20 checked:bg-brand-500"}),a.jsx("span",{className:"text-[10px] text-slate-500 select-none",children:"Include"})]})]}),a.jsxs("div",{className:"text-brand-400 font-mono text-lg font-bold leading-tight",children:[((ae=M.total_sp)==null?void 0:ae.toLocaleString())||0," SP"]})]}),a.jsxs("div",{className:"flex items-center gap-3 text-right",children:[a.jsxs("div",{className:"overflow-hidden",children:[a.jsx("div",{className:"label-text mb-0",children:"Active Ship"}),M.current_ship_name!==null?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"text-white font-medium truncate text-xs",children:M.current_ship_name||"Unknown"}),a.jsx("div",{className:"text-[10px] text-slate-400 truncate",children:M.ship_type_name||"Unknown Hull"})]}):a.jsx("div",{className:"text-slate-500 italic text-xs",children:"Scope Missing"})]}),M.current_ship_type_id&&a.jsx("img",{src:`https://images.evetech.net/types/${M.current_ship_type_id}/icon?size=32`,className:"w-10 h-10 rounded border border-white/10",alt:""})]})]})]})]})}),a.jsxs("div",{className:"p-6 lg:w-96 bg-black/20 flex flex-col border-l border-white/5",children:[a.jsxs("div",{className:"flex justify-between items-center mb-3",children:[a.jsx("h3",{className:"label-text mb-0 flex items-center gap-2",children:" Implants"}),a.jsxs("span",{className:"text-[10px] text-slate-500",children:[C.implants.length," Active"]})]}),a.jsx("div",{className:"grid grid-cols-2 gap-1 overflow-y-auto max-h-60 custom-scrollbar",children:C.implants.length>0?C.implants.map((P,I)=>a.jsxs("div",{className:"flex items-center gap-1.5 bg-white/5 px-1.5 py-1 rounded border border-white/5 overflow-hidden hover:border-white/20 transition group",title:P.name,children:[a.jsx("img",{src:`https://images.evetech.net/types/${P.id}/icon?size=32`,className:"w-4 h-4 rounded-sm border border-white/10 opacity-80 group-hover:opacity-100 flex-shrink-0",alt:""}),a.jsx("span",{className:"text-[10px] text-slate-400 group-hover:text-slate-200 truncate leading-none",children:P.name})]},I)):a.jsx("div",{className:"col-span-2 text-slate-600 text-xs italic text-center py-2 bg-white/5 rounded border border-white/5 border-dashed",children:"No implants."})})]})]}),(!q||Y)&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"mb-6 border-b border-white/10",children:a.jsx("nav",{className:"flex space-x-8 overflow-x-auto",children:[{id:"service",label:"Service Record"},{id:"skills",label:"Current Skills"},{id:"queue",label:"Skill Queue"},{id:"history",label:"Corp History"},{id:"skill-history",label:"Skill History"}].map(P=>a.jsx("button",{onClick:()=>c(P.id),className:V("border-b-2 py-4 px-1 font-bold text-sm transition capitalize whitespace-nowrap",l===P.id?"border-brand-500 text-brand-500":"border-transparent text-slate-400 hover:text-white"),children:P.label},P.id))})}),a.jsxs("div",{className:"min-h-[400px]",children:[l==="service"&&a.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[a.jsxs("div",{className:"lg:w-80 space-y-6 flex-shrink-0",children:[a.jsxs("div",{className:"glass-panel p-6 bg-gradient-to-br from-slate-900 to-black/50 border-brand-500/20",children:[a.jsxs("h3",{className:"label-text text-brand-500 flex items-center gap-2",children:["Total Time in Fleet",A.active_session_start&&a.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse shadow-[0_0_8px_rgba(34,197,94,0.8)]"})]}),a.jsxs("div",{className:"text-4xl font-mono font-bold text-white mt-2",children:[A.total_hours,a.jsx("span",{className:"text-sm text-slate-500 ml-1",children:"hrs"})]}),a.jsx("div",{className:"w-full bg-dark-900/50 h-1 mt-4 rounded-full overflow-hidden",children:a.jsx("div",{className:"bg-brand-500 h-full w-full opacity-80"})})]}),a.jsxs("div",{className:"glass-panel p-6",children:[a.jsx("h3",{className:"label-text mb-4",children:"Hull Breakdown"}),a.jsxs("div",{className:"space-y-3",children:[A.hull_breakdown.map((P,I)=>a.jsxs("div",{className:"group",children:[a.jsxs("div",{className:"flex justify-between items-end mb-1",children:[a.jsx("span",{className:"text-sm font-bold text-slate-300 group-hover:text-white transition",children:P.name}),a.jsxs("span",{className:"text-xs font-mono text-slate-500",children:[(P.seconds/3600).toFixed(1),"h"]})]}),a.jsx("div",{className:"w-full bg-white/5 h-1.5 rounded-full overflow-hidden",children:a.jsx("div",{className:"bg-blue-500 h-full rounded-full opacity-60 group-hover:opacity-100 transition",style:{width:`${P.seconds/A.total_seconds*100}%`}})})]},I)),A.hull_breakdown.length===0&&a.jsx("p",{className:"text-xs text-slate-500 italic",children:"No hull data recorded."})]})]})]}),a.jsxs("div",{className:"flex-grow glass-panel overflow-hidden flex flex-col",children:[a.jsxs("div",{className:"p-4 bg-white/5 border-b border-white/5 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[a.jsx("h3",{className:"font-bold text-white",children:"Recent Activity"}),a.jsxs("div",{className:"flex flex-wrap gap-1.5 items-center",children:[a.jsx("button",{onClick:()=>b(new Set),className:"p-1 rounded border border-red-500/30 text-red-400 hover:bg-red-500/20",title:"Clear Filters",children:a.jsx(ct,{size:12})}),j.map(P=>a.jsxs("button",{onClick:()=>{const I=new Set(p);I.has(P)?I.delete(P):I.add(P),b(I)},className:V("px-2 py-0.5 rounded border text-[9px] uppercase font-bold transition flex items-center gap-1",p.has(P)?"bg-brand-500 text-white border-brand-400":"bg-white/5 text-slate-400 border-white/10 hover:text-white"),children:[m[P]," ",v[P]]},P))]})]}),a.jsxs("div",{className:"overflow-y-auto custom-scrollbar max-h-[600px] p-4 space-y-3",children:[Q.map((P,I)=>a.jsxs("div",{className:"flex gap-4 group",children:[a.jsxs("div",{className:"w-16 pt-1 text-right flex-shrink-0",children:[a.jsx("div",{className:"text-xs font-bold text-slate-400",children:new Date(P.timestamp).toLocaleDateString([],{month:"short",day:"numeric"})}),a.jsx("div",{className:"text-[10px] text-slate-600 font-mono",children:new Date(P.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),a.jsxs("div",{className:"flex flex-col items-center relative",children:[a.jsx("div",{className:V("w-2 h-2 rounded-full mt-1.5 z-10",YN(P.action))}),I!==Q.length-1&&a.jsx("div",{className:"w-px bg-white/5 flex-grow h-full absolute top-2 bottom-0"})]}),a.jsxs("div",{className:"flex-grow pb-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-xs font-bold text-slate-200",children:v[P.action]?v[P.action].toUpperCase():P.action.toUpperCase().replace("_"," ")}),a.jsx("span",{className:"text-[10px] bg-white/5 px-1.5 py-0.5 rounded text-slate-500 border border-white/5",children:P.actor||"SYSTEM"})]}),a.jsx("div",{className:"text-xs text-slate-500 mt-0.5 flex items-center gap-2 flex-wrap",children:P.details&&a.jsx("span",{className:"italic",children:P.details})})]})]},I)),Q.length===0&&a.jsx("div",{className:"text-center py-12 text-slate-500 italic",children:"No history found."})]})]})]}),l==="skills"&&a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[Object.entries(s.grouped_skills||{}).map(([P,I])=>a.jsxs("div",{className:"glass-panel overflow-hidden border-white/5",children:[a.jsxs("div",{className:"bg-white/5 px-4 py-2 border-b border-white/5 flex justify-between items-center",children:[a.jsx("h3",{className:"font-bold text-slate-200 text-sm",children:P}),a.jsx("span",{className:"badge badge-slate",children:I.length})]}),a.jsx("div",{className:"p-2 space-y-1",children:I.map(ge=>a.jsxs("div",{className:"flex justify-between items-center px-2 py-1.5 hover:bg-white/5 rounded group",children:[a.jsx("span",{className:"text-sm text-slate-300 group-hover:text-white transition",children:ge.name}),a.jsx("div",{className:"flex gap-[2px]",children:[1,2,3,4,5].map(ht=>a.jsx("div",{className:V("w-3 h-3 rounded-sm border border-slate-600/50",ht<=ge.level?"bg-slate-200 shadow-[0_0_5px_rgba(255,255,255,0.5)]":"bg-dark-900/50")},ht))})]},ge.id))})]},P)),Object.keys(s.grouped_skills||{}).length===0&&a.jsx("div",{className:"col-span-full text-center py-12 text-slate-500 italic",children:"No skills loaded."})]}),l==="queue"&&a.jsx("div",{className:"glass-panel overflow-hidden",children:a.jsxs("table",{className:"w-full text-sm text-left text-slate-400",children:[a.jsx("thead",{className:"text-xs uppercase bg-white/5 text-slate-300 font-bold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-4",children:"Skill"}),a.jsx("th",{className:"px-6 py-4 text-center",children:"Finished Level"}),a.jsx("th",{className:"px-6 py-4 text-right",children:"Ends"})]})}),a.jsxs("tbody",{children:[C.queue.map((P,I)=>a.jsxs("tr",{className:"border-b border-white/5 hover:bg-white/5 transition",children:[a.jsx("td",{className:"px-6 py-4 font-medium text-white",children:P.name}),a.jsx("td",{className:"px-6 py-4 flex justify-center",children:a.jsx("div",{className:"flex gap-[2px]",children:[1,2,3,4,5].map(ge=>a.jsx("div",{className:V("w-3 h-3 rounded-sm border border-slate-600/50",ge<=P.finished_level?"bg-brand-500 shadow-[0_0_5px_rgba(245,158,11,0.5)]":"bg-dark-900/50")},ge))})}),a.jsxs("td",{className:"px-6 py-4 text-slate-500 text-right",children:[new Date(P.finish_date).toLocaleDateString()," ",a.jsx("span",{className:"text-xs text-slate-600 font-mono",children:new Date(P.finish_date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]},I)),C.queue.length===0&&a.jsx("tr",{children:a.jsx("td",{colSpan:"3",className:"px-6 py-8 text-center italic",children:"No queue data."})})]})]})}),l==="history"&&a.jsxs("div",{className:"space-y-4 max-w-3xl",children:[C.history.map((P,I)=>a.jsxs("div",{className:"flex items-center gap-4 glass-panel p-4 hover:border-white/20 transition group",children:[a.jsx("img",{src:`https://images.evetech.net/corporations/${P.corporation_id}/logo?size=64`,className:"w-12 h-12 rounded-lg",alt:""}),a.jsxs("div",{children:[a.jsx("div",{className:"text-white font-bold text-lg group-hover:text-brand-400 transition",children:P.corporation_name}),a.jsxs("div",{className:"text-xs text-slate-500 flex gap-4 mt-1",children:[a.jsxs("span",{children:["Joined: ",new Date(P.start_date).toLocaleDateString()]}),a.jsxs("span",{className:"font-mono opacity-50",children:["ID: ",P.corporation_id]})]})]})]},I)),C.history.length===0&&a.jsx("p",{className:"text-slate-500",children:"No history found."})]}),l==="skill-history"&&a.jsx("div",{className:"glass-panel overflow-hidden",children:a.jsxs("table",{className:"w-full text-sm text-left text-slate-400",children:[a.jsx("thead",{className:"text-xs uppercase bg-white/5 text-slate-300 font-bold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-4",children:"Date"}),a.jsx("th",{className:"px-6 py-4",children:"Skill"}),a.jsx("th",{className:"px-6 py-4 text-center",children:"Level Change"}),a.jsx("th",{className:"px-6 py-4 text-right",children:"SP Change"})]})}),a.jsxs("tbody",{children:[C.skill_history.map((P,I)=>a.jsxs("tr",{className:"border-b border-white/5 hover:bg-white/5 transition",children:[a.jsxs("td",{className:"px-6 py-4 text-slate-500 whitespace-nowrap font-mono text-xs",children:[new Date(P.logged_at).toISOString().split("T")[0],a.jsx("span",{className:"text-slate-600 ml-1",children:new Date(P.logged_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),a.jsx("td",{className:"px-6 py-4 font-medium text-white",children:P.name}),a.jsx("td",{className:"px-6 py-4 text-center",children:P.old_level===P.new_level?a.jsx("span",{className:"text-slate-600",children:"-"}):P.new_level>P.old_level?a.jsxs("span",{className:"badge badge-green",children:[P.old_level,"  ",P.new_level]}):a.jsxs("span",{className:"badge badge-red",children:[P.old_level,"  ",P.new_level]})}),a.jsx("td",{className:"px-6 py-4 text-right font-mono",children:P.sp_diff>0?a.jsxs("span",{className:"text-green-400",children:["+",P.sp_diff.toLocaleString()]}):P.sp_diff<0?a.jsx("span",{className:"text-red-400",children:P.sp_diff.toLocaleString()}):a.jsx("span",{className:"text-slate-600",children:"0"})})]},I)),C.skill_history.length===0&&a.jsx("tr",{children:a.jsx("td",{colSpan:"4",className:"px-6 py-12 text-center text-slate-500 italic",children:"No skill changes recorded yet."})})]})]})})]})]})]}),d&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-dark-950/90 backdrop-blur-sm",onClick:()=>u(!1),children:a.jsxs("div",{className:"relative transform rounded-xl bg-slate-900 border border-white/10 shadow-2xl w-full max-w-4xl flex flex-col max-h-[85vh]",onClick:P=>P.stopPropagation(),children:[a.jsxs("div",{className:"glass-header px-6 py-4 flex flex-col gap-4 border-b border-white/5",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[a.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[a.jsx("span",{children:""})," Pilot Directory ",a.jsx("span",{className:"badge badge-slate",children:D.length})]}),a.jsxs("div",{className:"flex items-center gap-4 bg-white/5 px-3 py-1.5 rounded-lg border border-white/5 mr-8",children:[a.jsx("span",{className:"text-[10px] uppercase font-bold text-slate-500",children:"Toggle All:"}),a.jsxs("label",{className:"flex items-center gap-1.5 cursor-pointer group",title:"Toggle Wallet for All",children:[a.jsx("input",{type:"checkbox",checked:ee,onChange:()=>L("wallet",ee),disabled:Y,className:"checkbox checkbox-xs rounded-sm border-slate-600 bg-black/40 checked:bg-green-500 disabled:opacity-30 disabled:cursor-not-allowed"}),a.jsx("span",{className:"text-xs font-bold text-slate-400 group-hover:text-green-400",children:"ISK"})]}),a.jsxs("label",{className:"flex items-center gap-1.5 cursor-pointer group",title:"Toggle LP for All",children:[a.jsx("input",{type:"checkbox",checked:ut,onChange:()=>L("lp",ut),disabled:Y,className:"checkbox checkbox-xs rounded-sm border-slate-600 bg-black/40 checked:bg-purple-500 disabled:opacity-30 disabled:cursor-not-allowed"}),a.jsx("span",{className:"text-xs font-bold text-slate-400 group-hover:text-purple-400",children:"LP"})]}),a.jsxs("label",{className:"flex items-center gap-1.5 cursor-pointer group",title:"Toggle SP for All",children:[a.jsx("input",{type:"checkbox",checked:Ws,onChange:()=>L("sp",Ws),disabled:Y,className:"checkbox checkbox-xs rounded-sm border-slate-600 bg-black/40 checked:bg-brand-500 disabled:opacity-30 disabled:cursor-not-allowed"}),a.jsx("span",{className:"text-xs font-bold text-slate-400 group-hover:text-brand-400",children:"SP"})]})]}),a.jsx("button",{onClick:()=>u(!1),className:"absolute top-5 right-5 text-slate-400 hover:text-white text-xl leading-none",children:""})]}),a.jsxs("div",{className:"relative w-full",children:[a.jsx(is,{className:"absolute left-3 top-3 w-5 h-5 text-slate-500"}),a.jsx("input",{type:"text",value:h,onChange:P=>f(P.target.value),className:"w-full bg-dark-950 border border-white/10 rounded-lg py-3 pl-10 text-white placeholder-slate-500 focus:border-brand-500 outline-none",placeholder:"Filter pilots..."})]})]}),a.jsxs("div",{className:"flex-grow overflow-y-auto custom-scrollbar p-6 bg-dark-900/50",children:[a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:Z.map(P=>a.jsx(XN,{char:P,isActive:P.character_id===M.character_id,isInspection:Y,isAdmin:r,onToggleXUp:E,onMakeMain:O,onUnlink:k,onSwitch:_,onToggleAggregate:H},P.character_id))}),Z.length===0&&a.jsx("div",{className:"text-center py-12 text-slate-500 italic",children:"No pilots found."})]})]})})]})},om=({char:e,isActive:t,isInspection:n,onClick:s})=>a.jsxs("div",{onClick:t?void 0:s,className:V("relative group p-1.5 rounded-xl border flex items-center gap-3 pr-5 min-w-[200px] transition",t?"bg-gradient-to-br from-brand-500/20 to-brand-900/40 border-brand-500/50 shadow-[0_0_15px_rgba(245,158,11,0.15)] cursor-default":"bg-white/5 border-white/10 hover:bg-brand-500/10 hover:border-brand-500/50 cursor-pointer"),children:[a.jsx("img",{src:`https://images.evetech.net/characters/${e.character_id}/portrait?size=64`,className:"w-12 h-12 rounded-lg border border-brand-400/50 bg-dark-900",alt:""}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-bold text-white leading-none",children:e.character_name}),a.jsxs("div",{className:"flex gap-2 mt-1",children:[a.jsx("span",{className:V("text-[9px] font-bold px-1.5 rounded uppercase tracking-wider",e.is_main?"bg-brand-500 text-white":"bg-slate-600 text-slate-300"),children:e.is_main?"Main":"Alt"}),t&&a.jsxs("span",{className:"text-[9px] font-bold text-green-400 uppercase tracking-wider flex items-center gap-1",children:[a.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-green-400 animate-pulse"})," Active"]}),!t&&a.jsx("span",{className:"text-[9px] font-bold text-slate-500 group-hover:text-brand-300 uppercase tracking-wider transition",children:"Switch"})]})]})]}),Ba=({label:e,value:t,badge:n,highlight:s,obfuscated:r})=>a.jsxs("div",{className:"flex justify-between items-center group",children:[a.jsx("span",{className:"text-slate-400 text-sm group-hover:text-white transition",children:e}),n?a.jsx("span",{className:"badge badge-slate",children:t}):a.jsx("span",{className:V("font-mono font-bold",s==="brand"?"text-brand-400":s==="green"?"text-green-400":s==="purple"?"text-purple-400":"text-white"),children:r?a.jsx("span",{className:"blur-sm select-none",children:"******"}):t})]}),Ha=({label:e,value:t,color:n="text-slate-200",font:s="sans",obfuscated:r,canToggle:i,includeInAggregate:o,onToggle:l})=>a.jsxs("div",{className:"bg-white/5 p-3 rounded-lg border border-white/5 flex flex-col justify-center space-y-1 relative group",children:[i!==void 0&&a.jsx("div",{className:"absolute top-2 right-2 opacity-100 transition",children:a.jsxs("label",{className:V("flex items-center gap-1",i?"cursor-pointer":"opacity-50 cursor-not-allowed"),children:[a.jsx("input",{type:"checkbox",checked:!!o,onChange:i?l:void 0,disabled:!i,className:"checkbox checkbox-xs rounded-sm border-white/20 bg-black/20 checked:bg-brand-500"}),a.jsx("span",{className:"text-[10px] text-slate-500 select-none hidden sm:inline",children:"Include"})]})}),a.jsxs("div",{children:[a.jsx("div",{className:"label-text mb-0",children:e}),a.jsx("div",{className:V("font-medium truncate leading-tight pr-12",n,s==="mono"&&"font-mono"),children:r?a.jsx("span",{className:"blur-sm select-none",children:"******"}):t})]})]}),YN=e=>{switch(e){case"x_up":return"bg-brand-500";case"approved":return"bg-green-500";case"esi_join":return"bg-blue-500";case"invited":return"bg-green-400";case"left_fleet":return"bg-red-500";case"ship_change":return"bg-purple-500";case"denied":return"bg-red-600";case"create":return"bg-red-600";case"remove":return"bg-green-600";case"update":return"bg-yellow-500";case"expire":return"bg-slate-500";default:return"bg-slate-600"}},XN=Ol.memo(({char:e,isActive:t,isInspection:n,isAdmin:s,onToggleXUp:r,onMakeMain:i,onUnlink:o,onSwitch:l,onToggleAggregate:c})=>{var d,u;return a.jsxs("div",{className:"relative group flex flex-col p-3 rounded-xl border border-white/5 bg-white/5 hover:bg-white/10 transition",children:[a.jsx("div",{className:"absolute -top-2 -left-2 z-20 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:a.jsx("button",{onClick:h=>{h.stopPropagation(),r(e.character_id)},disabled:n,className:V("w-8 h-8 rounded-full flex items-center justify-center shadow-lg border transition transform hover:scale-110",n?"opacity-30 cursor-not-allowed":"",e.x_up_visible?"bg-brand-500 text-white border-brand-400":"bg-slate-800 text-slate-500 border-slate-600 hover:bg-slate-700 hover:text-slate-300"),title:e.x_up_visible?"Visible in X-Up":"Hidden from X-Up",children:a.jsx(CN,{size:14,fill:e.x_up_visible?"currentColor":"none"})})}),a.jsx("div",{className:"absolute -top-2 -right-2 z-20 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:a.jsx("button",{onClick:h=>{h.stopPropagation(),i(e.character_id)},disabled:e.is_main||n,className:V("w-8 h-8 rounded-full flex items-center justify-center shadow-lg border transition transform",n?"opacity-30 cursor-not-allowed":"",e.is_main?"bg-brand-500 text-white border-brand-400 cursor-default":"bg-slate-800 text-slate-500 border-slate-600 hover:bg-slate-700 hover:text-brand-400 hover:scale-110"),title:e.is_main?"Current Main":"Make Main",children:a.jsx(xN,{size:14,fill:e.is_main?"currentColor":"none"})})}),s&&a.jsx("div",{className:"absolute -bottom-2 -right-2 z-20 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:a.jsx("button",{onClick:h=>{h.stopPropagation(),o(e.character_id)},className:"w-8 h-8 rounded-full bg-red-900/90 text-red-400 border border-red-500/50 flex items-center justify-center shadow-lg hover:bg-red-600 hover:text-white hover:border-red-400 transition transform hover:scale-110",title:"Remove from Account (Admin Only)",children:a.jsx(ct,{size:16})})}),a.jsxs("div",{className:"flex items-center gap-3 cursor-pointer mb-3",onClick:()=>l(e.character_id),children:[a.jsxs("div",{className:"relative",children:[a.jsx("img",{src:`https://images.evetech.net/characters/${e.character_id}/portrait?size=64`,className:"w-12 h-12 rounded-lg border border-white/10 bg-black group-hover:border-white/30 transition",alt:""}),t&&a.jsx("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-green-500 border-2 border-slate-900 rounded-full"})]}),a.jsxs("div",{className:"flex-grow min-w-0",children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsx("h4",{className:"font-bold text-slate-200 group-hover:text-white truncate transition",children:e.character_name}),e.is_main&&a.jsx("span",{className:"text-[9px] font-bold text-brand-400 bg-brand-900/20 px-1.5 py-0.5 rounded border border-brand-500/20 uppercase",children:"Main"})]}),a.jsx("div",{className:"text-xs text-slate-500 truncate mt-0.5",children:e.corporation_name||"Unknown Corp"}),a.jsxs("div",{className:"mt-2 text-[10px] font-mono grid grid-cols-2 gap-1 border-t border-white/5 pt-1",children:[a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"text-slate-600 text-[9px] uppercase",children:"Wallet"}),a.jsx("span",{className:V(e.wallet_balance!==null?"text-green-400":"text-slate-600 italic"),children:e.wallet_balance!==null?(d=e.wallet_balance)==null?void 0:d.toLocaleString():"N/A"})]}),a.jsxs("div",{className:"flex flex-col text-right",children:[a.jsx("span",{className:"text-slate-600 text-[9px] uppercase",children:"LP"}),a.jsx("span",{className:V(e.concord_lp!==null?"text-purple-400":"text-slate-600 italic"),children:e.concord_lp!==null?(u=e.concord_lp)==null?void 0:u.toLocaleString():"N/A"})]})]})]})]}),a.jsxs("div",{className:"mt-auto pt-2 border-t border-white/5 flex justify-between items-center px-4",children:[a.jsxs("label",{className:"flex items-center gap-1.5 cursor-pointer opacity-70 hover:opacity-100 transition",title:"Include Wallet",children:[a.jsx("input",{type:"checkbox",checked:e.include_wallet,onChange:()=>c(e.character_id,"wallet",e.include_wallet),disabled:e.missing_wallet_scope||n,className:"checkbox checkbox-xs rounded-sm border-white/20 bg-black/20 checked:bg-green-500 disabled:opacity-30 disabled:cursor-not-allowed"}),a.jsx("span",{className:"text-[10px] font-bold text-slate-400",children:"ISK"})]}),a.jsxs("label",{className:"flex items-center gap-1.5 cursor-pointer opacity-70 hover:opacity-100 transition",title:"Include LP",children:[a.jsx("input",{type:"checkbox",checked:e.include_lp,onChange:()=>c(e.character_id,"lp",e.include_lp),disabled:e.missing_lp_scope||n,className:"checkbox checkbox-xs rounded-sm border-white/20 bg-black/20 checked:bg-purple-500 disabled:opacity-30 disabled:cursor-not-allowed"}),a.jsx("span",{className:"text-[10px] font-bold text-slate-400",children:"LP"})]}),a.jsxs("label",{className:"flex items-center gap-1.5 cursor-pointer opacity-70 hover:opacity-100 transition",title:"Include SP",children:[a.jsx("input",{type:"checkbox",checked:e.include_sp,onChange:()=>c(e.character_id,"sp",e.include_sp),disabled:e.missing_sp_scope||n,className:"checkbox checkbox-xs rounded-sm border-white/20 bg-black/20 checked:bg-brand-500 disabled:opacity-30 disabled:cursor-not-allowed"}),a.jsx("span",{className:"text-[10px] font-bold text-slate-400",children:"SP"})]})]})]})}),W=async(e,t={})=>{const n=await fetch(e,t);if(n.status===403)throw window.location.href="/access_denied",new Error("Access Denied (403)");return n},ur=de("fleet/fetchList",async(e,{rejectWithValue:t})=>{try{return await(await W("/api/management/fleets/")).json()}catch(n){return t(n.message)}}),wo=de("fleet/create",async(e,{rejectWithValue:t})=>{var n;try{const s=(n=document.cookie.match(/csrftoken=([^;]+)/))==null?void 0:n[1],r={...e,fleet_name:e.name},o=await(await W("/api/management/fleets/create_structured/",{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":s},body:JSON.stringify(r)})).json();if(o.success)return o;throw new Error(o.error||"Creation failed")}catch(s){return t(s.message)}}),qN=de("fleet/close",async(e,{dispatch:t,rejectWithValue:n})=>{var s;try{const r=(s=document.cookie.match(/csrftoken=([^;]+)/))==null?void 0:s[1],o=await(await W("/api/management/fleets/",{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":r},body:JSON.stringify({action:"close",fleet_id:e})})).json();if(o.success)return t(ur()),o;throw new Error(o.error)}catch(r){return n(r.message)}}),GN=de("fleet/delete",async(e,{dispatch:t,rejectWithValue:n})=>{var s;try{const r=(s=document.cookie.match(/csrftoken=([^;]+)/))==null?void 0:s[1],o=await(await W("/api/management/fleets/",{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":r},body:JSON.stringify({action:"delete",fleet_id:e})})).json();if(o.success)return t(ur()),o;throw new Error(o.error)}catch(r){return n(r.message)}}),jo=de("fleet/fetchSettings",async(e,{rejectWithValue:t})=>{try{return await(await W(`/api/management/fleets/${e}/settings/`)).json()}catch(n){return t(n.message)}}),_o=de("fleet/updateSettings",async({token:e,payload:t},{rejectWithValue:n})=>{var s;try{const r=(s=document.cookie.match(/csrftoken=([^;]+)/))==null?void 0:s[1],o=await(await W(`/api/management/fleets/${e}/update_settings/`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":r},body:JSON.stringify(t)})).json();if(o.success)return o;throw new Error(o.error)}catch(r){return n(r.message)}}),Bb=de("fleet/linkEsi",async(e,{rejectWithValue:t})=>{var n;try{const s=(n=document.cookie.match(/csrftoken=([^;]+)/))==null?void 0:n[1],i=await(await W(`/api/management/fleets/${e}/link_esi/`,{method:"POST",headers:{"X-CSRFToken":s}})).json();if(i.success)return i;throw new Error(i.error)}catch(s){return t(s.message)}}),KN=de("fleet/closeByToken",async(e,{rejectWithValue:t})=>{var n;try{const s=(n=document.cookie.match(/csrftoken=([^;]+)/))==null?void 0:n[1],i=await(await W(`/api/management/fleets/${e}/close/`,{method:"POST",headers:{"X-CSRFToken":s}})).json();if(i.success)return i;throw new Error(i.error)}catch(s){return t(s.message)}}),Hb=de("fleet/takeOver",async(e,{rejectWithValue:t})=>{var n;try{const s=(n=document.cookie.match(/csrftoken=([^;]+)/))==null?void 0:n[1],i=await(await W(`/api/management/fleets/${e}/take_over/`,{method:"POST",headers:{"X-CSRFToken":s}})).json();if(i.success)return i;throw new Error(i.error||i.message)}catch(s){return t(s.message)}}),No=de("fleet/fetchHistory",async(e,{rejectWithValue:t})=>{try{return await(await W(`/api/management/fleets/${e}/history/`)).json()}catch(n){return t(n.message)}}),ko=de("fleet/fetchSetupInit",async(e,{rejectWithValue:t})=>{try{return await(await W("/api/management/fleets/setup/init/")).json()}catch(n){return t(n.message)}}),ji=de("fleet/saveTemplate",async(e,{rejectWithValue:t})=>{var n;try{const s=(n=document.cookie.match(/csrftoken=([^;]+)/))==null?void 0:n[1],i=await(await W("/api/management/fleets/templates/save/",{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":s},body:JSON.stringify(e)})).json();if(i.success)return i.template;throw new Error(i.error)}catch(s){return t(s.message)}}),_i=de("fleet/deleteTemplate",async(e,{rejectWithValue:t})=>{var n;try{const s=(n=document.cookie.match(/csrftoken=([^;]+)/))==null?void 0:n[1],i=await(await W("/api/management/fleets/templates/delete/",{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":s},body:JSON.stringify({template_id:e})})).json();if(i.success)return e;throw new Error(i.error)}catch(s){return t(s.message)}}),QN={data:null,list:[],settings:null,templates:[],setup:{fc_chars:[]},history:null,canViewAdmin:!1,status:"idle",columns:{pending:[],logi:[],dps:[],sniper:[],other:[]},overview:null,permissions:{},user_status:{},user_chars:[],loading:!1,error:null},lm=(e,t)=>{Object.keys(e).forEach(n=>{e[n]=e[n].filter(s=>s.id!==t)})},JN=(e,t)=>{const n=new Date(t.created_at).getTime();let s=e.length;for(let r=0;r<e.length;r++){const i=new Date(e[r].created_at).getTime();if(n<i){s=r;break}}e.splice(s,0,t)},tf=Sn({name:"fleet",initialState:QN,reducers:{setFleetData:(e,t)=>{e.data=t.payload.fleet,e.columns=t.payload.columns,e.permissions=t.payload.permissions,e.user_status=t.payload.user_status,e.user_chars=t.payload.user_chars||[],e.loading=!1,e.error=null},setFleetError:(e,t)=>{e.error=t.payload,e.loading=!1},setConnectionStatus:(e,t)=>{e.status=t.payload},handleWsMessage:(e,t)=>{const n=t.payload;if(n.type==="fleet_overview"){e.overview={member_count:n.member_count,summary:n.summary,hierarchy:n.hierarchy},e.error=null;return}if(n.type==="fleet_success"){e.error=null;return}if(n.type==="fleet_error"){e.error=n.error;return}if(n.type==="fleet_update"){if(n.action==="fleet_meta"&&n.data&&n.data.fleet){e.data={...e.data,...n.data.fleet},e.error&&(e.error=null);return}if(n.action==="remove"){lm(e.columns,n.entry_id);return}if((n.action==="add"||n.action==="move")&&n.data){lm(e.columns,n.entry_id);const s=n.target_col||"other";e.columns[s]&&JN(e.columns[s],n.data);return}if(n.action==="update"&&n.data){Object.keys(e.columns).forEach(s=>{const r=e.columns[s].findIndex(i=>i.id===n.entry_id);r!==-1&&(e.columns[s][r]=n.data)});return}n.data&&n.data.fleet&&(e.data=n.data.fleet,n.data.columns&&(e.columns=n.data.columns))}}},extraReducers:e=>{e.addCase("WS_CONNECTED",(t,n)=>{n.payload.channelKey==="fleet"&&(t.status="connected")}).addCase("WS_DISCONNECTED",(t,n)=>{n.payload.channelKey==="fleet"&&(t.status="disconnected")}).addCase("WS_MESSAGE_RECEIVED",(t,n)=>{n.payload.channelKey==="fleet"&&tf.caseReducers.handleWsMessage(t,{payload:n.payload.msg})}).addCase(ur.pending,t=>{t.loading=!0}).addCase(ur.fulfilled,(t,n)=>{t.loading=!1,t.list=n.payload.fleets||[],t.canViewAdmin=n.payload.can_view_admin}).addCase(ur.rejected,(t,n)=>{t.loading=!1,t.error=n.payload}).addCase(wo.pending,t=>{t.loading=!0}).addCase(wo.fulfilled,t=>{t.loading=!1}).addCase(wo.rejected,(t,n)=>{t.loading=!1,t.error=n.payload}).addCase(jo.pending,t=>{t.loading=!0}).addCase(jo.fulfilled,(t,n)=>{t.loading=!1,t.templates=n.payload.templates||[];const{templates:s,...r}=n.payload;t.settings=r}).addCase(jo.rejected,(t,n)=>{t.loading=!1,t.error=n.payload}).addCase(ko.pending,t=>{t.loading=!0}).addCase(ko.fulfilled,(t,n)=>{t.loading=!1,t.setup.fc_chars=n.payload.fc_chars||[],t.templates=n.payload.templates||[]}).addCase(ko.rejected,(t,n)=>{t.loading=!1,t.error=n.payload}).addCase(ji.pending,t=>{t.loading=!0}).addCase(ji.fulfilled,(t,n)=>{t.loading=!1;const s=t.templates.findIndex(r=>r.id===n.payload.id);s>=0?t.templates[s]=n.payload:t.templates.push(n.payload)}).addCase(ji.rejected,(t,n)=>{t.loading=!1,t.error=n.payload}).addCase(_i.pending,t=>{t.loading=!0}).addCase(_i.fulfilled,(t,n)=>{t.loading=!1,t.templates=t.templates.filter(s=>s.id!==n.payload)}).addCase(_i.rejected,(t,n)=>{t.loading=!1,t.error=n.payload}).addCase(_o.pending,t=>{t.loading=!0}).addCase(_o.fulfilled,t=>{t.loading=!1}).addCase(_o.rejected,(t,n)=>{t.loading=!1,t.error=n.payload}).addCase(Bb.fulfilled,(t,n)=>{t.settings&&t.settings.fleet&&(t.settings.fleet.esi_fleet_id=n.payload.fleet_id)}).addCase(Hb.fulfilled,(t,n)=>{t.error=null}).addCase(No.pending,t=>{t.loading=!0}).addCase(No.fulfilled,(t,n)=>{t.loading=!1,t.history=n.payload}).addCase(No.rejected,(t,n)=>{t.loading=!1,t.error=n.payload})}}),{setFleetData:ZN,setFleetError:e2,setConnectionStatus:ST}=tf.actions,t2=e=>e.fleet.data,n2=e=>e.fleet.list,s2=e=>e.fleet.settings,Ub=e=>e.fleet.templates,r2=e=>e.fleet.setup,i2=e=>e.fleet.history,a2=e=>e.fleet.canViewAdmin,o2=e=>e.fleet.columns,l2=e=>e.fleet.overview,Vb=e=>e.fleet.permissions,c2=e=>e.fleet.user_chars,ac=e=>e.fleet.loading,d2=e=>e.fleet.error,u2=e=>e.fleet.status,h2=(e,t,n)=>{const s=e.fleet.columns,r=new Set;return Object.values(s).forEach(i=>{i.forEach(o=>{o.character.id===t&&o.id!==n&&o.category&&["logi","dps","sniper"].includes(o.category)&&r.add(o.category)})}),Array.from(r)},f2=tf.reducer,nf=(e,t)=>({type:"WS_CONNECT",payload:{url:e,channelKey:t}}),Yb=e=>({type:"WS_DISCONNECT",payload:{channelKey:e}}),p2=e=>({type:"WS_CONNECTED",payload:{channelKey:e}}),m2=e=>({type:"WS_DISCONNECTED",payload:{channelKey:e}}),x2=(e,t)=>({type:"WS_MESSAGE_RECEIVED",payload:{msg:e,channelKey:t}}),g2=()=>{const e=new Map,t=new Map,n=new Map,s=new Map;return r=>i=>o=>{switch(o.type){case"WS_CONNECT":{const{url:l,channelKey:c}=o.payload;s.has(c)&&(clearTimeout(s.get(c)),s.delete(c)),t.set(c,!1),e.has(c)&&(e.get(c).close(),e.delete(c));const d=window.location.protocol==="https:"?"wss://":"ws://",u=l.startsWith("ws")?l:`${d}${window.location.host}${l}`,h=new WebSocket(u);e.set(c,h),h.onopen=()=>{r.dispatch(p2(c)),n.set(c,0)},h.onclose=()=>{if(r.dispatch(m2(c)),e.get(c)===h&&e.delete(c),!t.get(c)){const f=n.get(c)||0,p=Math.min(1e3*Math.pow(2,f),3e4);console.log(`[WS] ${c} disconnected unexpectedly. Reconnecting in ${p}ms... (Attempt ${f+1})`);const b=setTimeout(()=>{n.set(c,f+1),r.dispatch(nf(l,c))},p);s.set(c,b)}},h.onmessage=f=>{try{const p=JSON.parse(f.data);r.dispatch(x2(p,c))}catch(p){console.error("WS Parse Error",p)}};break}case"WS_DISCONNECT":{const{channelKey:l}=o.payload;t.set(l,!0),s.has(l)&&(clearTimeout(s.get(l)),s.delete(l)),e.has(l)&&(e.get(l).close(),e.delete(l));break}default:return i(o)}}},b2=({entry:e,onAction:t,onOpenEntry:n,onOpenUpdate:s})=>{var b,g;const{user:r}=Rr(),i=U(Vb),o=U(y=>h2(y,e.character.id,e.id)),l=(r==null?void 0:r.id)===e.character.user_id,c=i.is_fc,d=l||i.can_view_overview||c,[u,h]=w.useState(e.time_waiting);w.useEffect(()=>{if(e.created_at){const y=()=>{const m=new Date,v=new Date(e.created_at),j=m-v,_=Math.floor(j/6e4);h(_>0?_:0)};y();const x=setInterval(y,3e4);return()=>clearInterval(x)}else h(e.time_waiting)},[e.created_at,e.time_waiting]);const f=u>15,p=()=>{d&&n&&n(e.id)};return a.jsxs("div",{id:`entry-${e.id}`,onClick:p,className:V("glass-panel p-1 relative group transition-all duration-300 mb-0.5 border border-white/5 shadow-lg shadow-black/20",d?"cursor-pointer hover:border-brand-500/50 hover:bg-slate-800/60":"cursor-default opacity-90"),children:[a.jsxs("div",{className:"absolute top-2 right-2 flex items-center gap-2 z-10",children:[!e.can_fly&&c&&a.jsxs("div",{className:"group/skill relative",children:[a.jsx("span",{className:"badge badge-red animate-pulse cursor-help text-[9px]",children:" SKILL"}),a.jsxs("div",{className:"absolute right-0 top-full mt-1 hidden group-hover/skill:block z-50 whitespace-nowrap bg-black border border-red-500/50 rounded p-2 text-[9px] text-red-200 shadow-xl",children:[a.jsx("div",{className:"font-bold border-b border-red-500/30 mb-1 pb-1",children:"Missing Skills"}),e.missing_skills.map((y,x)=>a.jsx("div",{children:y},x))]})]}),e.tier&&c&&a.jsx("div",{className:"group/tier relative",children:a.jsx("span",{className:V("px-1.5 py-0.5 rounded text-[9px] font-bold uppercase tracking-wide border",e.tier.badge_class),style:{boxShadow:`0 0 8px ${e.tier.hex_color}30`},children:e.tier.name})}),a.jsxs("span",{className:V("text-[9px] font-mono font-bold px-1.5 py-0.5 rounded border",f?"bg-red-900/30 text-red-400 border-red-500/30":"bg-amber-900/30 text-amber-400 border-amber-500/30"),children:[u,"m"]})]}),a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("div",{className:"relative shrink-0",children:a.jsx("img",{src:`https://images.evetech.net/characters/${e.character.id}/portrait?size=64`,className:"w-8 h-8 rounded-lg border border-white/10 shadow-sm bg-black/50",alt:""})}),a.jsxs("div",{className:"flex-grow min-w-0",children:[a.jsx("div",{className:"font-bold text-sm text-slate-200 truncate group-hover:text-white transition leading-none",children:e.character.name}),a.jsx("div",{className:"text-[10px] text-slate-500 truncate mt-0.5 font-medium",children:e.character.corporation_name})]})]}),a.jsxs("div",{className:"flex items-center gap-3 bg-black/20 p-1.5 rounded-lg border border-white/5 relative group/fit",children:[a.jsx("div",{className:"relative flex-shrink-0",children:a.jsx("img",{src:`https://images.evetech.net/types/${e.hull.id}/icon?size=32`,className:"w-6 h-6 rounded border border-white/10 bg-slate-900/50",alt:""})}),a.jsxs("div",{className:"flex-grow min-w-0 pr-6",children:[a.jsx("div",{className:"text-xs font-bold text-brand-400 truncate leading-tight",children:e.hull.name}),a.jsx("div",{className:"text-[10px] text-slate-400 truncate mt-0.5 font-mono opacity-80 group-hover/fit:opacity-100 transition",children:e.fit.name})]}),o&&o.length>0&&a.jsxs("div",{className:"flex flex-col gap-1 absolute right-2 top-1/2 -translate-y-1/2 justify-center items-center h-full py-1",children:[o.includes("logi")&&a.jsx(ed,{color:"blue",label:"Logistics"}),o.includes("dps")&&a.jsx(ed,{color:"red",label:"DPS"}),o.includes("sniper")&&a.jsx(ed,{color:"green",label:"Sniper"})]})]}),a.jsxs("div",{className:"flex justify-between items-center text-[9px] text-slate-500 uppercase font-bold tracking-wider mt-1.5 px-1",children:[a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx("span",{className:"opacity-50",children:"Total"}),a.jsxs("span",{className:"text-slate-300 font-mono",children:[((b=e.display_stats)==null?void 0:b.total_hours)||0,"h"]})]}),a.jsx("div",{className:"w-px h-2 bg-white/10"}),a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx("span",{className:"opacity-50",children:"Hull"}),a.jsxs("span",{className:"text-slate-300 font-mono",children:[((g=e.display_stats)==null?void 0:g.hull_hours)||0,"h"]})]})]}),l&&a.jsxs("div",{className:"mt-1.5 pt-1.5 border-t border-white/5 grid grid-cols-2 gap-2",onClick:y=>y.stopPropagation(),children:[a.jsx("button",{onClick:()=>s(e.id),className:"bg-blue-600 hover:bg-blue-500 text-white text-[9px] py-0.5 rounded font-bold transition shadow-lg shadow-blue-500/20",children:"Update"}),a.jsx("button",{onClick:()=>t(e.id,"leave"),className:"bg-white/5 hover:bg-red-500/20 text-slate-400 hover:text-red-400 border border-white/10 hover:border-red-500/30 text-[9px] py-0.5 rounded font-bold transition",children:"Leave"})]}),c&&a.jsx("div",{className:"mt-1.5 pt-1.5 border-t border-white/5 flex gap-1.5",onClick:y=>y.stopPropagation(),children:e.status==="pending"?a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>t(e.id,"approve"),className:"flex-1 bg-green-600 hover:bg-green-500 text-white text-[9px] py-0.5 rounded font-bold transition shadow-lg shadow-green-500/20",children:"Approve"}),a.jsx("button",{onClick:()=>t(e.id,"deny"),className:"flex-1 bg-white/5 hover:bg-red-500/20 text-slate-400 hover:text-red-400 border border-white/10 hover:border-red-500/30 text-[9px] py-0.5 rounded font-bold transition",children:"Reject"})]}):a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>t(e.id,"invite"),className:"flex-1 bg-blue-600 hover:bg-blue-500 text-white text-[9px] py-0.5 rounded font-bold transition shadow-lg shadow-blue-500/20",children:"Invite"}),a.jsx("button",{onClick:()=>t(e.id,"deny"),className:"flex-1 bg-white/5 hover:bg-red-500/20 text-slate-400 hover:text-red-400 border border-white/10 hover:border-red-500/30 text-[9px] py-0.5 rounded font-bold transition",children:"Kick"})]})})]})},ed=({color:e,label:t})=>{const n={blue:"bg-blue-500 shadow-[0_0_6px_rgba(59,130,246,0.8)]",red:"bg-red-500 shadow-[0_0_6px_rgba(239,68,68,0.8)]",green:"bg-green-500 shadow-[0_0_6px_rgba(34,197,94,0.8)]"}[e]||"bg-slate-500";return a.jsxs("div",{className:"group/tooltip relative",children:[a.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${n} animate-pulse hover:scale-125 transition`}),a.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 hidden group-hover/tooltip:block z-50 whitespace-nowrap",children:a.jsxs("div",{className:"bg-slate-900 text-slate-200 text-[10px] px-2 py-1 rounded border border-white/10 shadow-xl",children:["Has ",a.jsx("strong",{children:t})," Fit"]})})]})},v2=({overview:e})=>{if(!e||!e.hierarchy)return a.jsxs("div",{className:"flex-grow overflow-y-auto p-2 custom-scrollbar flex items-center justify-center text-slate-500 opacity-50 flex-col gap-2 h-full",children:[a.jsx("div",{className:"w-6 h-6 border-2 border-slate-500 border-t-transparent rounded-full animate-spin"}),a.jsx("p",{className:"text-xs",children:"Waiting for stream..."})]});const{hierarchy:t,member_count:n}=e;return a.jsxs("div",{className:"flex-grow overflow-y-auto p-2 custom-scrollbar space-y-2 h-full",children:[a.jsxs("div",{className:"text-[10px] text-slate-500 font-bold uppercase mb-2 pl-2",children:["Fleet: ",n," Pilots"]}),t.commander&&a.jsx(ul,{member:t.commander,roleLabel:"Fleet Commander",colorClass:"text-amber-500"}),t.wings&&t.wings.map(s=>a.jsx(y2,{wing:s},s.id))]})},y2=({wing:e})=>{const[t,n]=w.useState(!1);return a.jsxs("div",{className:"mb-1",children:[a.jsxs("div",{className:"flex items-center gap-2 cursor-pointer hover:bg-white/5 p-1 rounded transition select-none group",onClick:()=>n(!t),children:[t?a.jsx(Kh,{size:12,className:"text-slate-500"}):a.jsx(rc,{size:12,className:"text-slate-500"}),a.jsx("span",{className:"text-xs font-bold text-slate-300 group-hover:text-white shrink-0",children:e.name}),t&&e.commander&&a.jsxs("div",{className:"flex items-center gap-2 ml-auto opacity-70 group-hover:opacity-100 transition mr-1",children:[a.jsx("span",{className:"text-[9px] text-slate-400 font-bold hidden sm:inline truncate max-w-[80px]",children:e.commander.name}),a.jsx("img",{src:`https://images.evetech.net/characters/${e.commander.character_id}/portrait?size=32`,className:"w-4 h-4 rounded-full border border-slate-600",alt:""})]})]}),!t&&a.jsxs("div",{className:"ml-2 pl-2 border-l border-white/5 animate-fade-in",children:[e.commander&&a.jsx(ul,{member:e.commander,roleLabel:"Wing Commander",colorClass:"text-slate-400"}),e.squads.map(s=>a.jsx(w2,{squad:s},s.id))]})]})},w2=({squad:e})=>{const[t,n]=w.useState(!1);return a.jsxs("div",{className:"mb-1",children:[a.jsxs("div",{className:"flex items-center gap-2 cursor-pointer hover:bg-white/5 p-1 rounded transition select-none group",onClick:()=>n(!t),children:[t?a.jsx(Kh,{size:12,className:"text-slate-600"}):a.jsx(rc,{size:12,className:"text-slate-600"}),a.jsx("span",{className:"text-xs font-bold text-slate-400 group-hover:text-white shrink-0",children:e.name}),t&&e.commander&&a.jsxs("div",{className:"flex items-center gap-2 ml-auto opacity-70 group-hover:opacity-100 transition mr-1",children:[a.jsx("span",{className:"text-[9px] text-slate-400 font-bold hidden sm:inline truncate max-w-[80px]",children:e.commander.name}),a.jsx("img",{src:`https://images.evetech.net/characters/${e.commander.character_id}/portrait?size=32`,className:"w-4 h-4 rounded-full border border-slate-600",alt:""})]})]}),!t&&a.jsxs("div",{className:"ml-2 pl-2 border-l border-white/5 animate-fade-in",children:[e.commander&&a.jsx(ul,{member:e.commander,roleLabel:"Squad Commander",colorClass:"text-slate-500"}),e.members.length>0&&a.jsx("div",{className:"ml-3 pl-2 border-l border-white/5 mt-1 space-y-0.5",children:e.members.map(s=>a.jsx(ul,{member:s,colorClass:"text-slate-500"},s.character_id))})]})]})},ul=({member:e,roleLabel:t,colorClass:n})=>a.jsxs("div",{className:"flex items-center justify-between p-1 hover:bg-white/5 rounded group/member",children:[a.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",children:[a.jsx("img",{src:`https://images.evetech.net/characters/${e.character_id}/portrait?size=32`,className:"w-5 h-5 rounded-full border border-white/10",alt:"",loading:"lazy"}),a.jsxs("div",{className:"flex flex-col truncate",children:[a.jsx("span",{className:V("text-[10px] font-bold leading-none",n||"text-slate-300"),children:e.name}),t&&a.jsx("span",{className:"text-[9px] text-brand-500 leading-none mt-0.5",children:t})]})]}),a.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[a.jsx("span",{className:"text-[9px] text-slate-500 group-hover/member:text-slate-300 transition truncate max-w-[100px]",children:e.ship_name}),a.jsx("img",{src:`https://images.evetech.net/types/${e.ship_type_id}/icon?size=32`,className:"w-4 h-4 rounded-sm border border-white/10",alt:"",loading:"lazy"})]})]}),j2=({isOpen:e,onClose:t,fleetToken:n})=>{const[s,r]=w.useState(!1),[i,o]=w.useState(null),l=U(c2),c=async d=>{var h;d.preventDefault(),o(null),r(!0);const u=new FormData(d.target);try{const f=(h=document.cookie.match(/csrftoken=([^;]+)/))==null?void 0:h[1],b=await(await W(`/api/fleet/${n}/xup/`,{method:"POST",headers:{"X-CSRFToken":f},body:u})).json();b.success?t():o(b.error)}catch(f){o(f.message||"Network Error")}finally{r(!1)}};return e?a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-dark-950/80 backdrop-blur-sm",onClick:t,children:a.jsxs("div",{className:"bg-slate-900 border border-white/10 rounded-xl shadow-2xl flex flex-col max-h-[85vh] w-full max-w-4xl",onClick:d=>d.stopPropagation(),children:[a.jsxs("div",{className:"glass-header px-6 py-4 flex justify-between items-center shrink-0",children:[a.jsx("h3",{className:"font-bold text-white text-lg",children:"Join Waitlist"}),a.jsx("button",{onClick:t,className:"text-slate-400 hover:text-white",children:""})]}),a.jsxs("form",{onSubmit:c,id:"xup-form",className:"flex flex-col md:flex-row flex-grow overflow-hidden",children:[a.jsxs("div",{className:"p-6 md:w-1/2 flex flex-col border-b md:border-b-0 md:border-r border-white/5",children:[a.jsx("label",{className:"label-text mb-2",children:"Paste Fit(s)"}),a.jsx("div",{className:"flex-grow relative h-48 md:h-auto",children:a.jsx("textarea",{name:"eft_paste",className:"w-full h-full bg-black/30 border border-white/10 rounded-lg p-3 text-[10px] font-mono text-slate-300 focus:border-brand-500 focus:ring-1 focus:ring-brand-500/50 outline-none resize-none leading-tight",placeholder:`[Hull, Fit Name]...

Paste multiple fits to submit multiple entries at once.`,autoFocus:!0})}),i&&a.jsx("div",{className:"mt-4 p-3 bg-red-500/10 border border-red-500/20 text-red-400 text-xs rounded",children:i})]}),a.jsxs("div",{className:"p-6 md:w-1/2 bg-white/5 flex flex-col overflow-y-auto custom-scrollbar",children:[a.jsx("h4",{className:"label-text mb-4",children:"Select Pilot(s)"}),a.jsx("div",{className:"space-y-4",children:l&&l.length>0?l.map(d=>a.jsx("div",{className:"bg-black/20 rounded border border-white/5 p-3 hover:border-white/20 transition group",children:a.jsxs("label",{className:"flex items-start gap-3 cursor-pointer mb-2",children:[a.jsx("input",{type:"checkbox",name:"character_id",value:d.character_id,className:"mt-1 w-4 h-4 rounded border-slate-600 bg-slate-800 text-brand-500 focus:ring-brand-500/50 shrink-0"}),a.jsxs("div",{className:"flex-grow min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("img",{src:`https://images.evetech.net/characters/${d.character_id}/portrait?size=32`,className:"w-5 h-5 rounded-full border border-white/10",alt:""}),a.jsx("span",{className:"text-sm font-bold text-slate-200 group-hover:text-white truncate",children:d.character_name})]}),a.jsx("div",{className:"mt-2 pl-7",children:d.active_implants&&d.active_implants.length>0?a.jsx("div",{className:"grid grid-cols-2 gap-1",children:d.active_implants.map(u=>a.jsxs("div",{className:"flex items-center gap-1.5 bg-white/5 px-1.5 py-0.5 rounded border border-white/5 overflow-hidden",title:u.name,children:[a.jsx("img",{src:`https://images.evetech.net/types/${u.id}/icon?size=32`,className:"w-3 h-3 rounded-sm opacity-80 flex-shrink-0",alt:""}),a.jsx("span",{className:"text-[9px] text-slate-400 truncate leading-none",children:u.name})]},u.id))}):a.jsx("span",{className:"text-[9px] text-slate-600 italic",children:"No implants detected"})})]})]})},d.character_id)):a.jsx("div",{className:"text-slate-500 text-sm italic",children:"Loading pilots..."})})]})]}),a.jsxs("div",{className:"p-4 border-t border-white/5 bg-slate-900 flex justify-end shrink-0 gap-3",children:[a.jsx("button",{type:"button",onClick:t,className:"btn-ghost text-sm",children:"Cancel"}),a.jsx("button",{type:"submit",form:"xup-form",disabled:s,className:"btn-primary py-2 px-8 shadow-lg shadow-brand-500/20",children:s?"Submitting...":"Submit Fit(s)"})]})]})}):null},_2=({isOpen:e,onClose:t,entryId:n})=>{const[s,r]=w.useState(!1),[i,o]=w.useState(null),l=async c=>{var u;c.preventDefault(),o(null),r(!0);const d=new FormData(c.target);try{const h=(u=document.cookie.match(/csrftoken=([^;]+)/))==null?void 0:u[1],p=await(await W(`/api/fleet/entry/${n}/update/`,{method:"POST",headers:{"X-CSRFToken":h},body:d})).json();p.success?t():o(p.error)}catch(h){o(h.message)}finally{r(!1)}};return e?a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-dark-950/80 backdrop-blur-sm",onClick:t,children:a.jsxs("div",{className:"bg-slate-900 border border-white/10 rounded-xl shadow-2xl p-6 max-w-lg w-full",onClick:c=>c.stopPropagation(),children:[a.jsx("h2",{className:"heading-2 mb-1",children:"Update Fit"}),a.jsx("p",{className:"text-slate-500 text-sm mb-4",children:"Paste your updated EFT fit below. This will refresh your waitlist entry."}),a.jsxs("form",{onSubmit:l,children:[a.jsx("textarea",{name:"eft_text",rows:"8",className:"w-full bg-black/30 border border-white/10 rounded-lg p-3 text-xs font-mono text-slate-300 focus:border-brand-500 focus:ring-1 focus:ring-brand-500/50 outline-none mb-4",placeholder:"[Megathron, DPS]...",autoFocus:!0}),i&&a.jsx("div",{className:"mb-4 p-3 bg-red-500/10 border border-red-500/20 text-red-400 text-xs rounded",children:i}),a.jsxs("div",{className:"flex justify-end gap-3",children:[a.jsx("button",{type:"button",onClick:t,className:"btn-ghost text-sm",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:s,className:"btn-primary px-6 py-2",children:s?"Updating...":"Update Fit"})]})]})]})}):null},N2=({isOpen:e,onClose:t,entryId:n,isFC:s})=>{const[r,i]=w.useState(null),[o,l]=w.useState(!0),[c,d]=w.useState(null);w.useEffect(()=>{e&&n&&(l(!0),d(null),i(null),W(`/api/fleet/entry/api/${n}/`).then(f=>{if(f.status===403)throw new Error("Unauthorized Access");if(f.status===500)throw new Error("Server Error (500): Check SDE Data");if(!f.ok)throw new Error(`HTTP Error ${f.status}`);return f.json()}).then(f=>{i(f),l(!1)}).catch(f=>{d(f.message),l(!1)}))},[e,n]);const u=()=>{r!=null&&r.raw_eft&&navigator.clipboard.writeText(r.raw_eft)},h=f=>{var b;const p=(b=document.cookie.match(/csrftoken=([^;]+)/))==null?void 0:b[1];W(`/api/fleet/action/${n}/${f}/`,{method:"POST",headers:{"X-CSRFToken":p}}).then(g=>g.json()).then(g=>{g.success?t():alert("Error: "+g.error)}).catch(alert)};return e?a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-dark-950/80 backdrop-blur-sm",onClick:t,children:a.jsxs("div",{className:"bg-slate-900 border border-white/10 rounded-xl shadow-2xl w-full max-w-4xl h-[90vh] flex flex-col",onClick:f=>f.stopPropagation(),children:[a.jsxs("div",{className:"p-4 border-b border-white/10 flex justify-between items-start bg-black/20",children:[o?a.jsxs("div",{className:"animate-pulse flex items-center gap-4",children:[a.jsx("div",{className:"w-16 h-16 bg-white/5 rounded-lg"}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"h-6 w-48 bg-white/5 rounded"}),a.jsx("div",{className:"h-4 w-32 bg-white/5 rounded"})]})]}):c?a.jsxs("div",{className:"text-red-400 font-bold flex items-center gap-2",children:[a.jsx(Zn,{})," ",c]}):a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"relative",children:a.jsx("img",{src:`https://images.evetech.net/types/${r.hull_id}/icon?size=64`,className:"w-16 h-16 rounded-lg border border-white/10 bg-black/50",alt:""})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-white leading-none",children:r.character_name}),a.jsx("p",{className:"text-brand-400 text-sm mt-1 font-mono",children:r.corp_name}),a.jsxs("div",{className:"flex items-center gap-2 mt-2 text-xs text-slate-400",children:[a.jsx("span",{className:"font-bold text-slate-300",children:r.ship_name}),a.jsx("span",{className:"opacity-50",children:"|"}),a.jsx("span",{children:r.fit_name})]})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:u,className:"btn-secondary py-2 px-3 text-xs",title:"Copy EFT",children:a.jsx(Qh,{size:14})}),a.jsx("button",{onClick:t,className:"btn-secondary py-2 px-3 text-xs hover:bg-red-500/20 hover:text-red-400 hover:border-red-500/30",children:""})]})]}),a.jsx("div",{className:"flex-grow overflow-y-auto custom-scrollbar bg-slate-900/50",id:"entry-slots",children:o?a.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-slate-500 gap-4",children:[a.jsx("div",{className:"w-8 h-8 border-2 border-brand-500 border-t-transparent rounded-full animate-spin"}),a.jsx("p",{className:"font-mono text-sm animate-pulse",children:"Scanning module attributes..."})]}):c?a.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center px-6",children:[a.jsx("div",{className:"text-4xl mb-2",children:""}),a.jsx("h4",{className:"text-red-400 font-bold mb-1",children:"Analysis Failed"}),a.jsx("p",{className:"text-slate-500 text-xs",children:c})]}):a.jsx(a.Fragment,{children:r.slots&&r.slots.length>0?r.slots.map((f,p)=>a.jsx(k2,{group:f},p)):a.jsx("div",{className:"p-8 text-center text-slate-500 italic",children:"No slot data available."})})}),s&&!o&&!c&&a.jsxs("div",{className:"p-4 border-t border-white/10 bg-black/20 grid grid-cols-4 gap-4",children:[a.jsx("button",{onClick:()=>h("approve"),className:"btn-success py-3 shadow-lg shadow-green-500/10",children:"Approve"}),a.jsx("button",{onClick:()=>h("invite"),className:"btn-primary py-3 shadow-lg shadow-blue-500/10",children:"Invite"}),a.jsx("button",{onClick:()=>h("deny"),className:"btn-danger py-3",children:"Reject"}),a.jsx("button",{onClick:()=>h("remove"),className:"btn-secondary py-3 text-red-400 border-red-500/20 hover:bg-red-500/10",children:"Kick"})]})]})}):null},k2=({group:e})=>e.key==="subsystem"&&e.total===0?null:a.jsxs("div",{children:[a.jsxs("div",{className:"bg-slate-900/90 backdrop-blur-sm px-4 py-1.5 border-b border-white/5 flex justify-between items-center sticky top-0 z-10 shadow-sm",children:[a.jsx("h5",{className:"text-slate-400 text-[10px] uppercase font-bold tracking-wider",children:e.name}),e.is_hardpoint&&a.jsxs("span",{className:"text-[9px] text-slate-600 font-mono tracking-tight",children:["(",e.used,"/",e.total,")"]})]}),a.jsxs("div",{className:"px-4 py-1 space-y-px",children:[e.modules.map((t,n)=>a.jsx(S2,{mod:t,index:n,groupName:e.name},n)),e.is_hardpoint&&Array.from({length:e.empties_count}).map((t,n)=>a.jsxs("div",{className:"flex items-center gap-2 px-2 py-0.5 opacity-30 select-none",children:[a.jsx("div",{className:"w-4 h-4 rounded bg-white/10 ml-0.5"}),a.jsx("span",{className:"text-[9px] text-slate-500 font-mono italic",children:"[Empty Slot]"})]},`empty-${n}`))]})]}),S2=({mod:e,index:t,groupName:n})=>{const[s,r]=w.useState(!1),i=e.diffs&&e.diffs.length>0,l=(u=>{switch(u){case"MATCH":return{border:"border-transparent hover:border-white/10",bg:"bg-transparent",icon:null,text:"text-slate-400"};case"UPGRADE":return{border:"border-green-500/50",bg:"bg-green-500/10",icon:"UPGRADE",text:"text-green-400"};case"SIDEGRADE":return{border:"border-blue-500/50",bg:"bg-blue-500/10",icon:"SIDEGRADE",text:"text-blue-400"};case"DOWNGRADE":return{border:"border-amber-500/50",bg:"bg-amber-500/10",icon:"DOWNGRADE",text:"text-amber-400"};case"MISSING":return{border:"border-red-500/50",bg:"bg-red-500/10",icon:"MISSING",text:"text-red-400"};case"EXTRA":return{border:"border-purple-500/50",bg:"bg-purple-500/10",icon:"EXTRA",text:"text-purple-400"};default:return{border:"border-white/10",bg:"bg-transparent",icon:"?",text:"text-slate-500"}}})(e.status),c=t%2===0?"bg-white/5":"bg-transparent",d=e.status==="MATCH"?c:l.bg;return a.jsxs("div",{className:"relative group/mod",children:[a.jsxs("div",{className:V("flex items-center gap-2 px-2 py-0.5 rounded border transition-all duration-300",l.border,d,i?"cursor-pointer hover:brightness-125":""),onClick:()=>i&&r(!s),children:[a.jsx("img",{src:`https://images.evetech.net/types/${e.id}/icon?size=32`,className:"w-4 h-4 rounded shadow-inner flex-shrink-0",onError:u=>u.target.style.opacity=0,alt:""}),a.jsxs("div",{className:"flex-grow min-w-0 text-[11px]",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"font-medium text-slate-300 truncate group-hover/mod:text-white leading-tight",children:e.name}),a.jsxs("div",{className:"text-right shrink-0 ml-2 flex items-center gap-2",children:[e.quantity>1&&a.jsxs("span",{className:"text-[9px] text-brand-400 font-mono leading-none bg-brand-900/20 px-1 rounded border border-brand-500/20",children:["x",e.quantity]}),l.icon&&a.jsx("span",{className:V("text-[9px] font-bold leading-none",l.text),children:l.icon})]})]}),i&&a.jsxs("div",{className:V("text-[9px] opacity-80 leading-none mt-0.5 text-right font-mono tracking-tight",l.text),children:[e.diffs.length," flags "]}),e.status!=="MATCH"&&a.jsxs("div",{className:"text-[9px] text-slate-500 flex items-center gap-1 mt-0.5 leading-none",children:[a.jsx("span",{children:"vs"}),a.jsx("span",{className:l.text,children:e.doctrine_name||"Empty"})]})]})]}),i&&s&&a.jsx("div",{className:V("mt-0.5 ml-2 mr-2 mb-1 p-2 rounded text-[9px] font-mono border animate-fade-in shadow-inner",e.status==="DOWNGRADE"?"bg-amber-900/20 border-amber-500/30 text-amber-200":e.status==="UPGRADE"?"bg-green-900/20 border-green-500/30 text-green-200":"bg-slate-800 border-slate-700 text-slate-300"),children:e.diffs.map((u,h)=>a.jsxs("div",{className:"flex justify-between items-center mb-0.5 last:mb-0",children:[a.jsxs("span",{className:"flex items-center gap-1 opacity-80",children:[u.is_pass?"":""," ",u.attribute]}),a.jsxs("span",{className:V("text-right",u.is_pass?"text-green-400":"text-red-400"),children:[u.pilot_val," ",a.jsxs("span",{className:"opacity-50 tracking-tighter",children:["(Req: ",u.doctrine_val,")"]})]})]},h))})]})},C2=()=>{const{token:e}=Wh(),t=dt(),n=U(t2),s=U(o2),r=U(l2),i=U(Vb),o=U(ac),l=U(d2),c=U(u2),d=U(Gh),[u,h]=w.useState(!1),[f,p]=w.useState(null),[b,g]=w.useState(null);w.useEffect(()=>(W(`/api/fleet/${e}/dashboard/`).then(j=>{if(j.status===404)throw new Error("Fleet not found or you do not have access.");if(j.status===403)throw new Error("Unauthorized.");if(!j.ok)throw new Error("Failed to load fleet data.");return j.json()}).then(j=>{t(ZN(j)),t(nf(`/ws/fleet/${e}/`,"fleet"))}).catch(j=>{console.error(j),t(e2(j.message))}),()=>{t(Yb("fleet"))}),[e,t]);const y=(j,_)=>{var S;const N=(S=document.cookie.match(/csrftoken=([^;]+)/))==null?void 0:S[1];W(`/api/fleet/action/${j}/${_}/`,{method:"POST",headers:{"X-CSRFToken":N}}).then(T=>T.json()).then(T=>{T.success||alert("Error: "+T.error)}).catch(T=>alert("Network Error"))},x=()=>{confirm("Are you sure you want to take over this fleet? This will set you as the FC and attempt to link your current in-game fleet.")&&t(Hb(e))};if(o&&!n)return a.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-dark-950",children:a.jsxs("div",{className:"text-center animate-pulse",children:[a.jsx("div",{className:"text-4xl mb-4",children:""}),a.jsx("div",{className:"text-slate-400 font-mono text-sm",children:"Establishing Uplink..."})]})});if(l&&!n)return a.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-dark-950",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-4xl mb-4 text-red-500",children:""}),a.jsx("h2",{className:"text-xl font-bold text-white",children:"Connection Lost"}),a.jsx("p",{className:"text-slate-500 mt-2",children:l}),a.jsx(Re,{to:"/",className:"btn-secondary mt-6 inline-flex",children:"Return to Landing"})]})});if(!n)return null;const m=i.is_fc,v=d&&n.commander_user_id===d.id;return a.jsxs("div",{className:"absolute inset-0 flex flex-col overflow-hidden bg-dark-950 opacity-100",children:[a.jsxs("div",{className:"glass-header p-4 relative flex justify-center items-center z-20 shrink-0 min-h-[4rem]",children:[m&&a.jsxs("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 hidden md:flex items-center gap-2",children:[a.jsxs(Re,{to:`/management/fleets/${e}/history`,className:"btn-secondary py-1.5 px-3 text-xs gap-2 shadow-lg",children:[a.jsx(Lb,{size:14})," History Log"]}),a.jsxs(Re,{to:`/management/fleets/${e}/settings`,className:"btn-secondary py-1.5 px-3 text-xs gap-2 shadow-lg border-brand-500/30 text-brand-400 hover:bg-brand-500/10",children:[a.jsx(Zh,{size:14})," Manage Fleet"]})]}),a.jsxs("div",{className:"flex items-center gap-6",children:[a.jsx("div",{className:"bg-brand-500/10 p-2.5 rounded-lg border border-brand-500/20 hidden sm:block shadow-[0_0_15px_rgba(245,158,11,0.2)]",children:a.jsx("span",{className:"text-2xl",children:""})}),a.jsxs("div",{className:"text-center",children:[a.jsx("h1",{className:"heading-1 leading-none text-2xl md:text-3xl",children:n.name}),n.status&&a.jsx("div",{className:"text-lg text-slate-300 font-medium my-1",children:n.status}),a.jsxs("p",{className:"text-xs text-slate-400 mt-2 flex justify-center items-center gap-3 font-mono",children:[a.jsx("span",{className:"label-text mb-0 text-[10px]",children:"FC"}),a.jsx("span",{className:"text-white font-bold",children:n.commander_name}),n.esi_fleet_id&&a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"text-slate-600",children:"|"}),a.jsx("span",{className:"label-text mb-0 text-[10px]",children:"ID"}),a.jsx("span",{className:"text-brand-400 font-bold cursor-copy hover:text-white transition",title:"Copy Fleet ID",onClick:()=>navigator.clipboard.writeText(n.esi_fleet_id),children:n.esi_fleet_id})]}),a.jsx("span",{className:V("w-2.5 h-2.5 rounded-full transition-all duration-500",c==="connected"&&!l?"bg-green-500 shadow-green-500/50":"bg-red-500 animate-pulse"),title:l||"Live"}),m&&!v&&a.jsxs("button",{onClick:x,className:V("ml-2 text-[10px] px-2 py-0.5 rounded border flex items-center gap-1 transition-colors",l?"bg-red-500/20 hover:bg-red-500/30 text-red-400 border-red-500/30":"bg-slate-700/50 hover:bg-slate-700 text-slate-300 border-slate-600"),title:"Take Over Command",children:[a.jsx(Jn,{size:10})," Take Over"]})]})]})]}),a.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2",children:a.jsxs("button",{onClick:()=>h(!0),className:"btn-primary py-2 px-6 shadow-brand-500/20 flex items-center gap-2",children:[a.jsx(Sr,{size:18})," ",a.jsx("span",{className:"hidden md:inline",children:"X-UP"})]})})]}),a.jsx("div",{className:"flex-grow overflow-x-auto overflow-y-hidden p-4 custom-scrollbar relative",children:a.jsxs("div",{className:"flex gap-2 h-full min-w-max mx-auto w-fit",children:[a.jsx(Yr,{title:"X-UP",color:"amber",entries:s.pending,icon:Tb,isPending:!0,onAction:y,onOpenEntry:g,onOpenUpdate:p}),a.jsx(Yr,{title:"LOGI",color:"blue",entries:s.logi,icon:ic,onAction:y,onOpenEntry:g,onOpenUpdate:p}),a.jsx(Yr,{title:"DPS",color:"red",entries:s.dps,icon:mN,onAction:y,onOpenEntry:g,onOpenUpdate:p}),a.jsx(Yr,{title:"SNIPER",color:"green",entries:s.sniper,icon:Fb,onAction:y,onOpenEntry:g,onOpenUpdate:p}),a.jsx(Yr,{title:"OTHER",color:"yellow",entries:s.other,icon:cN,onAction:y,onOpenEntry:g,onOpenUpdate:p}),i.can_view_overview&&a.jsxs("div",{className:"w-80 flex flex-col glass-panel overflow-hidden h-full ml-2 border-white/10 shadow-xl bg-slate-900/90",children:[a.jsxs("div",{className:"bg-blue-600/10 border-b border-blue-500/20 p-3 flex justify-between items-center",children:[a.jsx("h3",{className:"label-text text-blue-400 mb-0",children:"Fleet Overview"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:V("w-1.5 h-1.5 rounded-full transition-colors duration-300",r?"bg-green-500":"bg-slate-500")}),a.jsx("span",{className:"text-[10px] text-slate-500 font-mono",children:r?"Live":"Syncing..."})]})]}),a.jsx(v2,{overview:r})]})]})}),a.jsx(j2,{isOpen:u,onClose:()=>h(!1),fleetToken:e}),a.jsx(_2,{isOpen:!!f,onClose:()=>p(null),entryId:f}),a.jsx(N2,{isOpen:!!b,onClose:()=>g(null),entryId:b,isFC:m})]})},Yr=({title:e,color:t,entries:n,icon:s,isPending:r,onAction:i,onOpenEntry:o,onOpenUpdate:l})=>{const c={amber:"bg-amber-600/10 border-amber-500/20 text-amber-400 border-b-amber-500",green:"bg-green-600/10 border-green-500/20 text-green-400 border-b-green-500",red:"bg-red-600/10 border-red-500/20 text-red-400 border-b-red-500",blue:"bg-blue-600/10 border-blue-500/20 text-blue-400 border-b-blue-500",yellow:"border-yellow-500/20 text-yellow-400 border-b-yellow-500"}[t]||"bg-slate-600/10 border-slate-500/20 text-slate-400";return a.jsxs("div",{className:"w-72 flex flex-col glass-panel overflow-hidden h-full shadow-xl bg-slate-900/40 backdrop-blur-md rounded-xl border border-white/10 flex-shrink-0",children:[a.jsxs("div",{className:`p-3 border-b-2 flex justify-between items-center bg-slate-900/60 rounded-t-xl ${c}`,children:[a.jsx("div",{className:"flex items-center gap-2",children:a.jsx("h3",{className:"text-sm font-bold uppercase tracking-wider text-white",children:e})}),a.jsx("span",{className:"bg-white/10 text-slate-300 text-xs font-mono px-2 py-0.5 rounded border border-white/5",children:n.length})]}),a.jsx("div",{className:"flex-grow overflow-y-auto p-1 custom-scrollbar relative",children:n.map(d=>a.jsx(b2,{entry:d,onAction:i,onOpenEntry:o,onOpenUpdate:l},d.id))})]})},E2=()=>{const e=U(Gh);return a.jsxs("div",{className:"absolute inset-0 flex items-center justify-center bg-dark-950 overflow-hidden",children:[a.jsxs("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 bg-brand-500/10 rounded-full blur-[100px]"}),a.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-96 h-96 bg-blue-600/10 rounded-full blur-[100px]"})]}),a.jsxs("div",{className:"relative z-10 max-w-md w-full p-6",children:[a.jsxs("div",{className:"glass-panel p-8 text-center border-red-500/20 shadow-2xl shadow-red-900/20 animate-fade-in",children:[a.jsxs("div",{className:"mb-6 relative inline-block",children:[a.jsx("div",{className:"absolute inset-0 bg-red-500/20 blur-xl rounded-full"}),a.jsx("div",{className:"relative bg-dark-900 p-4 rounded-full border border-red-500/30 text-4xl text-red-500",children:a.jsx(kN,{size:48})})]}),a.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:"Access Restricted"}),a.jsxs("p",{className:"text-slate-400 mb-8 leading-relaxed",children:["You do not have the required security clearance to view this resource.",a.jsx("br",{}),a.jsx("span",{className:"text-xs mt-2 block opacity-70",children:"Please authenticate your pilot credentials or contact fleet command if you believe this is an error."})]}),a.jsxs("div",{className:"flex flex-col gap-3",children:[!e&&a.jsxs("a",{href:"/auth/login",className:"btn-primary w-full py-3 justify-center text-base shadow-brand-500/20 group",children:[a.jsx("span",{className:"group-hover:scale-110 transition mr-2",children:""}),"Log In via EVE Online"]}),a.jsxs("a",{href:"/",className:"btn-secondary w-full justify-center flex items-center gap-2",children:[a.jsx(sc,{size:16})," Return to Dashboard"]})]})]}),a.jsx("div",{className:"mt-8 text-center",children:a.jsx("p",{className:"text-xs text-slate-600 font-mono",children:"SECURITY PROTOCOL 403-UNAUTHORIZED"})})]})]})},T2=()=>{var r,i,o;const{user:e}=Rr(),t=((r=e==null?void 0:e.ban)==null?void 0:r.reason)||"Restricted Access",n=(i=e==null?void 0:e.ban)==null?void 0:i.expires_at,s=(o=e==null?void 0:e.ban)==null?void 0:o.created_at;return a.jsx("div",{className:"min-h-screen flex items-center justify-center -mt-20",children:a.jsxs("div",{className:"max-w-md w-full bg-slate-800 border border-slate-700 rounded-xl shadow-2xl p-8 text-center relative overflow-hidden",children:[a.jsx("div",{className:"absolute top-0 left-0 w-full h-2 bg-red-600"}),a.jsx("div",{className:"absolute -top-10 -left-10 w-32 h-32 bg-red-600/20 rounded-full blur-3xl pointer-events-none"}),a.jsx("div",{className:"absolute -bottom-10 -right-10 w-32 h-32 bg-red-600/20 rounded-full blur-3xl pointer-events-none"}),a.jsxs("div",{className:"mb-6",children:[a.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 rounded-full bg-red-900/30 text-red-500 mb-4 ring-1 ring-red-500/50",children:a.jsx(dN,{size:40})}),a.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Account Banned"}),a.jsx("p",{className:"text-slate-400",children:"Your access to the Waitlist Dashboard has been restricted."})]}),a.jsxs("div",{className:"bg-slate-900/50 rounded-lg p-5 border border-slate-700 text-left space-y-3 mb-6",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-xs text-slate-500 uppercase tracking-wide font-bold",children:"Reason"}),a.jsx("p",{className:"text-slate-200 mt-1",children:t})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-xs text-slate-500 uppercase tracking-wide font-bold",children:"Banned On"}),a.jsx("p",{className:"text-slate-300 mt-1 text-sm",children:s?new Date(s).toLocaleDateString():"Unknown"})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-xs text-slate-500 uppercase tracking-wide font-bold",children:"Expires"}),n?a.jsx("p",{className:"text-yellow-400 mt-1 text-sm font-medium",children:new Date(n).toLocaleString()}):a.jsx("p",{className:"text-red-500 mt-1 text-sm font-bold",children:"PERMANENT"})]})]})]}),a.jsx("div",{className:"text-sm text-slate-500",children:"If you believe this is an error, please contact a Fleet Commander or Administrator on Discord."}),a.jsx("div",{className:"mt-6 pt-6 border-t border-slate-700",children:a.jsxs("a",{href:"/profile",className:"flex items-center justify-center gap-2 w-full py-2 px-4 bg-slate-700 hover:bg-slate-600 text-slate-200 rounded-lg transition-colors mb-3",children:[a.jsx(TN,{size:16})," View My Profile"]})})]})})},M2=()=>{const e=U(tt("access_management")),t=U(tt("access_fleet_command")),n=U(tt("view_srp_dashboard")),s=U(tt("manage_srp_source")),r=U(tt("inspect_pilots")),i=U(tt("manage_bans")),o=U(tt("view_ban_audit_log")),l=U(tt("manage_doctrines")),c=U(tt("manage_skill_requirements")),d=U(tt("manage_analysis_rules")),u=U(tt("access_admin")),h=e||t,f=n||s,p=r||i||o,b=l||c||d||u;return a.jsxs("div",{className:"flex flex-col md:flex-row h-full w-full overflow-hidden bg-dark-950 relative",children:[a.jsxs("aside",{className:"w-full md:w-64 bg-slate-900/60 backdrop-blur-xl border-r border-white/10 flex-shrink-0 overflow-y-auto z-20",children:[a.jsxs("div",{className:"p-6 border-b border-white/5",children:[a.jsx("h2",{className:"label-text text-brand-500",children:"Console"}),a.jsx("p",{className:"text-white font-bold text-lg tracking-tight",children:"Fleet Command"})]}),a.jsxs("nav",{className:"p-4 space-y-6",children:[h&&a.jsxs("div",{children:[a.jsx("span",{className:"px-4 text-[10px] font-bold text-slate-500 uppercase tracking-widest block mb-2",children:"Operations"}),a.jsxs("div",{className:"space-y-1",children:[e&&a.jsxs(qe,{to:"/management",end:!0,className:({isActive:g})=>V("flex items-center gap-3 px-4 py-2.5 rounded-lg transition text-sm font-medium",g?"bg-brand-500/10 text-brand-400 border border-brand-500/20":"text-slate-400 hover:text-white hover:bg-white/5"),children:[a.jsx(uN,{size:16})," Overview"]}),t&&a.jsxs(qe,{to:"/management/fleets",className:({isActive:g})=>V("flex items-center gap-3 px-4 py-2.5 rounded-lg transition text-sm font-medium",g?"bg-brand-500/10 text-brand-400 border border-brand-500/20":"text-slate-400 hover:text-white hover:bg-white/5"),children:[a.jsx(_N,{size:16})," Fleet Ops"]})]})]}),f&&a.jsxs("div",{children:[a.jsx("span",{className:"px-4 text-[10px] font-bold text-slate-500 uppercase tracking-widest block mb-2",children:"Finance"}),a.jsxs("div",{className:"space-y-1",children:[n&&a.jsxs(qe,{to:"/management/srp",end:!0,className:({isActive:g})=>V("flex items-center gap-3 px-4 py-2.5 rounded-lg transition text-sm font-medium",g?"bg-brand-500/10 text-brand-400 border border-brand-500/20":"text-slate-400 hover:text-white hover:bg-white/5"),children:[a.jsx(MN,{size:16})," SRP Dashboard"]}),s&&a.jsxs(qe,{to:"/management/srp/config",className:({isActive:g})=>V("flex items-center gap-3 px-4 py-2.5 rounded-lg transition text-sm font-medium",g?"bg-brand-500/10 text-brand-400 border border-brand-500/20":"text-slate-400 hover:text-white hover:bg-white/5"),children:[a.jsx(Zh,{size:16})," SRP Config"]})]})]}),p&&a.jsxs("div",{children:[a.jsx("span",{className:"px-4 text-[10px] font-bold text-slate-500 uppercase tracking-widest block mb-2",children:"User Mgmt"}),a.jsxs("div",{className:"space-y-1",children:[r&&a.jsxs(qe,{to:"/management/users",className:({isActive:g})=>V("flex items-center gap-3 px-4 py-2.5 rounded-lg transition text-sm font-medium",g?"bg-brand-500/10 text-brand-400 border border-brand-500/20":"text-slate-400 hover:text-white hover:bg-white/5"),children:[a.jsx(sm,{size:16})," User Database"]}),i&&a.jsxs(qe,{to:"/management/bans",end:!0,className:({isActive:g})=>V("flex items-center gap-3 px-4 py-2.5 rounded-lg transition text-sm font-medium",g?"bg-brand-500/10 text-brand-400 border border-brand-500/20":"text-slate-400 hover:text-white hover:bg-white/5"),children:[a.jsx(Zn,{size:16})," Bans"]}),o&&a.jsxs(qe,{to:"/management/bans/audit",className:({isActive:g})=>V("flex items-center gap-3 px-4 py-2.5 rounded-lg transition text-sm font-medium",g?"bg-brand-500/10 text-brand-400 border border-brand-500/20":"text-slate-400 hover:text-white hover:bg-white/5"),children:[a.jsx(tm,{size:16})," Audit Log"]}),i&&a.jsxs(qe,{to:"/management/command",className:({isActive:g})=>V("flex items-center gap-3 px-4 py-2.5 rounded-lg transition text-sm font-medium",g?"bg-brand-500/10 text-brand-400 border border-brand-500/20":"text-slate-400 hover:text-white hover:bg-white/5"),children:[a.jsx(pN,{size:16})," Command Onboarding"]})]})]}),b&&a.jsxs("div",{children:[a.jsx("span",{className:"px-4 text-[10px] font-bold text-slate-500 uppercase tracking-widest block mb-2",children:"System"}),a.jsxs("div",{className:"space-y-1",children:[l&&a.jsxs(qe,{to:"/management/doctrines",className:({isActive:g})=>V("flex items-center gap-3 px-4 py-2.5 rounded-lg transition text-sm font-medium",g?"bg-brand-500/10 text-brand-400 border border-brand-500/20":"text-slate-400 hover:text-white hover:bg-white/5"),children:[a.jsx(tm,{size:16})," Doctrines"]}),c&&a.jsxs(qe,{to:"/management/skills",className:({isActive:g})=>V("flex items-center gap-3 px-4 py-2.5 rounded-lg transition text-sm font-medium",g?"bg-brand-500/10 text-brand-400 border border-brand-500/20":"text-slate-400 hover:text-white hover:bg-white/5"),children:[a.jsx(sm,{size:16})," Skill Reqs"]}),d&&a.jsxs(qe,{to:"/management/rules",className:({isActive:g})=>V("flex items-center gap-3 px-4 py-2.5 rounded-lg transition text-sm font-medium",g?"bg-brand-500/10 text-brand-400 border border-brand-500/20":"text-slate-400 hover:text-white hover:bg-white/5"),children:[a.jsx(ic,{size:16})," Rule Helper"]}),u&&a.jsxs(a.Fragment,{children:[a.jsxs(qe,{to:"/management/sde",className:({isActive:g})=>V("flex items-center gap-3 px-4 py-2.5 rounded-lg transition text-sm font-medium",g?"bg-brand-500/10 text-brand-400 border border-brand-500/20":"text-slate-400 hover:text-white hover:bg-white/5"),children:[a.jsx(Mb,{size:16})," SDE Data"]}),a.jsxs(qe,{to:"/management/celery",className:({isActive:g})=>V("flex items-center gap-3 px-4 py-2.5 rounded-lg transition text-sm font-medium",g?"bg-brand-500/10 text-brand-400 border border-brand-500/20":"text-slate-400 hover:text-white hover:bg-white/5"),children:[a.jsx(Ab,{size:16})," System Health"]}),a.jsxs(qe,{to:"/management/permissions",className:({isActive:g})=>V("flex items-center gap-3 px-4 py-2.5 rounded-lg transition text-sm font-medium",g?"bg-brand-500/10 text-brand-400 border border-brand-500/20":"text-slate-400 hover:text-white hover:bg-white/5"),children:[a.jsx(Ob,{size:16})," Permissions"]}),a.jsxs(qe,{to:"/management/scripts",className:({isActive:g})=>V("flex items-center gap-3 px-4 py-2.5 rounded-lg transition text-sm font-medium",g?"bg-brand-500/10 text-brand-400 border border-brand-500/20":"text-slate-400 hover:text-white hover:bg-white/5"),children:[a.jsx(wi,{size:16})," Script Runner"]})]})]})]})]})]}),a.jsx("div",{className:"flex-grow relative h-full bg-slate-900 z-10",id:"management-content-wrapper",children:a.jsx("div",{className:"absolute inset-0 overflow-y-auto custom-scrollbar",id:"management-scroll-area",children:a.jsx("div",{className:"p-6 md:p-10 min-h-full max-w-7xl mx-auto",children:a.jsx(yj,{})})})})]})},P2=()=>{const[e,t]=w.useState(null);return w.useEffect(()=>{W("/api/management/").then(n=>n.json()).then(n=>t(n))},[]),e?a.jsxs("div",{className:"space-y-6",children:[a.jsx("h1",{className:"heading-1",children:"System Overview"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[a.jsx(Ua,{label:"Total Users",value:e.stats.total_users}),a.jsx(Ua,{label:"Total Characters",value:e.stats.total_characters}),a.jsx(Ua,{label:"Active Fleets",value:e.stats.active_fleets_count}),a.jsx(Ua,{label:"Total Fleets History",value:e.stats.total_fleets})]}),a.jsx("div",{className:"glass-panel p-6 h-64 flex items-center justify-center text-slate-500",children:"Waitlist Growth Chart (Coming Soon)"})]}):a.jsx("div",{children:"Loading Stats..."})},Ua=({label:e,value:t})=>a.jsxs("div",{className:"glass-panel p-6",children:[a.jsx("div",{className:"text-sm text-slate-500 font-bold uppercase tracking-wider mb-2",children:e}),a.jsx("div",{className:"text-3xl font-mono text-white",children:t})]}),hl=({current:e,total:t,onChange:n})=>{if(t<=1)return null;let s=Math.max(1,e-3),r=Math.min(t,e+3);s===1&&(r=Math.min(t,7)),r===t&&(s=Math.max(1,t-6));const i=[];for(let o=s;o<=r;o++)i.push(o);return a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("button",{onClick:()=>n(Math.max(1,e-1)),disabled:e===1,className:"btn-secondary py-1 px-2 text-[10px] disabled:opacity-50 disabled:cursor-not-allowed hover:bg-white/10",children:""}),i.map(o=>a.jsx("button",{onClick:()=>n(o),className:V("py-1 px-2.5 text-[10px] rounded transition font-mono",o===e?"bg-brand-500 text-white font-bold shadow-lg shadow-brand-500/20":"bg-white/5 text-slate-400 hover:bg-white/10 hover:text-white"),children:o},o)),r<t&&a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"text-slate-600 text-[10px]",children:"..."}),a.jsx("button",{onClick:()=>n(t),className:"py-1 px-2 text-[10px] text-slate-500 hover:text-white",children:t})]}),a.jsx("button",{onClick:()=>n(Math.min(t,e+1)),disabled:e===t,className:"btn-secondary py-1 px-2 text-[10px] disabled:opacity-50 disabled:cursor-not-allowed hover:bg-white/10",children:""})]})},So=de("users/fetchList",async({query:e="",page:t=1,sort:n="character",dir:s="asc"},{rejectWithValue:r})=>{try{return await(await W(`/api/management/users/?q=${e}&page=${t}&sort=${n}&dir=${s}`)).json()}catch(i){return r(i.message)}}),td=de("users/fetchProfile",async(e,{rejectWithValue:t})=>{try{const n=await W(`/api/management/users/${e}/inspect/`);if(!n.ok)throw new Error("Failed to fetch profile");return await n.json()}catch(n){return t(n.message)}}),fl=de("users/fetchRoles",async(e,{rejectWithValue:t})=>{try{const n=await W(`/api/mgmt/user_roles/${e}/`);if(!n.ok)throw new Error("Failed to fetch roles");return await n.json()}catch(n){return t(n.message)}}),O2={list:[],pagination:{current:1,total:1,has_next:!1,has_previous:!1},query:"",sort:"character",sortDir:"asc",loading:!1,error:null,inspectProfile:null,inspectLoading:!1,userRoles:{current_roles:[],available_roles:[]},rolesLoading:!1},Xb=Sn({name:"users",initialState:O2,reducers:{setQuery:(e,t)=>{e.query=t.payload,e.pagination.current=1},setPage:(e,t)=>{e.pagination.current=t.payload},setSort:(e,t)=>{e.sort===t.payload?e.sortDir=e.sortDir==="asc"?"desc":"asc":(e.sort=t.payload,e.sortDir="asc")},clearInspect:e=>{e.inspectProfile=null,e.userRoles={current_roles:[],available_roles:[]}}},extraReducers:e=>{e.addCase(So.pending,t=>{t.loading=!0,t.error=null}).addCase(So.fulfilled,(t,n)=>{t.loading=!1,t.list=n.payload.users||[],t.pagination=n.payload.pagination}).addCase(So.rejected,(t,n)=>{t.loading=!1,t.error=n.payload}).addCase(td.pending,t=>{t.inspectLoading=!0}).addCase(td.fulfilled,(t,n)=>{t.inspectLoading=!1,t.inspectProfile=n.payload}).addCase(td.rejected,t=>{t.inspectLoading=!1}).addCase(fl.pending,t=>{t.rolesLoading=!0}).addCase(fl.fulfilled,(t,n)=>{t.rolesLoading=!1,t.userRoles=n.payload})}}),{setQuery:R2,setPage:D2,setSort:L2,clearInspect:cm}=Xb.actions,A2=e=>e.users.list,z2=e=>e.users.pagination,F2=e=>e.users.query,I2=e=>({field:e.users.sort,dir:e.users.sortDir}),W2=e=>e.users.loading,$2=e=>e.users.userRoles,B2=Xb.reducer,H2=()=>{const e=dt(),t=kn(),n=U(A2),s=U(F2),r=U(z2),i=U(I2),o=U(W2),l=U($2),c=U(tt("promote_demote_users"));U(tt("view_sensitive_data"));const[d,u]=w.useState(null);w.useEffect(()=>{const x=setTimeout(()=>{e(So({query:s,page:r.current,sort:i.field,dir:i.dir}))},300);return()=>clearTimeout(x)},[s,r.current,i.field,i.dir,e]),w.useEffect(()=>()=>{e(cm())},[e]);const h=x=>e(R2(x.target.value)),f=x=>e(L2(x)),p=x=>{c&&(u(x),e(fl(x.id)))},b=x=>{t(`/profile?user_id=${x.id}`)},g=()=>{u(null),e(cm())},y=(x,m)=>{var j;if(!d)return;const v=(j=document.cookie.match(/csrftoken=([^;]+)/))==null?void 0:j[1];W("/api/mgmt/update_role/",{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":v},body:JSON.stringify({user_id:d.id,role:x,action:m})}).then(_=>_.json()).then(_=>{_.success?e(fl(d.id)):alert(_.error||"Failed to update role")})};return a.jsxs("div",{className:"relative h-full flex flex-col",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6 shrink-0",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"heading-1",children:"User Management"}),a.jsx("p",{className:"text-slate-400 text-sm mt-1",children:"Manage pilots, permissions, and profiles."})]}),a.jsxs("div",{className:"relative group",children:[a.jsx(is,{className:"absolute left-3 top-2.5 text-slate-500 group-focus-within:text-brand-400 transition",size:16}),a.jsx("input",{type:"text",placeholder:"Search pilots...",className:"input-field pl-10 w-64 focus:w-80 transition-all duration-300",value:s,onChange:h})]})]}),a.jsxs("div",{className:"glass-panel overflow-hidden flex-grow relative flex flex-col",children:[a.jsx("div",{className:"overflow-x-auto custom-scrollbar flex-grow",children:a.jsxs("table",{className:"w-full text-left border-collapse",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"bg-white/5 border-b border-white/5 text-xs text-slate-400 uppercase sticky top-0 backdrop-blur-md z-10",children:[a.jsxs("th",{onClick:()=>f("character"),className:"p-4 font-bold cursor-pointer hover:text-white transition select-none",children:["Character (Main) ",i.field==="character"&&(i.dir==="asc"?"":"")]}),a.jsxs("th",{onClick:()=>f("corporation"),className:"p-4 font-bold cursor-pointer hover:text-white transition select-none",children:["Corp ",i.field==="corporation"&&(i.dir==="asc"?"":"")]}),a.jsxs("th",{onClick:()=>f("linked"),className:"p-4 font-bold cursor-pointer hover:text-white transition select-none w-1/3",children:["Alts ",i.field==="linked"&&(i.dir==="asc"?"":"")]}),a.jsx("th",{className:"p-4 font-bold text-right",children:"Actions"})]})}),a.jsxs("tbody",{className:"divide-y divide-white/5 text-sm text-slate-300",children:[n.map(x=>a.jsxs("tr",{onClick:()=>p(x),className:V("hover:bg-white/5 transition group",c?"cursor-pointer":"cursor-default",(d==null?void 0:d.id)===x.id&&"bg-white/10"),children:[a.jsxs("td",{className:"p-4 font-medium text-white flex items-center gap-3",children:[a.jsx("img",{src:`https://images.evetech.net/characters/${x.character_id}/portrait?size=32`,className:"w-8 h-8 rounded-full border border-white/10",alt:""}),a.jsxs("div",{children:[a.jsx("div",{className:"font-bold text-white",children:x.character_name}),x.linked_count>1&&a.jsxs("div",{className:"text-xs text-slate-500 mt-0.5",children:[x.linked_count-1," alts"]})]})]}),a.jsx("td",{className:"p-4 text-slate-300",children:x.corporation_name}),a.jsx("td",{className:"p-4",children:a.jsx("div",{className:"flex flex-wrap gap-2",children:x.alts&&x.alts.length>0?x.alts.map(m=>a.jsxs("span",{className:"badge bg-white/5 hover:bg-white/10 text-slate-300 border border-white/5 transition px-2 py-1 rounded text-xs flex items-center gap-2",children:[a.jsx("img",{src:`https://images.evetech.net/characters/${m.character_id}/portrait?size=32`,className:"w-4 h-4 rounded-full opacity-75",alt:""}),m.character_name]},m.character_id)):a.jsx("span",{className:"text-xs text-slate-600 italic",children:"No Alts Registered"})})}),a.jsx("td",{className:"p-4 text-right",children:a.jsx("button",{onClick:m=>{m.stopPropagation(),b(x)},className:"text-brand-400 hover:text-white transition font-medium text-xs uppercase tracking-wider",children:"Inspect"})})]},x.id)),n.length===0&&!o&&a.jsx("tr",{children:a.jsx("td",{colSpan:"5",className:"p-8 text-center text-slate-500 italic",children:"No pilots found."})})]})]})}),a.jsxs("div",{className:"p-4 border-t border-white/5 flex justify-between items-center bg-black/20 shrink-0",children:[a.jsxs("span",{className:"text-xs text-slate-500",children:["Showing ",n.length," of many"]}),a.jsx(hl,{current:r.current,total:r.total,onChange:x=>e(D2(x))})]})]}),d&&c&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4",onClick:g,children:a.jsxs("div",{onClick:x=>x.stopPropagation(),className:"glass-panel w-full max-w-5xl max-h-[85vh] flex flex-col shadow-2xl bg-[#0f1014] animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-6 border-b border-white/5 flex items-start justify-between bg-black/20 shrink-0",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("img",{src:`https://images.evetech.net/characters/${d.character_id}/portrait?size=128`,className:"w-16 h-16 rounded-lg border-2 border-white/10 shadow-lg",alt:""}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-white",children:d.character_name}),a.jsx("p",{className:"text-brand-400 text-sm",children:d.corporation_name})]})]}),a.jsx("button",{onClick:g,className:"p-2 hover:bg-white/10 rounded-full transition text-slate-400 hover:text-white",children:a.jsx(ct,{size:20})})]}),a.jsx("div",{className:"flex border-b border-white/5 shrink-0",children:a.jsxs("div",{className:"flex-1 p-3 text-sm font-bold border-b-2 border-blue-500 text-blue-500 bg-blue-500/5 flex items-center justify-center gap-2",children:[a.jsx(ic,{size:14})," Roles Management"]})}),a.jsx("div",{className:"flex-grow overflow-y-auto custom-scrollbar p-6",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[a.jsxs("div",{className:"bg-white/5 rounded-lg p-4 border border-white/5",children:[a.jsxs("h3",{className:"label-text flex items-center gap-2 mb-4 pb-2 border-b border-white/5",children:[a.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500 shadow-[0_0_8px_rgba(34,197,94,0.8)]"})," Current Roles"]}),a.jsxs("div",{className:"space-y-1",children:[l.current_roles.map(x=>a.jsxs("button",{onClick:()=>y(x,"remove"),className:"w-full text-left bg-black/20 hover:bg-red-900/20 border border-white/5 hover:border-red-500/30 p-2 rounded flex justify-between items-center group transition",children:[a.jsx("span",{className:"text-slate-200 font-bold text-xs group-hover:text-red-200",children:x}),a.jsx("span",{className:"badge badge-red opacity-0 group-hover:opacity-100 transition text-[10px] py-0.5 px-1.5",children:"Remove"})]},x)),l.current_roles.length===0&&a.jsx("div",{className:"text-xs text-slate-500 italic p-2 text-center",children:"No special roles assigned."})]})]}),a.jsxs("div",{className:"bg-white/5 rounded-lg p-4 border border-white/5 flex flex-col",children:[a.jsxs("h3",{className:"label-text flex items-center gap-2 mb-4 pb-2 border-b border-white/5",children:[a.jsx("span",{className:"w-2 h-2 rounded-full bg-blue-500 shadow-[0_0_8px_rgba(59,130,246,0.8)]"})," Available Roles"]}),a.jsxs("div",{className:"space-y-1 flex-grow overflow-y-auto custom-scrollbar max-h-[400px]",children:[l.available_roles.filter(x=>!l.current_roles.includes(x)).map(x=>a.jsxs("button",{onClick:()=>y(x,"add"),className:"w-full text-left bg-black/20 hover:bg-blue-900/20 border border-white/5 hover:border-blue-500/30 p-2 rounded flex justify-between items-center group transition",children:[a.jsx("span",{className:"text-slate-200 font-bold text-xs group-hover:text-blue-200",children:x}),a.jsx("span",{className:"badge badge-brand opacity-0 group-hover:opacity-100 transition text-[10px] py-0.5 px-1.5",children:"Add"})]},x)),l.available_roles.length===0&&a.jsx("div",{className:"text-xs text-slate-500 italic p-2 text-center",children:"No other roles available."})]}),a.jsx("p",{className:"text-[10px] text-slate-500 mt-4 italic pt-2 border-t border-white/5",children:"Note: You can only assign roles that are below your own rank."})]})]})})]})})]})},U2=()=>{const e=dt(),t=U(n2),n=U(a2);w.useEffect(()=>{e(ur())},[e]);const s=(r,i)=>{confirm(r==="close"?"Are you sure you want to close this fleet?":"DELETE this fleet record? This cannot be undone.")&&(r==="close"?e(qN(i)).unwrap().catch(l=>alert(l)):r==="delete"&&e(GN(i)).unwrap().catch(l=>alert(l)))};return a.jsxs("div",{className:"flex flex-col gap-6",children:[a.jsxs("div",{className:"flex justify-between items-center border-b border-white/5 pb-6",children:[a.jsx("h1",{className:"heading-1",children:"Active & Recent Fleets"}),a.jsxs(Re,{to:"/management/fleets/setup",className:"btn-primary text-sm shadow-lg shadow-brand-500/20 flex items-center gap-2",children:[a.jsx(Sr,{size:16})," Create Fleet"]})]}),a.jsx("div",{className:"glass-panel p-6",children:t.length>0?a.jsx("ul",{className:"space-y-4",children:t.map(r=>a.jsxs("li",{className:"p-4 bg-white/5 rounded-xl border border-white/5 flex flex-col md:flex-row justify-between md:items-center gap-4 group hover:bg-white/10 transition duration-300",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"bg-dark-900 p-3 rounded-lg border border-white/10 text-2xl group-hover:scale-110 transition",children:""}),a.jsxs("div",{children:[a.jsxs("h3",{className:"font-bold text-lg text-white flex items-center gap-3",children:[r.name,r.is_active?a.jsxs("span",{className:"badge badge-green flex items-center gap-1 normal-case px-2",children:[a.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-green-400 animate-pulse"}),"Active"]}):a.jsx("span",{className:"badge badge-slate text-xs",children:"CLOSED"})]}),a.jsxs("div",{className:"text-sm text-slate-400 flex gap-4 mt-1 font-mono text-xs items-center",children:[a.jsxs("span",{children:["FC: ",a.jsx("strong",{className:"text-slate-200",children:r.commander_name})]}),a.jsx("span",{className:"opacity-50",children:"|"}),a.jsx("span",{children:new Date(r.created_at).toLocaleString()}),r.esi_fleet_id&&a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"opacity-50",children:"|"}),a.jsxs("span",{className:"bg-black/30 px-1.5 py-0.5 rounded text-slate-500 border border-white/5",children:["ID: ",r.esi_fleet_id]})]})]})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[r.is_active&&a.jsxs(Re,{to:`/management/fleets/${r.join_token}/settings`,className:"btn-secondary py-1.5 px-3 text-xs inline-flex items-center gap-2 border-brand-500/30 text-brand-400 hover:bg-brand-500/10",children:[a.jsx(Zh,{size:14})," Manage"]}),a.jsxs(Re,{to:`/management/fleets/${r.join_token}/history`,className:"btn-secondary py-1.5 px-3 text-xs inline-flex items-center gap-2 border-slate-600 hover:border-white/50 text-slate-300 hover:text-white",title:"View Audit Log",children:[a.jsx(Lb,{size:14})," History"]}),r.is_active?a.jsxs(a.Fragment,{children:[a.jsxs(Re,{to:`/fleet/${r.join_token}`,className:"btn-success py-1.5 px-3 text-xs inline-flex items-center gap-2",children:[a.jsx(bN,{size:14})," Open Board"]}),a.jsxs("button",{onClick:()=>s("close",r.id),className:"btn-secondary py-1.5 px-3 text-xs text-brand-400 border-brand-500/30 hover:bg-brand-500/10 hover:border-brand-500/50 flex items-center gap-2",children:[a.jsx(jN,{size:14})," Close Fleet"]})]}):n&&a.jsxs("button",{onClick:()=>s("delete",r.id),className:"text-red-500 hover:text-red-400 text-xs underline px-2 transition font-bold flex items-center gap-1",children:[a.jsx(ma,{size:12})," Delete"]})]})]},r.id))}):a.jsxs("div",{className:"text-center py-16 text-slate-500 border-2 border-dashed border-white/10 rounded-xl bg-white/5",children:[a.jsx("div",{className:"text-4xl mb-4 grayscale opacity-30",children:""}),a.jsx("p",{className:"mb-2 font-bold text-slate-400",children:"No fleets recorded."}),a.jsx("p",{className:"text-sm",children:"Create a fleet to start a waitlist session."})]})})]})};/*!
 * vanilla-picker v2.12.3
 * https://vanilla-picker.js.org
 *
 * Copyright 2017-2024 Andreas Borgen (https://github.com/Sphinxxxx), Adam Brooks (https://github.com/dissimulate)
 * Released under the ISC license.
 */var sf=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},rf=function(){function e(t,n){for(var s=0;s<n.length;s++){var r=n[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}(),Va=function(){function e(t,n){var s=[],r=!0,i=!1,o=void 0;try{for(var l=t[Symbol.iterator](),c;!(r=(c=l.next()).done)&&(s.push(c.value),!(n&&s.length===n));r=!0);}catch(d){i=!0,o=d}finally{try{!r&&l.return&&l.return()}finally{if(i)throw o}}return s}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();String.prototype.startsWith=String.prototype.startsWith||function(e){return this.indexOf(e)===0};String.prototype.padStart=String.prototype.padStart||function(e,t){for(var n=this;n.length<e;)n=t+n;return n};var V2={cb:"0f8ff",tqw:"aebd7",q:"-ffff",qmrn:"7fffd4",zr:"0ffff",bg:"5f5dc",bsq:"e4c4",bck:"---",nch:"ebcd",b:"--ff",bvt:"8a2be2",brwn:"a52a2a",brw:"deb887",ctb:"5f9ea0",hrt:"7fff-",chcT:"d2691e",cr:"7f50",rnw:"6495ed",crns:"8dc",crms:"dc143c",cn:"-ffff",Db:"--8b",Dcn:"-8b8b",Dgnr:"b8860b",Dgr:"a9a9a9",Dgrn:"-64-",Dkhk:"bdb76b",Dmgn:"8b-8b",Dvgr:"556b2f",Drng:"8c-",Drch:"9932cc",Dr:"8b--",Dsmn:"e9967a",Dsgr:"8fbc8f",DsTb:"483d8b",DsTg:"2f4f4f",Dtrq:"-ced1",Dvt:"94-d3",ppnk:"1493",pskb:"-bfff",mgr:"696969",grb:"1e90ff",rbrc:"b22222",rwht:"af0",stg:"228b22",chs:"-ff",gnsb:"dcdcdc",st:"8f8ff",g:"d7-",gnr:"daa520",gr:"808080",grn:"-8-0",grnw:"adff2f",hnw:"0fff0",htpn:"69b4",nnr:"cd5c5c",ng:"4b-82",vr:"0",khk:"0e68c",vnr:"e6e6fa",nrb:"0f5",wngr:"7cfc-",mnch:"acd",Lb:"add8e6",Lcr:"08080",Lcn:"e0ffff",Lgnr:"afad2",Lgr:"d3d3d3",Lgrn:"90ee90",Lpnk:"b6c1",Lsmn:"a07a",Lsgr:"20b2aa",Lskb:"87cefa",LsTg:"778899",Lstb:"b0c4de",Lw:"e0",m:"-ff-",mgrn:"32cd32",nn:"af0e6",mgnt:"-ff",mrn:"8--0",mqm:"66cdaa",mmb:"--cd",mmrc:"ba55d3",mmpr:"9370db",msg:"3cb371",mmsT:"7b68ee","":"-fa9a",mtr:"48d1cc",mmvt:"c71585",mnLb:"191970",ntc:"5fffa",mstr:"e4e1",mccs:"e4b5",vjw:"dead",nv:"--80",c:"df5e6",v:"808-0",vrb:"6b8e23",rng:"a5-",rngr:"45-",rch:"da70d6",pgnr:"eee8aa",pgrn:"98fb98",ptrq:"afeeee",pvtr:"db7093",ppwh:"efd5",pchp:"dab9",pr:"cd853f",pnk:"c0cb",pm:"dda0dd",pwrb:"b0e0e6",prp:"8-080",cc:"663399",r:"--",sbr:"bc8f8f",rb:"4169e1",sbrw:"8b4513",smn:"a8072",nbr:"4a460",sgrn:"2e8b57",ssh:"5ee",snn:"a0522d",svr:"c0c0c0",skb:"87ceeb",sTb:"6a5acd",sTgr:"708090",snw:"afa",n:"-ff7f",stb:"4682b4",tn:"d2b48c",t:"-8080",thst:"d8bfd8",tmT:"6347",trqs:"40e0d0",vt:"ee82ee",whT:"5deb3",wht:"",hts:"5f5f5",w:"-",wgrn:"9acd32"};function dm(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,n=t>0?e.toFixed(t).replace(/0+$/,"").replace(/\.$/,""):e.toString();return n||"0"}var Y2=function(){function e(t,n,s,r){sf(this,e);var i=this;function o(c){if(c.startsWith("hsl")){var d=c.match(/([\-\d\.e]+)/g).map(Number),u=Va(d,4),h=u[0],f=u[1],p=u[2],b=u[3];b===void 0&&(b=1),h/=360,f/=100,p/=100,i.hsla=[h,f,p,b]}else if(c.startsWith("rgb")){var g=c.match(/([\-\d\.e]+)/g).map(Number),y=Va(g,4),x=y[0],m=y[1],v=y[2],j=y[3];j===void 0&&(j=1),i.rgba=[x,m,v,j]}else c.startsWith("#")?i.rgba=e.hexToRgb(c):i.rgba=e.nameToRgb(c)||e.hexToRgb(c)}if(t!==void 0)if(Array.isArray(t))this.rgba=t;else if(s===void 0){var l=t&&""+t;l&&o(l.toLowerCase())}else this.rgba=[t,n,s,r===void 0?1:r]}return rf(e,[{key:"printRGB",value:function(n){var s=n?this.rgba:this.rgba.slice(0,3),r=s.map(function(i,o){return dm(i,o===3?3:0)});return n?"rgba("+r+")":"rgb("+r+")"}},{key:"printHSL",value:function(n){var s=[360,100,100,1],r=["","%","%",""],i=n?this.hsla:this.hsla.slice(0,3),o=i.map(function(l,c){return dm(l*s[c],c===3?3:1)+r[c]});return n?"hsla("+o+")":"hsl("+o+")"}},{key:"printHex",value:function(n){var s=this.hex;return n?s:s.substring(0,7)}},{key:"rgba",get:function(){if(this._rgba)return this._rgba;if(!this._hsla)throw new Error("No color is set");return this._rgba=e.hslToRgb(this._hsla)},set:function(n){n.length===3&&(n[3]=1),this._rgba=n,this._hsla=null}},{key:"rgbString",get:function(){return this.printRGB()}},{key:"rgbaString",get:function(){return this.printRGB(!0)}},{key:"hsla",get:function(){if(this._hsla)return this._hsla;if(!this._rgba)throw new Error("No color is set");return this._hsla=e.rgbToHsl(this._rgba)},set:function(n){n.length===3&&(n[3]=1),this._hsla=n,this._rgba=null}},{key:"hslString",get:function(){return this.printHSL()}},{key:"hslaString",get:function(){return this.printHSL(!0)}},{key:"hex",get:function(){var n=this.rgba,s=n.map(function(r,i){return i<3?r.toString(16):Math.round(r*255).toString(16)});return"#"+s.map(function(r){return r.padStart(2,"0")}).join("")},set:function(n){this.rgba=e.hexToRgb(n)}}],[{key:"hexToRgb",value:function(n){var s=(n.startsWith("#")?n.slice(1):n).replace(/^(\w{3})$/,"$1F").replace(/^(\w)(\w)(\w)(\w)$/,"$1$1$2$2$3$3$4$4").replace(/^(\w{6})$/,"$1FF");if(!s.match(/^([0-9a-fA-F]{8})$/))throw new Error("Unknown hex color; "+n);var r=s.match(/^(\w\w)(\w\w)(\w\w)(\w\w)$/).slice(1).map(function(i){return parseInt(i,16)});return r[3]=r[3]/255,r}},{key:"nameToRgb",value:function(n){var s=n.toLowerCase().replace("at","T").replace(/[aeiouyldf]/g,"").replace("ght","L").replace("rk","D").slice(-5,4),r=V2[s];return r===void 0?r:e.hexToRgb(r.replace(/\-/g,"00").padStart(6,"f"))}},{key:"rgbToHsl",value:function(n){var s=Va(n,4),r=s[0],i=s[1],o=s[2],l=s[3];r/=255,i/=255,o/=255;var c=Math.max(r,i,o),d=Math.min(r,i,o),u=void 0,h=void 0,f=(c+d)/2;if(c===d)u=h=0;else{var p=c-d;switch(h=f>.5?p/(2-c-d):p/(c+d),c){case r:u=(i-o)/p+(i<o?6:0);break;case i:u=(o-r)/p+2;break;case o:u=(r-i)/p+4;break}u/=6}return[u,h,f,l]}},{key:"hslToRgb",value:function(n){var s=Va(n,4),r=s[0],i=s[1],o=s[2],l=s[3],c=void 0,d=void 0,u=void 0;if(i===0)c=d=u=o;else{var h=function(y,x,m){return m<0&&(m+=1),m>1&&(m-=1),m<.16666666666666666?y+(x-y)*6*m:m<.5?x:m<.6666666666666666?y+(x-y)*(.6666666666666666-m)*6:y},f=o<.5?o*(1+i):o+i-o*i,p=2*o-f;c=h(p,f,r+1/3),d=h(p,f,r),u=h(p,f,r-1/3)}var b=[c*255,d*255,u*255].map(Math.round);return b[3]=l,b}}]),e}(),X2=function(){function e(){sf(this,e),this._events=[]}return rf(e,[{key:"add",value:function(n,s,r){n.addEventListener(s,r,!1),this._events.push({target:n,type:s,handler:r})}},{key:"remove",value:function(n,s,r){this._events=this._events.filter(function(i){var o=!0;return n&&n!==i.target&&(o=!1),s&&s!==i.type&&(o=!1),r&&r!==i.handler&&(o=!1),o&&e._doRemove(i.target,i.type,i.handler),!o})}},{key:"destroy",value:function(){this._events.forEach(function(n){return e._doRemove(n.target,n.type,n.handler)}),this._events=[]}}],[{key:"_doRemove",value:function(n,s,r){n.removeEventListener(s,r,!1)}}]),e}();function q2(e){var t=document.createElement("div");return t.innerHTML=e,t.firstElementChild}function nd(e,t,n){var s=!1;function r(c,d,u){return Math.max(d,Math.min(c,u))}function i(c,d,u){if(u&&(s=!0),!!s){c.preventDefault();var h=t.getBoundingClientRect(),f=h.width,p=h.height,b=d.clientX,g=d.clientY,y=r(b-h.left,0,f),x=r(g-h.top,0,p);n(y/f,x/p)}}function o(c,d){var u=c.buttons===void 0?c.which:c.buttons;u===1?i(c,c,d):s=!1}function l(c,d){c.touches.length===1?i(c,c.touches[0],d):s=!1}e.add(t,"mousedown",function(c){o(c,!0)}),e.add(t,"touchstart",function(c){l(c,!0)}),e.add(window,"mousemove",o),e.add(t,"touchmove",l),e.add(window,"mouseup",function(c){s=!1}),e.add(t,"touchend",function(c){s=!1}),e.add(t,"touchcancel",function(c){s=!1})}var G2=`linear-gradient(45deg, lightgrey 25%, transparent 25%, transparent 75%, lightgrey 75%) 0 0 / 2em 2em,
                   linear-gradient(45deg, lightgrey 25%,       white 25%,       white 75%, lightgrey 75%) 1em 1em / 2em 2em`,K2=360,qb="keydown",Ya="mousedown",sd="focusin";function Ut(e,t){return(t||document).querySelector(e)}function Q2(e){e.preventDefault(),e.stopPropagation()}function rd(e,t,n,s,r){e.add(t,qb,function(i){n.indexOf(i.key)>=0&&s(i)})}var af=function(){function e(t){sf(this,e),this.settings={popup:"right",layout:"default",alpha:!0,editor:!0,editorFormat:"hex",cancelButton:!1,defaultColor:"#0cf"},this._events=new X2,this.onChange=null,this.onDone=null,this.onOpen=null,this.onClose=null,this.setOptions(t)}return rf(e,[{key:"setOptions",value:function(n){var s=this;if(!n)return;var r=this.settings;function i(d,u,h){for(var f in d)u[f]=d[f]}if(n instanceof HTMLElement)r.parent=n;else{r.parent&&n.parent&&r.parent!==n.parent&&(this._events.remove(r.parent),this._popupInited=!1),i(n,r),n.onChange&&(this.onChange=n.onChange),n.onDone&&(this.onDone=n.onDone),n.onOpen&&(this.onOpen=n.onOpen),n.onClose&&(this.onClose=n.onClose);var o=n.color||n.colour;o&&this._setColor(o)}var l=r.parent;if(l&&r.popup&&!this._popupInited){var c=function(u){return s.openHandler(u)};this._events.add(l,"click",c),rd(this._events,l,[" ","Spacebar","Enter"],c),this._popupInited=!0}else n.parent&&!r.popup&&this.show()}},{key:"openHandler",value:function(n){if(this.show()){n&&n.preventDefault(),this.settings.parent.style.pointerEvents="none";var s=n&&n.type===qb?this._domEdit:this.domElement;setTimeout(function(){return s.focus()},100),this.onOpen&&this.onOpen(this.colour)}}},{key:"closeHandler",value:function(n){var s=n&&n.type,r=!1;if(!n)r=!0;else if(s===Ya||s===sd){var i=(this.__containedEvent||0)+100;n.timeStamp>i&&(r=!0)}else Q2(n),r=!0;r&&this.hide()&&(this.settings.parent.style.pointerEvents="",s!==Ya&&this.settings.parent.focus(),this.onClose&&this.onClose(this.colour))}},{key:"movePopup",value:function(n,s){this.closeHandler(),this.setOptions(n),s&&this.openHandler()}},{key:"setColor",value:function(n,s){this._setColor(n,{silent:s})}},{key:"_setColor",value:function(n,s){if(typeof n=="string"&&(n=n.trim()),!!n){s=s||{};var r=void 0;try{r=new Y2(n)}catch(o){if(s.failSilently)return;throw o}if(!this.settings.alpha){var i=r.hsla;i[3]=1,r.hsla=i}this.colour=this.color=r,this._setHSLA(null,null,null,null,s)}}},{key:"setColour",value:function(n,s){this.setColor(n,s)}},{key:"show",value:function(){var n=this.settings.parent;if(!n)return!1;if(this.domElement){var s=this._toggleDOM(!0);return this._setPosition(),s}var r=this.settings.template||'<div class="picker_wrapper" tabindex="-1"><div class="picker_arrow"></div><div class="picker_hue picker_slider"><div class="picker_selector"></div></div><div class="picker_sl"><div class="picker_selector"></div></div><div class="picker_alpha picker_slider"><div class="picker_selector"></div></div><div class="picker_editor"><input aria-label="Type a color name or hex value"/></div><div class="picker_sample"></div><div class="picker_done"><button>Ok</button></div><div class="picker_cancel"><button>Cancel</button></div></div>',i=q2(r);return this.domElement=i,this._domH=Ut(".picker_hue",i),this._domSL=Ut(".picker_sl",i),this._domA=Ut(".picker_alpha",i),this._domEdit=Ut(".picker_editor input",i),this._domSample=Ut(".picker_sample",i),this._domOkay=Ut(".picker_done button",i),this._domCancel=Ut(".picker_cancel button",i),i.classList.add("layout_"+this.settings.layout),this.settings.alpha||i.classList.add("no_alpha"),this.settings.editor||i.classList.add("no_editor"),this.settings.cancelButton||i.classList.add("no_cancel"),this._ifPopup(function(){return i.classList.add("popup")}),this._setPosition(),this.colour?this._updateUI():this._setColor(this.settings.defaultColor),this._bindEvents(),!0}},{key:"hide",value:function(){return this._toggleDOM(!1)}},{key:"destroy",value:function(){this._events.destroy(),this.domElement&&this.settings.parent.removeChild(this.domElement)}},{key:"_bindEvents",value:function(){var n=this,s=this,r=this.domElement,i=this._events;function o(d,u,h){i.add(d,u,h)}o(r,"click",function(d){return d.preventDefault()}),nd(i,this._domH,function(d,u){return s._setHSLA(d)}),nd(i,this._domSL,function(d,u){return s._setHSLA(null,d,1-u)}),this.settings.alpha&&nd(i,this._domA,function(d,u){return s._setHSLA(null,null,null,1-u)});var l=this._domEdit;o(l,"input",function(d){s._setColor(this.value,{fromEditor:!0,failSilently:!0})}),o(l,"focus",function(d){var u=this;u.selectionStart===u.selectionEnd&&u.select()}),this._ifPopup(function(){var d=function(f){return n.closeHandler(f)};o(window,Ya,d),o(window,sd,d),rd(i,r,["Esc","Escape"],d);var u=function(f){n.__containedEvent=f.timeStamp};o(r,Ya,u),o(r,sd,u),o(n._domCancel,"click",d)});var c=function(u){n._ifPopup(function(){return n.closeHandler(u)}),n.onDone&&n.onDone(n.colour)};o(this._domOkay,"click",c),rd(i,r,["Enter"],c)}},{key:"_setPosition",value:function(){var n=this.settings.parent,s=this.domElement;n!==s.parentNode&&n.appendChild(s),this._ifPopup(function(r){getComputedStyle(n).position==="static"&&(n.style.position="relative");var i=r===!0?"popup_right":"popup_"+r;["popup_top","popup_bottom","popup_left","popup_right"].forEach(function(o){o===i?s.classList.add(o):s.classList.remove(o)}),s.classList.add(i)})}},{key:"_setHSLA",value:function(n,s,r,i,o){o=o||{};var l=this.colour,c=l.hsla;[n,s,r,i].forEach(function(d,u){(d||d===0)&&(c[u]=d)}),l.hsla=c,this._updateUI(o),this.onChange&&!o.silent&&this.onChange(l)}},{key:"_updateUI",value:function(n){if(!this.domElement)return;n=n||{};var s=this.colour,r=s.hsla,i="hsl("+r[0]*K2+", 100%, 50%)",o=s.hslString,l=s.hslaString,c=this._domH,d=this._domSL,u=this._domA,h=Ut(".picker_selector",c),f=Ut(".picker_selector",d),p=Ut(".picker_selector",u);function b(N,S,T){S.style.left=T*100+"%"}function g(N,S,T){S.style.top=T*100+"%"}b(c,h,r[0]),this._domSL.style.backgroundColor=this._domH.style.color=i,b(d,f,r[1]),g(d,f,1-r[2]),d.style.color=o,g(u,p,1-r[3]);var y=o,x=y.replace("hsl","hsla").replace(")",", 0)"),m="linear-gradient("+[y,x]+")";if(this._domA.style.background=m+", "+G2,!n.fromEditor){var v=this.settings.editorFormat,j=this.settings.alpha,_=void 0;switch(v){case"rgb":_=s.printRGB(j);break;case"hsl":_=s.printHSL(j);break;default:_=s.printHex(j)}this._domEdit.value=_}this._domSample.style.color=l}},{key:"_ifPopup",value:function(n,s){this.settings.parent&&this.settings.popup?n&&n(this.settings.popup):s&&s()}},{key:"_toggleDOM",value:function(n){var s=this.domElement;if(!s)return!1;var r=n?"":"none",i=s.style.display!==r;return i&&(s.style.display=r),i}}]),e}();{var id=document.createElement("style");id.textContent='.picker_wrapper.no_alpha .picker_alpha{display:none}.picker_wrapper.no_editor .picker_editor{position:absolute;z-index:-1;opacity:0}.picker_wrapper.no_cancel .picker_cancel{display:none}.layout_default.picker_wrapper{display:flex;flex-flow:row wrap;justify-content:space-between;align-items:stretch;font-size:10px;width:25em;padding:.5em}.layout_default.picker_wrapper input,.layout_default.picker_wrapper button{font-size:1rem}.layout_default.picker_wrapper>*{margin:.5em}.layout_default.picker_wrapper::before{content:"";display:block;width:100%;height:0;order:1}.layout_default .picker_slider,.layout_default .picker_selector{padding:1em}.layout_default .picker_hue{width:100%}.layout_default .picker_sl{flex:1 1 auto}.layout_default .picker_sl::before{content:"";display:block;padding-bottom:100%}.layout_default .picker_editor{order:1;width:6.5rem}.layout_default .picker_editor input{width:100%;height:100%}.layout_default .picker_sample{order:1;flex:1 1 auto}.layout_default .picker_done,.layout_default .picker_cancel{order:1}.picker_wrapper{box-sizing:border-box;background:#f2f2f2;box-shadow:0 0 0 1px silver;cursor:default;font-family:sans-serif;color:#444;pointer-events:auto}.picker_wrapper:focus{outline:none}.picker_wrapper button,.picker_wrapper input{box-sizing:border-box;border:none;box-shadow:0 0 0 1px silver;outline:none}.picker_wrapper button:focus,.picker_wrapper button:active,.picker_wrapper input:focus,.picker_wrapper input:active{box-shadow:0 0 2px 1px #1e90ff}.picker_wrapper button{padding:.4em .6em;cursor:pointer;background-color:#f5f5f5;background-image:linear-gradient(0deg, gainsboro, transparent)}.picker_wrapper button:active{background-image:linear-gradient(0deg, transparent, gainsboro)}.picker_wrapper button:hover{background-color:#fff}.picker_selector{position:absolute;z-index:1;display:block;-webkit-transform:translate(-50%, -50%);transform:translate(-50%, -50%);border:2px solid #fff;border-radius:100%;box-shadow:0 0 3px 1px #67b9ff;background:currentColor;cursor:pointer}.picker_slider .picker_selector{border-radius:2px}.picker_hue{position:relative;background-image:linear-gradient(90deg, red, yellow, lime, cyan, blue, magenta, red);box-shadow:0 0 0 1px silver}.picker_sl{position:relative;box-shadow:0 0 0 1px silver;background-image:linear-gradient(180deg, white, rgba(255, 255, 255, 0) 50%),linear-gradient(0deg, black, rgba(0, 0, 0, 0) 50%),linear-gradient(90deg, #808080, rgba(128, 128, 128, 0))}.picker_alpha,.picker_sample{position:relative;background:linear-gradient(45deg, lightgrey 25%, transparent 25%, transparent 75%, lightgrey 75%) 0 0/2em 2em,linear-gradient(45deg, lightgrey 25%, white 25%, white 75%, lightgrey 75%) 1em 1em/2em 2em;box-shadow:0 0 0 1px silver}.picker_alpha .picker_selector,.picker_sample .picker_selector{background:none}.picker_editor input{font-family:monospace;padding:.2em .4em}.picker_sample::before{content:"";position:absolute;display:block;width:100%;height:100%;background:currentColor}.picker_arrow{position:absolute;z-index:-1}.picker_wrapper.popup{position:absolute;z-index:2;margin:1.5em}.picker_wrapper.popup,.picker_wrapper.popup .picker_arrow::before,.picker_wrapper.popup .picker_arrow::after{background:#f2f2f2;box-shadow:0 0 10px 1px rgba(0,0,0,.4)}.picker_wrapper.popup .picker_arrow{width:3em;height:3em;margin:0}.picker_wrapper.popup .picker_arrow::before,.picker_wrapper.popup .picker_arrow::after{content:"";display:block;position:absolute;top:0;left:0;z-index:-99}.picker_wrapper.popup .picker_arrow::before{width:100%;height:100%;-webkit-transform:skew(45deg);transform:skew(45deg);-webkit-transform-origin:0 100%;transform-origin:0 100%}.picker_wrapper.popup .picker_arrow::after{width:150%;height:150%;box-shadow:none}.popup.popup_top{bottom:100%;left:0}.popup.popup_top .picker_arrow{bottom:0;left:0;-webkit-transform:rotate(-90deg);transform:rotate(-90deg)}.popup.popup_bottom{top:100%;left:0}.popup.popup_bottom .picker_arrow{top:0;left:0;-webkit-transform:rotate(90deg) scale(1, -1);transform:rotate(90deg) scale(1, -1)}.popup.popup_left{top:0;right:100%}.popup.popup_left .picker_arrow{top:0;right:0;-webkit-transform:scale(-1, 1);transform:scale(-1, 1)}.popup.popup_right{top:0;left:100%}.popup.popup_right .picker_arrow{top:0;left:0}',document.documentElement.firstElementChild.appendChild(id),af.StyleElement=id}const J2=()=>{const e=dt(),t=kn(),n=U(ac),s=U(Ub),{fc_chars:r}=U(r2),[i,o]=w.useState("New Fleet"),[l,c]=w.useState(""),[d,u]=w.useState(""),[h,f]=w.useState(!1),[p,b]=w.useState(""),[g,y]=w.useState(""),[x,m]=w.useState([]),v=w.useRef(null);w.useEffect(()=>{e(ko()),m([{name:"Wing 1",squads:["Squad 1","Squad 2"]}])},[e]),w.useEffect(()=>{if(r.length>0&&!d){const k=r.find(O=>O.is_main)||r[0];u(k.character_id),o(`${k.character_name}'s Fleet`)}},[r,d]),w.useEffect(()=>{_(p)},[p]);const j=k=>{const O=k.target.value;u(O);const L=r.find(H=>H.character_id==O);L&&i.includes("'s Fleet")&&o(`${L.character_name}'s Fleet`)},_=k=>{let O=k||"";O=O.replace(/\n/g,"<br>"),O=O.replace(/<color=['"]?(?:0x|#)?([0-9a-fA-F]{8})['"]?>/g,'<font color="#$1">'),O=O.replace(/<\/color>/g,"</font>"),O=O.replace(/\bcolor=(['"]?)(?:#|0x)?([0-9a-fA-F]{8})\1/g,(L,H,Q)=>{const Z=Q.substring(0,2),ee=Q.substring(2,8);return`color=${H}#${ee}${Z}${H}`}),O=O.replace(/\bsize=['"]?(\d+)['"]?/g,"data-size='$1'"),O=O.replace(/<a\s+href=(?:['"])([^'"]+)(?:['"])>(.*?)<\/a>/gi,(L,H,Q)=>{let Z="#ffd700";const ee=H.toLowerCase();return ee.startsWith("overviewpreset")?Z="#00ffff":ee.startsWith("joinchannel")&&(Z="#a0a0ff"),`<span style="color: ${Z}; text-decoration: underline; cursor: help;" title="${H}">${Q}</span>`}),y(O)},N=k=>{const O=document.getElementById("motd-input"),L=O.selectionStart,H=O.selectionEnd,Q=O.value,Z=Q.substring(L,H),ee=k==="br"?"<br>":`<${k}>${Z}</${k}>`,ut=Q.substring(0,L)+ee+Q.substring(H);b(ut),setTimeout(()=>{O.focus(),O.selectionStart=L+ee.length,O.selectionEnd=L+ee.length},0)},S=k=>{let O=k;k==="green"&&(O="#00ff00"),k==="red"&&(O="#ff0000"),k==="yellow"&&(O="#ffff00"),k==="blue"&&(O="#00ffff"),T(O)},T=k=>{const O=document.getElementById("motd-input"),L=O.selectionStart,H=O.selectionEnd,Q=O.value,Z=Q.substring(L,H),ee=`<font color="${k}">${Z}</font>`,ut=Q.substring(0,L)+ee+Q.substring(H);b(ut),setTimeout(()=>{O.focus(),O.selectionStart=L+ee.length,O.selectionEnd=L+ee.length},0)},M=k=>{v.current||(v.current=new af({parent:k.currentTarget.parentElement,popup:"bottom",color:"#ffffff",alpha:!0,editor:!0,onDone:O=>{let L=O.hex.substring(0,7),H=O.rgba[3];if(H<1){let Q=Math.round(H*255).toString(16).padStart(2,"0");T("#"+Q+L.substring(1))}else T(L)}})),v.current.openHandler()},D=(k,O)=>{const L=[...x];L[k].name=O,m(L)},C=()=>m([...x,{name:`Wing ${x.length+1}`,squads:[]}]),A=k=>{const O=[...x];O.splice(k,1),m(O)},$=k=>{const O=[...x];O[k].squads.push(`Squad ${O[k].squads.length+1}`),m(O)},Y=(k,O,L)=>{const H=[...x];H[k].squads[O]=L,m(H)},q=(k,O)=>{const L=[...x];L[k].squads.splice(O,1),m(L)},G=()=>{const k=prompt("Enter a name for this template:","My Fleet Setup");k&&e(ji({character_id:d,template_name:k,structure:x,motd:p})).unwrap().then(()=>alert("Template saved!")).catch(O=>alert("Error: "+O))},J=k=>{confirm("Apply template? This will replace your current structure and MOTD.")&&(m(k.wings.map(O=>({name:O.name,squads:O.squads}))),b(k.motd||""))},z=k=>{confirm("Delete template?")&&e(_i(k)).unwrap().catch(O=>alert("Error: "+O))},E=()=>{e(wo({action:"create",name:i,character_id:d,structure:x,motd:p,is_offline:h})).unwrap().then(k=>{k.redirect_url?t(k.redirect_url):t("/management/fleets")}).catch(k=>{alert("Launch Failed: "+k)})};return a.jsxs("div",{className:"flex flex-col min-h-[calc(100vh-8rem)] bg-dark-950 relative rounded-xl border border-white/5 shadow-2xl",children:[a.jsxs("div",{className:"glass-header px-6 py-4 flex justify-between items-center shrink-0 bg-slate-900/90 z-20 border-b border-white/10",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"heading-1 flex items-center gap-3",children:[a.jsx("span",{className:"text-3xl",children:""})," Fleet Setup"]}),a.jsx("p",{className:"text-slate-400 text-sm mt-1",children:"Initialize fleet structure and mappings."})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(Re,{to:"/management/fleets",className:"btn-secondary text-xs py-1.5 px-3",children:"Cancel"}),a.jsxs("button",{onClick:G,className:"btn-secondary text-xs py-1.5 px-3 border-brand-500/30 text-brand-400 hover:bg-brand-500/10",children:[a.jsx(Ji,{size:14})," Save Template"]}),a.jsx("button",{onClick:E,disabled:n,className:"btn-primary text-xs py-1.5 px-4 shadow-lg shadow-brand-500/20 disabled:opacity-50 disabled:cursor-not-allowed",children:n?a.jsx("span",{className:"animate-pulse",children:"Launching..."}):a.jsxs(a.Fragment,{children:[a.jsx(NN,{size:14})," Launch Fleet"]})})]})]}),a.jsxs("div",{className:"flex-grow grid grid-cols-1 lg:grid-cols-2 gap-0",children:[a.jsxs("div",{className:"bg-dark-900/50 p-6 flex flex-col gap-6 border-r border-white/5",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"label-text mb-2",children:"Fleet Details"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-slate-500 block mb-1",children:"Fleet Name"}),a.jsx("input",{type:"text",value:i,onChange:k=>o(k.target.value),className:"input-field",placeholder:"e.g. Saturday Roam"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-slate-500 block mb-1",children:"Status (Optional)"}),a.jsx("input",{type:"text",value:l,onChange:k=>c(k.target.value),className:"input-field",placeholder:"e.g. Forming up...",maxLength:100})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-slate-500 block mb-1",children:"Fleet Commander"}),a.jsx("select",{value:d,onChange:j,className:"select-field",children:r.map(k=>a.jsx("option",{value:k.character_id,children:k.character_name},k.character_id))})]}),a.jsxs("label",{className:"flex items-center gap-3 p-3 rounded bg-white/5 border border-white/5 cursor-pointer group hover:bg-white/10 hover:border-white/20 transition",children:[a.jsx("input",{type:"checkbox",checked:h,onChange:k=>f(k.target.checked),className:"w-4 h-4 rounded border-slate-600 bg-slate-800 text-brand-500 focus:ring-0 focus:ring-offset-0 transition cursor-pointer"}),a.jsxs("div",{children:[a.jsx("span",{className:"text-xs font-bold text-slate-300 group-hover:text-white block",children:"Offline Mode"}),a.jsx("span",{className:"text-[10px] text-slate-500 block",children:"Skip in-game fleet linking (Testing/Emergency)"})]})]})]})]}),a.jsx("hr",{className:"border-white/5"}),a.jsxs("div",{children:[a.jsx("h3",{className:"label-text mb-2",children:"Message of the Day"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex gap-1 bg-black/20 p-2 rounded border border-white/5 items-center flex-wrap",children:[a.jsx("button",{onClick:()=>N("b"),className:"p-1 px-2 bg-slate-800 rounded border border-white/10 text-xs font-bold text-slate-300 hover:text-white",children:"B"}),a.jsx("button",{onClick:()=>N("i"),className:"p-1 px-2 bg-slate-800 rounded border border-white/10 text-xs italic text-slate-300 hover:text-white",children:"I"}),a.jsx("button",{onClick:()=>N("u"),className:"p-1 px-2 bg-slate-800 rounded border border-white/10 text-xs underline text-slate-300 hover:text-white",children:"U"}),a.jsx("button",{onClick:()=>N("br"),className:"p-1 px-2 bg-slate-800 rounded border border-white/10 text-xs text-slate-300 hover:text-white",children:""}),a.jsx("div",{className:"w-px h-6 bg-white/10 mx-1"}),a.jsx("button",{onClick:()=>S("green"),className:"p-1 px-2 bg-slate-800 rounded border border-white/10 text-xs text-green-400 hover:text-green-300",children:"A"}),a.jsx("button",{onClick:()=>S("red"),className:"p-1 px-2 bg-slate-800 rounded border border-white/10 text-xs text-red-400 hover:text-red-300",children:"A"}),a.jsx("button",{onClick:()=>S("yellow"),className:"p-1 px-2 bg-slate-800 rounded border border-white/10 text-xs text-yellow-400 hover:text-yellow-300",children:"A"}),a.jsx("button",{onClick:()=>S("blue"),className:"p-1 px-2 bg-slate-800 rounded border border-white/10 text-xs text-blue-400 hover:text-blue-300",children:"A"}),a.jsx("button",{onClick:()=>S("#b2b2b2"),className:"p-1 px-2 bg-slate-800 rounded border border-white/10 text-xs text-slate-400 hover:text-white",children:"A"}),a.jsx("div",{className:"w-px h-6 bg-white/10 mx-1"}),a.jsx("button",{onClick:M,className:"p-1 px-2 bg-slate-800 rounded border border-white/10 text-xs hover:bg-slate-700 flex items-center justify-center gap-2 min-w-[40px]",children:a.jsx(Rb,{size:14})})]}),a.jsx("textarea",{id:"motd-input",value:p,onChange:k=>b(k.target.value),maxLength:4e3,className:"input-field h-32 text-xs font-mono resize-none",placeholder:"Enter MOTD here... Supports HTML-like tags"}),a.jsxs("div",{className:"text-[10px] text-slate-500 text-right",children:[p.length,"/4000"]}),a.jsxs("div",{className:"mt-2 pt-2 border-t border-white/5",children:[a.jsx("label",{className:"label-text mb-1 text-[13px]",children:"Preview"}),a.jsx("div",{dangerouslySetInnerHTML:{__html:g},className:"bg-black/40 border border-white/10 rounded p-2 text-slate-300 font-sans whitespace-pre-wrap h-32 overflow-y-auto text-[13px] leading-tight"})]})]})]}),a.jsx("hr",{className:"border-white/5"}),a.jsxs("div",{children:[a.jsx("div",{className:"flex justify-between items-end mb-2",children:a.jsx("h3",{className:"label-text mb-0",children:"Saved Templates"})}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("button",{onClick:()=>{confirm("Load default?")&&m([{name:"Wing 1",squads:["Squad 1","Squad 2"]}])},className:"w-full text-left p-3 rounded bg-white/5 hover:bg-white/10 border border-white/5 hover:border-white/20 transition group",children:[a.jsx("div",{className:"font-bold text-sm text-slate-200 group-hover:text-white",children:"Default Basic"}),a.jsx("div",{className:"text-[10px] text-slate-500",children:"1 Wing, 2 Squads"})]}),s.map(k=>a.jsxs("div",{className:"relative group",children:[a.jsxs("button",{onClick:()=>J(k),className:"w-full text-left p-3 rounded bg-white/5 hover:bg-white/10 border border-white/5 hover:border-brand-500/50 transition pr-8",children:[a.jsx("div",{className:"font-bold text-sm text-slate-200 group-hover:text-brand-400",children:k.name}),a.jsxs("div",{className:"text-[10px] text-slate-500",children:[k.wing_count," Wings"]})]}),a.jsx("button",{onClick:()=>z(k.id),className:"absolute top-2 right-2 p-1.5 text-slate-500 hover:text-red-400 hover:bg-white/5 rounded transition opacity-0 group-hover:opacity-100 z-10",children:a.jsx(ma,{size:14})})]},k.id)),s.length===0&&a.jsx("div",{className:"text-xs text-slate-500 italic p-2",children:"No custom templates saved."})]})]})]}),a.jsxs("div",{className:"lg:col-span-1 flex flex-col overflow-hidden bg-slate-900/50",children:[a.jsxs("div",{className:"p-4 border-b border-white/5 bg-slate-900 flex justify-between items-center",children:[a.jsx("h3",{className:"label-text mb-0 text-brand-500",children:"Structure Preview"}),a.jsx("button",{onClick:C,className:"btn-secondary py-1 px-3 text-xs bg-slate-800 border-slate-700 hover:border-white/30",children:"+ Add Wing"})]}),a.jsxs("div",{className:"flex-grow overflow-y-auto custom-scrollbar p-6 space-y-6 bg-black/20",children:[x.length===0&&a.jsx("div",{className:"text-center text-slate-500 py-12 italic",children:"No structure defined. Load a template or add a wing."}),x.map((k,O)=>a.jsxs("div",{className:"bg-slate-800 rounded-lg border border-slate-700 overflow-hidden group/wing",children:[a.jsxs("div",{className:"p-2 bg-slate-700/50 flex justify-between items-center border-b border-slate-700",children:[a.jsxs("div",{className:"flex items-center gap-2 w-full",children:[a.jsx("span",{className:"text-slate-400 text-[10px] font-bold uppercase w-8",children:"Wing"}),a.jsx("input",{type:"text",value:k.name,onChange:L=>D(O,L.target.value),className:"bg-transparent border-b border-transparent hover:border-slate-500 focus:border-brand-500 text-white font-bold text-sm outline-none w-full transition px-1"})]}),a.jsxs("div",{className:"flex gap-1 opacity-0 group-hover/wing:opacity-100 transition shrink-0 ml-2",children:[a.jsx("button",{onClick:()=>$(O),className:"text-[10px] bg-slate-600 hover:bg-slate-500 px-1.5 py-0.5 rounded text-white border border-slate-500/50",children:"+Sq"}),a.jsx("button",{onClick:()=>A(O),className:"text-[10px] bg-red-900/30 text-red-400 hover:bg-red-900/50 px-1.5 py-0.5 rounded border border-red-900/50",children:"Del"})]})]}),a.jsxs("div",{className:"p-2 bg-dark-900/30",children:[k.squads.map((L,H)=>a.jsxs("div",{className:"flex items-center gap-2 mb-2 pl-4 relative",children:[a.jsx("div",{className:"absolute left-2 top-0 bottom-1/2 border-l-2 border-slate-600 w-2 h-full rounded-bl"}),a.jsx("div",{className:"w-2 border-b-2 border-slate-600 h-0 mr-1"}),a.jsx("input",{type:"text",value:L,onChange:Q=>Y(O,H,Q.target.value),className:"bg-dark-900 border border-slate-700 rounded px-2 py-1 text-xs text-white w-full focus:border-brand-500 outline-none"}),a.jsx("button",{onClick:()=>q(O,H),className:"text-slate-600 hover:text-red-400 px-1",children:a.jsx(ct,{size:12})})]},H)),k.squads.length===0&&a.jsx("div",{className:"text-[10px] text-slate-600 italic pl-8",children:"No squads"})]})]},O))]})]})]})]})},Z2=()=>{const{token:e}=Wh(),t=dt(),n=kn(),s=U(s2),r=U(ac),i=U(Ub),[o,l]=w.useState([]),[c,d]=w.useState(""),[u,h]=w.useState(""),[f,p]=w.useState(""),[b,g]=w.useState(""),y=w.useRef(null);w.useEffect(()=>{t(jo(e))},[t,e]),w.useEffect(()=>{s&&(l(s.structure||[]),d(s.fleet.motd||""),h(s.fleet.name||""),p(s.fleet.status||""))},[s]),w.useEffect(()=>{x(c)},[c]);const x=E=>{let k=E||"";k=k.replace(/\n/g,"<br>"),k=k.replace(/<color=['"]?(?:0x|#)?([0-9a-fA-F]{8})['"]?>/g,'<font color="#$1">'),k=k.replace(/<\/color>/g,"</font>"),k=k.replace(/\bcolor=(['"]?)(?:#|0x)?([0-9a-fA-F]{8})\1/g,(O,L,H)=>{const Q=H.substring(0,2),Z=H.substring(2,8);return`color=${L}#${Z}${Q}${L}`}),k=k.replace(/\bsize=['"]?(\d+)['"]?/g,"data-size='$1'"),k=k.replace(/<a\s+href=(?:['"])([^'"]+)(?:['"])>(.*?)<\/a>/gi,(O,L,H)=>{let Q="#ffd700";const Z=L.toLowerCase();return Z.startsWith("overviewpreset")?Q="#00ffff":Z.startsWith("joinchannel")&&(Q="#a0a0ff"),`<span style="color: ${Q}; text-decoration: underline; cursor: help;" title="${L}">${H}</span>`}),g(k)},m=E=>{const k=document.getElementById("motd-input"),O=k.selectionStart,L=k.selectionEnd,H=k.value,Q=H.substring(O,L),Z=E==="br"?"<br>":`<${E}>${Q}</${E}>`,ee=H.substring(0,O)+Z+H.substring(L);d(ee),setTimeout(()=>{k.focus(),k.selectionStart=O+Z.length,k.selectionEnd=O+Z.length},0)},v=E=>{let k=E;E==="green"&&(k="#00ff00"),E==="red"&&(k="#ff0000"),E==="yellow"&&(k="#ffff00"),E==="blue"&&(k="#00ffff"),j(k)},j=E=>{const k=document.getElementById("motd-input"),O=k.selectionStart,L=k.selectionEnd,H=k.value,Q=H.substring(O,L),Z=`<font color="${E}">${Q}</font>`,ee=H.substring(0,O)+Z+H.substring(L);d(ee),setTimeout(()=>{k.focus(),k.selectionStart=O+Z.length,k.selectionEnd=O+Z.length},0)},_=E=>{y.current||(y.current=new af({parent:E.currentTarget.parentElement,popup:"bottom",color:"#ffffff",alpha:!0,editor:!0,onDone:k=>{let O=k.hex.substring(0,7),L=k.rgba[3];if(L<1){let H=Math.round(L*255).toString(16).padStart(2,"0");j("#"+H+O.substring(1))}else j(O)}})),y.current.openHandler()},N=()=>{t(_o({token:e,payload:{motd:c,structure:o,name:u,status:f}})).unwrap().then(()=>alert("Synced!")).catch(E=>alert("Update Failed: "+E))},S=()=>{t(Bb(e)).unwrap().then(E=>alert("Fleet successfully linked! ID: "+E.fleet_id)).catch(E=>alert("Link Failed: "+E))},T=()=>{confirm("Are you sure you want to CLOSE this fleet? This stops the waitlist.")&&t(KN(e)).unwrap().then(()=>n("/management/fleets")).catch(E=>alert("Error closing fleet: "+E))},M=()=>{const E=prompt("Enter a name for this template:","My Fleet Setup");E&&t(ji({character_id:s.fleet.commander_id,template_name:E,structure:o,motd:c})).unwrap().then(()=>alert("Template saved!")).catch(k=>alert("Error: "+k))},D=E=>{confirm("Apply template? This will replace your current structure and MOTD.")&&(l(E.wings.map(k=>({name:k.name,squads:k.squads}))),d(E.motd||""))},C=E=>{confirm("Delete template?")&&t(_i(E)).unwrap().catch(k=>alert("Error: "+k))},A=(E,k)=>{const O=[...o];O[E].name=k,l(O)},$=()=>l([...o,{name:`Wing ${o.length+1}`,squads:[]}]),Y=E=>{if(!confirm("Delete wing?"))return;const k=[...o];k.splice(E,1),l(k)},q=E=>{const k=[...o];k[E].squads.push(`Squad ${k[E].squads.length+1}`),l(k)},G=(E,k,O)=>{const L=[...o];L[E].squads[k]=O,l(L)},J=(E,k)=>{const O=[...o];O[E].squads.splice(k,1),l(O)};if(!s||!s.fleet)return a.jsx("div",{className:"p-12 text-center text-slate-500",children:"Loading Fleet Settings..."});const{fleet:z}=s;return a.jsxs("div",{className:"flex flex-col min-h-[calc(100vh-8rem)] bg-dark-950 relative rounded-xl border border-white/5 shadow-2xl",children:[a.jsxs("div",{className:"glass-header px-6 py-4 flex flex-col md:flex-row justify-between items-center gap-4 shrink-0 bg-slate-900/90 z-20 border-b border-white/10",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"heading-1 flex items-center gap-3",children:[a.jsx("span",{className:"text-3xl",children:""})," Manage Fleet: ",z.name]}),a.jsxs("p",{className:"text-slate-400 text-sm mt-1 font-mono",children:["ID: ",z.esi_fleet_id||"Offline Mode"]})]}),a.jsxs("div",{className:"flex flex-wrap gap-2 items-center justify-center md:justify-end",children:[!z.esi_fleet_id&&a.jsxs("button",{onClick:S,className:"btn-secondary text-xs py-1.5 px-3 border-blue-500/30 text-blue-400 hover:bg-blue-500/10 shadow-lg shadow-blue-500/10",children:[a.jsx(vN,{size:14})," Link ESI"]}),a.jsxs("button",{onClick:M,className:"btn-secondary text-xs py-1.5 px-3 border-brand-500/30 text-brand-400 hover:bg-brand-500/10",children:[a.jsx(Ji,{size:14})," Save Template"]}),a.jsxs("button",{onClick:T,className:"btn-danger text-xs py-1.5 px-3 shadow-lg shadow-red-500/20 border-red-500/50 hover:bg-red-900/80",children:[a.jsx(Zn,{size:14})," Close Fleet"]}),a.jsxs(Re,{to:`/fleet/${z.join_token}`,className:"btn-secondary text-xs py-1.5 px-3",children:[a.jsx(sc,{size:14})," Back to Dashboard"]}),a.jsx("button",{onClick:N,disabled:r,className:"btn-primary text-xs py-1.5 px-4 shadow-lg shadow-brand-500/20 disabled:opacity-50 disabled:cursor-not-allowed",children:r?a.jsx("span",{className:"animate-pulse",children:"Updating..."}):a.jsxs(a.Fragment,{children:[a.jsx(Ji,{size:14})," Update Fleet"]})})]})]}),a.jsxs("div",{className:"flex-grow grid grid-cols-1 lg:grid-cols-2 gap-0",children:[a.jsxs("div",{className:"bg-dark-900/50 p-6 flex flex-col gap-6 border-r border-white/5",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"label-text mb-2",children:"Fleet Details"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-slate-500 block mb-1",children:"Fleet Name"}),a.jsx("input",{type:"text",value:u,onChange:E=>h(E.target.value),className:"input-field",placeholder:"Fleet Name"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-slate-500 block mb-1",children:"Status"}),a.jsx("input",{type:"text",value:f,onChange:E=>p(E.target.value),className:"input-field",placeholder:"e.g. Forming up...",maxLength:100})]})]})]}),a.jsx("hr",{className:"border-white/5"}),a.jsxs("div",{children:[a.jsx("h3",{className:"label-text mb-2",children:"Message of the Day"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex gap-1 bg-black/20 p-2 rounded border border-white/5 items-center flex-wrap",children:[a.jsx("button",{onClick:()=>m("b"),className:"p-1 px-2 bg-slate-800 rounded border border-white/10 text-xs font-bold text-slate-300 hover:text-white",children:"B"}),a.jsx("button",{onClick:()=>m("i"),className:"p-1 px-2 bg-slate-800 rounded border border-white/10 text-xs italic text-slate-300 hover:text-white",children:"I"}),a.jsx("button",{onClick:()=>m("u"),className:"p-1 px-2 bg-slate-800 rounded border border-white/10 text-xs underline text-slate-300 hover:text-white",children:"U"}),a.jsx("button",{onClick:()=>m("br"),className:"p-1 px-2 bg-slate-800 rounded border border-white/10 text-xs text-slate-300 hover:text-white",children:""}),a.jsx("div",{className:"w-px h-6 bg-white/10 mx-1"}),a.jsx("button",{onClick:()=>v("green"),className:"p-1 px-2 bg-slate-800 rounded border border-white/10 text-xs text-green-400 hover:text-green-300",children:"A"}),a.jsx("button",{onClick:()=>v("red"),className:"p-1 px-2 bg-slate-800 rounded border border-white/10 text-xs text-red-400 hover:text-red-300",children:"A"}),a.jsx("button",{onClick:()=>v("yellow"),className:"p-1 px-2 bg-slate-800 rounded border border-white/10 text-xs text-yellow-400 hover:text-yellow-300",children:"A"}),a.jsx("button",{onClick:()=>v("blue"),className:"p-1 px-2 bg-slate-800 rounded border border-white/10 text-xs text-blue-400 hover:text-blue-300",children:"A"}),a.jsx("button",{onClick:()=>v("#b2b2b2"),className:"p-1 px-2 bg-slate-800 rounded border border-white/10 text-xs text-slate-400 hover:text-white",children:"A"}),a.jsx("div",{className:"w-px h-6 bg-white/10 mx-1"}),a.jsx("button",{onClick:_,className:"p-1 px-2 bg-slate-800 rounded border border-white/10 text-xs hover:bg-slate-700 flex items-center justify-center gap-2 min-w-[40px]",children:a.jsx(Rb,{size:14})})]}),a.jsx("textarea",{id:"motd-input",value:c,onChange:E=>d(E.target.value),maxLength:4e3,className:"input-field h-32 text-xs font-mono resize-none",placeholder:"Enter fleet MOTD..."}),a.jsxs("div",{className:"text-[10px] text-slate-500 text-right",children:[c.length,"/4000"]}),a.jsxs("div",{className:"mt-2 pt-2 border-t border-white/5",children:[a.jsx("label",{className:"label-text mb-1 text-[13px]",children:"Preview"}),a.jsx("div",{dangerouslySetInnerHTML:{__html:b},className:"bg-black/40 border border-white/10 rounded p-2 text-slate-300 font-sans whitespace-pre-wrap h-32 overflow-y-auto text-[13px] leading-tight"})]})]})]}),a.jsx("hr",{className:"border-white/5"}),a.jsxs("div",{children:[a.jsx("div",{className:"flex justify-between items-end mb-2",children:a.jsx("h3",{className:"label-text mb-0",children:"Apply Template"})}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("button",{onClick:()=>{confirm("Load default?")&&l([{name:"Wing 1",squads:["Squad 1","Squad 2"]}])},className:"w-full text-left p-3 rounded bg-white/5 hover:bg-white/10 border border-white/5 hover:border-white/20 transition group",children:[a.jsx("div",{className:"font-bold text-sm text-slate-200 group-hover:text-white",children:"Default Basic"}),a.jsx("div",{className:"text-[10px] text-slate-500",children:"1 Wing, 2 Squads"})]}),i.map(E=>a.jsxs("div",{className:"relative group",children:[a.jsxs("button",{onClick:()=>D(E),className:"w-full text-left p-3 rounded bg-white/5 hover:bg-white/10 border border-white/5 hover:border-brand-500/50 transition pr-8",children:[a.jsx("div",{className:"font-bold text-sm text-slate-200 group-hover:text-brand-400",children:E.name}),a.jsxs("div",{className:"text-[10px] text-slate-500",children:[E.wing_count," Wings"]})]}),a.jsx("button",{onClick:()=>C(E.id),className:"absolute top-2 right-2 p-1.5 text-slate-500 hover:text-red-400 hover:bg-white/5 rounded transition opacity-0 group-hover:opacity-100 z-10",children:a.jsx(ma,{size:14})})]},E.id)),i.length===0&&a.jsx("div",{className:"text-xs text-slate-500 italic p-2",children:"No custom templates saved."})]})]})]}),a.jsxs("div",{className:"lg:col-span-1 flex flex-col bg-slate-900/50",children:[a.jsxs("div",{className:"p-4 border-b border-white/5 bg-slate-900 flex justify-between items-center",children:[a.jsx("h3",{className:"label-text mb-0 text-brand-500",children:"Active Fleet Structure"}),a.jsx("button",{onClick:$,className:"btn-secondary py-1 px-3 text-xs bg-slate-800 border-slate-700 hover:border-white/30",children:"+ Add Wing"})]}),a.jsxs("div",{className:"flex-grow p-6 space-y-6 bg-black/20 overflow-y-auto",children:[o.length===0&&a.jsx("div",{className:"text-center text-slate-500 py-12 italic",children:"No wings defined."}),o.map((E,k)=>a.jsxs("div",{className:"bg-slate-800 rounded-lg border border-slate-700 overflow-hidden group/wing",children:[a.jsxs("div",{className:"p-2 bg-slate-700/50 flex justify-between items-center border-b border-slate-700",children:[a.jsxs("div",{className:"flex items-center gap-2 w-full",children:[a.jsx("span",{className:"text-slate-400 text-[10px] font-bold uppercase w-8",children:"Wing"}),a.jsx("input",{type:"text",value:E.name,onChange:O=>A(k,O.target.value),className:"bg-transparent border-b border-transparent hover:border-slate-500 focus:border-brand-500 text-white font-bold text-sm outline-none w-full transition px-1"})]}),a.jsxs("div",{className:"flex gap-1 opacity-0 group-hover/wing:opacity-100 transition shrink-0 ml-2",children:[a.jsx("button",{onClick:()=>q(k),className:"text-[10px] bg-slate-600 hover:bg-slate-500 px-1.5 py-0.5 rounded text-white border border-slate-500/50",children:"+Sq"}),a.jsx("button",{onClick:()=>Y(k),className:"text-[10px] bg-red-900/30 text-red-400 hover:bg-red-900/50 px-1.5 py-0.5 rounded border border-red-900/50",children:"Del"})]})]}),a.jsxs("div",{className:"p-2 bg-dark-900/30",children:[E.squads.map((O,L)=>a.jsxs("div",{className:"flex items-center gap-2 mb-2 pl-4 relative",children:[a.jsx("div",{className:"absolute left-2 top-0 bottom-1/2 border-l-2 border-slate-600 w-2 h-full rounded-bl"}),a.jsx("div",{className:"w-2 border-b-2 border-slate-600 h-0 mr-1"}),a.jsx("input",{type:"text",value:O,onChange:H=>G(k,L,H.target.value),className:"bg-dark-900 border border-slate-700 rounded px-2 py-1 text-xs text-white w-full focus:border-brand-500 outline-none"}),a.jsx("button",{onClick:()=>J(k,L),className:"text-slate-600 hover:text-red-400 px-1",children:a.jsx(ct,{size:12})})]},L)),E.squads.length===0&&a.jsx("div",{className:"text-[10px] text-slate-600 italic pl-8",children:"No squads"})]})]},k))]}),a.jsx("div",{className:"p-4 text-[10px] text-slate-500 italic border-t border-white/5 bg-slate-900",children:"Removing wings or squads from this list will DELETE them in-game immediately upon saving."})]})]})]})},ek=()=>{var j;const{token:e}=Wh(),t=dt(),n=U(i2),s=U(ac),[r,i]=w.useState(new Set),[o,l]=w.useState(!1),[c,d]=w.useState(null),u=[{id:"x_up",label:"X-Up",icon:""},{id:"approved",label:"Approved",icon:""},{id:"invited",label:"Invited",icon:""},{id:"esi_join",label:"Detected",icon:""},{id:"left_waitlist",label:"Left WL",icon:""},{id:"left_fleet",label:"Left Fleet",icon:""},{id:"fit_update",label:"Update",icon:""},{id:"ship_change",label:"Reship",icon:""},{id:"moved",label:"Moved",icon:""},{id:"promoted",label:"Promoted",icon:""},{id:"demoted",label:"Demoted",icon:""},{id:"kicked",label:"Kicked",icon:""},{id:"denied",label:"Denied",icon:""}];w.useEffect(()=>{t(No(e))},[t,e]);const h=_=>{const N=new Set(r);N.has(_)?N.delete(_):N.add(_),i(N)},f=()=>i(new Set),p=_=>{l(!0),d(null),W(`/api/management/fleets/history/api/${_}/`).then(N=>N.json()).then(N=>d(N)).catch(()=>d({error:"Error loading data"}))},b=_=>{switch(_){case"x_up":return"bg-brand-500 shadow-[0_0_8px_rgba(245,158,11,0.5)]";case"approved":return"bg-green-500 shadow-[0_0_8px_rgba(34,197,94,0.5)]";case"esi_join":return"bg-blue-500";case"left_waitlist":return"bg-red-500";case"denied":return"bg-red-600";default:return"bg-slate-600"}},g=_=>{switch(_){case"MATCH":return{border:"border-transparent",bg:"bg-transparent",icon:null,textClass:"text-slate-400"};case"UPGRADE":return{border:"border-green-500/50",bg:"bg-green-500/10",icon:"UPGRADE",textClass:"text-green-400"};case"SIDEGRADE":return{border:"border-blue-500/50",bg:"bg-blue-500/10",icon:"SIDEGRADE",textClass:"text-blue-400"};case"DOWNGRADE":return{border:"border-amber-500/50",bg:"bg-amber-500/10",icon:"",textClass:"text-amber-400"};case"MISSING":return{border:"border-red-500/50",bg:"bg-red-500/10",icon:"MISSING",textClass:"text-red-400"};case"EXTRA":return{border:"border-purple-500/50",bg:"bg-purple-500/10",icon:"EXTRA",textClass:"text-purple-400"};default:return{border:"border-white/10",bg:"bg-transparent",icon:"?",textClass:"text-slate-500"}}};if(!n||!n.fleet)return a.jsx("div",{className:"p-12 text-center text-slate-500",children:s?"Loading History...":"No history found."});const{fleet:y,stats:x,logs:m}=n,v=m.filter(_=>r.size===0||r.has(_.action));return a.jsxs("div",{className:"flex flex-col h-[calc(100vh-8rem)] bg-dark-950 overflow-hidden relative rounded-xl border border-white/5 shadow-2xl",children:[a.jsxs("div",{className:"glass-header px-6 py-4 flex justify-between items-center shrink-0 z-40 bg-slate-900/90 backdrop-blur-md shadow-lg relative border-b border-white/10",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs(Re,{to:"/management/fleets",className:"btn-secondary py-1.5 px-3 text-xs flex items-center gap-2 group",children:[a.jsx(sc,{size:12,className:"group-hover:-translate-x-1 transition"})," Fleets"]}),a.jsx("div",{className:"h-6 w-px bg-white/10"}),a.jsxs("div",{children:[a.jsxs("h1",{className:"text-xl font-bold text-white tracking-tight",children:[y.name," ",a.jsx("span",{className:"text-slate-500 font-normal",children:"History Log"})]}),a.jsx("p",{className:"text-xs text-slate-400 mt-0.5",children:"Comprehensive audit trail of all fleet events."})]})]}),a.jsxs("div",{className:"flex gap-4",children:[a.jsxs("div",{className:"px-3 py-1 bg-white/5 border border-white/5 rounded-full flex items-center gap-2",children:[a.jsx("span",{className:"w-2 h-2 rounded-full bg-brand-500"}),a.jsx("span",{className:"text-xs text-slate-400 uppercase font-bold tracking-wider",children:"X-Ups"}),a.jsx("span",{className:"text-sm font-bold text-white font-mono",children:x.xups})]}),a.jsxs("div",{className:"px-3 py-1 bg-white/5 border border-white/5 rounded-full flex items-center gap-2",children:[a.jsx("span",{className:"w-2 h-2 rounded-full bg-blue-500"}),a.jsx("span",{className:"text-xs text-slate-400 uppercase font-bold tracking-wider",children:"Unique Pilots"}),a.jsx("span",{className:"text-sm font-bold text-white font-mono",children:x.pilots})]}),a.jsx(Re,{to:`/fleet/${y.join_token}`,className:"btn-primary text-xs py-1 px-3 shadow-brand-500/20",children:"Open Board "})]})]}),a.jsxs("div",{className:"px-6 py-3 border-b border-white/5 bg-slate-900/50 backdrop-blur-md flex-shrink-0 flex flex-wrap gap-2 items-center relative z-30 overflow-x-auto no-scrollbar shadow-sm",children:[a.jsx("button",{onClick:f,className:"p-1.5 rounded-md border border-red-500/30 text-red-400 hover:bg-red-500/20 transition mr-2",title:"Clear Filters",children:a.jsx(Db,{size:16})}),u.map(_=>a.jsxs("button",{onClick:()=>h(_.id),className:V("flex items-center gap-1.5 px-2.5 py-1 rounded border text-[10px] uppercase font-bold transition select-none",r.has(_.id)?"bg-brand-500 text-white border-brand-400":"bg-white/5 text-slate-400 border-white/10 hover:text-white hover:border-slate-500"),children:[a.jsx("span",{children:_.icon})," ",_.label]},_.id))]}),a.jsx("div",{className:"flex-grow overflow-y-auto custom-scrollbar p-6 relative z-0 bg-dark-950/50",children:a.jsxs("div",{className:"max-w-5xl mx-auto space-y-4",children:[v.map((_,N)=>a.jsxs("div",{className:"flex gap-4 group",children:[a.jsxs("div",{className:"w-24 pt-3 text-right flex-shrink-0",children:[a.jsx("div",{className:"text-xs font-mono font-bold text-slate-400",children:new Date(_.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"})}),a.jsx("div",{className:"text-[10px] text-slate-600",children:new Date(_.timestamp).toLocaleDateString([],{month:"short",day:"numeric"})})]}),a.jsxs("div",{className:"flex flex-col items-center relative",children:[a.jsx("div",{className:`w-2 h-2 rounded-full mt-4 z-10 ${b(_.action)}`}),N!==v.length-1&&a.jsx("div",{className:"w-px bg-white/10 flex-grow h-full absolute top-5 bottom-0"})]}),a.jsx("div",{className:"flex-grow pb-4",children:a.jsxs("div",{className:"glass-panel p-3 border border-white/5 hover:border-white/10 transition flex justify-between items-center bg-slate-900/80",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("img",{src:`https://images.evetech.net/characters/${_.character_id}/portrait?size=64`,className:"w-10 h-10 rounded border border-white/10 opacity-80 group-hover:opacity-100 transition",alt:""}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm font-bold text-slate-200",children:_.character_name}),a.jsx("span",{className:"badge badge-slate text-[9px]",children:_.action.toUpperCase().replace("_"," ")})]}),a.jsxs("div",{className:"text-xs text-slate-500 mt-0.5 flex gap-2 items-center",children:[_.ship_name&&a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx("span",{children:""})," ",_.ship_name]}),_.details&&a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"opacity-50",children:"|"}),a.jsx("span",{className:"italic text-slate-400",children:_.details})]}),_.fit_eft&&a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"opacity-50",children:"|"}),a.jsxs("button",{onClick:()=>p(_.id),className:"text-brand-400 hover:text-brand-300 underline font-bold flex items-center gap-1",children:[a.jsx("span",{children:""})," View Fit"]})]})]})]})]}),_.actor_name&&_.actor_name!==_.character_name&&a.jsxs("div",{className:"text-right",children:[a.jsx("span",{className:"text-[10px] text-slate-500 uppercase tracking-wider block",children:"By"}),a.jsx("span",{className:"text-xs font-bold text-slate-300",children:_.actor_name})]})]})})]},_.id)),v.length===0&&a.jsx("div",{className:"p-12 text-center text-slate-500 italic",children:"No history recorded or matching filter."})]})}),o&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-dark-950/80 backdrop-blur-sm",children:a.jsxs("div",{className:"relative transform rounded-xl bg-slate-900 border border-white/10 shadow-2xl sm:w-full sm:max-w-5xl max-h-[90vh] flex flex-col w-full h-full",children:[a.jsxs("div",{className:"glass-header px-6 py-4 flex justify-between items-center shrink-0",children:[c&&!c.error?a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("img",{src:`https://images.evetech.net/types/${c.hull_id}/icon?size=64`,className:"w-14 h-14 rounded-lg border border-white/10 bg-dark-900 shadow-lg",alt:""}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-2xl font-bold text-white tracking-tight flex items-center gap-2",children:[a.jsx("span",{className:"text-brand-500",children:c.character_name}),a.jsx("span",{className:"text-slate-600 text-lg",children:"vs."}),a.jsx("span",{className:"text-slate-300",children:c.fit_name||"Historical Fit"})]}),a.jsxs("p",{className:"text-sm text-slate-400 font-mono mt-0.5",children:[c.ship_name," (",c.corp_name,")"]})]})]}):a.jsx("h3",{children:"Loading..."}),a.jsx("button",{onClick:()=>l(!1),className:"text-slate-400 hover:text-white transition p-2 hover:bg-white/5 rounded-full",children:a.jsx(ct,{size:24})})]}),a.jsx("div",{className:"px-6 py-6 grid grid-cols-1 md:grid-cols-3 gap-8 overflow-hidden h-full bg-dark-950",children:c&&!c.error?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"md:col-span-1 flex flex-col h-full overflow-hidden",children:[a.jsx("div",{className:"glass-panel p-4 mb-4 flex-grow overflow-y-auto custom-scrollbar bg-black/30 border-white/5",children:a.jsx("pre",{className:"text-[10px] text-slate-400 font-mono whitespace-pre-wrap break-all select-all",children:c.raw_eft})}),a.jsxs("button",{onClick:()=>navigator.clipboard.writeText(c.raw_eft),className:"btn-secondary w-full text-xs py-2 shrink-0",children:[a.jsx(Qh,{size:14})," Copy to Clipboard"]})]}),a.jsx("div",{className:"md:col-span-2 glass-panel p-4 overflow-y-auto custom-scrollbar border-white/5 bg-slate-900/50",children:(j=c.slots)==null?void 0:j.map((_,N)=>a.jsxs("div",{className:"mb-2",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-1 border-b border-white/5 pb-1",children:[a.jsx("h5",{className:"text-slate-400 text-[10px] uppercase font-bold tracking-wider",children:_.name}),_.is_hardpoint&&a.jsxs("span",{className:"text-[9px] text-slate-600 font-mono bg-white/5 px-1.5 rounded",children:["(",_.used," / ",_.total,")"]})]}),a.jsx("div",{className:"space-y-1",children:_.modules.map((S,T)=>{const M=g(S.status),D=T%2===0?"bg-white/5":"bg-transparent",C=S.status==="MATCH"?D:M.bg;return a.jsxs("div",{className:`flex items-center gap-2 px-1.5 py-0.5 rounded border ${M.border} ${C} min-h-[2rem]`,children:[a.jsx("img",{src:`https://images.evetech.net/types/${S.id}/icon?size=32`,className:"w-6 h-6 rounded border border-black/50 shadow-inner flex-shrink-0",alt:""}),a.jsx("div",{className:"flex-grow min-w-0",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-xs font-bold text-slate-200 truncate",children:S.name}),M.icon&&a.jsx("span",{className:`text-[10px] ${M.textClass}`,children:M.icon})]})}),S.quantity>1&&a.jsxs("span",{className:"text-[10px] text-brand-400 font-mono px-1.5 bg-brand-900/20 rounded border border-brand-500/30",children:["x",S.quantity]})]},T)})})]},N))})]}):a.jsx("div",{className:"col-span-3 text-center text-slate-500",children:(c==null?void 0:c.error)||"Loading..."})})]})})]})},tk=()=>{const[e,t]=w.useState([]),[n,s]=w.useState("active"),[r,i]=w.useState(!1),[o,l]=w.useState(null),[c,d]=w.useState(""),[u,h]=w.useState([]),[f,p]=w.useState(null),[b,g]=w.useState(""),[y,x]=w.useState("permanent"),m=()=>{W(`/api/management/bans/?filter=${n}`).then(N=>N.json()).then(N=>t(N.bans||[]))};w.useEffect(()=>{m()},[n]),w.useEffect(()=>{if(c.length<3){h([]);return}const N=setTimeout(()=>{W(`/api/mgmt/search_users/?q=${encodeURIComponent(c)}`).then(S=>S.json()).then(S=>h(S.results||[]))},300);return()=>clearTimeout(N)},[c]);const v=(N=null)=>{N?(l(N.id),p({id:N.user_id,username:N.user_name}),g(N.reason),x("permanent")):(l(null),p(null),g(""),x("permanent"),d(""),h([])),i(!0)},j=()=>{var T;if(!f&&!o)return alert("Please select a user.");if(!b)return alert("Please provide a reason.");const N={reason:b,duration:y,action:o?"update":"add"};o?N.ban_id=o:N.user_id=f.id;const S=(T=document.cookie.match(/csrftoken=([^;]+)/))==null?void 0:T[1];W(o?"/api/mgmt/bans/update/":"/api/mgmt/bans/add/",{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":S},body:JSON.stringify(N)}).then(M=>M.json()).then(M=>{M.success?(i(!1),m()):alert(M.error)})},_=(N,S)=>{var M;if(!confirm(`Are you sure you want to remove the ban for ${S}?`))return;const T=(M=document.cookie.match(/csrftoken=([^;]+)/))==null?void 0:M[1];W("/api/mgmt/bans/update/",{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":T},body:JSON.stringify({action:"remove",ban_id:N})}).then(D=>D.json()).then(D=>{D.success?m():alert(D.error)})};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"heading-1",children:"Ban Management"}),a.jsx("p",{className:"text-slate-400 mt-1 text-sm",children:"Manage user bans and restrictions."})]}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsxs("a",{href:"/management/bans/audit",className:"btn-secondary text-xs py-2 px-4 flex items-center gap-2",children:[a.jsx("span",{children:""})," Audit Log"]}),a.jsxs("button",{onClick:()=>v(),className:"btn-danger text-xs py-2 px-4 shadow-lg shadow-red-900/20 flex items-center gap-2",children:[a.jsx("span",{children:""})," Ban User"]})]})]}),a.jsx("div",{className:"flex gap-2",children:["active","permanent"].map(N=>a.jsx("button",{onClick:()=>s(N),className:`px-3 py-1.5 rounded-lg text-xs font-bold uppercase transition border ${n===N?"bg-brand-500 text-white border-brand-400":"bg-white/5 text-slate-400 border-white/10 hover:text-white hover:border-white/30"}`,children:N},N))}),a.jsxs("div",{className:"glass-panel overflow-hidden",children:[a.jsx("div",{className:"p-6 border-b border-white/5",children:a.jsx("h3",{className:"font-bold text-slate-200 capitalize",children:n==="active"?"Active Bans":"Permanent Bans Only"})}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full text-left text-sm text-slate-400",children:[a.jsx("thead",{className:"text-xs uppercase bg-white/5 text-slate-300 font-bold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-4",children:"User"}),a.jsx("th",{className:"px-6 py-4",children:"Reason"}),a.jsx("th",{className:"px-6 py-4",children:"Issued By"}),a.jsx("th",{className:"px-6 py-4",children:"Issued At"}),a.jsx("th",{className:"px-6 py-4",children:"Expires"}),a.jsx("th",{className:"px-6 py-4 text-right",children:"Actions"})]})}),a.jsxs("tbody",{className:"divide-y divide-white/5 text-slate-300",children:[e.map(N=>a.jsxs("tr",{className:`hover:bg-white/5 transition ${N.is_active?"":"opacity-50"}`,children:[a.jsx("td",{className:"px-6 py-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-slate-800 border border-slate-700 flex items-center justify-center text-xs font-bold text-slate-400 overflow-hidden",children:N.user_char_id?a.jsx("img",{src:`https://images.evetech.net/characters/${N.user_char_id}/portrait?size=64`,alt:"",className:"w-full h-full object-cover"}):(N.user_name||"?").slice(0,2).toUpperCase()}),a.jsxs("div",{children:[a.jsx("div",{className:"font-bold text-slate-200",children:N.user_char_name||N.user_name}),a.jsxs("div",{className:"text-xs text-slate-500",children:["ID: ",N.user_char_id||N.user_name]})]})]})}),a.jsx("td",{className:"px-6 py-4 max-w-xs truncate",title:N.reason,children:N.reason}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("span",{className:"badge badge-slate",children:N.issuer_char_name||N.issuer_name||"System"})}),a.jsx("td",{className:"px-6 py-4 text-slate-400 text-xs font-mono",children:new Date(N.created_at).toLocaleString()}),a.jsx("td",{className:"px-6 py-4 text-xs font-mono",children:N.expires_at?a.jsx("span",{className:N.is_active?"text-brand-400":"text-green-400",children:new Date(N.expires_at).toLocaleString()}):a.jsx("span",{className:"text-red-400 font-bold uppercase",children:"Permanent"})}),a.jsx("td",{className:"px-6 py-4 text-right",children:a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx("button",{onClick:()=>v(N),className:"btn-secondary p-1.5",title:"Edit Ban",children:a.jsx(ef,{size:16})}),a.jsx("button",{onClick:()=>_(N.id,N.user_char_name||N.user_name),className:"btn-secondary p-1.5 hover:text-green-400 hover:border-green-500/50",title:"Lift Ban",children:a.jsx(Db,{size:16})})]})})]},N.id)),e.length===0&&a.jsx("tr",{children:a.jsx("td",{colSpan:"6",className:"p-12 text-center text-slate-500 italic",children:"No bans found matching filter."})})]})]})})]}),r&&a.jsx("div",{className:"fixed inset-0 bg-dark-950/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-slate-900 border border-white/10 rounded-xl shadow-2xl w-full max-w-lg transform transition-all scale-100",children:[a.jsxs("div",{className:"glass-header px-6 py-4 flex justify-between items-center border-b border-white/5",children:[a.jsx("h3",{className:"text-xl font-bold text-white",children:o?"Update Ban":"Ban User"}),a.jsx("button",{onClick:()=>i(!1),className:"text-slate-400 hover:text-white transition",children:""})]}),a.jsxs("div",{className:"p-6 space-y-4",children:[!o&&a.jsxs("div",{children:[a.jsx("label",{className:"label-text",children:"Target User"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"text",className:"input-field pl-10",placeholder:"Search by character name...",value:c,onChange:N=>d(N.target.value)}),a.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:a.jsx(is,{className:"w-5 h-5 text-slate-500"})}),u.length>0&&a.jsx("div",{className:"absolute w-full mt-1 bg-slate-800 border border-slate-700 rounded-lg shadow-xl z-50 max-h-48 overflow-y-auto custom-scrollbar",children:u.map(N=>a.jsxs("div",{className:"px-4 py-2 hover:bg-slate-700 cursor-pointer border-b border-slate-700 last:border-0 transition",onClick:()=>{p(N),d(N.username),h([])},children:[a.jsx("div",{className:"font-bold text-slate-200 text-sm",children:N.username}),a.jsx("div",{className:"text-xs text-slate-400",children:N.corp})]},N.id))})]}),f&&a.jsx("input",{type:"hidden",value:f.id})]}),o&&a.jsxs("div",{children:[a.jsx("label",{className:"label-text",children:"Target User"}),a.jsx("input",{type:"text",readOnly:!0,className:"input-field bg-slate-800 text-slate-400 cursor-not-allowed border-slate-700",value:(f==null?void 0:f.username)||""})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label-text",children:"Reason"}),a.jsx("textarea",{rows:"3",className:"input-field resize-none",placeholder:"Why is this user being banned?",value:b,onChange:N=>g(N.target.value)})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label-text",children:"Duration"}),a.jsxs("select",{className:"select-field",value:y,onChange:N=>x(N.target.value),children:[a.jsx("option",{value:"5",children:"5 Minutes"}),a.jsx("option",{value:"60",children:"1 Hour"}),a.jsx("option",{value:"1440",children:"24 Hours"}),a.jsx("option",{value:"10080",children:"1 Week"}),a.jsx("option",{value:"43200",children:"1 Month"}),a.jsx("option",{value:"525600",children:"1 Year"}),a.jsx("option",{value:"permanent",children:"Permanent"})]})]})]}),a.jsxs("div",{className:"p-6 border-t border-white/5 bg-slate-900/50 flex justify-end gap-2",children:[a.jsx("button",{onClick:()=>i(!1),className:"btn-ghost text-xs",children:"Cancel"}),a.jsx("button",{onClick:j,className:"btn-danger text-xs px-6 shadow-lg shadow-red-900/20",children:"Confirm Ban"})]})]})})]})},nk=()=>{const[e,t]=w.useState([]),[n,s]=$h(),r=n.get("q")||"",i=parseInt(n.get("page"))||1,[o,l]=w.useState(20),[c,d]=w.useState({total:1,current:1});w.useEffect(()=>{W(`/api/management/bans/audit/?q=${encodeURIComponent(r)}&page=${i}&limit=${o}`).then(f=>f.json()).then(f=>{t(f.logs||[]),d(f.pagination||{total:1,current:1})})},[r,i,o]);const u=f=>{f.preventDefault();const p=new FormData(f.target);s({q:p.get("q"),page:1})},h=f=>{s({q:r,page:f})};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4 border-b border-white/5 pb-6",children:[a.jsxs("div",{className:"flex-grow",children:[a.jsx("h1",{className:"heading-1",children:"Ban Audit Log"}),a.jsxs("div",{className:"flex items-center gap-4 mt-1",children:[a.jsx("p",{className:"text-slate-400 text-sm",children:"History of all ban-related actions."}),a.jsxs(Re,{to:"/management/bans",className:"text-xs text-brand-400 hover:text-white transition flex items-center gap-1",children:[a.jsx(sc,{size:12})," Manage Bans"]})]})]}),a.jsxs("form",{onSubmit:u,className:"w-full md:w-auto relative group",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none transition group-focus-within:text-brand-500",children:a.jsx(is,{className:"w-5 h-5 text-slate-500"})}),a.jsx("input",{type:"text",name:"q",defaultValue:r,className:"input-field pl-10 md:w-64 bg-dark-900/50 border-white/10 focus:border-brand-500",placeholder:"Search user or details..."})]})]}),a.jsxs("div",{className:"glass-panel overflow-hidden",children:[a.jsxs("div",{className:"p-3 border-b border-white/5 bg-slate-900/50 flex justify-between items-center",children:[a.jsx("h3",{className:"label-text mb-0 w-1/3",children:"Audit Entries"}),a.jsx("div",{className:"w-1/3 flex justify-center",children:a.jsx(hl,{current:i,total:c.total||1,onChange:h})}),a.jsx("div",{className:"w-1/3 flex justify-end",children:a.jsxs("select",{value:o,onChange:f=>{l(Number(f.target.value)),s({q:r,page:1})},className:"bg-black/30 border border-slate-700 text-slate-300 text-xs rounded px-2 py-1 outline-none focus:border-brand-500",children:[a.jsx("option",{value:"10",children:"10 Rows"}),a.jsx("option",{value:"20",children:"20 Rows"}),a.jsx("option",{value:"25",children:"25 Rows"}),a.jsx("option",{value:"50",children:"50 Rows"}),a.jsx("option",{value:"100",children:"100 Rows"})]})})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full text-left text-sm text-slate-400",children:[a.jsx("thead",{className:"text-xs uppercase bg-white/5 text-slate-300 font-bold border-b border-white/5",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-4",children:"Timestamp"}),a.jsx("th",{className:"px-6 py-4",children:"Action"}),a.jsx("th",{className:"px-6 py-4",children:"Target User"}),a.jsx("th",{className:"px-6 py-4",children:"Performed By"}),a.jsx("th",{className:"px-6 py-4",children:"Details"})]})}),a.jsxs("tbody",{className:"divide-y divide-white/5 text-slate-300",children:[e.map(f=>a.jsxs("tr",{className:"hover:bg-white/5 transition group",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap font-mono text-xs",children:new Date(f.timestamp).toLocaleString()}),a.jsxs("td",{className:"px-6 py-4",children:[f.action==="create"&&a.jsx("span",{className:"badge badge-red bg-red-900/20 text-red-400 border-red-500/30",children:"BANNED"}),f.action==="update"&&a.jsx("span",{className:"badge badge-brand bg-amber-900/20 text-amber-400 border-amber-500/30",children:"UPDATED"}),f.action==="remove"&&a.jsx("span",{className:"badge badge-green bg-green-900/20 text-green-400 border-green-500/30",children:"REMOVED"}),f.action==="expire"&&a.jsx("span",{className:"badge badge-slate bg-slate-800 text-slate-400 border-slate-600",children:"EXPIRED"}),!["create","update","remove","expire"].includes(f.action)&&a.jsx("span",{className:"badge badge-slate",children:f.action.toUpperCase()})]}),a.jsx("td",{className:"px-6 py-4 font-bold text-white",children:f.target_name||"Unknown"}),a.jsx("td",{className:"px-6 py-4 text-slate-400",children:f.actor_name||"System"}),a.jsx("td",{className:"px-6 py-4 text-xs text-slate-500 italic max-w-md truncate group-hover:text-slate-300 transition",title:f.details,children:f.details})]},f.timestamp+f.action)),e.length===0&&a.jsx("tr",{children:a.jsx("td",{colSpan:"5",className:"p-12 text-center text-slate-500 italic",children:"No audit logs found."})})]})]})}),a.jsx("div",{className:"p-3 border-t border-white/5 bg-slate-900/50 flex justify-center items-center",children:a.jsx(hl,{current:i,total:c.total||1,onChange:h})})]})]})};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function xa(e){return e+.5|0}const Wn=(e,t,n)=>Math.max(Math.min(e,n),t);function ii(e){return Wn(xa(e*2.55),0,255)}function es(e){return Wn(xa(e*255),0,255)}function dn(e){return Wn(xa(e/2.55)/100,0,1)}function um(e){return Wn(xa(e*100),0,100)}const yt={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Ou=[..."0123456789ABCDEF"],sk=e=>Ou[e&15],rk=e=>Ou[(e&240)>>4]+Ou[e&15],Xa=e=>(e&240)>>4===(e&15),ik=e=>Xa(e.r)&&Xa(e.g)&&Xa(e.b)&&Xa(e.a);function ak(e){var t=e.length,n;return e[0]==="#"&&(t===4||t===5?n={r:255&yt[e[1]]*17,g:255&yt[e[2]]*17,b:255&yt[e[3]]*17,a:t===5?yt[e[4]]*17:255}:(t===7||t===9)&&(n={r:yt[e[1]]<<4|yt[e[2]],g:yt[e[3]]<<4|yt[e[4]],b:yt[e[5]]<<4|yt[e[6]],a:t===9?yt[e[7]]<<4|yt[e[8]]:255})),n}const ok=(e,t)=>e<255?t(e):"";function lk(e){var t=ik(e)?sk:rk;return e?"#"+t(e.r)+t(e.g)+t(e.b)+ok(e.a,t):void 0}const ck=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Gb(e,t,n){const s=t*Math.min(n,1-n),r=(i,o=(i+e/30)%12)=>n-s*Math.max(Math.min(o-3,9-o,1),-1);return[r(0),r(8),r(4)]}function dk(e,t,n){const s=(r,i=(r+e/60)%6)=>n-n*t*Math.max(Math.min(i,4-i,1),0);return[s(5),s(3),s(1)]}function uk(e,t,n){const s=Gb(e,1,.5);let r;for(t+n>1&&(r=1/(t+n),t*=r,n*=r),r=0;r<3;r++)s[r]*=1-t-n,s[r]+=t;return s}function hk(e,t,n,s,r){return e===r?(t-n)/s+(t<n?6:0):t===r?(n-e)/s+2:(e-t)/s+4}function of(e){const n=e.r/255,s=e.g/255,r=e.b/255,i=Math.max(n,s,r),o=Math.min(n,s,r),l=(i+o)/2;let c,d,u;return i!==o&&(u=i-o,d=l>.5?u/(2-i-o):u/(i+o),c=hk(n,s,r,u,i),c=c*60+.5),[c|0,d||0,l]}function lf(e,t,n,s){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,s)).map(es)}function cf(e,t,n){return lf(Gb,e,t,n)}function fk(e,t,n){return lf(uk,e,t,n)}function pk(e,t,n){return lf(dk,e,t,n)}function Kb(e){return(e%360+360)%360}function mk(e){const t=ck.exec(e);let n=255,s;if(!t)return;t[5]!==s&&(n=t[6]?ii(+t[5]):es(+t[5]));const r=Kb(+t[2]),i=+t[3]/100,o=+t[4]/100;return t[1]==="hwb"?s=fk(r,i,o):t[1]==="hsv"?s=pk(r,i,o):s=cf(r,i,o),{r:s[0],g:s[1],b:s[2],a:n}}function xk(e,t){var n=of(e);n[0]=Kb(n[0]+t),n=cf(n),e.r=n[0],e.g=n[1],e.b=n[2]}function gk(e){if(!e)return;const t=of(e),n=t[0],s=um(t[1]),r=um(t[2]);return e.a<255?`hsla(${n}, ${s}%, ${r}%, ${dn(e.a)})`:`hsl(${n}, ${s}%, ${r}%)`}const hm={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},fm={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function bk(){const e={},t=Object.keys(fm),n=Object.keys(hm);let s,r,i,o,l;for(s=0;s<t.length;s++){for(o=l=t[s],r=0;r<n.length;r++)i=n[r],l=l.replace(i,hm[i]);i=parseInt(fm[o],16),e[l]=[i>>16&255,i>>8&255,i&255]}return e}let qa;function vk(e){qa||(qa=bk(),qa.transparent=[0,0,0,0]);const t=qa[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const yk=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function wk(e){const t=yk.exec(e);let n=255,s,r,i;if(t){if(t[7]!==s){const o=+t[7];n=t[8]?ii(o):Wn(o*255,0,255)}return s=+t[1],r=+t[3],i=+t[5],s=255&(t[2]?ii(s):Wn(s,0,255)),r=255&(t[4]?ii(r):Wn(r,0,255)),i=255&(t[6]?ii(i):Wn(i,0,255)),{r:s,g:r,b:i,a:n}}}function jk(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${dn(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}const ad=e=>e<=.0031308?e*12.92:Math.pow(e,1/2.4)*1.055-.055,Bs=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function _k(e,t,n){const s=Bs(dn(e.r)),r=Bs(dn(e.g)),i=Bs(dn(e.b));return{r:es(ad(s+n*(Bs(dn(t.r))-s))),g:es(ad(r+n*(Bs(dn(t.g))-r))),b:es(ad(i+n*(Bs(dn(t.b))-i))),a:e.a+n*(t.a-e.a)}}function Ga(e,t,n){if(e){let s=of(e);s[t]=Math.max(0,Math.min(s[t]+s[t]*n,t===0?360:1)),s=cf(s),e.r=s[0],e.g=s[1],e.b=s[2]}}function Qb(e,t){return e&&Object.assign(t||{},e)}function pm(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=es(e[3]))):(t=Qb(e,{r:0,g:0,b:0,a:1}),t.a=es(t.a)),t}function Nk(e){return e.charAt(0)==="r"?wk(e):mk(e)}class Zi{constructor(t){if(t instanceof Zi)return t;const n=typeof t;let s;n==="object"?s=pm(t):n==="string"&&(s=ak(t)||vk(t)||Nk(t)),this._rgb=s,this._valid=!!s}get valid(){return this._valid}get rgb(){var t=Qb(this._rgb);return t&&(t.a=dn(t.a)),t}set rgb(t){this._rgb=pm(t)}rgbString(){return this._valid?jk(this._rgb):void 0}hexString(){return this._valid?lk(this._rgb):void 0}hslString(){return this._valid?gk(this._rgb):void 0}mix(t,n){if(t){const s=this.rgb,r=t.rgb;let i;const o=n===i?.5:n,l=2*o-1,c=s.a-r.a,d=((l*c===-1?l:(l+c)/(1+l*c))+1)/2;i=1-d,s.r=255&d*s.r+i*r.r+.5,s.g=255&d*s.g+i*r.g+.5,s.b=255&d*s.b+i*r.b+.5,s.a=o*s.a+(1-o)*r.a,this.rgb=s}return this}interpolate(t,n){return t&&(this._rgb=_k(this._rgb,t._rgb,n)),this}clone(){return new Zi(this.rgb)}alpha(t){return this._rgb.a=es(t),this}clearer(t){const n=this._rgb;return n.a*=1-t,this}greyscale(){const t=this._rgb,n=xa(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=n,this}opaquer(t){const n=this._rgb;return n.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return Ga(this._rgb,2,t),this}darken(t){return Ga(this._rgb,2,-t),this}saturate(t){return Ga(this._rgb,1,t),this}desaturate(t){return Ga(this._rgb,1,-t),this}rotate(t){return xk(this._rgb,t),this}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function nn(){}const kk=(()=>{let e=0;return()=>e++})();function he(e){return e==null}function Pe(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function re(e){return e!==null&&Object.prototype.toString.call(e)==="[object Object]"}function Et(e){return(typeof e=="number"||e instanceof Number)&&isFinite(+e)}function Vt(e,t){return Et(e)?e:t}function ne(e,t){return typeof e>"u"?t:e}const Sk=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100:+e/t,Jb=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100*t:+e;function me(e,t,n){if(e&&typeof e.call=="function")return e.apply(n,t)}function le(e,t,n,s){let r,i,o;if(Pe(e))for(i=e.length,r=0;r<i;r++)t.call(n,e[r],r);else if(re(e))for(o=Object.keys(e),i=o.length,r=0;r<i;r++)t.call(n,e[o[r]],o[r])}function pl(e,t){let n,s,r,i;if(!e||!t||e.length!==t.length)return!1;for(n=0,s=e.length;n<s;++n)if(r=e[n],i=t[n],r.datasetIndex!==i.datasetIndex||r.index!==i.index)return!1;return!0}function ml(e){if(Pe(e))return e.map(ml);if(re(e)){const t=Object.create(null),n=Object.keys(e),s=n.length;let r=0;for(;r<s;++r)t[n[r]]=ml(e[n[r]]);return t}return e}function Zb(e){return["__proto__","prototype","constructor"].indexOf(e)===-1}function Ck(e,t,n,s){if(!Zb(e))return;const r=t[e],i=n[e];re(r)&&re(i)?ea(r,i,s):t[e]=ml(i)}function ea(e,t,n){const s=Pe(t)?t:[t],r=s.length;if(!re(e))return e;n=n||{};const i=n.merger||Ck;let o;for(let l=0;l<r;++l){if(o=s[l],!re(o))continue;const c=Object.keys(o);for(let d=0,u=c.length;d<u;++d)i(c[d],e,o,n)}return e}function Ni(e,t){return ea(e,t,{merger:Ek})}function Ek(e,t,n){if(!Zb(e))return;const s=t[e],r=n[e];re(s)&&re(r)?Ni(s,r):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=ml(r))}const mm={"":e=>e,x:e=>e.x,y:e=>e.y};function Tk(e){const t=e.split("."),n=[];let s="";for(const r of t)s+=r,s.endsWith("\\")?s=s.slice(0,-1)+".":(n.push(s),s="");return n}function Mk(e){const t=Tk(e);return n=>{for(const s of t){if(s==="")break;n=n&&n[s]}return n}}function Ls(e,t){return(mm[t]||(mm[t]=Mk(t)))(e)}function df(e){return e.charAt(0).toUpperCase()+e.slice(1)}const ta=e=>typeof e<"u",as=e=>typeof e=="function",xm=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0};function Pk(e){return e.type==="mouseup"||e.type==="click"||e.type==="contextmenu"}const ue=Math.PI,Te=2*ue,xl=Number.POSITIVE_INFINITY,Ok=ue/180,De=ue/2,fs=ue/4,gm=ue*2/3,ev=Math.log10,ts=Math.sign;function Co(e,t,n){return Math.abs(e-t)<n}function bm(e){const t=Math.round(e);e=Co(e,t,e/1e3)?t:e;const n=Math.pow(10,Math.floor(ev(e))),s=e/n;return(s<=1?1:s<=2?2:s<=5?5:10)*n}function Rk(e){const t=[],n=Math.sqrt(e);let s;for(s=1;s<n;s++)e%s===0&&(t.push(s),t.push(e/s));return n===(n|0)&&t.push(n),t.sort((r,i)=>r-i).pop(),t}function Dk(e){return typeof e=="symbol"||typeof e=="object"&&e!==null&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}function gl(e){return!Dk(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function Lk(e,t){const n=Math.round(e);return n-t<=e&&n+t>=e}function Ak(e,t,n){let s,r,i;for(s=0,r=e.length;s<r;s++)i=e[s][n],isNaN(i)||(t.min=Math.min(t.min,i),t.max=Math.max(t.max,i))}function fn(e){return e*(ue/180)}function zk(e){return e*(180/ue)}function vm(e){if(!Et(e))return;let t=1,n=0;for(;Math.round(e*t)/t!==e;)t*=10,n++;return n}function tv(e,t){const n=t.x-e.x,s=t.y-e.y,r=Math.sqrt(n*n+s*s);let i=Math.atan2(s,n);return i<-.5*ue&&(i+=Te),{angle:i,distance:r}}function Fk(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function Kt(e){return(e%Te+Te)%Te}function bl(e,t,n,s){const r=Kt(e),i=Kt(t),o=Kt(n),l=Kt(i-r),c=Kt(o-r),d=Kt(r-i),u=Kt(r-o);return r===i||r===o||s&&i===o||l>c&&d<u}function it(e,t,n){return Math.max(t,Math.min(n,e))}function Ik(e){return it(e,-32768,32767)}function _s(e,t,n,s=1e-6){return e>=Math.min(t,n)-s&&e<=Math.max(t,n)+s}function uf(e,t,n){n=n||(o=>e[o]<t);let s=e.length-1,r=0,i;for(;s-r>1;)i=r+s>>1,n(i)?r=i:s=i;return{lo:r,hi:s}}const Ru=(e,t,n,s)=>uf(e,n,s?r=>{const i=e[r][t];return i<n||i===n&&e[r+1][t]===n}:r=>e[r][t]<n),Wk=(e,t,n)=>uf(e,n,s=>e[s][t]>=n);function $k(e,t,n){let s=0,r=e.length;for(;s<r&&e[s]<t;)s++;for(;r>s&&e[r-1]>n;)r--;return s>0||r<e.length?e.slice(s,r):e}const nv=["push","pop","shift","splice","unshift"];function Bk(e,t){if(e._chartjs){e._chartjs.listeners.push(t);return}Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),nv.forEach(n=>{const s="_onData"+df(n),r=e[n];Object.defineProperty(e,n,{configurable:!0,enumerable:!1,value(...i){const o=r.apply(this,i);return e._chartjs.listeners.forEach(l=>{typeof l[s]=="function"&&l[s](...i)}),o}})})}function ym(e,t){const n=e._chartjs;if(!n)return;const s=n.listeners,r=s.indexOf(t);r!==-1&&s.splice(r,1),!(s.length>0)&&(nv.forEach(i=>{delete e[i]}),delete e._chartjs)}function sv(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const rv=function(){return typeof window>"u"?function(e){return e()}:window.requestAnimationFrame}();function iv(e,t){let n=[],s=!1;return function(...r){n=r,s||(s=!0,rv.call(window,()=>{s=!1,e.apply(t,n)}))}}function Hk(e,t){let n;return function(...s){return t?(clearTimeout(n),n=setTimeout(e,t,s)):e.apply(this,s),t}}const hf=e=>e==="start"?"left":e==="end"?"right":"center",Ue=(e,t,n)=>e==="start"?t:e==="end"?n:(t+n)/2,Uk=(e,t,n,s)=>e===(s?"left":"right")?n:e==="center"?(t+n)/2:t,Ka=e=>e===0||e===1,wm=(e,t,n)=>-(Math.pow(2,10*(e-=1))*Math.sin((e-t)*Te/n)),jm=(e,t,n)=>Math.pow(2,-10*e)*Math.sin((e-t)*Te/n)+1,ki={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>-Math.cos(e*De)+1,easeOutSine:e=>Math.sin(e*De),easeInOutSine:e=>-.5*(Math.cos(ue*e)-1),easeInExpo:e=>e===0?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>e===1?1:-Math.pow(2,-10*e)+1,easeInOutExpo:e=>Ka(e)?e:e<.5?.5*Math.pow(2,10*(e*2-1)):.5*(-Math.pow(2,-10*(e*2-1))+2),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>Ka(e)?e:wm(e,.075,.3),easeOutElastic:e=>Ka(e)?e:jm(e,.075,.3),easeInOutElastic(e){return Ka(e)?e:e<.5?.5*wm(e*2,.1125,.45):.5+.5*jm(e*2-1,.1125,.45)},easeInBack(e){return e*e*((1.70158+1)*e-1.70158)},easeOutBack(e){return(e-=1)*e*((1.70158+1)*e+1.70158)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?.5*(e*e*(((t*=1.525)+1)*e-t)):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},easeInBounce:e=>1-ki.easeOutBounce(1-e),easeOutBounce(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:e=>e<.5?ki.easeInBounce(e*2)*.5:ki.easeOutBounce(e*2-1)*.5+.5};function av(e){if(e&&typeof e=="object"){const t=e.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function _m(e){return av(e)?e:new Zi(e)}function od(e){return av(e)?e:new Zi(e).saturate(.5).darken(.1).hexString()}const Vk=["x","y","borderWidth","radius","tension"],Yk=["color","borderColor","backgroundColor"];function Xk(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),e.set("animations",{colors:{type:"color",properties:Yk},numbers:{type:"number",properties:Vk}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function qk(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Nm=new Map;function Gk(e,t){t=t||{};const n=e+JSON.stringify(t);let s=Nm.get(n);return s||(s=new Intl.NumberFormat(e,t),Nm.set(n,s)),s}function ff(e,t,n){return Gk(t,n).format(e)}const Kk={values(e){return Pe(e)?e:""+e},numeric(e,t,n){if(e===0)return"0";const s=this.chart.options.locale;let r,i=e;if(n.length>1){const d=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(d<1e-4||d>1e15)&&(r="scientific"),i=Qk(e,n)}const o=ev(Math.abs(i)),l=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),c={notation:r,minimumFractionDigits:l,maximumFractionDigits:l};return Object.assign(c,this.options.ticks.format),ff(e,s,c)}};function Qk(e,t){let n=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(n)>=1&&e!==Math.floor(e)&&(n=e-Math.floor(e)),n}var ov={formatters:Kk};function Jk(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,n)=>n.lineWidth,tickColor:(t,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:ov.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const As=Object.create(null),Du=Object.create(null);function Si(e,t){if(!t)return e;const n=t.split(".");for(let s=0,r=n.length;s<r;++s){const i=n[s];e=e[i]||(e[i]=Object.create(null))}return e}function ld(e,t,n){return typeof t=="string"?ea(Si(e,t),n):ea(Si(e,""),t)}class Zk{constructor(t,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=s=>s.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(s,r)=>od(r.backgroundColor),this.hoverBorderColor=(s,r)=>od(r.borderColor),this.hoverColor=(s,r)=>od(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(n)}set(t,n){return ld(this,t,n)}get(t){return Si(this,t)}describe(t,n){return ld(Du,t,n)}override(t,n){return ld(As,t,n)}route(t,n,s,r){const i=Si(this,t),o=Si(this,s),l="_"+n;Object.defineProperties(i,{[l]:{value:i[n],writable:!0},[n]:{enumerable:!0,get(){const c=this[l],d=o[r];return re(c)?Object.assign({},d,c):ne(c,d)},set(c){this[l]=c}}})}apply(t){t.forEach(n=>n(this))}}var Ce=new Zk({_scriptable:e=>!e.startsWith("on"),_indexable:e=>e!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[Xk,qk,Jk]);function eS(e){return!e||he(e.size)||he(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}function km(e,t,n,s,r){let i=t[r];return i||(i=t[r]=e.measureText(r).width,n.push(r)),i>s&&(s=i),s}function ps(e,t,n){const s=e.currentDevicePixelRatio,r=n!==0?Math.max(n/2,.5):0;return Math.round((t-r)*s)/s+r}function Sm(e,t){!t&&!e||(t=t||e.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function Cm(e,t,n,s){lv(e,t,n,s,null)}function lv(e,t,n,s,r){let i,o,l,c,d,u,h,f;const p=t.pointStyle,b=t.rotation,g=t.radius;let y=(b||0)*Ok;if(p&&typeof p=="object"&&(i=p.toString(),i==="[object HTMLImageElement]"||i==="[object HTMLCanvasElement]")){e.save(),e.translate(n,s),e.rotate(y),e.drawImage(p,-p.width/2,-p.height/2,p.width,p.height),e.restore();return}if(!(isNaN(g)||g<=0)){switch(e.beginPath(),p){default:r?e.ellipse(n,s,r/2,g,0,0,Te):e.arc(n,s,g,0,Te),e.closePath();break;case"triangle":u=r?r/2:g,e.moveTo(n+Math.sin(y)*u,s-Math.cos(y)*g),y+=gm,e.lineTo(n+Math.sin(y)*u,s-Math.cos(y)*g),y+=gm,e.lineTo(n+Math.sin(y)*u,s-Math.cos(y)*g),e.closePath();break;case"rectRounded":d=g*.516,c=g-d,o=Math.cos(y+fs)*c,h=Math.cos(y+fs)*(r?r/2-d:c),l=Math.sin(y+fs)*c,f=Math.sin(y+fs)*(r?r/2-d:c),e.arc(n-h,s-l,d,y-ue,y-De),e.arc(n+f,s-o,d,y-De,y),e.arc(n+h,s+l,d,y,y+De),e.arc(n-f,s+o,d,y+De,y+ue),e.closePath();break;case"rect":if(!b){c=Math.SQRT1_2*g,u=r?r/2:c,e.rect(n-u,s-c,2*u,2*c);break}y+=fs;case"rectRot":h=Math.cos(y)*(r?r/2:g),o=Math.cos(y)*g,l=Math.sin(y)*g,f=Math.sin(y)*(r?r/2:g),e.moveTo(n-h,s-l),e.lineTo(n+f,s-o),e.lineTo(n+h,s+l),e.lineTo(n-f,s+o),e.closePath();break;case"crossRot":y+=fs;case"cross":h=Math.cos(y)*(r?r/2:g),o=Math.cos(y)*g,l=Math.sin(y)*g,f=Math.sin(y)*(r?r/2:g),e.moveTo(n-h,s-l),e.lineTo(n+h,s+l),e.moveTo(n+f,s-o),e.lineTo(n-f,s+o);break;case"star":h=Math.cos(y)*(r?r/2:g),o=Math.cos(y)*g,l=Math.sin(y)*g,f=Math.sin(y)*(r?r/2:g),e.moveTo(n-h,s-l),e.lineTo(n+h,s+l),e.moveTo(n+f,s-o),e.lineTo(n-f,s+o),y+=fs,h=Math.cos(y)*(r?r/2:g),o=Math.cos(y)*g,l=Math.sin(y)*g,f=Math.sin(y)*(r?r/2:g),e.moveTo(n-h,s-l),e.lineTo(n+h,s+l),e.moveTo(n+f,s-o),e.lineTo(n-f,s+o);break;case"line":o=r?r/2:Math.cos(y)*g,l=Math.sin(y)*g,e.moveTo(n-o,s-l),e.lineTo(n+o,s+l);break;case"dash":e.moveTo(n,s),e.lineTo(n+Math.cos(y)*(r?r/2:g),s+Math.sin(y)*g);break;case!1:e.closePath();break}e.fill(),t.borderWidth>0&&e.stroke()}}function cv(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function pf(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function mf(e){e.restore()}function tS(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),he(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}function nS(e,t,n,s,r){if(r.strikethrough||r.underline){const i=e.measureText(s),o=t-i.actualBoundingBoxLeft,l=t+i.actualBoundingBoxRight,c=n-i.actualBoundingBoxAscent,d=n+i.actualBoundingBoxDescent,u=r.strikethrough?(c+d)/2:d;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=r.decorationWidth||2,e.moveTo(o,u),e.lineTo(l,u),e.stroke()}}function sS(e,t){const n=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=n}function na(e,t,n,s,r,i={}){const o=Pe(t)?t:[t],l=i.strokeWidth>0&&i.strokeColor!=="";let c,d;for(e.save(),e.font=r.string,tS(e,i),c=0;c<o.length;++c)d=o[c],i.backdrop&&sS(e,i.backdrop),l&&(i.strokeColor&&(e.strokeStyle=i.strokeColor),he(i.strokeWidth)||(e.lineWidth=i.strokeWidth),e.strokeText(d,n,s,i.maxWidth)),e.fillText(d,n,s,i.maxWidth),nS(e,n,s,d,i),s+=Number(r.lineHeight);e.restore()}function vl(e,t){const{x:n,y:s,w:r,h:i,radius:o}=t;e.arc(n+o.topLeft,s+o.topLeft,o.topLeft,1.5*ue,ue,!0),e.lineTo(n,s+i-o.bottomLeft),e.arc(n+o.bottomLeft,s+i-o.bottomLeft,o.bottomLeft,ue,De,!0),e.lineTo(n+r-o.bottomRight,s+i),e.arc(n+r-o.bottomRight,s+i-o.bottomRight,o.bottomRight,De,0,!0),e.lineTo(n+r,s+o.topRight),e.arc(n+r-o.topRight,s+o.topRight,o.topRight,0,-De,!0),e.lineTo(n+o.topLeft,s)}const rS=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,iS=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function aS(e,t){const n=(""+e).match(rS);if(!n||n[1]==="normal")return t*1.2;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100;break}return t*e}const oS=e=>+e||0;function xf(e,t){const n={},s=re(t),r=s?Object.keys(t):t,i=re(e)?s?o=>ne(e[o],e[t[o]]):o=>e[o]:()=>e;for(const o of r)n[o]=oS(i(o));return n}function dv(e){return xf(e,{top:"y",right:"x",bottom:"y",left:"x"})}function hr(e){return xf(e,["topLeft","topRight","bottomLeft","bottomRight"])}function Tt(e){const t=dv(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function Ye(e,t){e=e||{},t=t||Ce.font;let n=ne(e.size,t.size);typeof n=="string"&&(n=parseInt(n,10));let s=ne(e.style,t.style);s&&!(""+s).match(iS)&&(console.warn('Invalid font style specified: "'+s+'"'),s=void 0);const r={family:ne(e.family,t.family),lineHeight:aS(ne(e.lineHeight,t.lineHeight),n),size:n,style:s,weight:ne(e.weight,t.weight),string:""};return r.string=eS(r),r}function Qa(e,t,n,s){let r,i,o;for(r=0,i=e.length;r<i;++r)if(o=e[r],o!==void 0&&o!==void 0)return o}function lS(e,t,n){const{min:s,max:r}=e,i=Jb(t,(r-s)/2),o=(l,c)=>n&&l===0?0:l+c;return{min:o(s,-Math.abs(i)),max:o(r,i)}}function Dr(e,t){return Object.assign(Object.create(e),t)}function gf(e,t=[""],n,s,r=()=>e[0]){const i=n||e;typeof s>"u"&&(s=pv("_fallback",e));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:i,_fallback:s,_getTarget:r,override:l=>gf([l,...e],t,i,s)};return new Proxy(o,{deleteProperty(l,c){return delete l[c],delete l._keys,delete e[0][c],!0},get(l,c){return hv(l,c,()=>xS(c,t,e,l))},getOwnPropertyDescriptor(l,c){return Reflect.getOwnPropertyDescriptor(l._scopes[0],c)},getPrototypeOf(){return Reflect.getPrototypeOf(e[0])},has(l,c){return Tm(l).includes(c)},ownKeys(l){return Tm(l)},set(l,c,d){const u=l._storage||(l._storage=r());return l[c]=u[c]=d,delete l._keys,!0}})}function Cr(e,t,n,s){const r={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:uv(e,s),setContext:i=>Cr(e,i,n,s),override:i=>Cr(e.override(i),t,n,s)};return new Proxy(r,{deleteProperty(i,o){return delete i[o],delete e[o],!0},get(i,o,l){return hv(i,o,()=>dS(i,o,l))},getOwnPropertyDescriptor(i,o){return i._descriptors.allKeys?Reflect.has(e,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,o)},getPrototypeOf(){return Reflect.getPrototypeOf(e)},has(i,o){return Reflect.has(e,o)},ownKeys(){return Reflect.ownKeys(e)},set(i,o,l){return e[o]=l,delete i[o],!0}})}function uv(e,t={scriptable:!0,indexable:!0}){const{_scriptable:n=t.scriptable,_indexable:s=t.indexable,_allKeys:r=t.allKeys}=e;return{allKeys:r,scriptable:n,indexable:s,isScriptable:as(n)?n:()=>n,isIndexable:as(s)?s:()=>s}}const cS=(e,t)=>e?e+df(t):t,bf=(e,t)=>re(t)&&e!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function hv(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t)||t==="constructor")return e[t];const s=n();return e[t]=s,s}function dS(e,t,n){const{_proxy:s,_context:r,_subProxy:i,_descriptors:o}=e;let l=s[t];return as(l)&&o.isScriptable(t)&&(l=uS(t,l,e,n)),Pe(l)&&l.length&&(l=hS(t,l,e,o.isIndexable)),bf(t,l)&&(l=Cr(l,r,i&&i[t],o)),l}function uS(e,t,n,s){const{_proxy:r,_context:i,_subProxy:o,_stack:l}=n;if(l.has(e))throw new Error("Recursion detected: "+Array.from(l).join("->")+"->"+e);l.add(e);let c=t(i,o||s);return l.delete(e),bf(e,c)&&(c=vf(r._scopes,r,e,c)),c}function hS(e,t,n,s){const{_proxy:r,_context:i,_subProxy:o,_descriptors:l}=n;if(typeof i.index<"u"&&s(e))return t[i.index%t.length];if(re(t[0])){const c=t,d=r._scopes.filter(u=>u!==c);t=[];for(const u of c){const h=vf(d,r,e,u);t.push(Cr(h,i,o&&o[e],l))}}return t}function fv(e,t,n){return as(e)?e(t,n):e}const fS=(e,t)=>e===!0?t:typeof e=="string"?Ls(t,e):void 0;function pS(e,t,n,s,r){for(const i of t){const o=fS(n,i);if(o){e.add(o);const l=fv(o._fallback,n,r);if(typeof l<"u"&&l!==n&&l!==s)return l}else if(o===!1&&typeof s<"u"&&n!==s)return null}return!1}function vf(e,t,n,s){const r=t._rootScopes,i=fv(t._fallback,n,s),o=[...e,...r],l=new Set;l.add(s);let c=Em(l,o,n,i||n,s);return c===null||typeof i<"u"&&i!==n&&(c=Em(l,o,i,c,s),c===null)?!1:gf(Array.from(l),[""],r,i,()=>mS(t,n,s))}function Em(e,t,n,s,r){for(;n;)n=pS(e,t,n,s,r);return n}function mS(e,t,n){const s=e._getTarget();t in s||(s[t]={});const r=s[t];return Pe(r)&&re(n)?n:r||{}}function xS(e,t,n,s){let r;for(const i of t)if(r=pv(cS(i,e),n),typeof r<"u")return bf(e,r)?vf(n,s,e,r):r}function pv(e,t){for(const n of t){if(!n)continue;const s=n[e];if(typeof s<"u")return s}}function Tm(e){let t=e._keys;return t||(t=e._keys=gS(e._scopes)),t}function gS(e){const t=new Set;for(const n of e)for(const s of Object.keys(n).filter(r=>!r.startsWith("_")))t.add(s);return Array.from(t)}function yf(){return typeof window<"u"&&typeof document<"u"}function wf(e){let t=e.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function yl(e,t,n){let s;return typeof e=="string"?(s=parseInt(e,10),e.indexOf("%")!==-1&&(s=s/100*t.parentNode[n])):s=e,s}const oc=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);function bS(e,t){return oc(e).getPropertyValue(t)}const vS=["top","right","bottom","left"];function Cs(e,t,n){const s={};n=n?"-"+n:"";for(let r=0;r<4;r++){const i=vS[r];s[i]=parseFloat(e[t+"-"+i+n])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}const yS=(e,t,n)=>(e>0||t>0)&&(!n||!n.shadowRoot);function wS(e,t){const n=e.touches,s=n&&n.length?n[0]:e,{offsetX:r,offsetY:i}=s;let o=!1,l,c;if(yS(r,i,e.target))l=r,c=i;else{const d=t.getBoundingClientRect();l=s.clientX-d.left,c=s.clientY-d.top,o=!0}return{x:l,y:c,box:o}}function bs(e,t){if("native"in e)return e;const{canvas:n,currentDevicePixelRatio:s}=t,r=oc(n),i=r.boxSizing==="border-box",o=Cs(r,"padding"),l=Cs(r,"border","width"),{x:c,y:d,box:u}=wS(e,n),h=o.left+(u&&l.left),f=o.top+(u&&l.top);let{width:p,height:b}=t;return i&&(p-=o.width+l.width,b-=o.height+l.height),{x:Math.round((c-h)/p*n.width/s),y:Math.round((d-f)/b*n.height/s)}}function jS(e,t,n){let s,r;if(t===void 0||n===void 0){const i=e&&wf(e);if(!i)t=e.clientWidth,n=e.clientHeight;else{const o=i.getBoundingClientRect(),l=oc(i),c=Cs(l,"border","width"),d=Cs(l,"padding");t=o.width-d.width-c.width,n=o.height-d.height-c.height,s=yl(l.maxWidth,i,"clientWidth"),r=yl(l.maxHeight,i,"clientHeight")}}return{width:t,height:n,maxWidth:s||xl,maxHeight:r||xl}}const $n=e=>Math.round(e*10)/10;function _S(e,t,n,s){const r=oc(e),i=Cs(r,"margin"),o=yl(r.maxWidth,e,"clientWidth")||xl,l=yl(r.maxHeight,e,"clientHeight")||xl,c=jS(e,t,n);let{width:d,height:u}=c;if(r.boxSizing==="content-box"){const f=Cs(r,"border","width"),p=Cs(r,"padding");d-=p.width+f.width,u-=p.height+f.height}return d=Math.max(0,d-i.width),u=Math.max(0,s?d/s:u-i.height),d=$n(Math.min(d,o,c.maxWidth)),u=$n(Math.min(u,l,c.maxHeight)),d&&!u&&(u=$n(d/2)),(t!==void 0||n!==void 0)&&s&&c.height&&u>c.height&&(u=c.height,d=$n(Math.floor(u*s))),{width:d,height:u}}function Mm(e,t,n){const s=t||1,r=$n(e.height*s),i=$n(e.width*s);e.height=$n(e.height),e.width=$n(e.width);const o=e.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${e.height}px`,o.style.width=`${e.width}px`),e.currentDevicePixelRatio!==s||o.height!==r||o.width!==i?(e.currentDevicePixelRatio=s,o.height=r,o.width=i,e.ctx.setTransform(s,0,0,s,0,0),!0):!1}const NS=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};yf()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return e}();function Pm(e,t){const n=bS(e,t),s=n&&n.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}const kS=function(e,t){return{x(n){return e+e+t-n},setWidth(n){t=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,s){return n-s},leftForLtr(n,s){return n-s}}},SS=function(){return{x(e){return e},setWidth(e){},textAlign(e){return e},xPlus(e,t){return e+t},leftForLtr(e,t){return e}}};function fr(e,t,n){return e?kS(t,n):SS()}function mv(e,t){let n,s;(t==="ltr"||t==="rtl")&&(n=e.canvas.style,s=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=s)}function xv(e,t){t!==void 0&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function Ja(e,t,n){return e.options.clip?e[n]:t[n]}function CS(e,t){const{xScale:n,yScale:s}=e;return n&&s?{left:Ja(n,t,"left"),right:Ja(n,t,"right"),top:Ja(s,t,"top"),bottom:Ja(s,t,"bottom")}:t}function ES(e,t){const n=t._clip;if(n.disabled)return!1;const s=CS(t,e.chartArea);return{left:n.left===!1?0:s.left-(n.left===!0?0:n.left),right:n.right===!1?e.width:s.right+(n.right===!0?0:n.right),top:n.top===!1?0:s.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?e.height:s.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class TS{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,n,s,r){const i=n.listeners[r],o=n.duration;i.forEach(l=>l({chart:t,initial:n.initial,numSteps:o,currentStep:Math.min(s-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=rv.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let n=0;this._charts.forEach((s,r)=>{if(!s.running||!s.items.length)return;const i=s.items;let o=i.length-1,l=!1,c;for(;o>=0;--o)c=i[o],c._active?(c._total>s.duration&&(s.duration=c._total),c.tick(t),l=!0):(i[o]=i[i.length-1],i.pop());l&&(r.draw(),this._notify(r,s,t,"progress")),i.length||(s.running=!1,this._notify(r,s,t,"complete"),s.initial=!1),n+=i.length}),this._lastDate=t,n===0&&(this._running=!1)}_getAnims(t){const n=this._charts;let s=n.get(t);return s||(s={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(t,s)),s}listen(t,n,s){this._getAnims(t).listeners[n].push(s)}add(t,n){!n||!n.length||this._getAnims(t).items.push(...n)}has(t){return this._getAnims(t).items.length>0}start(t){const n=this._charts.get(t);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((s,r)=>Math.max(s,r._duration),0),this._refresh())}running(t){if(!this._running)return!1;const n=this._charts.get(t);return!(!n||!n.running||!n.items.length)}stop(t){const n=this._charts.get(t);if(!n||!n.items.length)return;const s=n.items;let r=s.length-1;for(;r>=0;--r)s[r].cancel();n.items=[],this._notify(t,n,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var rn=new TS;const Om="transparent",MS={boolean(e,t,n){return n>.5?t:e},color(e,t,n){const s=_m(e||Om),r=s.valid&&_m(t||Om);return r&&r.valid?r.mix(s,n).hexString():t},number(e,t,n){return e+(t-e)*n}};class PS{constructor(t,n,s,r){const i=n[s];r=Qa([t.to,r,i,t.from]);const o=Qa([t.from,i,r]);this._active=!0,this._fn=t.fn||MS[t.type||typeof o],this._easing=ki[t.easing]||ki.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=n,this._prop=s,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(t,n,s){if(this._active){this._notify(!1);const r=this._target[this._prop],i=s-this._start,o=this._duration-i;this._start=s,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=i,this._loop=!!t.loop,this._to=Qa([t.to,n,r,t.from]),this._from=Qa([t.from,r,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const n=t-this._start,s=this._duration,r=this._prop,i=this._from,o=this._loop,l=this._to;let c;if(this._active=i!==l&&(o||n<s),!this._active){this._target[r]=l,this._notify(!0);return}if(n<0){this._target[r]=i;return}c=n/s%2,c=o&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[r]=this._fn(i,l,c)}wait(){const t=this._promises||(this._promises=[]);return new Promise((n,s)=>{t.push({res:n,rej:s})})}_notify(t){const n=t?"res":"rej",s=this._promises||[];for(let r=0;r<s.length;r++)s[r][n]()}}class gv{constructor(t,n){this._chart=t,this._properties=new Map,this.configure(n)}configure(t){if(!re(t))return;const n=Object.keys(Ce.animation),s=this._properties;Object.getOwnPropertyNames(t).forEach(r=>{const i=t[r];if(!re(i))return;const o={};for(const l of n)o[l]=i[l];(Pe(i.properties)&&i.properties||[r]).forEach(l=>{(l===r||!s.has(l))&&s.set(l,o)})})}_animateOptions(t,n){const s=n.options,r=RS(t,s);if(!r)return[];const i=this._createAnimations(r,s);return s.$shared&&OS(t.options.$animations,s).then(()=>{t.options=s},()=>{}),i}_createAnimations(t,n){const s=this._properties,r=[],i=t.$animations||(t.$animations={}),o=Object.keys(n),l=Date.now();let c;for(c=o.length-1;c>=0;--c){const d=o[c];if(d.charAt(0)==="$")continue;if(d==="options"){r.push(...this._animateOptions(t,n));continue}const u=n[d];let h=i[d];const f=s.get(d);if(h)if(f&&h.active()){h.update(f,u,l);continue}else h.cancel();if(!f||!f.duration){t[d]=u;continue}i[d]=h=new PS(f,t,d,u),r.push(h)}return r}update(t,n){if(this._properties.size===0){Object.assign(t,n);return}const s=this._createAnimations(t,n);if(s.length)return rn.add(this._chart,s),!0}}function OS(e,t){const n=[],s=Object.keys(t);for(let r=0;r<s.length;r++){const i=e[s[r]];i&&i.active()&&n.push(i.wait())}return Promise.all(n)}function RS(e,t){if(!t)return;let n=e.options;if(!n){e.options=t;return}return n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function Rm(e,t){const n=e&&e.options||{},s=n.reverse,r=n.min===void 0?t:0,i=n.max===void 0?t:0;return{start:s?i:r,end:s?r:i}}function DS(e,t,n){if(n===!1)return!1;const s=Rm(e,n),r=Rm(t,n);return{top:r.end,right:s.end,bottom:r.start,left:s.start}}function LS(e){let t,n,s,r;return re(e)?(t=e.top,n=e.right,s=e.bottom,r=e.left):t=n=s=r=e,{top:t,right:n,bottom:s,left:r,disabled:e===!1}}function bv(e,t){const n=[],s=e._getSortedDatasetMetas(t);let r,i;for(r=0,i=s.length;r<i;++r)n.push(s[r].index);return n}function Dm(e,t,n,s={}){const r=e.keys,i=s.mode==="single";let o,l,c,d;if(t===null)return;let u=!1;for(o=0,l=r.length;o<l;++o){if(c=+r[o],c===n){if(u=!0,s.all)continue;break}d=e.values[c],Et(d)&&(i||t===0||ts(t)===ts(d))&&(t+=d)}return!u&&!s.all?0:t}function AS(e,t){const{iScale:n,vScale:s}=t,r=n.axis==="x"?"x":"y",i=s.axis==="x"?"x":"y",o=Object.keys(e),l=new Array(o.length);let c,d,u;for(c=0,d=o.length;c<d;++c)u=o[c],l[c]={[r]:u,[i]:e[u]};return l}function cd(e,t){const n=e&&e.options.stacked;return n||n===void 0&&t.stack!==void 0}function zS(e,t,n){return`${e.id}.${t.id}.${n.stack||n.type}`}function FS(e){const{min:t,max:n,minDefined:s,maxDefined:r}=e.getUserBounds();return{min:s?t:Number.NEGATIVE_INFINITY,max:r?n:Number.POSITIVE_INFINITY}}function IS(e,t,n){const s=e[t]||(e[t]={});return s[n]||(s[n]={})}function Lm(e,t,n,s){for(const r of t.getMatchingVisibleMetas(s).reverse()){const i=e[r.index];if(n&&i>0||!n&&i<0)return r.index}return null}function Am(e,t){const{chart:n,_cachedMeta:s}=e,r=n._stacks||(n._stacks={}),{iScale:i,vScale:o,index:l}=s,c=i.axis,d=o.axis,u=zS(i,o,s),h=t.length;let f;for(let p=0;p<h;++p){const b=t[p],{[c]:g,[d]:y}=b,x=b._stacks||(b._stacks={});f=x[d]=IS(r,u,g),f[l]=y,f._top=Lm(f,o,!0,s.type),f._bottom=Lm(f,o,!1,s.type);const m=f._visualValues||(f._visualValues={});m[l]=y}}function dd(e,t){const n=e.scales;return Object.keys(n).filter(s=>n[s].axis===t).shift()}function WS(e,t){return Dr(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function $S(e,t,n){return Dr(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}function Xr(e,t){const n=e.controller.index,s=e.vScale&&e.vScale.axis;if(s){t=t||e._parsed;for(const r of t){const i=r._stacks;if(!i||i[s]===void 0||i[s][n]===void 0)return;delete i[s][n],i[s]._visualValues!==void 0&&i[s]._visualValues[n]!==void 0&&delete i[s]._visualValues[n]}}}const ud=e=>e==="reset"||e==="none",zm=(e,t)=>t?e:Object.assign({},e),BS=(e,t,n)=>e&&!t.hidden&&t._stacked&&{keys:bv(n,!0),values:null};class pr{constructor(t,n){this.chart=t,this._ctx=t.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=cd(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&Xr(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,n=this._cachedMeta,s=this.getDataset(),r=(h,f,p,b)=>h==="x"?f:h==="r"?b:p,i=n.xAxisID=ne(s.xAxisID,dd(t,"x")),o=n.yAxisID=ne(s.yAxisID,dd(t,"y")),l=n.rAxisID=ne(s.rAxisID,dd(t,"r")),c=n.indexAxis,d=n.iAxisID=r(c,i,o,l),u=n.vAxisID=r(c,o,i,l);n.xScale=this.getScaleForId(i),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(l),n.iScale=this.getScaleForId(d),n.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const n=this._cachedMeta;return t===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&ym(this._data,this),t._stacked&&Xr(t)}_dataCheck(){const t=this.getDataset(),n=t.data||(t.data=[]),s=this._data;if(re(n)){const r=this._cachedMeta;this._data=AS(n,r)}else if(s!==n){if(s){ym(s,this);const r=this._cachedMeta;Xr(r),r._parsed=[]}n&&Object.isExtensible(n)&&Bk(n,this),this._syncList=[],this._data=n}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const n=this._cachedMeta,s=this.getDataset();let r=!1;this._dataCheck();const i=n._stacked;n._stacked=cd(n.vScale,n),n.stack!==s.stack&&(r=!0,Xr(n),n.stack=s.stack),this._resyncElements(t),(r||i!==n._stacked)&&(Am(this,n._parsed),n._stacked=cd(n.vScale,n))}configure(){const t=this.chart.config,n=t.datasetScopeKeys(this._type),s=t.getOptionScopes(this.getDataset(),n,!0);this.options=t.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,n){const{_cachedMeta:s,_data:r}=this,{iScale:i,_stacked:o}=s,l=i.axis;let c=t===0&&n===r.length?!0:s._sorted,d=t>0&&s._parsed[t-1],u,h,f;if(this._parsing===!1)s._parsed=r,s._sorted=!0,f=r;else{Pe(r[t])?f=this.parseArrayData(s,r,t,n):re(r[t])?f=this.parseObjectData(s,r,t,n):f=this.parsePrimitiveData(s,r,t,n);const p=()=>h[l]===null||d&&h[l]<d[l];for(u=0;u<n;++u)s._parsed[u+t]=h=f[u],c&&(p()&&(c=!1),d=h);s._sorted=c}o&&Am(this,f)}parsePrimitiveData(t,n,s,r){const{iScale:i,vScale:o}=t,l=i.axis,c=o.axis,d=i.getLabels(),u=i===o,h=new Array(r);let f,p,b;for(f=0,p=r;f<p;++f)b=f+s,h[f]={[l]:u||i.parse(d[b],b),[c]:o.parse(n[b],b)};return h}parseArrayData(t,n,s,r){const{xScale:i,yScale:o}=t,l=new Array(r);let c,d,u,h;for(c=0,d=r;c<d;++c)u=c+s,h=n[u],l[c]={x:i.parse(h[0],u),y:o.parse(h[1],u)};return l}parseObjectData(t,n,s,r){const{xScale:i,yScale:o}=t,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,d=new Array(r);let u,h,f,p;for(u=0,h=r;u<h;++u)f=u+s,p=n[f],d[u]={x:i.parse(Ls(p,l),f),y:o.parse(Ls(p,c),f)};return d}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,n,s){const r=this.chart,i=this._cachedMeta,o=n[t.axis],l={keys:bv(r,!0),values:n._stacks[t.axis]._visualValues};return Dm(l,o,i.index,{mode:s})}updateRangeFromParsed(t,n,s,r){const i=s[n.axis];let o=i===null?NaN:i;const l=r&&s._stacks[n.axis];r&&l&&(r.values=l,o=Dm(r,i,this._cachedMeta.index)),t.min=Math.min(t.min,o),t.max=Math.max(t.max,o)}getMinMax(t,n){const s=this._cachedMeta,r=s._parsed,i=s._sorted&&t===s.iScale,o=r.length,l=this._getOtherScale(t),c=BS(n,s,this.chart),d={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:h}=FS(l);let f,p;function b(){p=r[f];const g=p[l.axis];return!Et(p[t.axis])||u>g||h<g}for(f=0;f<o&&!(!b()&&(this.updateRangeFromParsed(d,t,p,c),i));++f);if(i){for(f=o-1;f>=0;--f)if(!b()){this.updateRangeFromParsed(d,t,p,c);break}}return d}getAllParsedValues(t){const n=this._cachedMeta._parsed,s=[];let r,i,o;for(r=0,i=n.length;r<i;++r)o=n[r][t.axis],Et(o)&&s.push(o);return s}getMaxOverflow(){return!1}getLabelAndValue(t){const n=this._cachedMeta,s=n.iScale,r=n.vScale,i=this.getParsed(t);return{label:s?""+s.getLabelForValue(i[s.axis]):"",value:r?""+r.getLabelForValue(i[r.axis]):""}}_update(t){const n=this._cachedMeta;this.update(t||"default"),n._clip=LS(ne(this.options.clip,DS(n.xScale,n.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,n=this.chart,s=this._cachedMeta,r=s.data||[],i=n.chartArea,o=[],l=this._drawStart||0,c=this._drawCount||r.length-l,d=this.options.drawActiveElementsOnTop;let u;for(s.dataset&&s.dataset.draw(t,i,l,c),u=l;u<l+c;++u){const h=r[u];h.hidden||(h.active&&d?o.push(h):h.draw(t,i))}for(u=0;u<o.length;++u)o[u].draw(t,i)}getStyle(t,n){const s=n?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(t||0,s)}getContext(t,n,s){const r=this.getDataset();let i;if(t>=0&&t<this._cachedMeta.data.length){const o=this._cachedMeta.data[t];i=o.$context||(o.$context=$S(this.getContext(),t,o)),i.parsed=this.getParsed(t),i.raw=r.data[t],i.index=i.dataIndex=t}else i=this.$context||(this.$context=WS(this.chart.getContext(),this.index)),i.dataset=r,i.index=i.datasetIndex=this.index;return i.active=!!n,i.mode=s,i}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,n){return this._resolveElementOptions(this.dataElementType.id,n,t)}_resolveElementOptions(t,n="default",s){const r=n==="active",i=this._cachedDataOpts,o=t+"-"+n,l=i[o],c=this.enableOptionSharing&&ta(s);if(l)return zm(l,c);const d=this.chart.config,u=d.datasetElementScopeKeys(this._type,t),h=r?[`${t}Hover`,"hover",t,""]:[t,""],f=d.getOptionScopes(this.getDataset(),u),p=Object.keys(Ce.elements[t]),b=()=>this.getContext(s,r,n),g=d.resolveNamedOptions(f,p,b,h);return g.$shared&&(g.$shared=c,i[o]=Object.freeze(zm(g,c))),g}_resolveAnimations(t,n,s){const r=this.chart,i=this._cachedDataOpts,o=`animation-${n}`,l=i[o];if(l)return l;let c;if(r.options.animation!==!1){const u=this.chart.config,h=u.datasetAnimationScopeKeys(this._type,n),f=u.getOptionScopes(this.getDataset(),h);c=u.createResolver(f,this.getContext(t,s,n))}const d=new gv(r,c&&c.animations);return c&&c._cacheable&&(i[o]=Object.freeze(d)),d}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,n){return!n||ud(t)||this.chart._animationsDisabled}_getSharedOptions(t,n){const s=this.resolveDataElementOptions(t,n),r=this._sharedOptions,i=this.getSharedOptions(s),o=this.includeOptions(n,i)||i!==r;return this.updateSharedOptions(i,n,s),{sharedOptions:i,includeOptions:o}}updateElement(t,n,s,r){ud(r)?Object.assign(t,s):this._resolveAnimations(n,r).update(t,s)}updateSharedOptions(t,n,s){t&&!ud(n)&&this._resolveAnimations(void 0,n).update(t,s)}_setStyle(t,n,s,r){t.active=r;const i=this.getStyle(n,r);this._resolveAnimations(n,s,r).update(t,{options:!r&&this.getSharedOptions(i)||i})}removeHoverStyle(t,n,s){this._setStyle(t,s,"active",!1)}setHoverStyle(t,n,s){this._setStyle(t,s,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const n=this._data,s=this._cachedMeta.data;for(const[l,c,d]of this._syncList)this[l](c,d);this._syncList=[];const r=s.length,i=n.length,o=Math.min(i,r);o&&this.parse(0,o),i>r?this._insertElements(r,i-r,t):i<r&&this._removeElements(i,r-i)}_insertElements(t,n,s=!0){const r=this._cachedMeta,i=r.data,o=t+n;let l;const c=d=>{for(d.length+=n,l=d.length-1;l>=o;l--)d[l]=d[l-n]};for(c(i),l=t;l<o;++l)i[l]=new this.dataElementType;this._parsing&&c(r._parsed),this.parse(t,n),s&&this.updateElements(i,t,n,"reset")}updateElements(t,n,s,r){}_removeElements(t,n){const s=this._cachedMeta;if(this._parsing){const r=s._parsed.splice(t,n);s._stacked&&Xr(s,r)}s.data.splice(t,n)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[n,s,r]=t;this[n](s,r)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,n){n&&this._sync(["_removeElements",t,n]);const s=arguments.length-2;s&&this._sync(["_insertElements",t,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}K(pr,"defaults",{}),K(pr,"datasetElementType",null),K(pr,"dataElementType",null);function HS(e,t){if(!e._cache.$bar){const n=e.getMatchingVisibleMetas(t);let s=[];for(let r=0,i=n.length;r<i;r++)s=s.concat(n[r].controller.getAllParsedValues(e));e._cache.$bar=sv(s.sort((r,i)=>r-i))}return e._cache.$bar}function US(e){const t=e.iScale,n=HS(t,e.type);let s=t._length,r,i,o,l;const c=()=>{o===32767||o===-32768||(ta(l)&&(s=Math.min(s,Math.abs(o-l)||s)),l=o)};for(r=0,i=n.length;r<i;++r)o=t.getPixelForValue(n[r]),c();for(l=void 0,r=0,i=t.ticks.length;r<i;++r)o=t.getPixelForTick(r),c();return s}function VS(e,t,n,s){const r=n.barThickness;let i,o;return he(r)?(i=t.min*n.categoryPercentage,o=n.barPercentage):(i=r*s,o=1),{chunk:i/s,ratio:o,start:t.pixels[e]-i/2}}function YS(e,t,n,s){const r=t.pixels,i=r[e];let o=e>0?r[e-1]:null,l=e<r.length-1?r[e+1]:null;const c=n.categoryPercentage;o===null&&(o=i-(l===null?t.end-t.start:l-i)),l===null&&(l=i+i-o);const d=i-(i-Math.min(o,l))/2*c;return{chunk:Math.abs(l-o)/2*c/s,ratio:n.barPercentage,start:d}}function XS(e,t,n,s){const r=n.parse(e[0],s),i=n.parse(e[1],s),o=Math.min(r,i),l=Math.max(r,i);let c=o,d=l;Math.abs(o)>Math.abs(l)&&(c=l,d=o),t[n.axis]=d,t._custom={barStart:c,barEnd:d,start:r,end:i,min:o,max:l}}function vv(e,t,n,s){return Pe(e)?XS(e,t,n,s):t[n.axis]=n.parse(e,s),t}function Fm(e,t,n,s){const r=e.iScale,i=e.vScale,o=r.getLabels(),l=r===i,c=[];let d,u,h,f;for(d=n,u=n+s;d<u;++d)f=t[d],h={},h[r.axis]=l||r.parse(o[d],d),c.push(vv(f,h,i,d));return c}function hd(e){return e&&e.barStart!==void 0&&e.barEnd!==void 0}function qS(e,t,n){return e!==0?ts(e):(t.isHorizontal()?1:-1)*(t.min>=n?1:-1)}function GS(e){let t,n,s,r,i;return e.horizontal?(t=e.base>e.x,n="left",s="right"):(t=e.base<e.y,n="bottom",s="top"),t?(r="end",i="start"):(r="start",i="end"),{start:n,end:s,reverse:t,top:r,bottom:i}}function KS(e,t,n,s){let r=t.borderSkipped;const i={};if(!r){e.borderSkipped=i;return}if(r===!0){e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:l,reverse:c,top:d,bottom:u}=GS(e);r==="middle"&&n&&(e.enableBorderRadius=!0,(n._top||0)===s?r=d:(n._bottom||0)===s?r=u:(i[Im(u,o,l,c)]=!0,r=d)),i[Im(r,o,l,c)]=!0,e.borderSkipped=i}function Im(e,t,n,s){return s?(e=QS(e,t,n),e=Wm(e,n,t)):e=Wm(e,t,n),e}function QS(e,t,n){return e===t?n:e===n?t:e}function Wm(e,t,n){return e==="start"?t:e==="end"?n:e}function JS(e,{inflateAmount:t},n){e.inflateAmount=t==="auto"?n===1?.33:0:t}class Ci extends pr{parsePrimitiveData(t,n,s,r){return Fm(t,n,s,r)}parseArrayData(t,n,s,r){return Fm(t,n,s,r)}parseObjectData(t,n,s,r){const{iScale:i,vScale:o}=t,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,d=i.axis==="x"?l:c,u=o.axis==="x"?l:c,h=[];let f,p,b,g;for(f=s,p=s+r;f<p;++f)g=n[f],b={},b[i.axis]=i.parse(Ls(g,d),f),h.push(vv(Ls(g,u),b,o,f));return h}updateRangeFromParsed(t,n,s,r){super.updateRangeFromParsed(t,n,s,r);const i=s._custom;i&&n===this._cachedMeta.vScale&&(t.min=Math.min(t.min,i.min),t.max=Math.max(t.max,i.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const n=this._cachedMeta,{iScale:s,vScale:r}=n,i=this.getParsed(t),o=i._custom,l=hd(o)?"["+o.start+", "+o.end+"]":""+r.getLabelForValue(i[r.axis]);return{label:""+s.getLabelForValue(i[s.axis]),value:l}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,t)}updateElements(t,n,s,r){const i=r==="reset",{index:o,_cachedMeta:{vScale:l}}=this,c=l.getBasePixel(),d=l.isHorizontal(),u=this._getRuler(),{sharedOptions:h,includeOptions:f}=this._getSharedOptions(n,r);for(let p=n;p<n+s;p++){const b=this.getParsed(p),g=i||he(b[l.axis])?{base:c,head:c}:this._calculateBarValuePixels(p),y=this._calculateBarIndexPixels(p,u),x=(b._stacks||{})[l.axis],m={horizontal:d,base:g.base,enableBorderRadius:!x||hd(b._custom)||o===x._top||o===x._bottom,x:d?g.head:y.center,y:d?y.center:g.head,height:d?y.size:Math.abs(g.size),width:d?Math.abs(g.size):y.size};f&&(m.options=h||this.resolveDataElementOptions(p,t[p].active?"active":r));const v=m.options||t[p].options;KS(m,v,x,o),JS(m,v,u.ratio),this.updateElement(t[p],p,m,r)}}_getStacks(t,n){const{iScale:s}=this._cachedMeta,r=s.getMatchingVisibleMetas(this._type).filter(u=>u.controller.options.grouped),i=s.options.stacked,o=[],l=this._cachedMeta.controller.getParsed(n),c=l&&l[s.axis],d=u=>{const h=u._parsed.find(p=>p[s.axis]===c),f=h&&h[u.vScale.axis];if(he(f)||isNaN(f))return!0};for(const u of r)if(!(n!==void 0&&d(u))&&((i===!1||o.indexOf(u.stack)===-1||i===void 0&&u.stack===void 0)&&o.push(u.stack),u.index===t))break;return o.length||o.push(void 0),o}_getStackCount(t){return this._getStacks(void 0,t).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const t=this.chart.scales,n=this.chart.options.indexAxis;return Object.keys(t).filter(s=>t[s].axis===n).shift()}_getAxis(){const t={},n=this.getFirstScaleIdForIndexAxis();for(const s of this.chart.data.datasets)t[ne(this.chart.options.indexAxis==="x"?s.xAxisID:s.yAxisID,n)]=!0;return Object.keys(t)}_getStackIndex(t,n,s){const r=this._getStacks(t,s),i=n!==void 0?r.indexOf(n):-1;return i===-1?r.length-1:i}_getRuler(){const t=this.options,n=this._cachedMeta,s=n.iScale,r=[];let i,o;for(i=0,o=n.data.length;i<o;++i)r.push(s.getPixelForValue(this.getParsed(i)[s.axis],i));const l=t.barThickness;return{min:l||US(n),pixels:r,start:s._startPixel,end:s._endPixel,stackCount:this._getStackCount(),scale:s,grouped:t.grouped,ratio:l?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:n,_stacked:s,index:r},options:{base:i,minBarLength:o}}=this,l=i||0,c=this.getParsed(t),d=c._custom,u=hd(d);let h=c[n.axis],f=0,p=s?this.applyStack(n,c,s):h,b,g;p!==h&&(f=p-h,p=h),u&&(h=d.barStart,p=d.barEnd-d.barStart,h!==0&&ts(h)!==ts(d.barEnd)&&(f=0),f+=h);const y=!he(i)&&!u?i:f;let x=n.getPixelForValue(y);if(this.chart.getDataVisibility(t)?b=n.getPixelForValue(f+p):b=x,g=b-x,Math.abs(g)<o){g=qS(g,n,l)*o,h===l&&(x-=g/2);const m=n.getPixelForDecimal(0),v=n.getPixelForDecimal(1),j=Math.min(m,v),_=Math.max(m,v);x=Math.max(Math.min(x,_),j),b=x+g,s&&!u&&(c._stacks[n.axis]._visualValues[r]=n.getValueForPixel(b)-n.getValueForPixel(x))}if(x===n.getPixelForValue(l)){const m=ts(g)*n.getLineWidthForValue(l)/2;x+=m,g-=m}return{size:g,base:x,head:b,center:b+g/2}}_calculateBarIndexPixels(t,n){const s=n.scale,r=this.options,i=r.skipNull,o=ne(r.maxBarThickness,1/0);let l,c;const d=this._getAxisCount();if(n.grouped){const u=i?this._getStackCount(t):n.stackCount,h=r.barThickness==="flex"?YS(t,n,r,u*d):VS(t,n,r,u*d),f=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,p=this._getAxis().indexOf(ne(f,this.getFirstScaleIdForIndexAxis())),b=this._getStackIndex(this.index,this._cachedMeta.stack,i?t:void 0)+p;l=h.start+h.chunk*b+h.chunk/2,c=Math.min(o,h.chunk*h.ratio)}else l=s.getPixelForValue(this.getParsed(t)[s.axis],t),c=Math.min(o,n.min*n.ratio);return{base:l-c/2,head:l+c/2,center:l,size:c}}draw(){const t=this._cachedMeta,n=t.vScale,s=t.data,r=s.length;let i=0;for(;i<r;++i)this.getParsed(i)[n.axis]!==null&&!s[i].hidden&&s[i].draw(this._ctx)}}K(Ci,"id","bar"),K(Ci,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),K(Ci,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});function ZS(e,t,n){let s=1,r=1,i=0,o=0;if(t<Te){const l=e,c=l+t,d=Math.cos(l),u=Math.sin(l),h=Math.cos(c),f=Math.sin(c),p=(v,j,_)=>bl(v,l,c,!0)?1:Math.max(j,j*n,_,_*n),b=(v,j,_)=>bl(v,l,c,!0)?-1:Math.min(j,j*n,_,_*n),g=p(0,d,h),y=p(De,u,f),x=b(ue,d,h),m=b(ue+De,u,f);s=(g-x)/2,r=(y-m)/2,i=-(g+x)/2,o=-(y+m)/2}return{ratioX:s,ratioY:r,offsetX:i,offsetY:o}}class rr extends pr{constructor(t,n){super(t,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,n){const s=this.getDataset().data,r=this._cachedMeta;if(this._parsing===!1)r._parsed=s;else{let i=c=>+s[c];if(re(s[t])){const{key:c="value"}=this._parsing;i=d=>+Ls(s[d],c)}let o,l;for(o=t,l=t+n;o<l;++o)r._parsed[o]=i(o)}}_getRotation(){return fn(this.options.rotation-90)}_getCircumference(){return fn(this.options.circumference)}_getRotationExtents(){let t=Te,n=-Te;for(let s=0;s<this.chart.data.datasets.length;++s)if(this.chart.isDatasetVisible(s)&&this.chart.getDatasetMeta(s).type===this._type){const r=this.chart.getDatasetMeta(s).controller,i=r._getRotation(),o=r._getCircumference();t=Math.min(t,i),n=Math.max(n,i+o)}return{rotation:t,circumference:n-t}}update(t){const n=this.chart,{chartArea:s}=n,r=this._cachedMeta,i=r.data,o=this.getMaxBorderWidth()+this.getMaxOffset(i)+this.options.spacing,l=Math.max((Math.min(s.width,s.height)-o)/2,0),c=Math.min(Sk(this.options.cutout,l),1),d=this._getRingWeight(this.index),{circumference:u,rotation:h}=this._getRotationExtents(),{ratioX:f,ratioY:p,offsetX:b,offsetY:g}=ZS(h,u,c),y=(s.width-o)/f,x=(s.height-o)/p,m=Math.max(Math.min(y,x)/2,0),v=Jb(this.options.radius,m),j=Math.max(v*c,0),_=(v-j)/this._getVisibleDatasetWeightTotal();this.offsetX=b*v,this.offsetY=g*v,r.total=this.calculateTotal(),this.outerRadius=v-_*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-_*d,0),this.updateElements(i,0,i.length,t)}_circumference(t,n){const s=this.options,r=this._cachedMeta,i=this._getCircumference();return n&&s.animation.animateRotate||!this.chart.getDataVisibility(t)||r._parsed[t]===null||r.data[t].hidden?0:this.calculateCircumference(r._parsed[t]*i/Te)}updateElements(t,n,s,r){const i=r==="reset",o=this.chart,l=o.chartArea,d=o.options.animation,u=(l.left+l.right)/2,h=(l.top+l.bottom)/2,f=i&&d.animateScale,p=f?0:this.innerRadius,b=f?0:this.outerRadius,{sharedOptions:g,includeOptions:y}=this._getSharedOptions(n,r);let x=this._getRotation(),m;for(m=0;m<n;++m)x+=this._circumference(m,i);for(m=n;m<n+s;++m){const v=this._circumference(m,i),j=t[m],_={x:u+this.offsetX,y:h+this.offsetY,startAngle:x,endAngle:x+v,circumference:v,outerRadius:b,innerRadius:p};y&&(_.options=g||this.resolveDataElementOptions(m,j.active?"active":r)),x+=v,this.updateElement(j,m,_,r)}}calculateTotal(){const t=this._cachedMeta,n=t.data;let s=0,r;for(r=0;r<n.length;r++){const i=t._parsed[r];i!==null&&!isNaN(i)&&this.chart.getDataVisibility(r)&&!n[r].hidden&&(s+=Math.abs(i))}return s}calculateCircumference(t){const n=this._cachedMeta.total;return n>0&&!isNaN(t)?Te*(Math.abs(t)/n):0}getLabelAndValue(t){const n=this._cachedMeta,s=this.chart,r=s.data.labels||[],i=ff(n._parsed[t],s.options.locale);return{label:r[t]||"",value:i}}getMaxBorderWidth(t){let n=0;const s=this.chart;let r,i,o,l,c;if(!t){for(r=0,i=s.data.datasets.length;r<i;++r)if(s.isDatasetVisible(r)){o=s.getDatasetMeta(r),t=o.data,l=o.controller;break}}if(!t)return 0;for(r=0,i=t.length;r<i;++r)c=l.resolveDataElementOptions(r),c.borderAlign!=="inner"&&(n=Math.max(n,c.borderWidth||0,c.hoverBorderWidth||0));return n}getMaxOffset(t){let n=0;for(let s=0,r=t.length;s<r;++s){const i=this.resolveDataElementOptions(s);n=Math.max(n,i.offset||0,i.hoverOffset||0)}return n}_getRingWeightOffset(t){let n=0;for(let s=0;s<t;++s)this.chart.isDatasetVisible(s)&&(n+=this._getRingWeight(s));return n}_getRingWeight(t){return Math.max(ne(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}K(rr,"id","doughnut"),K(rr,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),K(rr,"descriptors",{_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")}),K(rr,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const n=t.data,{labels:{pointStyle:s,textAlign:r,color:i,useBorderRadius:o,borderRadius:l}}=t.legend.options;return n.labels.length&&n.datasets.length?n.labels.map((c,d)=>{const h=t.getDatasetMeta(0).controller.getStyle(d);return{text:c,fillStyle:h.backgroundColor,fontColor:i,hidden:!t.getDataVisibility(d),lineDash:h.borderDash,lineDashOffset:h.borderDashOffset,lineJoin:h.borderJoinStyle,lineWidth:h.borderWidth,strokeStyle:h.borderColor,textAlign:r,pointStyle:s,borderRadius:o&&(l||h.borderRadius),index:d}}):[]}},onClick(t,n,s){s.chart.toggleDataVisibility(n.index),s.chart.update()}}}});function ms(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class jf{constructor(t){K(this,"options");this.options=t||{}}static override(t){Object.assign(jf.prototype,t)}init(){}formats(){return ms()}parse(){return ms()}format(){return ms()}add(){return ms()}diff(){return ms()}startOf(){return ms()}endOf(){return ms()}}var e5={_date:jf};function t5(e,t,n,s){const{controller:r,data:i,_sorted:o}=e,l=r._cachedMeta.iScale,c=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(l&&t===l.axis&&t!=="r"&&o&&i.length){const d=l._reversePixels?Wk:Ru;if(s){if(r._sharedOptions){const u=i[0],h=typeof u.getRange=="function"&&u.getRange(t);if(h){const f=d(i,t,n-h),p=d(i,t,n+h);return{lo:f.lo,hi:p.hi}}}}else{const u=d(i,t,n);if(c){const{vScale:h}=r._cachedMeta,{_parsed:f}=e,p=f.slice(0,u.lo+1).reverse().findIndex(g=>!he(g[h.axis]));u.lo-=Math.max(0,p);const b=f.slice(u.hi).findIndex(g=>!he(g[h.axis]));u.hi+=Math.max(0,b)}return u}}return{lo:0,hi:i.length-1}}function lc(e,t,n,s,r){const i=e.getSortedVisibleDatasetMetas(),o=n[t];for(let l=0,c=i.length;l<c;++l){const{index:d,data:u}=i[l],{lo:h,hi:f}=t5(i[l],t,o,r);for(let p=h;p<=f;++p){const b=u[p];b.skip||s(b,d,p)}}}function n5(e){const t=e.indexOf("x")!==-1,n=e.indexOf("y")!==-1;return function(s,r){const i=t?Math.abs(s.x-r.x):0,o=n?Math.abs(s.y-r.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(o,2))}}function fd(e,t,n,s,r){const i=[];return!r&&!e.isPointInArea(t)||lc(e,n,t,function(l,c,d){!r&&!cv(l,e.chartArea,0)||l.inRange(t.x,t.y,s)&&i.push({element:l,datasetIndex:c,index:d})},!0),i}function s5(e,t,n,s){let r=[];function i(o,l,c){const{startAngle:d,endAngle:u}=o.getProps(["startAngle","endAngle"],s),{angle:h}=tv(o,{x:t.x,y:t.y});bl(h,d,u)&&r.push({element:o,datasetIndex:l,index:c})}return lc(e,n,t,i),r}function r5(e,t,n,s,r,i){let o=[];const l=n5(n);let c=Number.POSITIVE_INFINITY;function d(u,h,f){const p=u.inRange(t.x,t.y,r);if(s&&!p)return;const b=u.getCenterPoint(r);if(!(!!i||e.isPointInArea(b))&&!p)return;const y=l(t,b);y<c?(o=[{element:u,datasetIndex:h,index:f}],c=y):y===c&&o.push({element:u,datasetIndex:h,index:f})}return lc(e,n,t,d),o}function pd(e,t,n,s,r,i){return!i&&!e.isPointInArea(t)?[]:n==="r"&&!s?s5(e,t,n,r):r5(e,t,n,s,r,i)}function $m(e,t,n,s,r){const i=[],o=n==="x"?"inXRange":"inYRange";let l=!1;return lc(e,n,t,(c,d,u)=>{c[o]&&c[o](t[n],r)&&(i.push({element:c,datasetIndex:d,index:u}),l=l||c.inRange(t.x,t.y,r))}),s&&!l?[]:i}var i5={modes:{index(e,t,n,s){const r=bs(t,e),i=n.axis||"x",o=n.includeInvisible||!1,l=n.intersect?fd(e,r,i,s,o):pd(e,r,i,!1,s,o),c=[];return l.length?(e.getSortedVisibleDatasetMetas().forEach(d=>{const u=l[0].index,h=d.data[u];h&&!h.skip&&c.push({element:h,datasetIndex:d.index,index:u})}),c):[]},dataset(e,t,n,s){const r=bs(t,e),i=n.axis||"xy",o=n.includeInvisible||!1;let l=n.intersect?fd(e,r,i,s,o):pd(e,r,i,!1,s,o);if(l.length>0){const c=l[0].datasetIndex,d=e.getDatasetMeta(c).data;l=[];for(let u=0;u<d.length;++u)l.push({element:d[u],datasetIndex:c,index:u})}return l},point(e,t,n,s){const r=bs(t,e),i=n.axis||"xy",o=n.includeInvisible||!1;return fd(e,r,i,s,o)},nearest(e,t,n,s){const r=bs(t,e),i=n.axis||"xy",o=n.includeInvisible||!1;return pd(e,r,i,n.intersect,s,o)},x(e,t,n,s){const r=bs(t,e);return $m(e,r,"x",n.intersect,s)},y(e,t,n,s){const r=bs(t,e);return $m(e,r,"y",n.intersect,s)}}};const yv=["left","top","right","bottom"];function qr(e,t){return e.filter(n=>n.pos===t)}function Bm(e,t){return e.filter(n=>yv.indexOf(n.pos)===-1&&n.box.axis===t)}function Gr(e,t){return e.sort((n,s)=>{const r=t?s:n,i=t?n:s;return r.weight===i.weight?r.index-i.index:r.weight-i.weight})}function a5(e){const t=[];let n,s,r,i,o,l;for(n=0,s=(e||[]).length;n<s;++n)r=e[n],{position:i,options:{stack:o,stackWeight:l=1}}=r,t.push({index:n,box:r,pos:i,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&i+o,stackWeight:l});return t}function o5(e){const t={};for(const n of e){const{stack:s,pos:r,stackWeight:i}=n;if(!s||!yv.includes(r))continue;const o=t[s]||(t[s]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=i}return t}function l5(e,t){const n=o5(e),{vBoxMaxWidth:s,hBoxMaxHeight:r}=t;let i,o,l;for(i=0,o=e.length;i<o;++i){l=e[i];const{fullSize:c}=l.box,d=n[l.stack],u=d&&l.stackWeight/d.weight;l.horizontal?(l.width=u?u*s:c&&t.availableWidth,l.height=r):(l.width=s,l.height=u?u*r:c&&t.availableHeight)}return n}function c5(e){const t=a5(e),n=Gr(t.filter(d=>d.box.fullSize),!0),s=Gr(qr(t,"left"),!0),r=Gr(qr(t,"right")),i=Gr(qr(t,"top"),!0),o=Gr(qr(t,"bottom")),l=Bm(t,"x"),c=Bm(t,"y");return{fullSize:n,leftAndTop:s.concat(i),rightAndBottom:r.concat(c).concat(o).concat(l),chartArea:qr(t,"chartArea"),vertical:s.concat(r).concat(c),horizontal:i.concat(o).concat(l)}}function Hm(e,t,n,s){return Math.max(e[n],t[n])+Math.max(e[s],t[s])}function wv(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function d5(e,t,n,s){const{pos:r,box:i}=n,o=e.maxPadding;if(!re(r)){n.size&&(e[r]-=n.size);const h=s[n.stack]||{size:0,count:1};h.size=Math.max(h.size,n.horizontal?i.height:i.width),n.size=h.size/h.count,e[r]+=n.size}i.getPadding&&wv(o,i.getPadding());const l=Math.max(0,t.outerWidth-Hm(o,e,"left","right")),c=Math.max(0,t.outerHeight-Hm(o,e,"top","bottom")),d=l!==e.w,u=c!==e.h;return e.w=l,e.h=c,n.horizontal?{same:d,other:u}:{same:u,other:d}}function u5(e){const t=e.maxPadding;function n(s){const r=Math.max(t[s]-e[s],0);return e[s]+=r,r}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}function h5(e,t){const n=t.maxPadding;function s(r){const i={left:0,top:0,right:0,bottom:0};return r.forEach(o=>{i[o]=Math.max(t[o],n[o])}),i}return s(e?["left","right"]:["top","bottom"])}function ai(e,t,n,s){const r=[];let i,o,l,c,d,u;for(i=0,o=e.length,d=0;i<o;++i){l=e[i],c=l.box,c.update(l.width||t.w,l.height||t.h,h5(l.horizontal,t));const{same:h,other:f}=d5(t,n,l,s);d|=h&&r.length,u=u||f,c.fullSize||r.push(l)}return d&&ai(r,t,n,s)||u}function Za(e,t,n,s,r){e.top=n,e.left=t,e.right=t+s,e.bottom=n+r,e.width=s,e.height=r}function Um(e,t,n,s){const r=n.padding;let{x:i,y:o}=t;for(const l of e){const c=l.box,d=s[l.stack]||{placed:0,weight:1},u=l.stackWeight/d.weight||1;if(l.horizontal){const h=t.w*u,f=d.size||c.height;ta(d.start)&&(o=d.start),c.fullSize?Za(c,r.left,o,n.outerWidth-r.right-r.left,f):Za(c,t.left+d.placed,o,h,f),d.start=o,d.placed+=h,o=c.bottom}else{const h=t.h*u,f=d.size||c.width;ta(d.start)&&(i=d.start),c.fullSize?Za(c,i,r.top,f,n.outerHeight-r.bottom-r.top):Za(c,i,t.top+d.placed,f,h),d.start=i,d.placed+=h,i=c.right}}t.x=i,t.y=o}var Nt={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(n){t.draw(n)}}]},e.boxes.push(t)},removeBox(e,t){const n=e.boxes?e.boxes.indexOf(t):-1;n!==-1&&e.boxes.splice(n,1)},configure(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},update(e,t,n,s){if(!e)return;const r=Tt(e.options.layout.padding),i=Math.max(t-r.width,0),o=Math.max(n-r.height,0),l=c5(e.boxes),c=l.vertical,d=l.horizontal;le(e.boxes,g=>{typeof g.beforeLayout=="function"&&g.beforeLayout()});const u=c.reduce((g,y)=>y.box.options&&y.box.options.display===!1?g:g+1,0)||1,h=Object.freeze({outerWidth:t,outerHeight:n,padding:r,availableWidth:i,availableHeight:o,vBoxMaxWidth:i/2/u,hBoxMaxHeight:o/2}),f=Object.assign({},r);wv(f,Tt(s));const p=Object.assign({maxPadding:f,w:i,h:o,x:r.left,y:r.top},r),b=l5(c.concat(d),h);ai(l.fullSize,p,h,b),ai(c,p,h,b),ai(d,p,h,b)&&ai(c,p,h,b),u5(p),Um(l.leftAndTop,p,h,b),p.x+=p.w,p.y+=p.h,Um(l.rightAndBottom,p,h,b),e.chartArea={left:p.left,top:p.top,right:p.left+p.w,bottom:p.top+p.h,height:p.h,width:p.w},le(l.chartArea,g=>{const y=g.box;Object.assign(y,e.chartArea),y.update(p.w,p.h,{left:0,top:0,right:0,bottom:0})})}};class jv{acquireContext(t,n){}releaseContext(t){return!1}addEventListener(t,n,s){}removeEventListener(t,n,s){}getDevicePixelRatio(){return 1}getMaximumSize(t,n,s,r){return n=Math.max(0,n||t.width),s=s||t.height,{width:n,height:Math.max(0,r?Math.floor(n/r):s)}}isAttached(t){return!0}updateConfig(t){}}class f5 extends jv{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const Eo="$chartjs",p5={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Vm=e=>e===null||e==="";function m5(e,t){const n=e.style,s=e.getAttribute("height"),r=e.getAttribute("width");if(e[Eo]={initial:{height:s,width:r,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",Vm(r)){const i=Pm(e,"width");i!==void 0&&(e.width=i)}if(Vm(s))if(e.style.height==="")e.height=e.width/(t||2);else{const i=Pm(e,"height");i!==void 0&&(e.height=i)}return e}const _v=NS?{passive:!0}:!1;function x5(e,t,n){e&&e.addEventListener(t,n,_v)}function g5(e,t,n){e&&e.canvas&&e.canvas.removeEventListener(t,n,_v)}function b5(e,t){const n=p5[e.type]||e.type,{x:s,y:r}=bs(e,t);return{type:n,chart:t,native:e,x:s!==void 0?s:null,y:r!==void 0?r:null}}function wl(e,t){for(const n of e)if(n===t||n.contains(t))return!0}function v5(e,t,n){const s=e.canvas,r=new MutationObserver(i=>{let o=!1;for(const l of i)o=o||wl(l.addedNodes,s),o=o&&!wl(l.removedNodes,s);o&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}function y5(e,t,n){const s=e.canvas,r=new MutationObserver(i=>{let o=!1;for(const l of i)o=o||wl(l.removedNodes,s),o=o&&!wl(l.addedNodes,s);o&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}const sa=new Map;let Ym=0;function Nv(){const e=window.devicePixelRatio;e!==Ym&&(Ym=e,sa.forEach((t,n)=>{n.currentDevicePixelRatio!==e&&t()}))}function w5(e,t){sa.size||window.addEventListener("resize",Nv),sa.set(e,t)}function j5(e){sa.delete(e),sa.size||window.removeEventListener("resize",Nv)}function _5(e,t,n){const s=e.canvas,r=s&&wf(s);if(!r)return;const i=iv((l,c)=>{const d=r.clientWidth;n(l,c),d<r.clientWidth&&n()},window),o=new ResizeObserver(l=>{const c=l[0],d=c.contentRect.width,u=c.contentRect.height;d===0&&u===0||i(d,u)});return o.observe(r),w5(e,i),o}function md(e,t,n){n&&n.disconnect(),t==="resize"&&j5(e)}function N5(e,t,n){const s=e.canvas,r=iv(i=>{e.ctx!==null&&n(b5(i,e))},e);return x5(s,t,r),r}class k5 extends jv{acquireContext(t,n){const s=t&&t.getContext&&t.getContext("2d");return s&&s.canvas===t?(m5(t,n),s):null}releaseContext(t){const n=t.canvas;if(!n[Eo])return!1;const s=n[Eo].initial;["height","width"].forEach(i=>{const o=s[i];he(o)?n.removeAttribute(i):n.setAttribute(i,o)});const r=s.style||{};return Object.keys(r).forEach(i=>{n.style[i]=r[i]}),n.width=n.width,delete n[Eo],!0}addEventListener(t,n,s){this.removeEventListener(t,n);const r=t.$proxies||(t.$proxies={}),o={attach:v5,detach:y5,resize:_5}[n]||N5;r[n]=o(t,n,s)}removeEventListener(t,n){const s=t.$proxies||(t.$proxies={}),r=s[n];if(!r)return;({attach:md,detach:md,resize:md}[n]||g5)(t,n,r),s[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,n,s,r){return _S(t,n,s,r)}isAttached(t){const n=t&&wf(t);return!!(n&&n.isConnected)}}function S5(e){return!yf()||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas?f5:k5}class wn{constructor(){K(this,"x");K(this,"y");K(this,"active",!1);K(this,"options");K(this,"$animations")}tooltipPosition(t){const{x:n,y:s}=this.getProps(["x","y"],t);return{x:n,y:s}}hasValue(){return gl(this.x)&&gl(this.y)}getProps(t,n){const s=this.$animations;if(!n||!s)return this;const r={};return t.forEach(i=>{r[i]=s[i]&&s[i].active()?s[i]._to:this[i]}),r}}K(wn,"defaults",{}),K(wn,"defaultRoutes");function C5(e,t){const n=e.options.ticks,s=E5(e),r=Math.min(n.maxTicksLimit||s,s),i=n.major.enabled?M5(t):[],o=i.length,l=i[0],c=i[o-1],d=[];if(o>r)return P5(t,d,i,o/r),d;const u=T5(i,t,r);if(o>0){let h,f;const p=o>1?Math.round((c-l)/(o-1)):null;for(eo(t,d,u,he(p)?0:l-p,l),h=0,f=o-1;h<f;h++)eo(t,d,u,i[h],i[h+1]);return eo(t,d,u,c,he(p)?t.length:c+p),d}return eo(t,d,u),d}function E5(e){const t=e.options.offset,n=e._tickSize(),s=e._length/n+(t?0:1),r=e._maxLength/n;return Math.floor(Math.min(s,r))}function T5(e,t,n){const s=O5(e),r=t.length/n;if(!s)return Math.max(r,1);const i=Rk(s);for(let o=0,l=i.length-1;o<l;o++){const c=i[o];if(c>r)return c}return Math.max(r,1)}function M5(e){const t=[];let n,s;for(n=0,s=e.length;n<s;n++)e[n].major&&t.push(n);return t}function P5(e,t,n,s){let r=0,i=n[0],o;for(s=Math.ceil(s),o=0;o<e.length;o++)o===i&&(t.push(e[o]),r++,i=n[r*s])}function eo(e,t,n,s,r){const i=ne(s,0),o=Math.min(ne(r,e.length),e.length);let l=0,c,d,u;for(n=Math.ceil(n),r&&(c=r-s,n=c/Math.floor(c/n)),u=i;u<0;)l++,u=Math.round(i+l*n);for(d=Math.max(i,0);d<o;d++)d===u&&(t.push(e[d]),l++,u=Math.round(i+l*n))}function O5(e){const t=e.length;let n,s;if(t<2)return!1;for(s=e[0],n=1;n<t;++n)if(e[n]-e[n-1]!==s)return!1;return s}const R5=e=>e==="left"?"right":e==="right"?"left":e,Xm=(e,t,n)=>t==="top"||t==="left"?e[t]+n:e[t]-n,qm=(e,t)=>Math.min(t||e,e);function Gm(e,t){const n=[],s=e.length/t,r=e.length;let i=0;for(;i<r;i+=s)n.push(e[Math.floor(i)]);return n}function D5(e,t,n){const s=e.ticks.length,r=Math.min(t,s-1),i=e._startPixel,o=e._endPixel,l=1e-6;let c=e.getPixelForTick(r),d;if(!(n&&(s===1?d=Math.max(c-i,o-c):t===0?d=(e.getPixelForTick(1)-c)/2:d=(c-e.getPixelForTick(r-1))/2,c+=r<t?d:-d,c<i-l||c>o+l)))return c}function L5(e,t){le(e,n=>{const s=n.gc,r=s.length/2;let i;if(r>t){for(i=0;i<r;++i)delete n.data[s[i]];s.splice(0,r)}})}function Kr(e){return e.drawTicks?e.tickLength:0}function Km(e,t){if(!e.display)return 0;const n=Ye(e.font,t),s=Tt(e.padding);return(Pe(e.text)?e.text.length:1)*n.lineHeight+s.height}function A5(e,t){return Dr(e,{scale:t,type:"scale"})}function z5(e,t,n){return Dr(e,{tick:n,index:t,type:"tick"})}function F5(e,t,n){let s=hf(e);return(n&&t!=="right"||!n&&t==="right")&&(s=R5(s)),s}function I5(e,t,n,s){const{top:r,left:i,bottom:o,right:l,chart:c}=e,{chartArea:d,scales:u}=c;let h=0,f,p,b;const g=o-r,y=l-i;if(e.isHorizontal()){if(p=Ue(s,i,l),re(n)){const x=Object.keys(n)[0],m=n[x];b=u[x].getPixelForValue(m)+g-t}else n==="center"?b=(d.bottom+d.top)/2+g-t:b=Xm(e,n,t);f=l-i}else{if(re(n)){const x=Object.keys(n)[0],m=n[x];p=u[x].getPixelForValue(m)-y+t}else n==="center"?p=(d.left+d.right)/2-y+t:p=Xm(e,n,t);b=Ue(s,o,r),h=n==="left"?-De:De}return{titleX:p,titleY:b,maxWidth:f,rotation:h}}class Lr extends wn{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,n){return t}getUserBounds(){let{_userMin:t,_userMax:n,_suggestedMin:s,_suggestedMax:r}=this;return t=Vt(t,Number.POSITIVE_INFINITY),n=Vt(n,Number.NEGATIVE_INFINITY),s=Vt(s,Number.POSITIVE_INFINITY),r=Vt(r,Number.NEGATIVE_INFINITY),{min:Vt(t,s),max:Vt(n,r),minDefined:Et(t),maxDefined:Et(n)}}getMinMax(t){let{min:n,max:s,minDefined:r,maxDefined:i}=this.getUserBounds(),o;if(r&&i)return{min:n,max:s};const l=this.getMatchingVisibleMetas();for(let c=0,d=l.length;c<d;++c)o=l[c].controller.getMinMax(this,t),r||(n=Math.min(n,o.min)),i||(s=Math.max(s,o.max));return n=i&&n>s?s:n,s=r&&n>s?n:s,{min:Vt(n,Vt(s,n)),max:Vt(s,Vt(n,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){me(this.options.beforeUpdate,[this])}update(t,n,s){const{beginAtZero:r,grace:i,ticks:o}=this.options,l=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=n,this._margins=s=Object.assign({left:0,right:0,top:0,bottom:0},s),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+s.left+s.right:this.height+s.top+s.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=lS(this,i,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const c=l<this.ticks.length;this._convertTicksToLabels(c?Gm(this.ticks,l):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=C5(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,n,s;this.isHorizontal()?(n=this.left,s=this.right):(n=this.top,s=this.bottom,t=!t),this._startPixel=n,this._endPixel=s,this._reversePixels=t,this._length=s-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){me(this.options.afterUpdate,[this])}beforeSetDimensions(){me(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){me(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),me(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){me(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const n=this.options.ticks;let s,r,i;for(s=0,r=t.length;s<r;s++)i=t[s],i.label=me(n.callback,[i.value,s,t],this)}afterTickToLabelConversion(){me(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){me(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,n=t.ticks,s=qm(this.ticks.length,t.ticks.maxTicksLimit),r=n.minRotation||0,i=n.maxRotation;let o=r,l,c,d;if(!this._isVisible()||!n.display||r>=i||s<=1||!this.isHorizontal()){this.labelRotation=r;return}const u=this._getLabelSizes(),h=u.widest.width,f=u.highest.height,p=it(this.chart.width-h,0,this.maxWidth);l=t.offset?this.maxWidth/s:p/(s-1),h+6>l&&(l=p/(s-(t.offset?.5:1)),c=this.maxHeight-Kr(t.grid)-n.padding-Km(t.title,this.chart.options.font),d=Math.sqrt(h*h+f*f),o=zk(Math.min(Math.asin(it((u.highest.height+6)/l,-1,1)),Math.asin(it(c/d,-1,1))-Math.asin(it(f/d,-1,1)))),o=Math.max(r,Math.min(i,o))),this.labelRotation=o}afterCalculateLabelRotation(){me(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){me(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:n,options:{ticks:s,title:r,grid:i}}=this,o=this._isVisible(),l=this.isHorizontal();if(o){const c=Km(r,n.options.font);if(l?(t.width=this.maxWidth,t.height=Kr(i)+c):(t.height=this.maxHeight,t.width=Kr(i)+c),s.display&&this.ticks.length){const{first:d,last:u,widest:h,highest:f}=this._getLabelSizes(),p=s.padding*2,b=fn(this.labelRotation),g=Math.cos(b),y=Math.sin(b);if(l){const x=s.mirror?0:y*h.width+g*f.height;t.height=Math.min(this.maxHeight,t.height+x+p)}else{const x=s.mirror?0:g*h.width+y*f.height;t.width=Math.min(this.maxWidth,t.width+x+p)}this._calculatePadding(d,u,y,g)}}this._handleMargins(),l?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,n,s,r){const{ticks:{align:i,padding:o},position:l}=this.options,c=this.labelRotation!==0,d=l!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,p=0;c?d?(f=r*t.width,p=s*n.height):(f=s*t.height,p=r*n.width):i==="start"?p=n.width:i==="end"?f=t.width:i!=="inner"&&(f=t.width/2,p=n.width/2),this.paddingLeft=Math.max((f-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((p-h+o)*this.width/(this.width-h),0)}else{let u=n.height/2,h=t.height/2;i==="start"?(u=0,h=t.height):i==="end"&&(u=n.height,h=0),this.paddingTop=u+o,this.paddingBottom=h+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){me(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:n}=this.options;return n==="top"||n==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let n,s;for(n=0,s=t.length;n<s;n++)he(t[n].label)&&(t.splice(n,1),s--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const n=this.options.ticks.sampleSize;let s=this.ticks;n<s.length&&(s=Gm(s,n)),this._labelSizes=t=this._computeLabelSizes(s,s.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,n,s){const{ctx:r,_longestTextCache:i}=this,o=[],l=[],c=Math.floor(n/qm(n,s));let d=0,u=0,h,f,p,b,g,y,x,m,v,j,_;for(h=0;h<n;h+=c){if(b=t[h].label,g=this._resolveTickFontOptions(h),r.font=y=g.string,x=i[y]=i[y]||{data:{},gc:[]},m=g.lineHeight,v=j=0,!he(b)&&!Pe(b))v=km(r,x.data,x.gc,v,b),j=m;else if(Pe(b))for(f=0,p=b.length;f<p;++f)_=b[f],!he(_)&&!Pe(_)&&(v=km(r,x.data,x.gc,v,_),j+=m);o.push(v),l.push(j),d=Math.max(v,d),u=Math.max(j,u)}L5(i,n);const N=o.indexOf(d),S=l.indexOf(u),T=M=>({width:o[M]||0,height:l[M]||0});return{first:T(0),last:T(n-1),widest:T(N),highest:T(S),widths:o,heights:l}}getLabelForValue(t){return t}getPixelForValue(t,n){return NaN}getValueForPixel(t){}getPixelForTick(t){const n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const n=this._startPixel+t*this._length;return Ik(this._alignToPixels?ps(this.chart,n,0):n)}getDecimalForPixel(t){const n=(t-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:n}=this;return t<0&&n<0?n:t>0&&n>0?t:0}getContext(t){const n=this.ticks||[];if(t>=0&&t<n.length){const s=n[t];return s.$context||(s.$context=z5(this.getContext(),t,s))}return this.$context||(this.$context=A5(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,n=fn(this.labelRotation),s=Math.abs(Math.cos(n)),r=Math.abs(Math.sin(n)),i=this._getLabelSizes(),o=t.autoSkipPadding||0,l=i?i.widest.width+o:0,c=i?i.highest.height+o:0;return this.isHorizontal()?c*s>l*r?l/s:c/r:c*r<l*s?c/s:l/r}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const n=this.axis,s=this.chart,r=this.options,{grid:i,position:o,border:l}=r,c=i.offset,d=this.isHorizontal(),h=this.ticks.length+(c?1:0),f=Kr(i),p=[],b=l.setContext(this.getContext()),g=b.display?b.width:0,y=g/2,x=function(G){return ps(s,G,g)};let m,v,j,_,N,S,T,M,D,C,A,$;if(o==="top")m=x(this.bottom),S=this.bottom-f,M=m-y,C=x(t.top)+y,$=t.bottom;else if(o==="bottom")m=x(this.top),C=t.top,$=x(t.bottom)-y,S=m+y,M=this.top+f;else if(o==="left")m=x(this.right),N=this.right-f,T=m-y,D=x(t.left)+y,A=t.right;else if(o==="right")m=x(this.left),D=t.left,A=x(t.right)-y,N=m+y,T=this.left+f;else if(n==="x"){if(o==="center")m=x((t.top+t.bottom)/2+.5);else if(re(o)){const G=Object.keys(o)[0],J=o[G];m=x(this.chart.scales[G].getPixelForValue(J))}C=t.top,$=t.bottom,S=m+y,M=S+f}else if(n==="y"){if(o==="center")m=x((t.left+t.right)/2);else if(re(o)){const G=Object.keys(o)[0],J=o[G];m=x(this.chart.scales[G].getPixelForValue(J))}N=m-y,T=N-f,D=t.left,A=t.right}const Y=ne(r.ticks.maxTicksLimit,h),q=Math.max(1,Math.ceil(h/Y));for(v=0;v<h;v+=q){const G=this.getContext(v),J=i.setContext(G),z=l.setContext(G),E=J.lineWidth,k=J.color,O=z.dash||[],L=z.dashOffset,H=J.tickWidth,Q=J.tickColor,Z=J.tickBorderDash||[],ee=J.tickBorderDashOffset;j=D5(this,v,c),j!==void 0&&(_=ps(s,j,E),d?N=T=D=A=_:S=M=C=$=_,p.push({tx1:N,ty1:S,tx2:T,ty2:M,x1:D,y1:C,x2:A,y2:$,width:E,color:k,borderDash:O,borderDashOffset:L,tickWidth:H,tickColor:Q,tickBorderDash:Z,tickBorderDashOffset:ee}))}return this._ticksLength=h,this._borderValue=m,p}_computeLabelItems(t){const n=this.axis,s=this.options,{position:r,ticks:i}=s,o=this.isHorizontal(),l=this.ticks,{align:c,crossAlign:d,padding:u,mirror:h}=i,f=Kr(s.grid),p=f+u,b=h?-u:p,g=-fn(this.labelRotation),y=[];let x,m,v,j,_,N,S,T,M,D,C,A,$="middle";if(r==="top")N=this.bottom-b,S=this._getXAxisLabelAlignment();else if(r==="bottom")N=this.top+b,S=this._getXAxisLabelAlignment();else if(r==="left"){const q=this._getYAxisLabelAlignment(f);S=q.textAlign,_=q.x}else if(r==="right"){const q=this._getYAxisLabelAlignment(f);S=q.textAlign,_=q.x}else if(n==="x"){if(r==="center")N=(t.top+t.bottom)/2+p;else if(re(r)){const q=Object.keys(r)[0],G=r[q];N=this.chart.scales[q].getPixelForValue(G)+p}S=this._getXAxisLabelAlignment()}else if(n==="y"){if(r==="center")_=(t.left+t.right)/2-p;else if(re(r)){const q=Object.keys(r)[0],G=r[q];_=this.chart.scales[q].getPixelForValue(G)}S=this._getYAxisLabelAlignment(f).textAlign}n==="y"&&(c==="start"?$="top":c==="end"&&($="bottom"));const Y=this._getLabelSizes();for(x=0,m=l.length;x<m;++x){v=l[x],j=v.label;const q=i.setContext(this.getContext(x));T=this.getPixelForTick(x)+i.labelOffset,M=this._resolveTickFontOptions(x),D=M.lineHeight,C=Pe(j)?j.length:1;const G=C/2,J=q.color,z=q.textStrokeColor,E=q.textStrokeWidth;let k=S;o?(_=T,S==="inner"&&(x===m-1?k=this.options.reverse?"left":"right":x===0?k=this.options.reverse?"right":"left":k="center"),r==="top"?d==="near"||g!==0?A=-C*D+D/2:d==="center"?A=-Y.highest.height/2-G*D+D:A=-Y.highest.height+D/2:d==="near"||g!==0?A=D/2:d==="center"?A=Y.highest.height/2-G*D:A=Y.highest.height-C*D,h&&(A*=-1),g!==0&&!q.showLabelBackdrop&&(_+=D/2*Math.sin(g))):(N=T,A=(1-C)*D/2);let O;if(q.showLabelBackdrop){const L=Tt(q.backdropPadding),H=Y.heights[x],Q=Y.widths[x];let Z=A-L.top,ee=0-L.left;switch($){case"middle":Z-=H/2;break;case"bottom":Z-=H;break}switch(S){case"center":ee-=Q/2;break;case"right":ee-=Q;break;case"inner":x===m-1?ee-=Q:x>0&&(ee-=Q/2);break}O={left:ee,top:Z,width:Q+L.width,height:H+L.height,color:q.backdropColor}}y.push({label:j,font:M,textOffset:A,options:{rotation:g,color:J,strokeColor:z,strokeWidth:E,textAlign:k,textBaseline:$,translation:[_,N],backdrop:O}})}return y}_getXAxisLabelAlignment(){const{position:t,ticks:n}=this.options;if(-fn(this.labelRotation))return t==="top"?"left":"right";let r="center";return n.align==="start"?r="left":n.align==="end"?r="right":n.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(t){const{position:n,ticks:{crossAlign:s,mirror:r,padding:i}}=this.options,o=this._getLabelSizes(),l=t+i,c=o.widest.width;let d,u;return n==="left"?r?(u=this.right+i,s==="near"?d="left":s==="center"?(d="center",u+=c/2):(d="right",u+=c)):(u=this.right-l,s==="near"?d="right":s==="center"?(d="center",u-=c/2):(d="left",u=this.left)):n==="right"?r?(u=this.left+i,s==="near"?d="right":s==="center"?(d="center",u-=c/2):(d="left",u-=c)):(u=this.left+l,s==="near"?d="left":s==="center"?(d="center",u+=c/2):(d="right",u=this.right)):d="right",{textAlign:d,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:n},left:s,top:r,width:i,height:o}=this;n&&(t.save(),t.fillStyle=n,t.fillRect(s,r,i,o),t.restore())}getLineWidthForValue(t){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const r=this.ticks.findIndex(i=>i.value===t);return r>=0?n.setContext(this.getContext(r)).lineWidth:0}drawGrid(t){const n=this.options.grid,s=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let i,o;const l=(c,d,u)=>{!u.width||!u.color||(s.save(),s.lineWidth=u.width,s.strokeStyle=u.color,s.setLineDash(u.borderDash||[]),s.lineDashOffset=u.borderDashOffset,s.beginPath(),s.moveTo(c.x,c.y),s.lineTo(d.x,d.y),s.stroke(),s.restore())};if(n.display)for(i=0,o=r.length;i<o;++i){const c=r[i];n.drawOnChartArea&&l({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),n.drawTicks&&l({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:n,options:{border:s,grid:r}}=this,i=s.setContext(this.getContext()),o=s.display?i.width:0;if(!o)return;const l=r.setContext(this.getContext(0)).lineWidth,c=this._borderValue;let d,u,h,f;this.isHorizontal()?(d=ps(t,this.left,o)-o/2,u=ps(t,this.right,l)+l/2,h=f=c):(h=ps(t,this.top,o)-o/2,f=ps(t,this.bottom,l)+l/2,d=u=c),n.save(),n.lineWidth=i.width,n.strokeStyle=i.color,n.beginPath(),n.moveTo(d,h),n.lineTo(u,f),n.stroke(),n.restore()}drawLabels(t){if(!this.options.ticks.display)return;const s=this.ctx,r=this._computeLabelArea();r&&pf(s,r);const i=this.getLabelItems(t);for(const o of i){const l=o.options,c=o.font,d=o.label,u=o.textOffset;na(s,d,0,u,c,l)}r&&mf(s)}drawTitle(){const{ctx:t,options:{position:n,title:s,reverse:r}}=this;if(!s.display)return;const i=Ye(s.font),o=Tt(s.padding),l=s.align;let c=i.lineHeight/2;n==="bottom"||n==="center"||re(n)?(c+=o.bottom,Pe(s.text)&&(c+=i.lineHeight*(s.text.length-1))):c+=o.top;const{titleX:d,titleY:u,maxWidth:h,rotation:f}=I5(this,c,n,l);na(t,s.text,0,0,i,{color:s.color,maxWidth:h,rotation:f,textAlign:F5(l,n,r),textBaseline:"middle",translation:[d,u]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,n=t.ticks&&t.ticks.z||0,s=ne(t.grid&&t.grid.z,-1),r=ne(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==Lr.prototype.draw?[{z:n,draw:i=>{this.draw(i)}}]:[{z:s,draw:i=>{this.drawBackground(),this.drawGrid(i),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:n,draw:i=>{this.drawLabels(i)}}]}getMatchingVisibleMetas(t){const n=this.chart.getSortedVisibleDatasetMetas(),s=this.axis+"AxisID",r=[];let i,o;for(i=0,o=n.length;i<o;++i){const l=n[i];l[s]===this.id&&(!t||l.type===t)&&r.push(l)}return r}_resolveTickFontOptions(t){const n=this.options.ticks.setContext(this.getContext(t));return Ye(n.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class to{constructor(t,n,s){this.type=t,this.scope=n,this.override=s,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const n=Object.getPrototypeOf(t);let s;B5(n)&&(s=this.register(n));const r=this.items,i=t.id,o=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+t);return i in r||(r[i]=t,W5(t,o,s),this.override&&Ce.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){const n=this.items,s=t.id,r=this.scope;s in n&&delete n[s],r&&s in Ce[r]&&(delete Ce[r][s],this.override&&delete As[s])}}function W5(e,t,n){const s=ea(Object.create(null),[n?Ce.get(n):{},Ce.get(t),e.defaults]);Ce.set(t,s),e.defaultRoutes&&$5(t,e.defaultRoutes),e.descriptors&&Ce.describe(t,e.descriptors)}function $5(e,t){Object.keys(t).forEach(n=>{const s=n.split("."),r=s.pop(),i=[e].concat(s).join("."),o=t[n].split("."),l=o.pop(),c=o.join(".");Ce.route(i,r,c,l)})}function B5(e){return"id"in e&&"defaults"in e}class H5{constructor(){this.controllers=new to(pr,"datasets",!0),this.elements=new to(wn,"elements"),this.plugins=new to(Object,"plugins"),this.scales=new to(Lr,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,n,s){[...n].forEach(r=>{const i=s||this._getRegistryForType(r);s||i.isForType(r)||i===this.plugins&&r.id?this._exec(t,i,r):le(r,o=>{const l=s||this._getRegistryForType(o);this._exec(t,l,o)})})}_exec(t,n,s){const r=df(t);me(s["before"+r],[],s),n[t](s),me(s["after"+r],[],s)}_getRegistryForType(t){for(let n=0;n<this._typedRegistries.length;n++){const s=this._typedRegistries[n];if(s.isForType(t))return s}return this.plugins}_get(t,n,s){const r=n.get(t);if(r===void 0)throw new Error('"'+t+'" is not a registered '+s+".");return r}}var Gt=new H5;class U5{constructor(){this._init=void 0}notify(t,n,s,r){if(n==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install")),this._init===void 0)return;const i=r?this._descriptors(t).filter(r):this._descriptors(t),o=this._notify(i,t,n,s);return n==="afterDestroy"&&(this._notify(i,t,"stop"),this._notify(this._init,t,"uninstall"),this._init=void 0),o}_notify(t,n,s,r){r=r||{};for(const i of t){const o=i.plugin,l=o[s],c=[n,r,i.options];if(me(l,c,o)===!1&&r.cancelable)return!1}return!0}invalidate(){he(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),n}_createDescriptors(t,n){const s=t&&t.config,r=ne(s.options&&s.options.plugins,{}),i=V5(s);return r===!1&&!n?[]:X5(t,i,r,n)}_notifyStateChanges(t){const n=this._oldCache||[],s=this._cache,r=(i,o)=>i.filter(l=>!o.some(c=>l.plugin.id===c.plugin.id));this._notify(r(n,s),t,"stop"),this._notify(r(s,n),t,"start")}}function V5(e){const t={},n=[],s=Object.keys(Gt.plugins.items);for(let i=0;i<s.length;i++)n.push(Gt.getPlugin(s[i]));const r=e.plugins||[];for(let i=0;i<r.length;i++){const o=r[i];n.indexOf(o)===-1&&(n.push(o),t[o.id]=!0)}return{plugins:n,localIds:t}}function Y5(e,t){return!t&&e===!1?null:e===!0?{}:e}function X5(e,{plugins:t,localIds:n},s,r){const i=[],o=e.getContext();for(const l of t){const c=l.id,d=Y5(s[c],r);d!==null&&i.push({plugin:l,options:q5(e.config,{plugin:l,local:n[c]},d,o)})}return i}function q5(e,{plugin:t,local:n},s,r){const i=e.pluginScopeKeys(t),o=e.getOptionScopes(s,i);return n&&t.defaults&&o.push(t.defaults),e.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Lu(e,t){const n=Ce.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function G5(e,t){let n=e;return e==="_index_"?n=t:e==="_value_"&&(n=t==="x"?"y":"x"),n}function K5(e,t){return e===t?"_index_":"_value_"}function Qm(e){if(e==="x"||e==="y"||e==="r")return e}function Q5(e){if(e==="top"||e==="bottom")return"x";if(e==="left"||e==="right")return"y"}function Au(e,...t){if(Qm(e))return e;for(const n of t){const s=n.axis||Q5(n.position)||e.length>1&&Qm(e[0].toLowerCase());if(s)return s}throw new Error(`Cannot determine type of '${e}' axis. Please provide 'axis' or 'position' option.`)}function Jm(e,t,n){if(n[t+"AxisID"]===e)return{axis:t}}function J5(e,t){if(t.data&&t.data.datasets){const n=t.data.datasets.filter(s=>s.xAxisID===e||s.yAxisID===e);if(n.length)return Jm(e,"x",n[0])||Jm(e,"y",n[0])}return{}}function Z5(e,t){const n=As[e.type]||{scales:{}},s=t.scales||{},r=Lu(e.type,t),i=Object.create(null);return Object.keys(s).forEach(o=>{const l=s[o];if(!re(l))return console.error(`Invalid scale configuration for scale: ${o}`);if(l._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const c=Au(o,l,J5(o,e),Ce.scales[l.type]),d=K5(c,r),u=n.scales||{};i[o]=Ni(Object.create(null),[{axis:c},l,u[c],u[d]])}),e.data.datasets.forEach(o=>{const l=o.type||e.type,c=o.indexAxis||Lu(l,t),u=(As[l]||{}).scales||{};Object.keys(u).forEach(h=>{const f=G5(h,c),p=o[f+"AxisID"]||f;i[p]=i[p]||Object.create(null),Ni(i[p],[{axis:f},s[p],u[h]])})}),Object.keys(i).forEach(o=>{const l=i[o];Ni(l,[Ce.scales[l.type],Ce.scale])}),i}function kv(e){const t=e.options||(e.options={});t.plugins=ne(t.plugins,{}),t.scales=Z5(e,t)}function Sv(e){return e=e||{},e.datasets=e.datasets||[],e.labels=e.labels||[],e}function eC(e){return e=e||{},e.data=Sv(e.data),kv(e),e}const Zm=new Map,Cv=new Set;function no(e,t){let n=Zm.get(e);return n||(n=t(),Zm.set(e,n),Cv.add(n)),n}const Qr=(e,t,n)=>{const s=Ls(t,n);s!==void 0&&e.add(s)};class tC{constructor(t){this._config=eC(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=Sv(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),kv(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return no(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,n){return no(`${t}.transition.${n}`,()=>[[`datasets.${t}.transitions.${n}`,`transitions.${n}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,n){return no(`${t}-${n}`,()=>[[`datasets.${t}.elements.${n}`,`datasets.${t}`,`elements.${n}`,""]])}pluginScopeKeys(t){const n=t.id,s=this.type;return no(`${s}-plugin-${n}`,()=>[[`plugins.${n}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,n){const s=this._scopeCache;let r=s.get(t);return(!r||n)&&(r=new Map,s.set(t,r)),r}getOptionScopes(t,n,s){const{options:r,type:i}=this,o=this._cachedScopes(t,s),l=o.get(n);if(l)return l;const c=new Set;n.forEach(u=>{t&&(c.add(t),u.forEach(h=>Qr(c,t,h))),u.forEach(h=>Qr(c,r,h)),u.forEach(h=>Qr(c,As[i]||{},h)),u.forEach(h=>Qr(c,Ce,h)),u.forEach(h=>Qr(c,Du,h))});const d=Array.from(c);return d.length===0&&d.push(Object.create(null)),Cv.has(n)&&o.set(n,d),d}chartOptionScopes(){const{options:t,type:n}=this;return[t,As[n]||{},Ce.datasets[n]||{},{type:n},Ce,Du]}resolveNamedOptions(t,n,s,r=[""]){const i={$shared:!0},{resolver:o,subPrefixes:l}=e0(this._resolverCache,t,r);let c=o;if(sC(o,n)){i.$shared=!1,s=as(s)?s():s;const d=this.createResolver(t,s,l);c=Cr(o,s,d)}for(const d of n)i[d]=c[d];return i}createResolver(t,n,s=[""],r){const{resolver:i}=e0(this._resolverCache,t,s);return re(n)?Cr(i,n,void 0,r):i}}function e0(e,t,n){let s=e.get(t);s||(s=new Map,e.set(t,s));const r=n.join();let i=s.get(r);return i||(i={resolver:gf(t,n),subPrefixes:n.filter(l=>!l.toLowerCase().includes("hover"))},s.set(r,i)),i}const nC=e=>re(e)&&Object.getOwnPropertyNames(e).some(t=>as(e[t]));function sC(e,t){const{isScriptable:n,isIndexable:s}=uv(e);for(const r of t){const i=n(r),o=s(r),l=(o||i)&&e[r];if(i&&(as(l)||nC(l))||o&&Pe(l))return!0}return!1}var rC="4.5.1";const iC=["top","bottom","left","right","chartArea"];function t0(e,t){return e==="top"||e==="bottom"||iC.indexOf(e)===-1&&t==="x"}function n0(e,t){return function(n,s){return n[e]===s[e]?n[t]-s[t]:n[e]-s[e]}}function s0(e){const t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),me(n&&n.onComplete,[e],t)}function aC(e){const t=e.chart,n=t.options.animation;me(n&&n.onProgress,[e],t)}function Ev(e){return yf()&&typeof e=="string"?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const To={},r0=e=>{const t=Ev(e);return Object.values(To).filter(n=>n.canvas===t).pop()};function oC(e,t,n){const s=Object.keys(e);for(const r of s){const i=+r;if(i>=t){const o=e[r];delete e[r],(n>0||i>t)&&(e[i+n]=o)}}}function lC(e,t,n,s){return!n||e.type==="mouseout"?null:s?t:e}var Tn;let Er=(Tn=class{static register(...t){Gt.add(...t),i0()}static unregister(...t){Gt.remove(...t),i0()}constructor(t,n){const s=this.config=new tC(n),r=Ev(t),i=r0(r);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const o=s.createResolver(s.chartOptionScopes(),this.getContext());this.platform=new(s.platform||S5(r)),this.platform.updateConfig(s);const l=this.platform.acquireContext(r,o.aspectRatio),c=l&&l.canvas,d=c&&c.height,u=c&&c.width;if(this.id=kk(),this.ctx=l,this.canvas=c,this.width=u,this.height=d,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new U5,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=Hk(h=>this.update(h),o.resizeDelay||0),this._dataChanges=[],To[this.id]=this,!l||!c){console.error("Failed to create chart: can't acquire context from the given item");return}rn.listen(this,"complete",s0),rn.listen(this,"progress",aC),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:n},width:s,height:r,_aspectRatio:i}=this;return he(t)?n&&i?i:r?s/r:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return Gt}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Mm(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Sm(this.canvas,this.ctx),this}stop(){return rn.stop(this),this}resize(t,n){rn.running(this)?this._resizeBeforeDraw={width:t,height:n}:this._resize(t,n)}_resize(t,n){const s=this.options,r=this.canvas,i=s.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(r,t,n,i),l=s.devicePixelRatio||this.platform.getDevicePixelRatio(),c=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,Mm(this,l,!0)&&(this.notifyPlugins("resize",{size:o}),me(s.onResize,[this,o],this),this.attached&&this._doResize(c)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};le(n,(s,r)=>{s.id=r})}buildOrUpdateScales(){const t=this.options,n=t.scales,s=this.scales,r=Object.keys(s).reduce((o,l)=>(o[l]=!1,o),{});let i=[];n&&(i=i.concat(Object.keys(n).map(o=>{const l=n[o],c=Au(o,l),d=c==="r",u=c==="x";return{options:l,dposition:d?"chartArea":u?"bottom":"left",dtype:d?"radialLinear":u?"category":"linear"}}))),le(i,o=>{const l=o.options,c=l.id,d=Au(c,l),u=ne(l.type,o.dtype);(l.position===void 0||t0(l.position,d)!==t0(o.dposition))&&(l.position=o.dposition),r[c]=!0;let h=null;if(c in s&&s[c].type===u)h=s[c];else{const f=Gt.getScale(u);h=new f({id:c,type:u,ctx:this.ctx,chart:this}),s[h.id]=h}h.init(l,t)}),le(r,(o,l)=>{o||delete s[l]}),le(s,o=>{Nt.configure(this,o,o.options),Nt.addBox(this,o)})}_updateMetasets(){const t=this._metasets,n=this.data.datasets.length,s=t.length;if(t.sort((r,i)=>r.index-i.index),s>n){for(let r=n;r<s;++r)this._destroyDatasetMeta(r);t.splice(n,s-n)}this._sortedMetasets=t.slice(0).sort(n0("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:n}}=this;t.length>n.length&&delete this._stacks,t.forEach((s,r)=>{n.filter(i=>i===s._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const t=[],n=this.data.datasets;let s,r;for(this._removeUnreferencedMetasets(),s=0,r=n.length;s<r;s++){const i=n[s];let o=this.getDatasetMeta(s);const l=i.type||this.config.type;if(o.type&&o.type!==l&&(this._destroyDatasetMeta(s),o=this.getDatasetMeta(s)),o.type=l,o.indexAxis=i.indexAxis||Lu(l,this.options),o.order=i.order||0,o.index=s,o.label=""+i.label,o.visible=this.isDatasetVisible(s),o.controller)o.controller.updateIndex(s),o.controller.linkScales();else{const c=Gt.getController(l),{datasetElementType:d,dataElementType:u}=Ce.datasets[l];Object.assign(c,{dataElementType:Gt.getElement(u),datasetElementType:d&&Gt.getElement(d)}),o.controller=new c(this,s),t.push(o.controller)}}return this._updateMetasets(),t}_resetElements(){le(this.data.datasets,(t,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const n=this.config;n.update();const s=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!s.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let d=0,u=this.data.datasets.length;d<u;d++){const{controller:h}=this.getDatasetMeta(d),f=!r&&i.indexOf(h)===-1;h.buildOrUpdateElements(f),o=Math.max(+h.getMaxOverflow(),o)}o=this._minPadding=s.layout.autoPadding?o:0,this._updateLayout(o),r||le(i,d=>{d.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(n0("z","_idx"));const{_active:l,_lastEvent:c}=this;c?this._eventHandler(c,!0):l.length&&this._updateHoverStyles(l,l,!0),this.render()}_updateScales(){le(this.scales,t=>{Nt.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,n=new Set(Object.keys(this._listeners)),s=new Set(t.events);(!xm(n,s)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,n=this._getUniformDataChanges()||[];for(const{method:s,start:r,count:i}of n){const o=s==="_removeElements"?-i:i;oC(t,r,o)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const n=this.data.datasets.length,s=i=>new Set(t.filter(o=>o[0]===i).map((o,l)=>l+","+o.splice(1).join(","))),r=s(0);for(let i=1;i<n;i++)if(!xm(r,s(i)))return;return Array.from(r).map(i=>i.split(",")).map(i=>({method:i[1],start:+i[2],count:+i[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Nt.update(this,this.width,this.height,t);const n=this.chartArea,s=n.width<=0||n.height<=0;this._layers=[],le(this.boxes,r=>{s&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,i)=>{r._idx=i}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let n=0,s=this.data.datasets.length;n<s;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,s=this.data.datasets.length;n<s;++n)this._updateDataset(n,as(t)?t({datasetIndex:n}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,n){const s=this.getDatasetMeta(t),r={meta:s,index:t,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(s.controller._update(n),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(rn.has(this)?this.attached&&!rn.running(this)&&rn.start(this):(this.draw(),s0({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:s,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(s,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(t=0;t<n.length&&n[t].z<=0;++t)n[t].draw(this.chartArea);for(this._drawDatasets();t<n.length;++t)n[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const n=this._sortedMetasets,s=[];let r,i;for(r=0,i=n.length;r<i;++r){const o=n[r];(!t||o.visible)&&s.push(o)}return s}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let n=t.length-1;n>=0;--n)this._drawDataset(t[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const n=this.ctx,s={meta:t,index:t.index,cancelable:!0},r=ES(this,t);this.notifyPlugins("beforeDatasetDraw",s)!==!1&&(r&&pf(n,r),t.controller.draw(),r&&mf(n),s.cancelable=!1,this.notifyPlugins("afterDatasetDraw",s))}isPointInArea(t){return cv(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,n,s,r){const i=i5.modes[n];return typeof i=="function"?i(this,t,s,r):[]}getDatasetMeta(t){const n=this.data.datasets[t],s=this._metasets;let r=s.filter(i=>i&&i._dataset===n).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:t,_dataset:n,_parsed:[],_sorted:!1},s.push(r)),r}getContext(){return this.$context||(this.$context=Dr(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const n=this.data.datasets[t];if(!n)return!1;const s=this.getDatasetMeta(t);return typeof s.hidden=="boolean"?!s.hidden:!n.hidden}setDatasetVisibility(t,n){const s=this.getDatasetMeta(t);s.hidden=!n}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,n,s){const r=s?"show":"hide",i=this.getDatasetMeta(t),o=i.controller._resolveAnimations(void 0,r);ta(n)?(i.data[n].hidden=!s,this.update()):(this.setDatasetVisibility(t,s),o.update(i,{visible:s}),this.update(l=>l.datasetIndex===t?r:void 0))}hide(t,n){this._updateVisibility(t,n,!1)}show(t,n){this._updateVisibility(t,n,!0)}_destroyDatasetMeta(t){const n=this._metasets[t];n&&n.controller&&n.controller._destroy(),delete this._metasets[t]}_stop(){let t,n;for(this.stop(),rn.remove(this),t=0,n=this.data.datasets.length;t<n;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:n}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),Sm(t,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete To[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,n=this.platform,s=(i,o)=>{n.addEventListener(this,i,o),t[i]=o},r=(i,o,l)=>{i.offsetX=o,i.offsetY=l,this._eventHandler(i)};le(this.options.events,i=>s(i,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,n=this.platform,s=(c,d)=>{n.addEventListener(this,c,d),t[c]=d},r=(c,d)=>{t[c]&&(n.removeEventListener(this,c,d),delete t[c])},i=(c,d)=>{this.canvas&&this.resize(c,d)};let o;const l=()=>{r("attach",l),this.attached=!0,this.resize(),s("resize",i),s("detach",o)};o=()=>{this.attached=!1,r("resize",i),this._stop(),this._resize(0,0),s("attach",l)},n.isAttached(this.canvas)?l():o()}unbindEvents(){le(this._listeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._listeners={},le(this._responsiveListeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,n,s){const r=s?"set":"remove";let i,o,l,c;for(n==="dataset"&&(i=this.getDatasetMeta(t[0].datasetIndex),i.controller["_"+r+"DatasetHoverStyle"]()),l=0,c=t.length;l<c;++l){o=t[l];const d=o&&this.getDatasetMeta(o.datasetIndex).controller;d&&d[r+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const n=this._active||[],s=t.map(({datasetIndex:i,index:o})=>{const l=this.getDatasetMeta(i);if(!l)throw new Error("No dataset found at index "+i);return{datasetIndex:i,element:l.data[o],index:o}});!pl(s,n)&&(this._active=s,this._lastEvent=null,this._updateHoverStyles(s,n))}notifyPlugins(t,n,s){return this._plugins.notify(this,t,n,s)}isPluginEnabled(t){return this._plugins._cache.filter(n=>n.plugin.id===t).length===1}_updateHoverStyles(t,n,s){const r=this.options.hover,i=(c,d)=>c.filter(u=>!d.some(h=>u.datasetIndex===h.datasetIndex&&u.index===h.index)),o=i(n,t),l=s?t:i(t,n);o.length&&this.updateHoverStyle(o,r.mode,!1),l.length&&r.mode&&this.updateHoverStyle(l,r.mode,!0)}_eventHandler(t,n){const s={event:t,replay:n,cancelable:!0,inChartArea:this.isPointInArea(t)},r=o=>(o.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",s,r)===!1)return;const i=this._handleEvent(t,n,s.inChartArea);return s.cancelable=!1,this.notifyPlugins("afterEvent",s,r),(i||s.changed)&&this.render(),this}_handleEvent(t,n,s){const{_active:r=[],options:i}=this,o=n,l=this._getActiveElements(t,r,s,o),c=Pk(t),d=lC(t,this._lastEvent,s,c);s&&(this._lastEvent=null,me(i.onHover,[t,l,this],this),c&&me(i.onClick,[t,l,this],this));const u=!pl(l,r);return(u||n)&&(this._active=l,this._updateHoverStyles(l,r,n)),this._lastEvent=d,u}_getActiveElements(t,n,s,r){if(t.type==="mouseout")return[];if(!s)return n;const i=this.options.hover;return this.getElementsAtEventForMode(t,i.mode,i,r)}},K(Tn,"defaults",Ce),K(Tn,"instances",To),K(Tn,"overrides",As),K(Tn,"registry",Gt),K(Tn,"version",rC),K(Tn,"getChart",r0),Tn);function i0(){return le(Er.instances,e=>e._plugins.invalidate())}function cC(e,t,n){const{startAngle:s,x:r,y:i,outerRadius:o,innerRadius:l,options:c}=t,{borderWidth:d,borderJoinStyle:u}=c,h=Math.min(d/o,Kt(s-n));if(e.beginPath(),e.arc(r,i,o-d/2,s+h/2,n-h/2),l>0){const f=Math.min(d/l,Kt(s-n));e.arc(r,i,l+d/2,n-f/2,s+f/2,!0)}else{const f=Math.min(d/2,o*Kt(s-n));if(u==="round")e.arc(r,i,f,n-ue/2,s+ue/2,!0);else if(u==="bevel"){const p=2*f*f,b=-p*Math.cos(n+ue/2)+r,g=-p*Math.sin(n+ue/2)+i,y=p*Math.cos(s+ue/2)+r,x=p*Math.sin(s+ue/2)+i;e.lineTo(b,g),e.lineTo(y,x)}}e.closePath(),e.moveTo(0,0),e.rect(0,0,e.canvas.width,e.canvas.height),e.clip("evenodd")}function dC(e,t,n){const{startAngle:s,pixelMargin:r,x:i,y:o,outerRadius:l,innerRadius:c}=t;let d=r/l;e.beginPath(),e.arc(i,o,l,s-d,n+d),c>r?(d=r/c,e.arc(i,o,c,n+d,s-d,!0)):e.arc(i,o,r,n+De,s-De),e.closePath(),e.clip()}function uC(e){return xf(e,["outerStart","outerEnd","innerStart","innerEnd"])}function hC(e,t,n,s){const r=uC(e.options.borderRadius),i=(n-t)/2,o=Math.min(i,s*t/2),l=c=>{const d=(n-Math.min(i,c))*s/2;return it(c,0,Math.min(i,d))};return{outerStart:l(r.outerStart),outerEnd:l(r.outerEnd),innerStart:it(r.innerStart,0,o),innerEnd:it(r.innerEnd,0,o)}}function Hs(e,t,n,s){return{x:n+e*Math.cos(t),y:s+e*Math.sin(t)}}function jl(e,t,n,s,r,i){const{x:o,y:l,startAngle:c,pixelMargin:d,innerRadius:u}=t,h=Math.max(t.outerRadius+s+n-d,0),f=u>0?u+s+n+d:0;let p=0;const b=r-c;if(s){const q=u>0?u-s:0,G=h>0?h-s:0,J=(q+G)/2,z=J!==0?b*J/(J+s):b;p=(b-z)/2}const g=Math.max(.001,b*h-n/ue)/h,y=(b-g)/2,x=c+y+p,m=r-y-p,{outerStart:v,outerEnd:j,innerStart:_,innerEnd:N}=hC(t,f,h,m-x),S=h-v,T=h-j,M=x+v/S,D=m-j/T,C=f+_,A=f+N,$=x+_/C,Y=m-N/A;if(e.beginPath(),i){const q=(M+D)/2;if(e.arc(o,l,h,M,q),e.arc(o,l,h,q,D),j>0){const E=Hs(T,D,o,l);e.arc(E.x,E.y,j,D,m+De)}const G=Hs(A,m,o,l);if(e.lineTo(G.x,G.y),N>0){const E=Hs(A,Y,o,l);e.arc(E.x,E.y,N,m+De,Y+Math.PI)}const J=(m-N/f+(x+_/f))/2;if(e.arc(o,l,f,m-N/f,J,!0),e.arc(o,l,f,J,x+_/f,!0),_>0){const E=Hs(C,$,o,l);e.arc(E.x,E.y,_,$+Math.PI,x-De)}const z=Hs(S,x,o,l);if(e.lineTo(z.x,z.y),v>0){const E=Hs(S,M,o,l);e.arc(E.x,E.y,v,x-De,M)}}else{e.moveTo(o,l);const q=Math.cos(M)*h+o,G=Math.sin(M)*h+l;e.lineTo(q,G);const J=Math.cos(D)*h+o,z=Math.sin(D)*h+l;e.lineTo(J,z)}e.closePath()}function fC(e,t,n,s,r){const{fullCircles:i,startAngle:o,circumference:l}=t;let c=t.endAngle;if(i){jl(e,t,n,s,c,r);for(let d=0;d<i;++d)e.fill();isNaN(l)||(c=o+(l%Te||Te))}return jl(e,t,n,s,c,r),e.fill(),c}function pC(e,t,n,s,r){const{fullCircles:i,startAngle:o,circumference:l,options:c}=t,{borderWidth:d,borderJoinStyle:u,borderDash:h,borderDashOffset:f,borderRadius:p}=c,b=c.borderAlign==="inner";if(!d)return;e.setLineDash(h||[]),e.lineDashOffset=f,b?(e.lineWidth=d*2,e.lineJoin=u||"round"):(e.lineWidth=d,e.lineJoin=u||"bevel");let g=t.endAngle;if(i){jl(e,t,n,s,g,r);for(let y=0;y<i;++y)e.stroke();isNaN(l)||(g=o+(l%Te||Te))}b&&dC(e,t,g),c.selfJoin&&g-o>=ue&&p===0&&u!=="miter"&&cC(e,t,g),i||(jl(e,t,n,s,g,r),e.stroke())}class oi extends wn{constructor(n){super();K(this,"circumference");K(this,"endAngle");K(this,"fullCircles");K(this,"innerRadius");K(this,"outerRadius");K(this,"pixelMargin");K(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,n&&Object.assign(this,n)}inRange(n,s,r){const i=this.getProps(["x","y"],r),{angle:o,distance:l}=tv(i,{x:n,y:s}),{startAngle:c,endAngle:d,innerRadius:u,outerRadius:h,circumference:f}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],r),p=(this.options.spacing+this.options.borderWidth)/2,b=ne(f,d-c),g=bl(o,c,d)&&c!==d,y=b>=Te||g,x=_s(l,u+p,h+p);return y&&x}getCenterPoint(n){const{x:s,y:r,startAngle:i,endAngle:o,innerRadius:l,outerRadius:c}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],n),{offset:d,spacing:u}=this.options,h=(i+o)/2,f=(l+c+u+d)/2;return{x:s+Math.cos(h)*f,y:r+Math.sin(h)*f}}tooltipPosition(n){return this.getCenterPoint(n)}draw(n){const{options:s,circumference:r}=this,i=(s.offset||0)/4,o=(s.spacing||0)/2,l=s.circular;if(this.pixelMargin=s.borderAlign==="inner"?.33:0,this.fullCircles=r>Te?Math.floor(r/Te):0,r===0||this.innerRadius<0||this.outerRadius<0)return;n.save();const c=(this.startAngle+this.endAngle)/2;n.translate(Math.cos(c)*i,Math.sin(c)*i);const d=1-Math.sin(Math.min(ue,r||0)),u=i*d;n.fillStyle=s.backgroundColor,n.strokeStyle=s.borderColor,fC(n,this,u,o,l),pC(n,this,u,o,l),n.restore()}}K(oi,"id","arc"),K(oi,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),K(oi,"defaultRoutes",{backgroundColor:"backgroundColor"}),K(oi,"descriptors",{_scriptable:!0,_indexable:n=>n!=="borderDash"});function Tv(e,t){const{x:n,y:s,base:r,width:i,height:o}=e.getProps(["x","y","base","width","height"],t);let l,c,d,u,h;return e.horizontal?(h=o/2,l=Math.min(n,r),c=Math.max(n,r),d=s-h,u=s+h):(h=i/2,l=n-h,c=n+h,d=Math.min(s,r),u=Math.max(s,r)),{left:l,top:d,right:c,bottom:u}}function Bn(e,t,n,s){return e?0:it(t,n,s)}function mC(e,t,n){const s=e.options.borderWidth,r=e.borderSkipped,i=dv(s);return{t:Bn(r.top,i.top,0,n),r:Bn(r.right,i.right,0,t),b:Bn(r.bottom,i.bottom,0,n),l:Bn(r.left,i.left,0,t)}}function xC(e,t,n){const{enableBorderRadius:s}=e.getProps(["enableBorderRadius"]),r=e.options.borderRadius,i=hr(r),o=Math.min(t,n),l=e.borderSkipped,c=s||re(r);return{topLeft:Bn(!c||l.top||l.left,i.topLeft,0,o),topRight:Bn(!c||l.top||l.right,i.topRight,0,o),bottomLeft:Bn(!c||l.bottom||l.left,i.bottomLeft,0,o),bottomRight:Bn(!c||l.bottom||l.right,i.bottomRight,0,o)}}function gC(e){const t=Tv(e),n=t.right-t.left,s=t.bottom-t.top,r=mC(e,n/2,s/2),i=xC(e,n/2,s/2);return{outer:{x:t.left,y:t.top,w:n,h:s,radius:i},inner:{x:t.left+r.l,y:t.top+r.t,w:n-r.l-r.r,h:s-r.t-r.b,radius:{topLeft:Math.max(0,i.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,i.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,i.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,i.bottomRight-Math.max(r.b,r.r))}}}}function xd(e,t,n,s){const r=t===null,i=n===null,l=e&&!(r&&i)&&Tv(e,s);return l&&(r||_s(t,l.left,l.right))&&(i||_s(n,l.top,l.bottom))}function bC(e){return e.topLeft||e.topRight||e.bottomLeft||e.bottomRight}function vC(e,t){e.rect(t.x,t.y,t.w,t.h)}function gd(e,t,n={}){const s=e.x!==n.x?-t:0,r=e.y!==n.y?-t:0,i=(e.x+e.w!==n.x+n.w?t:0)-s,o=(e.y+e.h!==n.y+n.h?t:0)-r;return{x:e.x+s,y:e.y+r,w:e.w+i,h:e.h+o,radius:e.radius}}class Mo extends wn{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:n,options:{borderColor:s,backgroundColor:r}}=this,{inner:i,outer:o}=gC(this),l=bC(o.radius)?vl:vC;t.save(),(o.w!==i.w||o.h!==i.h)&&(t.beginPath(),l(t,gd(o,n,i)),t.clip(),l(t,gd(i,-n,o)),t.fillStyle=s,t.fill("evenodd")),t.beginPath(),l(t,gd(i,n)),t.fillStyle=r,t.fill(),t.restore()}inRange(t,n,s){return xd(this,t,n,s)}inXRange(t,n){return xd(this,t,null,n)}inYRange(t,n){return xd(this,null,t,n)}getCenterPoint(t){const{x:n,y:s,base:r,horizontal:i}=this.getProps(["x","y","base","horizontal"],t);return{x:i?(n+r)/2:n,y:i?s:(s+r)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}K(Mo,"id","bar"),K(Mo,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),K(Mo,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const a0=(e,t)=>{let{boxHeight:n=t,boxWidth:s=t}=e;return e.usePointStyle&&(n=Math.min(n,t),s=e.pointStyleWidth||Math.min(s,t)),{boxWidth:s,boxHeight:n,itemHeight:Math.max(t,n)}},yC=(e,t)=>e!==null&&t!==null&&e.datasetIndex===t.datasetIndex&&e.index===t.index;class o0 extends wn{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,n,s){this.maxWidth=t,this.maxHeight=n,this._margins=s,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let n=me(t.generateLabels,[this.chart],this)||[];t.filter&&(n=n.filter(s=>t.filter(s,this.chart.data))),t.sort&&(n=n.sort((s,r)=>t.sort(s,r,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:t,ctx:n}=this;if(!t.display){this.width=this.height=0;return}const s=t.labels,r=Ye(s.font),i=r.size,o=this._computeTitleHeight(),{boxWidth:l,itemHeight:c}=a0(s,i);let d,u;n.font=r.string,this.isHorizontal()?(d=this.maxWidth,u=this._fitRows(o,i,l,c)+10):(u=this.maxHeight,d=this._fitCols(o,r,l,c)+10),this.width=Math.min(d,t.maxWidth||this.maxWidth),this.height=Math.min(u,t.maxHeight||this.maxHeight)}_fitRows(t,n,s,r){const{ctx:i,maxWidth:o,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],d=this.lineWidths=[0],u=r+l;let h=t;i.textAlign="left",i.textBaseline="middle";let f=-1,p=-u;return this.legendItems.forEach((b,g)=>{const y=s+n/2+i.measureText(b.text).width;(g===0||d[d.length-1]+y+2*l>o)&&(h+=u,d[d.length-(g>0?0:1)]=0,p+=u,f++),c[g]={left:0,top:p,row:f,width:y,height:r},d[d.length-1]+=y+l}),h}_fitCols(t,n,s,r){const{ctx:i,maxHeight:o,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],d=this.columnSizes=[],u=o-t;let h=l,f=0,p=0,b=0,g=0;return this.legendItems.forEach((y,x)=>{const{itemWidth:m,itemHeight:v}=wC(s,n,i,y,r);x>0&&p+v+2*l>u&&(h+=f+l,d.push({width:f,height:p}),b+=f+l,g++,f=p=0),c[x]={left:b,top:p,col:g,width:m,height:v},f=Math.max(f,m),p+=v+l}),h+=f,d.push({width:f,height:p}),h}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:s,labels:{padding:r},rtl:i}}=this,o=fr(i,this.left,this.width);if(this.isHorizontal()){let l=0,c=Ue(s,this.left+r,this.right-this.lineWidths[l]);for(const d of n)l!==d.row&&(l=d.row,c=Ue(s,this.left+r,this.right-this.lineWidths[l])),d.top+=this.top+t+r,d.left=o.leftForLtr(o.x(c),d.width),c+=d.width+r}else{let l=0,c=Ue(s,this.top+t+r,this.bottom-this.columnSizes[l].height);for(const d of n)d.col!==l&&(l=d.col,c=Ue(s,this.top+t+r,this.bottom-this.columnSizes[l].height)),d.top=c,d.left+=this.left+r,d.left=o.leftForLtr(o.x(d.left),d.width),c+=d.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;pf(t,this),this._draw(),mf(t)}}_draw(){const{options:t,columnSizes:n,lineWidths:s,ctx:r}=this,{align:i,labels:o}=t,l=Ce.color,c=fr(t.rtl,this.left,this.width),d=Ye(o.font),{padding:u}=o,h=d.size,f=h/2;let p;this.drawTitle(),r.textAlign=c.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=d.string;const{boxWidth:b,boxHeight:g,itemHeight:y}=a0(o,h),x=function(N,S,T){if(isNaN(b)||b<=0||isNaN(g)||g<0)return;r.save();const M=ne(T.lineWidth,1);if(r.fillStyle=ne(T.fillStyle,l),r.lineCap=ne(T.lineCap,"butt"),r.lineDashOffset=ne(T.lineDashOffset,0),r.lineJoin=ne(T.lineJoin,"miter"),r.lineWidth=M,r.strokeStyle=ne(T.strokeStyle,l),r.setLineDash(ne(T.lineDash,[])),o.usePointStyle){const D={radius:g*Math.SQRT2/2,pointStyle:T.pointStyle,rotation:T.rotation,borderWidth:M},C=c.xPlus(N,b/2),A=S+f;lv(r,D,C,A,o.pointStyleWidth&&b)}else{const D=S+Math.max((h-g)/2,0),C=c.leftForLtr(N,b),A=hr(T.borderRadius);r.beginPath(),Object.values(A).some($=>$!==0)?vl(r,{x:C,y:D,w:b,h:g,radius:A}):r.rect(C,D,b,g),r.fill(),M!==0&&r.stroke()}r.restore()},m=function(N,S,T){na(r,T.text,N,S+y/2,d,{strikethrough:T.hidden,textAlign:c.textAlign(T.textAlign)})},v=this.isHorizontal(),j=this._computeTitleHeight();v?p={x:Ue(i,this.left+u,this.right-s[0]),y:this.top+u+j,line:0}:p={x:this.left+u,y:Ue(i,this.top+j+u,this.bottom-n[0].height),line:0},mv(this.ctx,t.textDirection);const _=y+u;this.legendItems.forEach((N,S)=>{r.strokeStyle=N.fontColor,r.fillStyle=N.fontColor;const T=r.measureText(N.text).width,M=c.textAlign(N.textAlign||(N.textAlign=o.textAlign)),D=b+f+T;let C=p.x,A=p.y;c.setWidth(this.width),v?S>0&&C+D+u>this.right&&(A=p.y+=_,p.line++,C=p.x=Ue(i,this.left+u,this.right-s[p.line])):S>0&&A+_>this.bottom&&(C=p.x=C+n[p.line].width+u,p.line++,A=p.y=Ue(i,this.top+j+u,this.bottom-n[p.line].height));const $=c.x(C);if(x($,A,N),C=Uk(M,C+b+f,v?C+D:this.right,t.rtl),m(c.x(C),A,N),v)p.x+=D+u;else if(typeof N.text!="string"){const Y=d.lineHeight;p.y+=Mv(N,Y)+u}else p.y+=_}),xv(this.ctx,t.textDirection)}drawTitle(){const t=this.options,n=t.title,s=Ye(n.font),r=Tt(n.padding);if(!n.display)return;const i=fr(t.rtl,this.left,this.width),o=this.ctx,l=n.position,c=s.size/2,d=r.top+c;let u,h=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),u=this.top+d,h=Ue(t.align,h,this.right-f);else{const b=this.columnSizes.reduce((g,y)=>Math.max(g,y.height),0);u=d+Ue(t.align,this.top,this.bottom-b-t.labels.padding-this._computeTitleHeight())}const p=Ue(l,h,h+f);o.textAlign=i.textAlign(hf(l)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=s.string,na(o,n.text,p,u,s)}_computeTitleHeight(){const t=this.options.title,n=Ye(t.font),s=Tt(t.padding);return t.display?n.lineHeight+s.height:0}_getLegendItemAt(t,n){let s,r,i;if(_s(t,this.left,this.right)&&_s(n,this.top,this.bottom)){for(i=this.legendHitBoxes,s=0;s<i.length;++s)if(r=i[s],_s(t,r.left,r.left+r.width)&&_s(n,r.top,r.top+r.height))return this.legendItems[s]}return null}handleEvent(t){const n=this.options;if(!NC(t.type,n))return;const s=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const r=this._hoveredItem,i=yC(r,s);r&&!i&&me(n.onLeave,[t,r,this],this),this._hoveredItem=s,s&&!i&&me(n.onHover,[t,s,this],this)}else s&&me(n.onClick,[t,s,this],this)}}function wC(e,t,n,s,r){const i=jC(s,e,t,n),o=_C(r,s,t.lineHeight);return{itemWidth:i,itemHeight:o}}function jC(e,t,n,s){let r=e.text;return r&&typeof r!="string"&&(r=r.reduce((i,o)=>i.length>o.length?i:o)),t+n.size/2+s.measureText(r).width}function _C(e,t,n){let s=e;return typeof t.text!="string"&&(s=Mv(t,n)),s}function Mv(e,t){const n=e.text?e.text.length:0;return t*n}function NC(e,t){return!!((e==="mousemove"||e==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(e==="click"||e==="mouseup"))}var kC={id:"legend",_element:o0,start(e,t,n){const s=e.legend=new o0({ctx:e.ctx,options:n,chart:e});Nt.configure(e,s,n),Nt.addBox(e,s)},stop(e){Nt.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,n){const s=e.legend;Nt.configure(e,s,n),s.options=n},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,n){const s=t.datasetIndex,r=n.chart;r.isDatasetVisible(s)?(r.hide(s),t.hidden=!0):(r.show(s),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:n,pointStyle:s,textAlign:r,color:i,useBorderRadius:o,borderRadius:l}}=e.legend.options;return e._getSortedDatasetMetas().map(c=>{const d=c.controller.getStyle(n?0:void 0),u=Tt(d.borderWidth);return{text:t[c.index].label,fillStyle:d.backgroundColor,fontColor:i,hidden:!c.visible,lineCap:d.borderCapStyle,lineDash:d.borderDash,lineDashOffset:d.borderDashOffset,lineJoin:d.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:d.borderColor,pointStyle:s||d.pointStyle,rotation:d.rotation,textAlign:r||d.textAlign,borderRadius:o&&(l||d.borderRadius),datasetIndex:c.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class Pv extends wn{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,n){const s=this.options;if(this.left=0,this.top=0,!s.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=n;const r=Pe(s.text)?s.text.length:1;this._padding=Tt(s.padding);const i=r*Ye(s.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:n,left:s,bottom:r,right:i,options:o}=this,l=o.align;let c=0,d,u,h;return this.isHorizontal()?(u=Ue(l,s,i),h=n+t,d=i-s):(o.position==="left"?(u=s+t,h=Ue(l,r,n),c=ue*-.5):(u=i-t,h=Ue(l,n,r),c=ue*.5),d=r-n),{titleX:u,titleY:h,maxWidth:d,rotation:c}}draw(){const t=this.ctx,n=this.options;if(!n.display)return;const s=Ye(n.font),i=s.lineHeight/2+this._padding.top,{titleX:o,titleY:l,maxWidth:c,rotation:d}=this._drawArgs(i);na(t,n.text,0,0,s,{color:n.color,maxWidth:c,rotation:d,textAlign:hf(n.align),textBaseline:"middle",translation:[o,l]})}}function SC(e,t){const n=new Pv({ctx:e.ctx,options:t,chart:e});Nt.configure(e,n,t),Nt.addBox(e,n),e.titleBlock=n}var CC={id:"title",_element:Pv,start(e,t,n){SC(e,n)},stop(e){const t=e.titleBlock;Nt.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,n){const s=e.titleBlock;Nt.configure(e,s,n),s.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const li={average(e){if(!e.length)return!1;let t,n,s=new Set,r=0,i=0;for(t=0,n=e.length;t<n;++t){const l=e[t].element;if(l&&l.hasValue()){const c=l.tooltipPosition();s.add(c.x),r+=c.y,++i}}return i===0||s.size===0?!1:{x:[...s].reduce((l,c)=>l+c)/s.size,y:r/i}},nearest(e,t){if(!e.length)return!1;let n=t.x,s=t.y,r=Number.POSITIVE_INFINITY,i,o,l;for(i=0,o=e.length;i<o;++i){const c=e[i].element;if(c&&c.hasValue()){const d=c.getCenterPoint(),u=Fk(t,d);u<r&&(r=u,l=c)}}if(l){const c=l.tooltipPosition();n=c.x,s=c.y}return{x:n,y:s}}};function Xt(e,t){return t&&(Pe(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function an(e){return(typeof e=="string"||e instanceof String)&&e.indexOf(`
`)>-1?e.split(`
`):e}function EC(e,t){const{element:n,datasetIndex:s,index:r}=t,i=e.getDatasetMeta(s).controller,{label:o,value:l}=i.getLabelAndValue(r);return{chart:e,label:o,parsed:i.getParsed(r),raw:e.data.datasets[s].data[r],formattedValue:l,dataset:i.getDataset(),dataIndex:r,datasetIndex:s,element:n}}function l0(e,t){const n=e.chart.ctx,{body:s,footer:r,title:i}=e,{boxWidth:o,boxHeight:l}=t,c=Ye(t.bodyFont),d=Ye(t.titleFont),u=Ye(t.footerFont),h=i.length,f=r.length,p=s.length,b=Tt(t.padding);let g=b.height,y=0,x=s.reduce((j,_)=>j+_.before.length+_.lines.length+_.after.length,0);if(x+=e.beforeBody.length+e.afterBody.length,h&&(g+=h*d.lineHeight+(h-1)*t.titleSpacing+t.titleMarginBottom),x){const j=t.displayColors?Math.max(l,c.lineHeight):c.lineHeight;g+=p*j+(x-p)*c.lineHeight+(x-1)*t.bodySpacing}f&&(g+=t.footerMarginTop+f*u.lineHeight+(f-1)*t.footerSpacing);let m=0;const v=function(j){y=Math.max(y,n.measureText(j).width+m)};return n.save(),n.font=d.string,le(e.title,v),n.font=c.string,le(e.beforeBody.concat(e.afterBody),v),m=t.displayColors?o+2+t.boxPadding:0,le(s,j=>{le(j.before,v),le(j.lines,v),le(j.after,v)}),m=0,n.font=u.string,le(e.footer,v),n.restore(),y+=b.width,{width:y,height:g}}function TC(e,t){const{y:n,height:s}=t;return n<s/2?"top":n>e.height-s/2?"bottom":"center"}function MC(e,t,n,s){const{x:r,width:i}=s,o=n.caretSize+n.caretPadding;if(e==="left"&&r+i+o>t.width||e==="right"&&r-i-o<0)return!0}function PC(e,t,n,s){const{x:r,width:i}=n,{width:o,chartArea:{left:l,right:c}}=e;let d="center";return s==="center"?d=r<=(l+c)/2?"left":"right":r<=i/2?d="left":r>=o-i/2&&(d="right"),MC(d,e,t,n)&&(d="center"),d}function c0(e,t,n){const s=n.yAlign||t.yAlign||TC(e,n);return{xAlign:n.xAlign||t.xAlign||PC(e,t,n,s),yAlign:s}}function OC(e,t){let{x:n,width:s}=e;return t==="right"?n-=s:t==="center"&&(n-=s/2),n}function RC(e,t,n){let{y:s,height:r}=e;return t==="top"?s+=n:t==="bottom"?s-=r+n:s-=r/2,s}function d0(e,t,n,s){const{caretSize:r,caretPadding:i,cornerRadius:o}=e,{xAlign:l,yAlign:c}=n,d=r+i,{topLeft:u,topRight:h,bottomLeft:f,bottomRight:p}=hr(o);let b=OC(t,l);const g=RC(t,c,d);return c==="center"?l==="left"?b+=d:l==="right"&&(b-=d):l==="left"?b-=Math.max(u,f)+r:l==="right"&&(b+=Math.max(h,p)+r),{x:it(b,0,s.width-t.width),y:it(g,0,s.height-t.height)}}function so(e,t,n){const s=Tt(n.padding);return t==="center"?e.x+e.width/2:t==="right"?e.x+e.width-s.right:e.x+s.left}function u0(e){return Xt([],an(e))}function DC(e,t,n){return Dr(e,{tooltip:t,tooltipItems:n,type:"tooltip"})}function h0(e,t){const n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}const Ov={beforeTitle:nn,title(e){if(e.length>0){const t=e[0],n=t.chart.data.labels,s=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(s>0&&t.dataIndex<s)return n[t.dataIndex]}return""},afterTitle:nn,beforeBody:nn,beforeLabel:nn,label(e){if(this&&this.options&&this.options.mode==="dataset")return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const n=e.formattedValue;return he(n)||(t+=n),t},labelColor(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:nn,afterBody:nn,beforeFooter:nn,footer:nn,afterFooter:nn};function et(e,t,n,s){const r=e[t].call(n,s);return typeof r>"u"?Ov[t].call(n,s):r}class zu extends wn{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const n=this.chart,s=this.options.setContext(this.getContext()),r=s.enabled&&n.options.animation&&s.animations,i=new gv(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=DC(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,n){const{callbacks:s}=n,r=et(s,"beforeTitle",this,t),i=et(s,"title",this,t),o=et(s,"afterTitle",this,t);let l=[];return l=Xt(l,an(r)),l=Xt(l,an(i)),l=Xt(l,an(o)),l}getBeforeBody(t,n){return u0(et(n.callbacks,"beforeBody",this,t))}getBody(t,n){const{callbacks:s}=n,r=[];return le(t,i=>{const o={before:[],lines:[],after:[]},l=h0(s,i);Xt(o.before,an(et(l,"beforeLabel",this,i))),Xt(o.lines,et(l,"label",this,i)),Xt(o.after,an(et(l,"afterLabel",this,i))),r.push(o)}),r}getAfterBody(t,n){return u0(et(n.callbacks,"afterBody",this,t))}getFooter(t,n){const{callbacks:s}=n,r=et(s,"beforeFooter",this,t),i=et(s,"footer",this,t),o=et(s,"afterFooter",this,t);let l=[];return l=Xt(l,an(r)),l=Xt(l,an(i)),l=Xt(l,an(o)),l}_createItems(t){const n=this._active,s=this.chart.data,r=[],i=[],o=[];let l=[],c,d;for(c=0,d=n.length;c<d;++c)l.push(EC(this.chart,n[c]));return t.filter&&(l=l.filter((u,h,f)=>t.filter(u,h,f,s))),t.itemSort&&(l=l.sort((u,h)=>t.itemSort(u,h,s))),le(l,u=>{const h=h0(t.callbacks,u);r.push(et(h,"labelColor",this,u)),i.push(et(h,"labelPointStyle",this,u)),o.push(et(h,"labelTextColor",this,u))}),this.labelColors=r,this.labelPointStyles=i,this.labelTextColors=o,this.dataPoints=l,l}update(t,n){const s=this.options.setContext(this.getContext()),r=this._active;let i,o=[];if(!r.length)this.opacity!==0&&(i={opacity:0});else{const l=li[s.position].call(this,r,this._eventPosition);o=this._createItems(s),this.title=this.getTitle(o,s),this.beforeBody=this.getBeforeBody(o,s),this.body=this.getBody(o,s),this.afterBody=this.getAfterBody(o,s),this.footer=this.getFooter(o,s);const c=this._size=l0(this,s),d=Object.assign({},l,c),u=c0(this.chart,s,d),h=d0(s,d,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,i={opacity:1,x:h.x,y:h.y,width:c.width,height:c.height,caretX:l.x,caretY:l.y}}this._tooltipItems=o,this.$context=void 0,i&&this._resolveAnimations().update(this,i),t&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(t,n,s,r){const i=this.getCaretPosition(t,s,r);n.lineTo(i.x1,i.y1),n.lineTo(i.x2,i.y2),n.lineTo(i.x3,i.y3)}getCaretPosition(t,n,s){const{xAlign:r,yAlign:i}=this,{caretSize:o,cornerRadius:l}=s,{topLeft:c,topRight:d,bottomLeft:u,bottomRight:h}=hr(l),{x:f,y:p}=t,{width:b,height:g}=n;let y,x,m,v,j,_;return i==="center"?(j=p+g/2,r==="left"?(y=f,x=y-o,v=j+o,_=j-o):(y=f+b,x=y+o,v=j-o,_=j+o),m=y):(r==="left"?x=f+Math.max(c,u)+o:r==="right"?x=f+b-Math.max(d,h)-o:x=this.caretX,i==="top"?(v=p,j=v-o,y=x-o,m=x+o):(v=p+g,j=v+o,y=x+o,m=x-o),_=v),{x1:y,x2:x,x3:m,y1:v,y2:j,y3:_}}drawTitle(t,n,s){const r=this.title,i=r.length;let o,l,c;if(i){const d=fr(s.rtl,this.x,this.width);for(t.x=so(this,s.titleAlign,s),n.textAlign=d.textAlign(s.titleAlign),n.textBaseline="middle",o=Ye(s.titleFont),l=s.titleSpacing,n.fillStyle=s.titleColor,n.font=o.string,c=0;c<i;++c)n.fillText(r[c],d.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+l,c+1===i&&(t.y+=s.titleMarginBottom-l)}}_drawColorBox(t,n,s,r,i){const o=this.labelColors[s],l=this.labelPointStyles[s],{boxHeight:c,boxWidth:d}=i,u=Ye(i.bodyFont),h=so(this,"left",i),f=r.x(h),p=c<u.lineHeight?(u.lineHeight-c)/2:0,b=n.y+p;if(i.usePointStyle){const g={radius:Math.min(d,c)/2,pointStyle:l.pointStyle,rotation:l.rotation,borderWidth:1},y=r.leftForLtr(f,d)+d/2,x=b+c/2;t.strokeStyle=i.multiKeyBackground,t.fillStyle=i.multiKeyBackground,Cm(t,g,y,x),t.strokeStyle=o.borderColor,t.fillStyle=o.backgroundColor,Cm(t,g,y,x)}else{t.lineWidth=re(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,t.strokeStyle=o.borderColor,t.setLineDash(o.borderDash||[]),t.lineDashOffset=o.borderDashOffset||0;const g=r.leftForLtr(f,d),y=r.leftForLtr(r.xPlus(f,1),d-2),x=hr(o.borderRadius);Object.values(x).some(m=>m!==0)?(t.beginPath(),t.fillStyle=i.multiKeyBackground,vl(t,{x:g,y:b,w:d,h:c,radius:x}),t.fill(),t.stroke(),t.fillStyle=o.backgroundColor,t.beginPath(),vl(t,{x:y,y:b+1,w:d-2,h:c-2,radius:x}),t.fill()):(t.fillStyle=i.multiKeyBackground,t.fillRect(g,b,d,c),t.strokeRect(g,b,d,c),t.fillStyle=o.backgroundColor,t.fillRect(y,b+1,d-2,c-2))}t.fillStyle=this.labelTextColors[s]}drawBody(t,n,s){const{body:r}=this,{bodySpacing:i,bodyAlign:o,displayColors:l,boxHeight:c,boxWidth:d,boxPadding:u}=s,h=Ye(s.bodyFont);let f=h.lineHeight,p=0;const b=fr(s.rtl,this.x,this.width),g=function(T){n.fillText(T,b.x(t.x+p),t.y+f/2),t.y+=f+i},y=b.textAlign(o);let x,m,v,j,_,N,S;for(n.textAlign=o,n.textBaseline="middle",n.font=h.string,t.x=so(this,y,s),n.fillStyle=s.bodyColor,le(this.beforeBody,g),p=l&&y!=="right"?o==="center"?d/2+u:d+2+u:0,j=0,N=r.length;j<N;++j){for(x=r[j],m=this.labelTextColors[j],n.fillStyle=m,le(x.before,g),v=x.lines,l&&v.length&&(this._drawColorBox(n,t,j,b,s),f=Math.max(h.lineHeight,c)),_=0,S=v.length;_<S;++_)g(v[_]),f=h.lineHeight;le(x.after,g)}p=0,f=h.lineHeight,le(this.afterBody,g),t.y-=i}drawFooter(t,n,s){const r=this.footer,i=r.length;let o,l;if(i){const c=fr(s.rtl,this.x,this.width);for(t.x=so(this,s.footerAlign,s),t.y+=s.footerMarginTop,n.textAlign=c.textAlign(s.footerAlign),n.textBaseline="middle",o=Ye(s.footerFont),n.fillStyle=s.footerColor,n.font=o.string,l=0;l<i;++l)n.fillText(r[l],c.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+s.footerSpacing}}drawBackground(t,n,s,r){const{xAlign:i,yAlign:o}=this,{x:l,y:c}=t,{width:d,height:u}=s,{topLeft:h,topRight:f,bottomLeft:p,bottomRight:b}=hr(r.cornerRadius);n.fillStyle=r.backgroundColor,n.strokeStyle=r.borderColor,n.lineWidth=r.borderWidth,n.beginPath(),n.moveTo(l+h,c),o==="top"&&this.drawCaret(t,n,s,r),n.lineTo(l+d-f,c),n.quadraticCurveTo(l+d,c,l+d,c+f),o==="center"&&i==="right"&&this.drawCaret(t,n,s,r),n.lineTo(l+d,c+u-b),n.quadraticCurveTo(l+d,c+u,l+d-b,c+u),o==="bottom"&&this.drawCaret(t,n,s,r),n.lineTo(l+p,c+u),n.quadraticCurveTo(l,c+u,l,c+u-p),o==="center"&&i==="left"&&this.drawCaret(t,n,s,r),n.lineTo(l,c+h),n.quadraticCurveTo(l,c,l+h,c),n.closePath(),n.fill(),r.borderWidth>0&&n.stroke()}_updateAnimationTarget(t){const n=this.chart,s=this.$animations,r=s&&s.x,i=s&&s.y;if(r||i){const o=li[t.position].call(this,this._active,this._eventPosition);if(!o)return;const l=this._size=l0(this,t),c=Object.assign({},o,this._size),d=c0(n,t,c),u=d0(t,c,d,n);(r._to!==u.x||i._to!==u.y)&&(this.xAlign=d.xAlign,this.yAlign=d.yAlign,this.width=l.width,this.height=l.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(t){const n=this.options.setContext(this.getContext());let s=this.opacity;if(!s)return;this._updateAnimationTarget(n);const r={width:this.width,height:this.height},i={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;const o=Tt(n.padding),l=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&l&&(t.save(),t.globalAlpha=s,this.drawBackground(i,t,r,n),mv(t,n.textDirection),i.y+=o.top,this.drawTitle(i,t,n),this.drawBody(i,t,n),this.drawFooter(i,t,n),xv(t,n.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,n){const s=this._active,r=t.map(({datasetIndex:l,index:c})=>{const d=this.chart.getDatasetMeta(l);if(!d)throw new Error("Cannot find a dataset at index "+l);return{datasetIndex:l,element:d.data[c],index:c}}),i=!pl(s,r),o=this._positionChanged(r,n);(i||o)&&(this._active=r,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,n,s=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,i=this._active||[],o=this._getActiveElements(t,i,n,s),l=this._positionChanged(o,t),c=n||!pl(o,i)||l;return c&&(this._active=o,(r.enabled||r.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,n))),c}_getActiveElements(t,n,s,r){const i=this.options;if(t.type==="mouseout")return[];if(!r)return n.filter(l=>this.chart.data.datasets[l.datasetIndex]&&this.chart.getDatasetMeta(l.datasetIndex).controller.getParsed(l.index)!==void 0);const o=this.chart.getElementsAtEventForMode(t,i.mode,i,s);return i.reverse&&o.reverse(),o}_positionChanged(t,n){const{caretX:s,caretY:r,options:i}=this,o=li[i.position].call(this,t,n);return o!==!1&&(s!==o.x||r!==o.y)}}K(zu,"positioners",li);var LC={id:"tooltip",_element:zu,positioners:li,afterInit(e,t,n){n&&(e.tooltip=new zu({chart:e,options:n}))},beforeUpdate(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const n={tooltip:t};if(e.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n)}},afterEvent(e,t){if(e.tooltip){const n=t.replay;e.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Ov},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>e!=="filter"&&e!=="itemSort"&&e!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const AC=(e,t,n,s)=>(typeof t=="string"?(n=e.push(t)-1,s.unshift({index:n,label:t})):isNaN(t)&&(n=null),n);function zC(e,t,n,s){const r=e.indexOf(t);if(r===-1)return AC(e,t,n,s);const i=e.lastIndexOf(t);return r!==i?n:r}const FC=(e,t)=>e===null?null:it(Math.round(e),0,t);function f0(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class Fu extends Lr{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const n=this._addedLabels;if(n.length){const s=this.getLabels();for(const{index:r,label:i}of n)s[r]===i&&s.splice(r,1);this._addedLabels=[]}super.init(t)}parse(t,n){if(he(t))return null;const s=this.getLabels();return n=isFinite(n)&&s[n]===t?n:zC(s,t,ne(n,t),this._addedLabels),FC(n,s.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:n}=this.getUserBounds();let{min:s,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(s=0),n||(r=this.getLabels().length-1)),this.min=s,this.max=r}buildTicks(){const t=this.min,n=this.max,s=this.options.offset,r=[];let i=this.getLabels();i=t===0&&n===i.length-1?i:i.slice(t,n+1),this._valueRange=Math.max(i.length-(s?0:1),1),this._startValue=this.min-(s?.5:0);for(let o=t;o<=n;o++)r.push({value:o});return r}getLabelForValue(t){return f0.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}K(Fu,"id","category"),K(Fu,"defaults",{ticks:{callback:f0}});function IC(e,t){const n=[],{bounds:r,step:i,min:o,max:l,precision:c,count:d,maxTicks:u,maxDigits:h,includeBounds:f}=e,p=i||1,b=u-1,{min:g,max:y}=t,x=!he(o),m=!he(l),v=!he(d),j=(y-g)/(h+1);let _=bm((y-g)/b/p)*p,N,S,T,M;if(_<1e-14&&!x&&!m)return[{value:g},{value:y}];M=Math.ceil(y/_)-Math.floor(g/_),M>b&&(_=bm(M*_/b/p)*p),he(c)||(N=Math.pow(10,c),_=Math.ceil(_*N)/N),r==="ticks"?(S=Math.floor(g/_)*_,T=Math.ceil(y/_)*_):(S=g,T=y),x&&m&&i&&Lk((l-o)/i,_/1e3)?(M=Math.round(Math.min((l-o)/_,u)),_=(l-o)/M,S=o,T=l):v?(S=x?o:S,T=m?l:T,M=d-1,_=(T-S)/M):(M=(T-S)/_,Co(M,Math.round(M),_/1e3)?M=Math.round(M):M=Math.ceil(M));const D=Math.max(vm(_),vm(S));N=Math.pow(10,he(c)?D:c),S=Math.round(S*N)/N,T=Math.round(T*N)/N;let C=0;for(x&&(f&&S!==o?(n.push({value:o}),S<o&&C++,Co(Math.round((S+C*_)*N)/N,o,p0(o,j,e))&&C++):S<o&&C++);C<M;++C){const A=Math.round((S+C*_)*N)/N;if(m&&A>l)break;n.push({value:A})}return m&&f&&T!==l?n.length&&Co(n[n.length-1].value,l,p0(l,j,e))?n[n.length-1].value=l:n.push({value:l}):(!m||T===l)&&n.push({value:T}),n}function p0(e,t,{horizontal:n,minRotation:s}){const r=fn(s),i=(n?Math.sin(r):Math.cos(r))||.001,o=.75*t*(""+e).length;return Math.min(t/i,o)}class WC extends Lr{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,n){return he(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:n,maxDefined:s}=this.getUserBounds();let{min:r,max:i}=this;const o=c=>r=n?r:c,l=c=>i=s?i:c;if(t){const c=ts(r),d=ts(i);c<0&&d<0?l(0):c>0&&d>0&&o(0)}if(r===i){let c=i===0?1:Math.abs(i*.05);l(i+c),t||o(r-c)}this.min=r,this.max=i}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:n,stepSize:s}=t,r;return s?(r=Math.ceil(this.max/s)-Math.floor(this.min/s)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${s} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),n=n||11),n&&(r=Math.min(n,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,n=t.ticks;let s=this.getTickLimit();s=Math.max(2,s);const r={maxTicks:s,bounds:t.bounds,min:t.min,max:t.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},i=this._range||this,o=IC(r,i);return t.bounds==="ticks"&&Ak(o,this,"value"),t.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const t=this.ticks;let n=this.min,s=this.max;if(super.configure(),this.options.offset&&t.length){const r=(s-n)/Math.max(t.length-1,1)/2;n-=r,s+=r}this._startValue=n,this._endValue=s,this._valueRange=s-n}getLabelForValue(t){return ff(t,this.chart.options.locale,this.options.ticks.format)}}class Iu extends WC{determineDataLimits(){const{min:t,max:n}=this.getMinMax(!0);this.min=Et(t)?t:0,this.max=Et(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),n=t?this.width:this.height,s=fn(this.options.ticks.minRotation),r=(t?Math.sin(s):Math.cos(s))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,i.lineHeight/r))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}K(Iu,"id","linear"),K(Iu,"defaults",{ticks:{callback:ov.formatters.numeric}});const cc={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},st=Object.keys(cc);function m0(e,t){return e-t}function x0(e,t){if(he(t))return null;const n=e._adapter,{parser:s,round:r,isoWeekday:i}=e._parseOpts;let o=t;return typeof s=="function"&&(o=s(o)),Et(o)||(o=typeof s=="string"?n.parse(o,s):n.parse(o)),o===null?null:(r&&(o=r==="week"&&(gl(i)||i===!0)?n.startOf(o,"isoWeek",i):n.startOf(o,r)),+o)}function g0(e,t,n,s){const r=st.length;for(let i=st.indexOf(e);i<r-1;++i){const o=cc[st[i]],l=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-t)/(l*o.size))<=s)return st[i]}return st[r-1]}function $C(e,t,n,s,r){for(let i=st.length-1;i>=st.indexOf(n);i--){const o=st[i];if(cc[o].common&&e._adapter.diff(r,s,o)>=t-1)return o}return st[n?st.indexOf(n):0]}function BC(e){for(let t=st.indexOf(e)+1,n=st.length;t<n;++t)if(cc[st[t]].common)return st[t]}function b0(e,t,n){if(!n)e[t]=!0;else if(n.length){const{lo:s,hi:r}=uf(n,t),i=n[s]>=t?n[s]:n[r];e[i]=!0}}function HC(e,t,n,s){const r=e._adapter,i=+r.startOf(t[0].value,s),o=t[t.length-1].value;let l,c;for(l=i;l<=o;l=+r.add(l,1,s))c=n[l],c>=0&&(t[c].major=!0);return t}function v0(e,t,n){const s=[],r={},i=t.length;let o,l;for(o=0;o<i;++o)l=t[o],r[l]=o,s.push({value:l,major:!1});return i===0||!n?s:HC(e,s,r,n)}class _l extends Lr{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,n={}){const s=t.time||(t.time={}),r=this._adapter=new e5._date(t.adapters.date);r.init(n),Ni(s.displayFormats,r.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(t),this._normalized=n.normalized}parse(t,n){return t===void 0?null:x0(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,n=this._adapter,s=t.time.unit||"day";let{min:r,max:i,minDefined:o,maxDefined:l}=this.getUserBounds();function c(d){!o&&!isNaN(d.min)&&(r=Math.min(r,d.min)),!l&&!isNaN(d.max)&&(i=Math.max(i,d.max))}(!o||!l)&&(c(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&c(this.getMinMax(!1))),r=Et(r)&&!isNaN(r)?r:+n.startOf(Date.now(),s),i=Et(i)&&!isNaN(i)?i:+n.endOf(Date.now(),s)+1,this.min=Math.min(r,i-1),this.max=Math.max(r+1,i)}_getLabelBounds(){const t=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return t.length&&(n=t[0],s=t[t.length-1]),{min:n,max:s}}buildTicks(){const t=this.options,n=t.time,s=t.ticks,r=s.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const i=this.min,o=this.max,l=$k(r,i,o);return this._unit=n.unit||(s.autoSkip?g0(n.minUnit,this.min,this.max,this._getLabelCapacity(i)):$C(this,l.length,n.minUnit,this.min,this.max)),this._majorUnit=!s.major.enabled||this._unit==="year"?void 0:BC(this._unit),this.initOffsets(r),t.reverse&&l.reverse(),v0(this,l,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let n=0,s=0,r,i;this.options.offset&&t.length&&(r=this.getDecimalForValue(t[0]),t.length===1?n=1-r:n=(this.getDecimalForValue(t[1])-r)/2,i=this.getDecimalForValue(t[t.length-1]),t.length===1?s=i:s=(i-this.getDecimalForValue(t[t.length-2]))/2);const o=t.length<3?.5:.25;n=it(n,0,o),s=it(s,0,o),this._offsets={start:n,end:s,factor:1/(n+1+s)}}_generate(){const t=this._adapter,n=this.min,s=this.max,r=this.options,i=r.time,o=i.unit||g0(i.minUnit,n,s,this._getLabelCapacity(n)),l=ne(r.ticks.stepSize,1),c=o==="week"?i.isoWeekday:!1,d=gl(c)||c===!0,u={};let h=n,f,p;if(d&&(h=+t.startOf(h,"isoWeek",c)),h=+t.startOf(h,d?"day":o),t.diff(s,n,o)>1e5*l)throw new Error(n+" and "+s+" are too far apart with stepSize of "+l+" "+o);const b=r.ticks.source==="data"&&this.getDataTimestamps();for(f=h,p=0;f<s;f=+t.add(f,l,o),p++)b0(u,f,b);return(f===s||r.bounds==="ticks"||p===1)&&b0(u,f,b),Object.keys(u).sort(m0).map(g=>+g)}getLabelForValue(t){const n=this._adapter,s=this.options.time;return s.tooltipFormat?n.format(t,s.tooltipFormat):n.format(t,s.displayFormats.datetime)}format(t,n){const r=this.options.time.displayFormats,i=this._unit,o=n||r[i];return this._adapter.format(t,o)}_tickFormatFunction(t,n,s,r){const i=this.options,o=i.ticks.callback;if(o)return me(o,[t,n,s],this);const l=i.time.displayFormats,c=this._unit,d=this._majorUnit,u=c&&l[c],h=d&&l[d],f=s[n],p=d&&h&&f&&f.major;return this._adapter.format(t,r||(p?h:u))}generateTickLabels(t){let n,s,r;for(n=0,s=t.length;n<s;++n)r=t[n],r.label=this._tickFormatFunction(r.value,n,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const n=this._offsets,s=this.getDecimalForValue(t);return this.getPixelForDecimal((n.start+s)*n.factor)}getValueForPixel(t){const n=this._offsets,s=this.getDecimalForPixel(t)/n.factor-n.end;return this.min+s*(this.max-this.min)}_getLabelSize(t){const n=this.options.ticks,s=this.ctx.measureText(t).width,r=fn(this.isHorizontal()?n.maxRotation:n.minRotation),i=Math.cos(r),o=Math.sin(r),l=this._resolveTickFontOptions(0).size;return{w:s*i+l*o,h:s*o+l*i}}_getLabelCapacity(t){const n=this.options.time,s=n.displayFormats,r=s[n.unit]||s.millisecond,i=this._tickFormatFunction(t,0,v0(this,[t],this._majorUnit),r),o=this._getLabelSize(i),l=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return l>0?l:1}getDataTimestamps(){let t=this._cache.data||[],n,s;if(t.length)return t;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(n=0,s=r.length;n<s;++n)t=t.concat(r[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let n,s;if(t.length)return t;const r=this.getLabels();for(n=0,s=r.length;n<s;++n)t.push(x0(this,r[n]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return sv(t.sort(m0))}}K(_l,"id","time"),K(_l,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function ro(e,t,n){let s=0,r=e.length-1,i,o,l,c;n?(t>=e[s].pos&&t<=e[r].pos&&({lo:s,hi:r}=Ru(e,"pos",t)),{pos:i,time:l}=e[s],{pos:o,time:c}=e[r]):(t>=e[s].time&&t<=e[r].time&&({lo:s,hi:r}=Ru(e,"time",t)),{time:i,pos:l}=e[s],{time:o,pos:c}=e[r]);const d=o-i;return d?l+(c-l)*(t-i)/d:l}class y0 extends _l{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(t);this._minPos=ro(n,this.min),this._tableRange=ro(n,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:n,max:s}=this,r=[],i=[];let o,l,c,d,u;for(o=0,l=t.length;o<l;++o)d=t[o],d>=n&&d<=s&&r.push(d);if(r.length<2)return[{time:n,pos:0},{time:s,pos:1}];for(o=0,l=r.length;o<l;++o)u=r[o+1],c=r[o-1],d=r[o],Math.round((u+c)/2)!==d&&i.push({time:d,pos:o/(l-1)});return i}_generate(){const t=this.min,n=this.max;let s=super.getDataTimestamps();return(!s.includes(t)||!s.length)&&s.splice(0,0,t),(!s.includes(n)||s.length===1)&&s.push(n),s.sort((r,i)=>r-i)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const n=this.getDataTimestamps(),s=this.getLabelTimestamps();return n.length&&s.length?t=this.normalize(n.concat(s)):t=n.length?n:s,t=this._cache.all=t,t}getDecimalForValue(t){return(ro(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const n=this._offsets,s=this.getDecimalForPixel(t)/n.factor-n.end;return ro(this._table,s*this._tableRange+this._minPos,!0)}}K(y0,"id","timeseries"),K(y0,"defaults",_l.defaults);const Rv="label";function w0(e,t){typeof e=="function"?e(t):e&&(e.current=t)}function UC(e,t){const n=e.options;n&&t&&Object.assign(n,t)}function Dv(e,t){e.labels=t}function Lv(e,t,n=Rv){const s=[];e.datasets=t.map(r=>{const i=e.datasets.find(o=>o[n]===r[n]);return!i||!r.data||s.includes(i)?{...r}:(s.push(i),Object.assign(i,r),i)})}function VC(e,t=Rv){const n={labels:[],datasets:[]};return Dv(n,e.labels),Lv(n,e.datasets,t),n}function YC(e,t){const{height:n=150,width:s=300,redraw:r=!1,datasetIdKey:i,type:o,data:l,options:c,plugins:d=[],fallbackContent:u,updateMode:h,...f}=e,p=w.useRef(null),b=w.useRef(null),g=()=>{p.current&&(b.current=new Er(p.current,{type:o,data:VC(l,i),options:c&&{...c},plugins:d}),w0(t,b.current))},y=()=>{w0(t,null),b.current&&(b.current.destroy(),b.current=null)};return w.useEffect(()=>{!r&&b.current&&c&&UC(b.current,c)},[r,c]),w.useEffect(()=>{!r&&b.current&&Dv(b.current.config.data,l.labels)},[r,l.labels]),w.useEffect(()=>{!r&&b.current&&l.datasets&&Lv(b.current.config.data,l.datasets,i)},[r,l.datasets]),w.useEffect(()=>{b.current&&(r?(y(),setTimeout(g)):b.current.update(h))},[r,c,l.labels,l.datasets,h]),w.useEffect(()=>{b.current&&(y(),setTimeout(g))},[o]),w.useEffect(()=>(g(),()=>y()),[]),a.jsx("canvas",{ref:p,role:"img",height:n,width:s,...f,children:u})}const XC=w.forwardRef(YC);function Av(e,t){return Er.register(t),w.forwardRef((n,s)=>a.jsx(XC,{...n,ref:s,type:e}))}const bd=Av("bar",Ci),qC=Av("doughnut",rr),zv=de("srp/fetchDivisions",async(e,{rejectWithValue:t})=>{try{const s=await(await W("/api/mgmt/srp/divisions/")).json();if(s.error)throw new Error(s.error);return s}catch(n){return t(n.message)}}),Wu=de("srp/fetchStatus",async(e,{rejectWithValue:t})=>{try{return await(await W("/api/srp/status/")).json()}catch(n){return t(n.message)}}),Es=de("srp/fetchData",async(e,{getState:t,rejectWithValue:n})=>{const s=t().srp,{dateRange:r,pagination:i,filters:o,activeDivisions:l}=s,c=new URLSearchParams({start_date:r.start,end_date:r.end,page:i.page,limit:i.limit,...o});l.forEach(d=>c.append("divisions[]",d));try{return await(await W(`/api/srp/data/?${c.toString()}`)).json()}catch(d){return n(d.message)}}),GC=de("srp/updateCategory",async({entryId:e,category:t},{dispatch:n,rejectWithValue:s})=>{var r;try{const i=(r=document.cookie.match(/csrftoken=([^;]+)/))==null?void 0:r[1],l=await(await W("/api/mgmt/srp/update_category/",{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":i},body:JSON.stringify({entry_id:e,category:t})})).json();if(!l.success)throw new Error("Failed to update");return n(Es()),l}catch(i){return s(i.message)}}),Nl=new Date,KC=new Date(Nl.getFullYear(),Nl.getMonth(),1).toISOString().split("T")[0],QC=new Date(Nl.getFullYear(),Nl.getMonth()+1,0).toISOString().split("T")[0],JC={summary:null,status:null,divisionMap:{},dateRange:{start:KC,end:QC},activeDivisions:["1","2","3","4","5","6","7"],filters:{f_div:"",f_amount:"",f_from:"",f_to:"",f_type:"",f_category:"",f_reason:""},pagination:{page:1,limit:25,total_pages:1,total_count:0},loading:!1,error:null},Fv=Sn({name:"srp",initialState:JC,reducers:{setFilter:(e,t)=>{const{key:n,value:s}=t.payload;e.filters[n]=s,e.pagination.page=1},setDateRange:(e,t)=>{e.dateRange={...e.dateRange,...t.payload}},toggleDivision:(e,t)=>{const n=t.payload;e.activeDivisions.includes(n)?e.activeDivisions=e.activeDivisions.filter(s=>s!==n):e.activeDivisions.push(n)},setPage:(e,t)=>{e.pagination.page=t.payload},setLimit:(e,t)=>{e.pagination.limit=t.payload,e.pagination.page=1}},extraReducers:e=>{e.addCase(zv.fulfilled,(t,n)=>{t.divisionMap=n.payload}).addCase(Wu.fulfilled,(t,n)=>{t.status=n.payload}).addCase(Es.pending,t=>{t.loading=!0,t.error=null}).addCase(Es.fulfilled,(t,n)=>{t.loading=!1,t.summary=n.payload,n.payload.pagination&&(t.pagination.total_pages=n.payload.pagination.total_pages,t.pagination.total_count=n.payload.pagination.total_count)}).addCase(Es.rejected,(t,n)=>{t.loading=!1,t.error=n.payload})}}),{setFilter:ZC,setDateRange:vd,toggleDivision:e4,setPage:j0,setLimit:t4}=Fv.actions,n4=e=>e.srp.summary,s4=e=>e.srp.status,r4=e=>e.srp.divisionMap,i4=e=>e.srp.activeDivisions,a4=e=>e.srp.filters,o4=e=>e.srp.dateRange,l4=e=>e.srp.pagination,c4=e=>e.srp.loading,d4=Fv.reducer;Er.register(Fu,Iu,Mo,CC,LC,kC,oi,rr,Ci);const u4=()=>{var y,x,m;const e=dt(),t=U(n4),n=U(s4),s=U(r4),r=U(i4),i=U(a4),o=U(o4),l=U(l4),c=U(c4),[d,u]=w.useState("Checking..."),h=w.useRef(null),f=w.useRef(null);w.useEffect(()=>{e(zv()),e(Wu()),e(Es());const v=()=>{e(Wu()).unwrap().then(j=>{j.next_sync&&g(j.next_sync);let _=3e4;if(j.next_sync){const N=new Date(j.next_sync)-new Date;N>3e5?_=3e5:N>15e3?_=N:_=15e3}f.current=setTimeout(v,_>1e3?_:5e3)})};return v(),()=>{f.current&&clearTimeout(f.current),h.current&&clearInterval(h.current)}},[e]),w.useEffect(()=>{e(Es())},[e,o,r,l.page,l.limit,i]);const p=(v,j)=>{e(GC({entryId:v,category:j}))},b=(v,j)=>{e(ZC({key:v,value:j}))},g=v=>{h.current&&clearInterval(h.current);const j=new Date(v).getTime(),_=()=>{const N=new Date().getTime(),S=j-N;if(S<=0){u("Sync Ready");return}const T=Math.floor(S/(1e3*60*60)),M=Math.floor(S%(1e3*60*60)/(1e3*60)),D=Math.floor(S%(1e3*60)/1e3);u(`${T>0?T+"h ":""}${M}m ${D}s`)};_(),h.current=setInterval(_,1e3)};return!n&&!t&&c?a.jsxs("div",{className:"p-10 text-center text-slate-500",children:[a.jsx(Jn,{className:"animate-spin inline mr-2"})," Loading Dashboard..."]}):(!n||!t)&&!c&&!(n!=null&&n.last_sync)?a.jsxs("div",{className:"flex flex-col items-center justify-center p-12 glass-panel border-dashed border-2 border-white/10 text-center",children:[a.jsx("div",{className:"bg-brand-500/10 p-4 rounded-full mb-4",children:a.jsx(gN,{size:48,className:"text-brand-500"})}),a.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"SRP Not Configured"}),a.jsx("p",{className:"text-slate-400 max-w-md mb-6",children:"The Corporation Wallet source has not been configured yet. Please designate a character to pull wallet data from."}),a.jsx("a",{href:"/management/srp/config",className:"btn-primary",children:"Go to Configuration"})]}):a.jsxs("div",{className:"flex flex-col gap-6 pb-12",children:[a.jsxs("div",{className:"glass-panel p-4 flex flex-col md:flex-row justify-between items-center gap-4 bg-slate-900/90 sticky top-0 z-20 backdrop-blur-md",children:[a.jsxs("div",{className:"flex items-center gap-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-lg font-bold text-white tracking-tight",children:"Corporation Wallet Monitor"}),a.jsxs("p",{className:"text-xs text-slate-400",children:["Last Sync: ",a.jsx("span",{className:"text-slate-300",children:n!=null&&n.last_sync?new Date(n.last_sync).toLocaleString():"Never"})]})]}),(n==null?void 0:n.next_sync)&&a.jsxs("div",{className:"hidden md:flex items-center gap-2 px-3 py-1.5 rounded-lg bg-black/20 border border-white/5",children:[a.jsx("span",{className:"text-[10px] text-slate-500 uppercase font-bold tracking-wider",children:"Next Sync"}),a.jsx("span",{className:"text-xs font-mono text-slate-400 font-bold w-20",children:d})]})]}),a.jsxs("div",{className:"flex gap-4 items-center flex-wrap",children:[a.jsxs("div",{className:"flex items-center gap-2 bg-black/30 p-1.5 rounded border border-white/10",children:[a.jsx("input",{type:"date",value:o.start,onChange:v=>e(vd({start:v.target.value})),className:"bg-transparent text-xs text-white outline-none w-24"}),a.jsx("span",{className:"text-slate-500",children:"-"}),a.jsx("input",{type:"date",value:o.end,onChange:v=>e(vd({end:v.target.value})),className:"bg-transparent text-xs text-white outline-none w-24"}),a.jsx("button",{onClick:()=>e(vd({start:"",end:""})),className:"text-[10px] font-bold text-slate-500 hover:text-brand-400 ml-2 pl-2 border-l border-white/10 uppercase transition",children:"All"})]}),a.jsx("div",{className:"flex gap-2 text-xs",children:["1","2","3","4","5","6","7"].map(v=>a.jsxs("label",{className:"flex items-center gap-1 cursor-pointer select-none",children:[a.jsx("input",{type:"checkbox",checked:r.includes(v),onChange:()=>e(e4(v)),className:"rounded bg-slate-800 border-slate-600 text-brand-500 focus:ring-0 w-3 h-3"}),a.jsx("span",{className:"text-slate-300",title:s[v]||`Division ${v}`,children:s[v]?s[v].substring(0,10):`Div ${v}`})]},v))}),a.jsx("button",{onClick:()=>e(Es()),className:"btn-ghost p-1.5 text-slate-400 hover:text-white",title:"Refresh",children:a.jsx(Jn,{size:16,className:c?"animate-spin":""})})]})]}),(t==null?void 0:t.division_balances)&&Object.keys(t.division_balances).length>0&&a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-3",children:Object.entries(t.division_balances).map(([v,j])=>a.jsxs("div",{className:"glass-panel p-3 flex flex-col justify-center items-center border border-white/5 bg-slate-900/50",children:[a.jsx("span",{className:"text-[10px] uppercase font-bold text-slate-500 tracking-wider mb-1 truncate w-full text-center",title:s[v]||`Division ${v}`,children:s[v]||`Division ${v}`}),a.jsxs("span",{className:"text-xs font-mono font-bold text-white whitespace-nowrap",children:[parseFloat(j).toLocaleString()," ISK"]})]},v))}),t&&a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsx(yd,{label:"Total Income",value:t.summary.income,color:"text-green-400"}),a.jsx(yd,{label:"Total Outcome",value:t.summary.outcome,color:"text-red-400"}),a.jsx(yd,{label:"Net Change",value:t.summary.net,color:t.summary.net>=0?"text-white":"text-red-300"})]}),t&&a.jsx(p4,{data:t}),a.jsxs("div",{className:"glass-panel flex flex-col overflow-hidden min-h-[500px]",children:[a.jsxs("div",{className:"p-3 border-b border-white/5 bg-slate-900/50 flex justify-between items-center",children:[a.jsx("h3",{className:"label-text mb-0 w-1/3",children:"Transactions"}),a.jsx("div",{className:"w-1/3 flex justify-center",children:a.jsx(_0,{current:l.page,total:l.total_pages||1,onChange:v=>e(j0(v))})}),a.jsx("div",{className:"w-1/3 flex justify-end",children:a.jsxs("select",{value:l.limit,onChange:v=>e(t4(Number(v.target.value))),className:"bg-black/30 border border-slate-700 text-slate-300 text-xs rounded px-2 py-1 outline-none focus:border-brand-500",children:[a.jsx("option",{value:"10",children:"10 Rows"}),a.jsx("option",{value:"25",children:"25 Rows"}),a.jsx("option",{value:"50",children:"50 Rows"}),a.jsx("option",{value:"100",children:"100 Rows"})]})})]}),a.jsx("div",{className:"overflow-auto custom-scrollbar flex-grow relative bg-slate-900/20",children:a.jsxs("table",{className:"w-full text-left text-xs text-slate-400 border-collapse",children:[a.jsxs("thead",{className:"bg-slate-900/95 text-[10px] uppercase font-bold sticky top-0 z-10 backdrop-blur-md shadow-sm",children:[a.jsxs("tr",{children:[a.jsx("th",{className:"px-2 py-2 border-b border-white/5 w-24 whitespace-nowrap",children:"Date"}),a.jsx("th",{className:"px-2 py-2 border-b border-white/5 text-center w-12",children:"Div"}),a.jsx("th",{className:"px-2 py-2 border-b border-white/5 text-right w-32 whitespace-nowrap",children:"Amount"}),a.jsx("th",{className:"px-2 py-2 border-b border-white/5 w-32",children:"From"}),a.jsx("th",{className:"px-2 py-2 border-b border-white/5 w-32",children:"To"}),a.jsx("th",{className:"px-2 py-2 border-b border-white/5 w-32 whitespace-nowrap",children:"Type"}),a.jsx("th",{className:"px-2 py-2 border-b border-white/5 w-48",children:"Category"}),a.jsx("th",{className:"px-2 py-2 border-b border-white/5",children:"Reason"})]}),a.jsxs("tr",{className:"bg-slate-900/90 border-b border-white/10",children:[a.jsx("td",{className:"p-1"}),a.jsx("td",{className:"p-1",children:a.jsx("input",{placeholder:"#",value:i.f_div,onChange:v=>b("f_div",v.target.value),className:"w-full bg-black/40 border border-white/10 rounded px-1 py-0.5 text-[10px] text-center text-slate-300 focus:border-brand-500 outline-none"})}),a.jsx("td",{className:"p-1",children:a.jsx("input",{placeholder:"Min...",value:i.f_amount,onChange:v=>b("f_amount",v.target.value),className:"w-full bg-black/40 border border-white/10 rounded px-1 py-0.5 text-[10px] text-right text-slate-300 focus:border-brand-500 outline-none"})}),a.jsx("td",{className:"p-1",children:a.jsx("input",{placeholder:"From...",value:i.f_from,onChange:v=>b("f_from",v.target.value),className:"w-full bg-black/40 border border-white/10 rounded px-1 py-0.5 text-[10px] text-slate-300 focus:border-brand-500 outline-none"})}),a.jsx("td",{className:"p-1",children:a.jsx("input",{placeholder:"To...",value:i.f_to,onChange:v=>b("f_to",v.target.value),className:"w-full bg-black/40 border border-white/10 rounded px-1 py-0.5 text-[10px] text-slate-300 focus:border-brand-500 outline-none"})}),a.jsx("td",{className:"p-1",children:a.jsx("input",{placeholder:"Type...",value:i.f_type,onChange:v=>b("f_type",v.target.value),className:"w-full bg-black/40 border border-white/10 rounded px-1 py-0.5 text-[10px] text-slate-300 focus:border-brand-500 outline-none"})}),a.jsx("td",{className:"p-1",children:a.jsxs("select",{value:i.f_category,onChange:v=>b("f_category",v.target.value),className:"w-full bg-black/40 border border-white/10 rounded px-1 py-0.5 text-[10px] text-slate-300 focus:border-brand-500 outline-none",children:[a.jsx("option",{value:"",children:"All"}),a.jsx("option",{value:"uncategorised",children:"Uncategorised"}),a.jsx("option",{value:"srp_in",children:"SRP In"}),a.jsx("option",{value:"srp_out",children:"SRP Out"}),a.jsx("option",{value:"internal_transfer",children:"Internal Transfer"}),a.jsx("option",{value:"giveaway",children:"Giveaway"}),a.jsx("option",{value:"manual_change",children:"Manual Change"}),a.jsx("option",{value:"manual_out",children:"Manual Out"}),a.jsx("option",{value:"tax",children:"Tax"}),a.jsx("option",{value:"other",children:"Other"})]})}),a.jsx("td",{className:"p-1",children:a.jsx("input",{placeholder:"Reason...",value:i.f_reason,onChange:v=>b("f_reason",v.target.value),className:"w-full bg-black/40 border border-white/10 rounded px-1 py-0.5 text-[10px] text-slate-300 focus:border-brand-500 outline-none"})})]})]}),a.jsxs("tbody",{className:"divide-y divide-white/5 opacity-100 transition-opacity duration-200",style:{opacity:c?.5:1},children:[(y=t==null?void 0:t.transactions)==null?void 0:y.map(v=>a.jsx(f4,{tx:v,onUpdateCategory:p,divisionMap:s},v.entry_id)),((x=t==null?void 0:t.transactions)==null?void 0:x.length)===0&&a.jsx("tr",{children:a.jsx("td",{colSpan:"8",className:"p-8 text-center text-slate-500 italic",children:"No transactions found for this period."})})]})]})}),a.jsxs("div",{className:"p-3 border-t border-white/5 bg-slate-900/50 flex justify-center items-center relative",children:[a.jsx(_0,{current:l.page,total:l.total_pages||1,onChange:v=>e(j0(v))}),a.jsxs("div",{className:"absolute right-4 text-[10px] text-slate-500 font-mono hidden md:block",children:[(m=t==null?void 0:t.pagination)==null?void 0:m.total_count," entries"]})]})]})]})},_0=({current:e,total:t,onChange:n})=>{if(t<=1)return null;let s=Math.max(1,e-3),r=Math.min(t,e+3);s===1&&(r=Math.min(t,7)),r===t&&(s=Math.max(1,t-6));const i=[];for(let o=s;o<=r;o++)i.push(o);return a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("button",{onClick:()=>n(Math.max(1,e-1)),disabled:e===1,className:"btn-secondary py-1 px-2 text-[10px] disabled:opacity-50 disabled:cursor-not-allowed hover:bg-white/10",children:""}),i.map(o=>a.jsx("button",{onClick:()=>n(o),className:V("py-1 px-2.5 text-[10px] rounded transition font-mono",o===e?"bg-brand-500 text-white font-bold shadow-lg shadow-brand-500/20":"bg-white/5 text-slate-400 hover:bg-white/10 hover:text-white"),children:o},o)),r<t&&a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"text-slate-600 text-[10px]",children:"..."}),a.jsx("button",{onClick:()=>n(t),className:"py-1 px-2 text-[10px] text-slate-500 hover:text-white",children:t})]}),a.jsx("button",{onClick:()=>n(Math.min(t,e+1)),disabled:e===t,className:"btn-secondary py-1 px-2 text-[10px] disabled:opacity-50 disabled:cursor-not-allowed hover:bg-white/10",children:""})]})},yd=({label:e,value:t,color:n})=>a.jsxs("div",{className:"glass-panel p-4 text-center",children:[a.jsx("div",{className:"label-text mb-1",children:e}),a.jsxs("div",{className:V("text-2xl font-mono font-bold",n),children:[parseFloat(t).toLocaleString()," ISK"]})]}),h4=e=>{const t=e.ref_type,n=(e.reason||"").toLowerCase();return["contract_brokers_fee","brokers_fee","transaction_tax","tax"].includes(t)||n.includes("broker")?"tax":e.amount>0&&(n.includes("srp")||Math.abs(e.amount%2e7)<.1)?"srp_in":e.amount<0&&n.includes("srp")?"srp_out":e.amount<0&&n.includes("giveaway")?"giveaway":""},f4=({tx:e,onUpdateCategory:t,divisionMap:n})=>{const s=[{id:"",label:"Select...",class:"bg-slate-800 border-slate-700 text-slate-400"},{id:"srp_in",label:"SRP In",class:"bg-green-600 border-green-500 text-white"},{id:"srp_out",label:"SRP Out",class:"bg-red-600 border-red-500 text-white"},{id:"internal_transfer",label:"Internal Transfer",class:"bg-purple-600 border-purple-500 text-white"},{id:"giveaway",label:"Giveaway",class:"bg-orange-600 border-orange-500 text-white"},{id:"manual_change",label:"Manual Change",class:"bg-blue-600 border-blue-500 text-white"},{id:"manual_out",label:"Manual Out",class:"bg-blue-600 border-blue-500 text-white"},{id:"tax",label:"Tax",class:"bg-slate-600 border-slate-500 text-white"},{id:"other",label:"Other",class:"bg-slate-600 border-slate-500 text-white"}],r=e.custom_category||h4(e),i=s.find(o=>o.id===r)||s.find(o=>o.id==="other");return e.first_party_name||`${e.entry_id.toString().substring(0,5)}`,e.second_party_name,a.jsxs("tr",{className:"hover:bg-white/5 transition group",children:[a.jsxs("td",{className:"px-2 py-1 font-mono text-[10px] whitespace-nowrap text-slate-500 group-hover:text-slate-300",children:[new Date(e.date).toLocaleDateString()," ",a.jsx("span",{className:"opacity-50",children:new Date(e.date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),a.jsx("td",{className:"px-2 py-1 text-center",title:n[e.division],children:a.jsx("span",{className:"bg-white/5 px-1.5 py-0.5 rounded text-[10px] border border-white/5",children:e.division})}),a.jsx("td",{className:V("px-2 py-1 text-right font-mono font-bold text-xs whitespace-nowrap",e.amount>0?"text-green-400":"text-red-400"),children:parseFloat(e.amount).toLocaleString()}),a.jsx("td",{className:"px-2 py-1 truncate max-w-[120px] text-slate-300",title:e.first_party_name,children:e.first_party_name||a.jsx("span",{className:"opacity-50 italic",children:"Unknown"})}),a.jsx("td",{className:"px-2 py-1 truncate max-w-[120px] text-slate-300",title:e.second_party_name,children:e.second_party_name||a.jsx("span",{className:"opacity-50 italic",children:"Unknown"})}),a.jsx("td",{className:"px-2 py-1 whitespace-nowrap",children:a.jsx("span",{className:"badge badge-slate text-[9px] text-slate-500",children:e.ref_type.replace(/_/g," ")})}),a.jsx("td",{className:"px-2 py-1",children:a.jsx("select",{value:e.custom_category||"",onChange:o=>t(e.entry_id,o.target.value),className:V("w-full rounded px-1 py-0.5 text-[10px] font-bold border outline-none appearance-none cursor-pointer transition-colors duration-300 focus:ring-1 focus:ring-white/50",i.class),children:s.map(o=>a.jsx("option",{value:o.id,className:"bg-slate-900 text-white",children:o.label},o.id))})}),a.jsx("td",{className:"px-2 py-1 truncate max-w-[200px] italic text-slate-500 text-[10px]",title:e.reason,children:e.reason})]})},p4=({data:e})=>{const[t,n]=w.useState(new Set),s=m=>{const v=m.toLowerCase().replace(/_/g," ");return v.includes("srp in")?"#16a34a":v.includes("srp out")?"#dc2626":v.includes("internal")?"#9333ea":v.includes("giveaway")?"#ea580c":v.includes("manual")?"#2563eb":v.includes("tax")?"#475569":"#94a3b8"},r=Object.keys(e.monthly).sort(),i=Object.keys(e.categories.in),o=Object.keys(e.categories.out),l=Array.from(new Set([...i,...o])).sort(),c=l.map(m=>t.has(m)?null:{label:m.replace(/_/g," "),data:r.map(v=>e.monthly[v]&&e.monthly[v][m]||0),backgroundColor:s(m),stack:"stack1"}).filter(m=>m!==null),d={labels:r,datasets:c},u={labels:l.map(m=>m.replace(/_/g," ")),datasets:[{data:l.map(m=>t.has(m)?0:(e.categories.in[m]||0)+Math.abs(e.categories.out[m]||0)),backgroundColor:l.map(m=>s(m)),borderWidth:0}]},h=Object.entries(e.top_payers).sort((m,v)=>v[1].total-m[1].total).slice(0,5),f=h.map(m=>m[0]),p={labels:f,datasets:[{label:"Count",data:h.map(m=>m[1].count),backgroundColor:"#38bdf8"}]},b={labels:f,datasets:[{label:"Total ISK",data:h.map(m=>m[1].total),backgroundColor:"#facc15"}]},g={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{callbacks:{label:m=>{let v=m.dataset.label||"";return v&&(v+=": "),m.parsed.y!==null&&(v+=parseFloat(m.parsed.y).toLocaleString()+" ISK"),v}}}},scales:{x:{stacked:!0,ticks:{color:"#94a3b8",font:{size:10}},grid:{color:"rgba(255,255,255,0.05)"}},y:{stacked:!0,ticks:{color:"#94a3b8",font:{size:10}},grid:{color:"rgba(255,255,255,0.05)"}}}},y={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{labels:{color:"#94a3b8",font:{size:10}}}},scales:{x:{ticks:{color:"#94a3b8",font:{size:10}},grid:{color:"rgba(255,255,255,0.05)"}},y:{ticks:{color:"#94a3b8",font:{size:10}},grid:{color:"rgba(255,255,255,0.05)"}}}},x={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"right",labels:{color:"#94a3b8",font:{size:10},generateLabels:m=>{var _,N,S,T,M;const j=(((M=(T=(S=(N=(_=Er.overrides)==null?void 0:_.doughnut)==null?void 0:N.plugins)==null?void 0:S.legend)==null?void 0:T.labels)==null?void 0:M.generateLabels)||Er.defaults.plugins.legend.labels.generateLabels)(m);return j.forEach(D=>{const C=l[D.index];C&&t.has(C)&&(D.hidden=!0)}),j}},onClick:(m,v,j)=>{const _=l[v.index],N=new Set(t);N.has(_)?N.delete(_):N.add(_),n(N)}}}};return a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"glass-panel p-4 flex flex-col h-80",children:[a.jsx("h3",{className:"label-text mb-2",children:"Monthly Cashflow"}),a.jsx("div",{className:"flex-grow relative min-h-0",children:a.jsx(bd,{data:d,options:g})})]}),a.jsxs("div",{className:"glass-panel p-4 flex flex-col h-80",children:[a.jsx("h3",{className:"label-text mb-2",children:"Category Breakdown (Volume)"}),a.jsx("div",{className:"flex-grow relative min-h-0",children:a.jsx(qC,{data:u,options:x})})]}),a.jsxs("div",{className:"glass-panel p-4 flex flex-col h-80",children:[a.jsx("h3",{className:"label-text mb-2",children:"Top Payers (Count)"}),a.jsx("div",{className:"flex-grow relative min-h-0",children:a.jsx(bd,{data:p,options:{...y,indexAxis:"y"}})})]}),a.jsxs("div",{className:"glass-panel p-4 flex flex-col h-80",children:[a.jsx("h3",{className:"label-text mb-2",children:"Top Payers (ISK)"}),a.jsx("div",{className:"flex-grow relative min-h-0",children:a.jsx(bd,{data:b,options:{...y,indexAxis:"y"}})})]})]})},m4=()=>{const[e,t]=w.useState(null),[n,s]=w.useState([]),[r,i]=w.useState(!1),[o,l]=w.useState(null);w.useEffect(()=>{c()},[]);const c=()=>{l(null),W("/api/management/srp/config/").then(h=>{if(!h.ok)throw new Error(`HTTP error! status: ${h.status}`);return h.json()}).then(h=>{t(h.config),s(h.user_chars)}).catch(h=>{console.error("Failed to fetch SRP config",h),l("Failed to load SRP Configuration. Please ensure you have the 'Manage SRP Source' capability.")})},d=h=>{var p;if(!confirm("Set this character as the global SRP source? This will effect all wallet data."))return;const f=(p=document.cookie.match(/csrftoken=([^;]+)/))==null?void 0:p[1];W("/api/mgmt/srp/set_source/",{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":f},body:JSON.stringify({character_id:h})}).then(b=>b.json()).then(b=>{b.success?c():alert("Error: "+b.error)})},u=()=>{var f;i(!0);const h=(f=document.cookie.match(/csrftoken=([^;]+)/))==null?void 0:f[1];W("/api/mgmt/srp/sync/",{method:"POST",headers:{"X-CSRFToken":h}}).then(p=>p.json()).then(p=>{alert(p.message),i(!1),c()})};return o?a.jsxs("div",{className:"glass-panel p-6 border-red-500/20 text-center",children:[a.jsx(Zn,{className:"mx-auto text-red-500 mb-2",size:32}),a.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:"Configuration Error"}),a.jsx("p",{className:"text-slate-400",children:o}),a.jsx("button",{onClick:c,className:"btn-secondary mt-4",children:"Retry"})]}):a.jsxs("div",{className:"flex flex-col gap-6",children:[a.jsxs("div",{className:"border-b border-white/5 pb-6",children:[a.jsx("h1",{className:"heading-1",children:"SRP Configuration"}),a.jsx("p",{className:"text-slate-400 text-sm mt-1",children:"Designate the character used to pull Corporation Wallet data."})]}),a.jsxs("div",{className:"glass-panel p-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h3",{className:"label-text mb-0",children:"Current Source"}),e!=null&&e.character_id?a.jsx("span",{className:"badge badge-green",children:"Active"}):a.jsx("span",{className:"badge badge-red",children:"Not Configured"})]}),e?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("img",{src:`https://images.evetech.net/characters/${e.character_id}/portrait?size=128`,className:"w-16 h-16 rounded-lg border-2 border-brand-500 shadow-[0_0_15px_rgba(245,158,11,0.3)]",alt:""}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-white",children:e.character_name}),a.jsxs("p",{className:"text-slate-400 text-xs",children:["Last Sync: ",e.last_sync?new Date(e.last_sync).toLocaleString():"Never"]}),a.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:["Corp ID: ",e.corporation_id]})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:u,disabled:r,className:"btn-primary text-xs py-2 px-4 shadow-brand-500/20",children:r?"Syncing...":" Force Sync Now"}),a.jsxs("a",{href:"/auth/login?mode=srp_config",className:"btn-secondary text-xs py-2 px-4 border-amber-500/30 text-amber-400 hover:bg-amber-500/10",children:[a.jsx(Ob,{size:14})," Update Token (Re-Auth)"]})]})]}):a.jsxs(a.Fragment,{children:[a.jsx("p",{className:"text-slate-500 italic mb-4",children:"No character selected."}),a.jsx("div",{children:a.jsxs("a",{href:"/auth/login?mode=srp_config",className:"btn-primary text-xs py-2 px-6 inline-flex gap-2",children:[a.jsx(Jh,{size:14})," Log In New Character with Wallet Scopes"]})})]})]}),a.jsxs("div",{className:"glass-panel p-6",children:[a.jsx("h3",{className:"label-text mb-4",children:"Change Source Character"}),a.jsxs("p",{className:"text-xs text-slate-400 mb-4 bg-blue-900/20 p-3 rounded border border-blue-500/30",children:[" The selected character MUST have the ",a.jsx("strong",{children:"Accountant"})," or ",a.jsx("strong",{children:"Junior Accountant"})," role in-game, and must have logged in via the 'Update Token' button above to grant the ",a.jsx("code",{children:"esi-wallet.read_corporation_wallets.v1"})," scope."]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[n.map(h=>a.jsxs("div",{onClick:()=>d(h.character_id),className:"cursor-pointer bg-white/5 border border-white/5 hover:border-brand-500 hover:bg-white/10 p-3 rounded-lg flex items-center gap-3 transition group",children:[a.jsx("img",{src:`https://images.evetech.net/characters/${h.character_id}/portrait?size=64`,className:"w-10 h-10 rounded border border-slate-600 group-hover:border-white",alt:""}),a.jsxs("div",{children:[a.jsx("div",{className:"font-bold text-slate-300 group-hover:text-white",children:h.character_name}),a.jsx("div",{className:"text-[10px] text-slate-500",children:h.corporation_name})]})]},h.character_id)),n.length===0&&a.jsx("div",{className:"text-slate-500 text-sm italic col-span-full",children:"No characters available. Link more alts via your Profile."})]})]})]})},x4=()=>{const[e,t]=w.useState([]),[n,s]=w.useState([]),[r,i]=w.useState([]),[o,l]=w.useState("create"),[c,d]=w.useState({fit_id:"",category_id:"",eft_paste:"",description:"",tags:[]}),[u,h]=w.useState(!1),[f,p]=w.useState(!1),[b,g]=w.useState(""),[y,x]=w.useState("");w.useEffect(()=>{m()},[]);const m=()=>{W("/api/management/doctrines/data/").then(C=>C.json()).then(C=>{t(C.categories||[]),s(C.tags||[]),i(C.fits||[]),C.categories.length>0&&!c.category_id&&d(A=>({...A,category_id:C.categories[0].id}))})},v=C=>{const A=c.tags.includes(C)?c.tags.filter($=>$!==C):[...c.tags,C];d({...c,tags:A})},j=C=>{l("update"),d({fit_id:C.id,category_id:C.category_id,eft_paste:C.eft_format,description:C.description,tags:C.tag_ids}),window.scrollTo({top:0,behavior:"smooth"})},_=()=>{var C;l("create"),d({fit_id:"",category_id:((C=e[0])==null?void 0:C.id)||"",eft_paste:"",description:"",tags:[]})},N=C=>{var $;C.preventDefault();const A=($=document.cookie.match(/csrftoken=([^;]+)/))==null?void 0:$[1];W("/api/management/doctrines/save/",{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":A},body:JSON.stringify({action:o,...c})}).then(Y=>Y.json()).then(Y=>{Y.success?(_(),m()):alert(Y.error)})},S=C=>{var $;if(!confirm("Are you sure?"))return;const A=($=document.cookie.match(/csrftoken=([^;]+)/))==null?void 0:$[1];W("/api/management/doctrines/save/",{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":A},body:JSON.stringify({action:"delete",fit_id:C})}).then(Y=>Y.json()).then(Y=>{Y.success?m():alert(Y.error)})},T=()=>{W("/api/management/doctrines/export/").then(C=>C.json()).then(C=>{C.success?(g(C.export_string),h(!0)):alert(C.error)})},M=()=>{var A;if(!y.trim())return alert("Paste string first");if(!confirm("Overwrite all data?"))return;const C=(A=document.cookie.match(/csrftoken=([^;]+)/))==null?void 0:A[1];W("/api/management/doctrines/import/",{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":C},body:JSON.stringify({import_string:y})}).then($=>$.json()).then($=>{$.success?(alert($.message),p(!1),m()):alert($.error)})},D=(C,A=0)=>C.map($=>a.jsxs(Ol.Fragment,{children:[a.jsxs("option",{value:$.id,className:A===0?"font-bold bg-slate-900":"bg-slate-800",children:["-".repeat(A*2)," ",$.name]}),$.subcategories&&D($.subcategories,A+1)]},$.id));return a.jsxs("div",{className:"flex flex-col gap-6",children:[a.jsxs("div",{className:"flex justify-between items-center border-b border-white/5 pb-6",children:[a.jsx("h1",{className:"heading-1",children:"Doctrine Management"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:T,className:"btn-secondary text-xs border-brand-500/30 text-brand-400 hover:bg-brand-500/10 flex items-center gap-2",children:[a.jsx(zb,{size:14})," Export Doctrines"]}),a.jsxs("button",{onClick:()=>p(!0),className:"btn-secondary text-xs hover:text-white flex items-center gap-2",children:[a.jsx(Pb,{size:14})," Import"]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 items-start",children:[a.jsxs("div",{className:"glass-panel p-6 h-fit sticky top-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h2",{className:`text-lg font-bold tracking-wide ${o==="update"?"text-blue-500":"text-brand-500"}`,children:o==="update"?"Edit Fit":"Import Fit"}),o==="update"&&a.jsx("button",{onClick:_,className:"text-xs text-red-400 hover:text-white underline decoration-red-500/30 hover:decoration-white transition",children:"Cancel Edit"})]}),a.jsxs("form",{onSubmit:N,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"label-text",children:"Category"}),a.jsx("select",{value:c.category_id,onChange:C=>d({...c,category_id:C.target.value}),className:"select-field",children:D(e)})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label-text",children:"EFT Block"}),a.jsx("textarea",{value:c.eft_paste,onChange:C=>d({...c,eft_paste:C.target.value}),rows:"8",className:"input-field font-mono text-xs",placeholder:"[Hull Name, Fit Name]..."}),a.jsx("p",{className:"text-[10px] text-slate-500 mt-1 pl-1",children:"Accepts EFT/Pyfa formats."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label-text",children:"Tags / Labels"}),a.jsx("div",{className:"flex flex-wrap gap-2 p-3 rounded-lg border border-white/5 bg-black/20",children:n.map(C=>a.jsxs("label",{className:"cursor-pointer",children:[a.jsx("input",{type:"checkbox",className:"peer sr-only",checked:c.tags.includes(C.id),onChange:()=>v(C.id)}),a.jsx("span",{className:"px-2 py-1 rounded text-[10px] font-bold border border-slate-700 bg-slate-800 text-slate-400 peer-checked:border-brand-500 peer-checked:text-brand-400 peer-checked:bg-brand-900/20 transition select-none block hover:border-slate-500",children:C.name})]},C.id))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label-text",children:"Internal Notes"}),a.jsx("input",{type:"text",value:c.description,onChange:C=>d({...c,description:C.target.value}),className:"input-field"})]}),a.jsx("button",{type:"submit",className:`w-full shadow-lg transition btn ${o==="update"?"bg-blue-600 hover:bg-blue-500 text-white shadow-blue-500/20":"btn-primary shadow-brand-500/20"}`,children:o==="update"?"Update Fit":"Parse & Save"})]})]}),a.jsxs("div",{className:"lg:col-span-2 glass-panel overflow-hidden",children:[a.jsx("div",{className:"p-4 bg-white/5 border-b border-white/5",children:a.jsx("h3",{className:"font-bold text-slate-200",children:"Existing Fits"})}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full text-sm text-left text-slate-400",children:[a.jsx("thead",{className:"text-xs uppercase bg-white/5 text-slate-300 font-bold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3",children:"Hull"}),a.jsx("th",{className:"px-6 py-3",children:"Fit Name"}),a.jsx("th",{className:"px-6 py-3",children:"Category"}),a.jsx("th",{className:"px-6 py-3",children:"Tags"}),a.jsx("th",{className:"px-6 py-3 text-right",children:"Actions"})]})}),a.jsxs("tbody",{className:"divide-y divide-white/5",children:[r.map(C=>a.jsxs("tr",{className:"hover:bg-white/5 transition group",children:[a.jsx("td",{className:"px-6 py-4 font-bold text-white",children:C.ship_name}),a.jsx("td",{className:"px-6 py-4",children:C.name}),a.jsx("td",{className:"px-6 py-4 opacity-50 text-xs",children:C.category_path}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("div",{className:"flex flex-wrap gap-1",children:C.tags.map(A=>a.jsx("span",{className:"badge badge-slate text-[10px]",children:A},A))})}),a.jsxs("td",{className:"px-6 py-4 text-right flex justify-end items-center gap-2",children:[a.jsxs("button",{onClick:()=>j(C),className:"btn-secondary py-1 px-2 text-[10px] border-blue-500/30 text-blue-400 hover:bg-blue-500/10",children:[a.jsx(ef,{size:12})," EDIT"]}),a.jsxs("button",{onClick:()=>S(C.id),className:"btn-danger py-1 px-2 text-[10px]",children:[a.jsx(ma,{size:12})," DEL"]})]})]},C.id)),r.length===0&&a.jsx("tr",{children:a.jsx("td",{colSpan:"5",className:"p-8 text-center italic text-slate-500",children:"No fits found."})})]})]})})]})]}),u&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-dark-950/80 backdrop-blur-sm px-4",children:a.jsxs("div",{className:"bg-slate-900 border border-white/10 rounded-xl shadow-2xl w-full max-w-2xl overflow-hidden animate-fade-in",children:[a.jsxs("div",{className:"glass-header px-6 py-4 border-b border-white/5 flex justify-between items-center",children:[a.jsx("h3",{className:"font-bold text-white text-lg",children:"Export Doctrines"}),a.jsx("button",{onClick:()=>h(!1),className:"text-slate-400 hover:text-white",children:a.jsx(ct,{size:16})})]}),a.jsxs("div",{className:"p-6",children:[a.jsx("p",{className:"text-slate-400 text-sm mb-4",children:"Copy this string to import into another instance."}),a.jsx("textarea",{readOnly:!0,value:b,className:"w-full bg-black/30 border border-slate-700 rounded p-3 text-xs font-mono text-brand-400 h-32 focus:ring-1 focus:ring-brand-500 outline-none resize-none"}),a.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[a.jsx("button",{onClick:()=>h(!1),className:"btn-ghost text-xs",children:"Close"}),a.jsx("button",{onClick:()=>navigator.clipboard.writeText(b),className:"btn-primary text-xs px-6",children:"Copy to Clipboard"})]})]})]})}),f&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-dark-950/80 backdrop-blur-sm px-4",children:a.jsxs("div",{className:"bg-slate-900 border border-white/10 rounded-xl shadow-2xl w-full max-w-2xl overflow-hidden animate-fade-in",children:[a.jsxs("div",{className:"glass-header px-6 py-4 border-b border-white/5 flex justify-between items-center",children:[a.jsx("h3",{className:"font-bold text-white text-lg",children:"Import Doctrines"}),a.jsx("button",{onClick:()=>p(!1),className:"text-slate-400 hover:text-white",children:a.jsx(ct,{size:16})})]}),a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"bg-amber-900/20 border border-amber-500/30 p-3 rounded text-amber-200 text-xs mb-4 flex items-start gap-2",children:[a.jsx("span",{className:"text-lg",children:""}),a.jsxs("p",{children:[a.jsx("strong",{children:"Warning:"})," Importing will ",a.jsx("u",{className:"font-bold text-white",children:"WIPE"})," all existing data."]})]}),a.jsx("textarea",{value:y,onChange:C=>x(C.target.value),className:"w-full bg-black/30 border border-slate-700 rounded p-3 text-xs font-mono text-white h-32 focus:ring-1 focus:ring-brand-500 outline-none resize-none",placeholder:"Paste export string here..."}),a.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[a.jsx("button",{onClick:()=>p(!1),className:"btn-ghost text-xs",children:"Cancel"}),a.jsx("button",{onClick:M,className:"btn-primary text-xs px-6",children:"Import & Overwrite"})]})]})]})})]})},g4=()=>{const[e,t]=w.useState("assignments"),[n,s]=w.useState([]),[r,i]=w.useState([]),[o,l]=w.useState([]),[c,d]=w.useState([]),[u,h]=w.useState([]),[f,p]=w.useState(null),[b,g]=w.useState([]),[y,x]=w.useState("fit"),[m,v]=w.useState(""),[j,_]=w.useState("skill"),[N,S]=w.useState(""),[T,M]=w.useState(5),[D,C]=w.useState(""),[A,$]=w.useState(""),[Y,q]=w.useState(""),[G,J]=w.useState({name:"",order:0,badge_class:"bg-yellow-500/20 text-yellow-400 border-yellow-500/50",hex_color:"#EAB308"}),[z,E]=w.useState(""),[k,O]=w.useState(5);w.useEffect(()=>{L();const R=window.location.hash.replace("#","");["assignments","groups","tiers"].includes(R)&&t(R)},[]);const L=()=>{W("/api/management/skills/data/").then(R=>R.json()).then(R=>{s(R.fits||[]),i(R.tiers||[]),l(R.groups||[]),d(R.requirements||[]),R.groups.length>0})},H=R=>{if(q(R),R.length<3){h([]);return}W(`/api/search_hull/?q=${encodeURIComponent(R)}`).then(ae=>ae.json()).then(ae=>h(ae.results||[]))},Q=()=>{var P;const R={target_type:y,target_id:m,req_type:j,tier_id:A,...j==="skill"?{skill_name:N,level:T}:{group_id:D}},ae=(P=document.cookie.match(/csrftoken=([^;]+)/))==null?void 0:P[1];W("/api/skill_req/add/",{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":ae},body:JSON.stringify(R)}).then(I=>I.json()).then(I=>{I.success?(L(),S("")):alert(I.error)})},Z=R=>{var P;if(!confirm("Delete rule?"))return;const ae=(P=document.cookie.match(/csrftoken=([^;]+)/))==null?void 0:P[1];W("/api/skill_req/delete/",{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":ae},body:JSON.stringify({req_id:R})}).then(I=>I.json()).then(I=>{I.success&&L()})},ee=()=>{var P;const R=prompt("Enter Group Name:");if(!R)return;const ae=(P=document.cookie.match(/csrftoken=([^;]+)/))==null?void 0:P[1];W("/api/skill_group/manage/",{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":ae},body:JSON.stringify({action:"create",name:R})}).then(I=>I.json()).then(I=>{I.success?L():alert(I.error)})},ut=()=>{var ae;if(!confirm("Delete group?"))return;const R=(ae=document.cookie.match(/csrftoken=([^;]+)/))==null?void 0:ae[1];W("/api/skill_group/manage/",{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":R},body:JSON.stringify({action:"delete",group_id:f.id})}).then(P=>P.json()).then(P=>{P.success&&(p(null),L())})},Ws=R=>{p(R),g(R.members||[]),W(`/api/skill_group/${R.id}/members/`).then(ae=>ae.json()).then(ae=>g(ae.members||[]))},ba=()=>{var ae;if(!z)return;const R=(ae=document.cookie.match(/csrftoken=([^;]+)/))==null?void 0:ae[1];W("/api/skill_group/member/add/",{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":R},body:JSON.stringify({group_id:f.id,skill_name:z,level:k})}).then(P=>P.json()).then(P=>{P.success?(E(""),Ws(f),L()):alert(P.error)})},va=R=>{var P;const ae=(P=document.cookie.match(/csrftoken=([^;]+)/))==null?void 0:P[1];W("/api/skill_group/member/remove/",{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":ae},body:JSON.stringify({member_id:R})}).then(I=>I.json()).then(I=>{I.success&&Ws(f)})},ya=()=>{var ae;const R=(ae=document.cookie.match(/csrftoken=([^;]+)/))==null?void 0:ae[1];W("/api/skill_tier/manage/",{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":R},body:JSON.stringify({action:"create",...G})}).then(P=>P.json()).then(P=>{P.success?(J({name:"",order:0,badge_class:"bg-yellow-500/20 text-yellow-400 border-yellow-500/50",hex_color:"#EAB308"}),L()):alert(P.error)})},wa=R=>{var P;if(!confirm("Delete tier?"))return;const ae=(P=document.cookie.match(/csrftoken=([^;]+)/))==null?void 0:P[1];W("/api/skill_tier/manage/",{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":ae},body:JSON.stringify({action:"delete",tier_id:R})}).then(I=>I.json()).then(I=>{I.success&&L()})};return a.jsxs("div",{className:"flex flex-col gap-6 h-full pb-20",children:[a.jsxs("div",{className:"flex justify-between items-center border-b border-white/5 pb-6 shrink-0",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"heading-1",children:"Skill Management"}),a.jsx("p",{className:"text-slate-400 text-sm mt-1",children:"Configure mandatory skills, tiers, and reusable groups."})]}),a.jsx("div",{className:"flex bg-black/40 p-1 rounded-lg border border-white/10",children:["assignments","groups","tiers"].map(R=>a.jsx("button",{onClick:()=>t(R),className:V("px-4 py-1.5 rounded-md text-xs font-bold transition capitalize",e===R?"bg-slate-700 text-white shadow-sm":"text-slate-400 hover:text-white"),children:R},R))})]}),e==="assignments"&&a.jsxs("div",{className:"flex flex-col gap-6",children:[a.jsxs("div",{className:"glass-panel p-6",children:[a.jsx("h3",{className:"label-text mb-4",children:"Assign Requirement"}),a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-end",children:[a.jsxs("div",{className:"md:w-1/4 w-full",children:[a.jsx("label",{className:"label-text",children:"Target Type"}),a.jsxs("select",{value:y,onChange:R=>x(R.target.value),className:"select-field",children:[a.jsx("option",{value:"fit",children:"Specific Doctrine Fit"}),a.jsx("option",{value:"hull",children:"Hull (Any Fit)"})]})]}),a.jsxs("div",{className:"flex-grow w-full relative",children:[a.jsx("label",{className:"label-text",children:"Target"}),y==="fit"?a.jsxs("select",{value:m,onChange:R=>v(R.target.value),className:"select-field",children:[a.jsx("option",{value:"",children:"Select Fit..."}),n.map(R=>a.jsxs("option",{value:R.id,children:[R.ship_name," - ",R.name]},R.id))]}):a.jsxs(a.Fragment,{children:[a.jsx("input",{type:"text",value:Y,onChange:R=>H(R.target.value),className:"input-field",placeholder:"e.g. Guardian..."}),u.length>0&&a.jsx("div",{className:"absolute top-full left-0 w-full bg-slate-800 border border-slate-700 z-50 rounded-b-lg max-h-48 overflow-y-auto",children:u.map(R=>a.jsx("div",{className:"p-2 hover:bg-slate-700 cursor-pointer text-xs text-white",onClick:()=>{v(R.id),q(R.name),h([])},children:R.name},R.id))})]})]}),a.jsxs("div",{className:"md:w-1/4 w-full",children:[a.jsx("label",{className:"label-text",children:"Tier"}),a.jsxs("select",{value:A,onChange:R=>$(R.target.value),className:"select-field",children:[a.jsx("option",{value:"",children:"Minimum (Mandatory)"}),r.map(R=>a.jsx("option",{value:R.id,children:R.name},R.id))]})]})]}),a.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-end border-t border-white/5 pt-4",children:[a.jsxs("div",{className:"md:w-1/4 w-full",children:[a.jsx("label",{className:"label-text",children:"Requirement Type"}),a.jsxs("select",{value:j,onChange:R=>_(R.target.value),className:"select-field",children:[a.jsx("option",{value:"skill",children:"Single Skill"}),a.jsx("option",{value:"group",children:"Skill Group"})]})]}),j==="skill"?a.jsxs("div",{className:"flex-grow w-full flex gap-4",children:[a.jsxs("div",{className:"flex-grow",children:[a.jsx("label",{className:"label-text",children:"Skill Name"}),a.jsx("input",{type:"text",value:N,onChange:R=>S(R.target.value),className:"input-field",placeholder:"e.g. Logistics"})]}),a.jsxs("div",{className:"w-24",children:[a.jsx("label",{className:"label-text",children:"Level"}),a.jsx("select",{value:T,onChange:R=>M(R.target.value),className:"select-field",children:[1,2,3,4,5].map(R=>a.jsx("option",{value:R,children:R},R))})]})]}):a.jsxs("div",{className:"flex-grow w-full",children:[a.jsx("label",{className:"label-text",children:"Select Group"}),a.jsxs("select",{value:D,onChange:R=>C(R.target.value),className:"select-field",children:[a.jsx("option",{value:"",children:"Select Group..."}),o.map(R=>a.jsxs("option",{value:R.id,children:[R.name," (",R.count," skills)"]},R.id))]})]}),a.jsx("button",{onClick:Q,className:"btn-primary whitespace-nowrap",children:"Add Rule"})]})]})]}),a.jsx("div",{className:"glass-panel overflow-hidden",children:a.jsxs("table",{className:"w-full text-sm text-left text-slate-400",children:[a.jsx("thead",{className:"text-xs uppercase bg-white/5 text-slate-300 font-bold border-b border-white/5",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-4",children:"Target"}),a.jsx("th",{className:"px-6 py-4",children:"Tier"}),a.jsx("th",{className:"px-6 py-4",children:"Type"}),a.jsx("th",{className:"px-6 py-4",children:"Required Skill / Group"}),a.jsx("th",{className:"px-6 py-4 text-center",children:"Level"}),a.jsx("th",{className:"px-6 py-4 text-right",children:"Action"})]})}),a.jsxs("tbody",{className:"divide-y divide-white/5",children:[c.map(R=>a.jsxs("tr",{className:"hover:bg-white/5 transition group",children:[a.jsx("td",{className:"px-6 py-4 font-bold text-white",children:R.fit_name?`${R.ship_name} - ${R.fit_name}`:R.ship_name}),a.jsx("td",{className:"px-6 py-4",children:R.tier?a.jsx("span",{className:"badge",style:{backgroundColor:`${R.tier.hex}20`,color:R.tier.hex,borderColor:`${R.tier.hex}50`},children:R.tier.name}):a.jsx("span",{className:"badge badge-red",children:"MINIMUM"})}),a.jsx("td",{className:"px-6 py-4",children:R.fit_name?a.jsx("span",{className:"badge badge-brand",children:"FIT"}):a.jsx("span",{className:"badge badge-slate",children:"HULL"})}),a.jsx("td",{className:"px-6 py-4 text-slate-300",children:R.group_name?a.jsxs("span",{className:"text-blue-400 font-bold flex items-center gap-2",children:[a.jsx("span",{children:""})," ",R.group_name]}):R.skill_name}),a.jsx("td",{className:"px-6 py-4 text-center font-mono font-bold text-white",children:R.group_name?"-":R.level}),a.jsx("td",{className:"px-6 py-4 text-right",children:a.jsx("button",{onClick:()=>Z(R.id),className:"text-slate-500 hover:text-red-400 transition",children:""})})]},R.id)),c.length===0&&a.jsx("tr",{children:a.jsx("td",{colSpan:"6",className:"p-8 text-center italic",children:"No explicit rules defined."})})]})]})})]}),e==="groups"&&a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 items-start",children:[a.jsxs("div",{className:"glass-panel p-4 flex flex-col gap-4 max-h-[600px] overflow-hidden",children:[a.jsxs("div",{className:"flex justify-between items-center pb-2 border-b border-white/5",children:[a.jsx("h3",{className:"label-text mb-0",children:"Skill Groups"}),a.jsx("button",{onClick:ee,className:"btn-secondary text-[10px] py-1 px-2",children:"+ New"})]}),a.jsx("div",{className:"overflow-y-auto custom-scrollbar space-y-2 pr-1",children:o.map(R=>a.jsxs("div",{className:V("p-3 rounded border cursor-pointer group transition flex justify-between items-center",(f==null?void 0:f.id)===R.id?"bg-brand-900/20 border-brand-500/50":"bg-white/5 border-white/5 hover:border-brand-500"),onClick:()=>Ws(R),children:[a.jsx("span",{className:"font-bold text-slate-200 group-hover:text-white",children:R.name}),a.jsx("span",{className:"badge badge-slate text-[10px]",children:R.count})]},R.id))})]}),a.jsx("div",{className:V("md:col-span-2 glass-panel p-6 flex flex-col h-full",!f&&"hidden"),children:f&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex justify-between items-start mb-6 border-b border-white/5 pb-4",children:[a.jsx("div",{children:a.jsx("h2",{className:"text-2xl font-bold text-white",children:f.name})}),a.jsx("button",{onClick:ut,className:"btn-danger text-xs py-1.5 px-3",children:"Delete Group"})]}),a.jsxs("div",{className:"flex gap-2 items-end mb-6",children:[a.jsxs("div",{className:"flex-grow",children:[a.jsx("label",{className:"label-text",children:"Add Skill to Group"}),a.jsx("input",{type:"text",value:z,onChange:R=>E(R.target.value),className:"input-field",placeholder:"e.g. Armor Layering"})]}),a.jsxs("div",{className:"w-24",children:[a.jsx("label",{className:"label-text",children:"Level"}),a.jsx("select",{value:k,onChange:R=>O(R.target.value),className:"select-field",children:[1,2,3,4,5].map(R=>a.jsx("option",{value:R,children:R},R))})]}),a.jsx("button",{onClick:ba,className:"btn-primary",children:"Add"})]}),a.jsxs("div",{className:"space-y-1 overflow-y-auto custom-scrollbar flex-grow bg-black/20 p-2 rounded border border-white/5 h-64",children:[b.map(R=>a.jsxs("div",{className:"flex justify-between items-center p-2 bg-white/5 rounded border border-transparent hover:border-white/10 group",children:[a.jsx("span",{className:"text-slate-300 text-xs font-bold",children:R.name}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("span",{className:"font-mono text-white text-xs",children:["Lvl ",R.level]}),a.jsx("button",{onClick:()=>va(R.id),className:"text-slate-500 hover:text-red-400 px-2 transition",children:a.jsx(ct,{size:14})})]})]},R.id)),b.length===0&&a.jsx("div",{className:"text-slate-500 text-xs text-center py-4",children:"No skills in this group yet."})]})]})})]}),e==="tiers"&&a.jsxs("div",{className:"flex flex-col gap-6",children:[a.jsxs("div",{className:"glass-panel p-6",children:[a.jsx("h3",{className:"label-text mb-4",children:"Create Tier"}),a.jsxs("div",{className:"flex items-end gap-4",children:[a.jsxs("div",{className:"flex-grow",children:[a.jsx("label",{className:"label-text",children:"Tier Name"}),a.jsx("input",{type:"text",value:G.name,onChange:R=>J({...G,name:R.target.value}),className:"input-field",placeholder:"e.g. Elite"})]}),a.jsxs("div",{className:"w-24",children:[a.jsx("label",{className:"label-text",children:"Order"}),a.jsx("input",{type:"number",value:G.order,onChange:R=>J({...G,order:R.target.value}),className:"input-field"})]}),a.jsxs("div",{className:"flex-grow",children:[a.jsx("label",{className:"label-text",children:"Badge Classes"}),a.jsx("input",{type:"text",value:G.badge_class,onChange:R=>J({...G,badge_class:R.target.value}),className:"input-field"})]}),a.jsxs("div",{className:"w-32",children:[a.jsx("label",{className:"label-text",children:"Hex"}),a.jsx("input",{type:"color",value:G.hex_color,onChange:R=>J({...G,hex_color:R.target.value}),className:"input-field h-10 p-1"})]}),a.jsx("button",{onClick:ya,className:"btn-primary",children:"Create"})]})]}),a.jsxs("div",{className:"glass-panel p-6",children:[a.jsx("h3",{className:"label-text mb-4",children:"Active Tiers"}),a.jsxs("div",{className:"space-y-2",children:[r.map(R=>a.jsxs("div",{className:"flex justify-between items-center p-3 bg-white/5 rounded border border-white/10",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("span",{className:"font-mono text-slate-500 font-bold",children:["#",R.order]}),a.jsx("span",{className:`px-3 py-1 rounded text-xs font-bold uppercase border ${R.badge_class}`,style:{boxShadow:`0 0 10px ${R.hex_color}40`,borderColor:`${R.hex_color}50`},children:R.name})]}),a.jsx("button",{onClick:()=>wa(R.id),className:"text-red-400 hover:text-red-300",children:"Delete"})]},R.id)),r.length===0&&a.jsx("div",{className:"text-slate-500 italic",children:"No tiers defined."})]})]})]})]})},b4=()=>{const[e,t]=w.useState("search"),[n,s]=w.useState(""),[r,i]=w.useState([]),[o,l]=w.useState(""),[c,d]=w.useState([]),[u,h]=w.useState({page:1,total_pages:1,has_next:!1,has_previous:!1}),[f,p]=w.useState(null),[b,g]=w.useState([]),[y,x]=w.useState(!1),[m,v]=w.useState(!1),[j,_]=w.useState(!1),[N,S]=w.useState(""),[T,M]=w.useState(""),D=w.useRef(null);w.useEffect(()=>{if(n.length===0){i([]);return}D.current&&clearTimeout(D.current),D.current=setTimeout(()=>{W(`/api/management/rules/search_groups/?q=${encodeURIComponent(n)}`).then(E=>E.json()).then(E=>i(E.results||[]))},300)},[n]),w.useEffect(()=>{e==="saved"&&C(1)},[e,o]);const C=E=>{W(`/api/management/rules/list/?page=${E}&q=${encodeURIComponent(o)}`).then(k=>k.json()).then(k=>{d(k.results||[]),h({page:k.current_page,total_pages:k.total_pages,has_next:k.has_next,has_previous:k.has_previous})})},A=(E,k)=>{p({id:E,name:k}),x(!0),i([]),s(""),W(`/api/management/rules/discovery/${E}/`).then(O=>O.json()).then(O=>{g(O.rules||[]),x(!1)})},$=(E,k,O)=>{g(L=>L.map(H=>H.attr_id===E?{...H,[k]:O}:H))},Y=E=>{g(k=>k.map(O=>O.attr_id===E?{...O,is_active:!O.is_active}:O))},q=()=>{var O;if(!f)return;const E=b.filter(L=>L.is_active).map(L=>({attr_id:L.attr_id,logic:L.logic,tolerance:parseFloat(L.tolerance)||0})),k=(O=document.cookie.match(/csrftoken=([^;]+)/))==null?void 0:O[1];W("/api/management/rules/save/",{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":k},body:JSON.stringify({group_id:f.id,rules:E})}).then(L=>L.json()).then(L=>{L.success?alert("Saved!"):alert("Error: "+L.error)})},G=(E,k)=>{var L;if(!confirm(`Delete all rules for "${k}"?`))return;const O=(L=document.cookie.match(/csrftoken=([^;]+)/))==null?void 0:L[1];W("/api/management/rules/delete/",{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":O},body:JSON.stringify({group_id:E})}).then(H=>H.json()).then(H=>{H.success?(C(u.page),(f==null?void 0:f.id)===E&&(p(null),g([]))):alert("Error: "+H.error)})},J=()=>{W("/api/management/rules/export/").then(E=>E.json()).then(E=>{E.success?(S(E.export_string),v(!0)):alert(E.error)})},z=()=>{var k;if(!T)return alert("Paste string first");if(!confirm("Overwrite all rules?"))return;const E=(k=document.cookie.match(/csrftoken=([^;]+)/))==null?void 0:k[1];W("/api/management/rules/import/",{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":E},body:JSON.stringify({import_string:T})}).then(O=>O.json()).then(O=>{O.success?(alert(O.message),_(!1),e==="saved"&&C(1)):alert(O.error)})};return a.jsxs("div",{className:"flex flex-col h-full gap-6",children:[a.jsxs("div",{className:"flex justify-between items-center border-b border-white/5 pb-6 shrink-0",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"heading-1",children:"Doctrine Rule Helper"}),a.jsx("p",{className:"text-slate-400 text-sm mt-1",children:"Configure logic for comparing non-doctrine modules."})]}),a.jsxs("div",{className:"flex gap-3",children:[f&&a.jsxs("button",{onClick:q,className:"btn-success shadow-lg shadow-green-500/20 flex items-center gap-2",children:[a.jsx(Ji,{size:14})," Save Selected Rules"]}),a.jsx("div",{className:"h-8 w-px bg-white/10 mx-2"}),a.jsxs("button",{onClick:J,className:"btn-secondary text-xs border-brand-500/30 text-brand-400 hover:bg-brand-500/10 flex items-center gap-2",children:[a.jsx(zb,{size:14})," Export Rules"]}),a.jsxs("button",{onClick:()=>_(!0),className:"btn-secondary text-xs hover:text-white flex items-center gap-2",children:[a.jsx(Pb,{size:14})," Import"]})]})]}),a.jsxs("div",{className:"glass-panel p-4 shrink-0 flex flex-col md:flex-row gap-4 items-center relative z-20",children:[a.jsxs("div",{className:"flex bg-black/40 p-1 rounded-lg border border-white/10",children:[a.jsx("button",{onClick:()=>t("search"),className:V("px-4 py-1.5 rounded-md text-xs font-bold transition",e==="search"?"bg-slate-700 text-white shadow-sm":"text-slate-400 hover:text-white"),children:"Search Groups"}),a.jsx("button",{onClick:()=>t("saved"),className:V("px-4 py-1.5 rounded-md text-xs font-bold transition",e==="saved"?"bg-slate-700 text-white shadow-sm":"text-slate-400 hover:text-white"),children:"Saved Rules"})]}),e==="search"?a.jsxs("div",{className:"relative flex-grow w-full group",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none group-focus-within:text-brand-500 transition",children:a.jsx(is,{className:"w-5 h-5 text-slate-500"})}),a.jsx("input",{type:"text",className:"input-field pl-10",placeholder:"Search by Item Group (e.g. 'Shield Hardener')...",value:n,onChange:E=>s(E.target.value)}),r.length>0&&a.jsx("div",{className:"absolute top-full left-0 w-full mt-2 bg-slate-900 border border-white/10 rounded-xl shadow-2xl z-50 overflow-hidden",children:r.map(E=>a.jsxs("div",{className:"p-3 hover:bg-brand-900/20 hover:text-brand-400 cursor-pointer border-b border-white/5 last:border-0 transition flex justify-between",onClick:()=>A(E.id,E.name),children:[a.jsx("span",{children:E.name})," ",a.jsx("span",{className:"text-slate-600 font-mono text-xs opacity-50",children:E.id})]},E.id))})]}):a.jsxs("div",{className:"w-full overflow-hidden flex flex-col gap-2",children:[a.jsxs("div",{className:"relative w-full",children:[a.jsx("input",{type:"text",className:"input-field pl-9 py-1.5 text-xs bg-black/20 border-white/10 focus:border-brand-500",placeholder:"Filter saved rules...",value:o,onChange:E=>l(E.target.value)}),a.jsx(is,{className:"absolute left-3 top-2 w-4 h-4 text-slate-500"})]}),a.jsx("div",{className:"flex flex-wrap gap-2 max-h-32 overflow-y-auto custom-scrollbar p-1",children:c.map(E=>a.jsxs("div",{className:"px-3 py-2 bg-slate-800 border border-slate-700 rounded hover:border-brand-500 hover:text-white text-slate-300 text-xs transition flex justify-between items-center gap-2 group min-w-[200px] flex-grow md:flex-grow-0",children:[a.jsxs("span",{className:"flex-grow cursor-pointer flex justify-between items-center gap-2",onClick:()=>A(E.id,E.name),children:[a.jsx("span",{className:"font-bold truncate",children:E.name}),a.jsx("span",{className:"bg-slate-900 text-slate-500 px-1.5 py-0.5 rounded text-[9px] group-hover:text-brand-400 transition font-mono",children:E.count})]}),a.jsx("button",{onClick:k=>{k.stopPropagation(),G(E.id,E.name)},className:"text-slate-600 hover:text-red-400 px-1 transition",children:a.jsx(ct,{size:14})})]},E.id))}),u.total_pages>1&&a.jsxs("div",{className:"flex justify-between items-center bg-black/20 p-1.5 rounded border border-white/5 text-[10px]",children:[a.jsx("button",{disabled:!u.has_previous,onClick:()=>C(u.page-1),className:"px-2 py-1 bg-slate-800 hover:bg-slate-700 rounded text-slate-300 disabled:opacity-50",children:"Previous"}),a.jsxs("span",{className:"text-slate-500 font-mono",children:["Page ",u.page," / ",u.total_pages]}),a.jsx("button",{disabled:!u.has_next,onClick:()=>C(u.page+1),className:"px-2 py-1 bg-slate-800 hover:bg-slate-700 rounded text-slate-300 disabled:opacity-50",children:"Next"})]})]})]}),f&&a.jsxs("div",{className:"flex-col flex-grow min-h-0 animate-fade-in relative z-0 flex",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[a.jsx("h2",{className:"text-2xl font-bold text-white tracking-tight",children:f.name}),a.jsxs("span",{className:"badge badge-brand",children:["ID: ",f.id]})]}),a.jsxs("div",{className:"glass-panel overflow-hidden flex flex-col flex-grow",children:[a.jsxs("div",{className:"grid grid-cols-12 gap-4 p-4 bg-white/5 border-b border-white/5 text-[10px] font-bold text-slate-400 uppercase tracking-wider",children:[a.jsx("div",{className:"col-span-1 text-center",children:"Use?"}),a.jsx("div",{className:"col-span-3",children:"Attribute Name"}),a.jsx("div",{className:"col-span-3",children:"Logic"}),a.jsx("div",{className:"col-span-1 text-center",children:"Tolerance %"}),a.jsx("div",{className:"col-span-4",children:"Description"})]}),a.jsx("div",{className:"overflow-y-auto custom-scrollbar flex-grow p-2 space-y-1",children:y?a.jsx("div",{className:"p-12 text-center text-slate-500 animate-pulse",children:"Scanning database attributes..."}):b.length>0?b.map(E=>a.jsxs("div",{className:V("grid grid-cols-12 gap-4 p-3 rounded items-center transition group",E.is_active?"bg-white/5 border-l-2 border-brand-500":"opacity-60 hover:opacity-100 hover:bg-white/5 border-l-2 border-transparent"),children:[a.jsx("div",{className:"col-span-1 flex justify-center",children:a.jsx("input",{type:"checkbox",checked:E.is_active,onChange:()=>Y(E.attr_id),className:"w-5 h-5 rounded border-slate-600 bg-slate-800 text-brand-500 focus:ring-offset-0 focus:ring-0 cursor-pointer"})}),a.jsx("div",{className:"col-span-3 font-bold text-sm text-slate-200 truncate",title:E.name,children:E.name}),a.jsx("div",{className:"col-span-3",children:a.jsxs("select",{value:E.logic,onChange:k=>$(E.attr_id,"logic",k.target.value),className:"w-full bg-black/40 border border-slate-700 rounded px-2 py-1 text-xs text-white outline-none focus:border-brand-500",children:[a.jsx("option",{value:"higher",children:"Higher is Better"}),a.jsx("option",{value:"lower",children:"Lower is Better"}),a.jsx("option",{value:"match",children:"Must Match"})]})}),a.jsx("div",{className:"col-span-1",children:a.jsx("input",{type:"number",step:"0.1",min:"0",value:E.tolerance,onChange:k=>$(E.attr_id,"tolerance",k.target.value),className:"w-full bg-black/40 border border-slate-700 rounded px-2 py-1 text-xs text-center text-white outline-none focus:border-brand-500",placeholder:"0%"})}),a.jsx("div",{className:"col-span-4 text-xs text-slate-500 truncate",title:E.description,children:E.description||"No description available."})]},E.attr_id)):a.jsx("div",{className:"p-8 text-center text-slate-500",children:"No relevant attributes found for this group."})})]})]}),m&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-dark-950/80 backdrop-blur-sm px-4",children:a.jsxs("div",{className:"bg-slate-900 border border-white/10 rounded-xl shadow-2xl w-full max-w-2xl overflow-hidden animate-fade-in",children:[a.jsxs("div",{className:"glass-header px-6 py-4 border-b border-white/5 flex justify-between items-center",children:[a.jsx("h3",{className:"font-bold text-white text-lg",children:"Export Rules"}),a.jsx("button",{onClick:()=>v(!1),className:"text-slate-400 hover:text-white",children:a.jsx(ct,{size:16})})]}),a.jsxs("div",{className:"p-6",children:[a.jsx("p",{className:"text-slate-400 text-sm mb-4",children:"Copy the string below to import into another instance."}),a.jsx("textarea",{readOnly:!0,value:N,className:"w-full bg-black/30 border border-slate-700 rounded p-3 text-xs font-mono text-brand-400 h-32 focus:ring-1 focus:ring-brand-500 outline-none resize-none"}),a.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[a.jsx("button",{onClick:()=>v(!1),className:"btn-ghost text-xs",children:"Close"}),a.jsx("button",{onClick:()=>navigator.clipboard.writeText(N),className:"btn-primary text-xs px-6",children:"Copy to Clipboard"})]})]})]})}),j&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-dark-950/80 backdrop-blur-sm px-4",children:a.jsxs("div",{className:"bg-slate-900 border border-white/10 rounded-xl shadow-2xl w-full max-w-2xl overflow-hidden animate-fade-in",children:[a.jsxs("div",{className:"glass-header px-6 py-4 border-b border-white/5 flex justify-between items-center",children:[a.jsx("h3",{className:"font-bold text-white text-lg",children:"Import Rules"}),a.jsx("button",{onClick:()=>_(!1),className:"text-slate-400 hover:text-white",children:a.jsx(ct,{size:16})})]}),a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"bg-amber-900/20 border border-amber-500/30 p-3 rounded text-amber-200 text-xs mb-4 flex items-start gap-2",children:[a.jsx("span",{className:"text-lg",children:""}),a.jsxs("p",{children:[a.jsx("strong",{children:"Warning:"})," Importing rules will ",a.jsx("u",{children:"overwrite"})," all currently configured analysis rules."]})]}),a.jsx("textarea",{value:T,onChange:E=>M(E.target.value),className:"w-full bg-black/30 border border-slate-700 rounded p-3 text-xs font-mono text-white h-32 focus:ring-1 focus:ring-brand-500 outline-none resize-none",placeholder:"Paste export string here..."}),a.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[a.jsx("button",{onClick:()=>_(!1),className:"btn-ghost text-xs",children:"Cancel"}),a.jsx("button",{onClick:z,className:"btn-primary text-xs px-6",children:"Import & Overwrite"})]})]})]})})]})},v4=()=>{const[e,t]=w.useState(null);return w.useEffect(()=>{W("/api/management/sde/").then(n=>n.json()).then(t)},[]),e?a.jsxs("div",{className:"space-y-6",children:[a.jsx("h1",{className:"heading-1",children:"SDE Database"}),a.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[a.jsxs("div",{className:"glass-panel p-6",children:[a.jsx("div",{className:"label-text",children:"Items"}),a.jsx("div",{className:"text-3xl font-mono text-white",children:e.counts.items.toLocaleString()})]}),a.jsxs("div",{className:"glass-panel p-6",children:[a.jsx("div",{className:"label-text",children:"Groups"}),a.jsx("div",{className:"text-3xl font-mono text-white",children:e.counts.groups.toLocaleString()})]}),a.jsxs("div",{className:"glass-panel p-6",children:[a.jsx("div",{className:"label-text",children:"Attributes"}),a.jsx("div",{className:"text-3xl font-mono text-white",children:e.counts.attrs.toLocaleString()})]})]}),a.jsxs("div",{className:"glass-panel p-6",children:[a.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Top Item Groups"}),a.jsx("div",{className:"h-64 flex items-end justify-between gap-2",children:e.chart.data.map((n,s)=>a.jsxs("div",{className:"flex-1 flex flex-col justify-end group relative",children:[a.jsx("div",{className:"bg-brand-600/50 hover:bg-brand-500 transition rounded-t w-full",style:{height:`${n/Math.max(...e.chart.data)*100}%`}}),a.jsx("div",{className:"absolute bottom-0 w-full text-[10px] text-slate-500 truncate text-center opacity-0 group-hover:opacity-100 transition",children:e.chart.labels[s]})]},s))})]})]}):a.jsx("div",{children:"Loading Database Stats..."})},y4={celeryStatus:null,activeTasks:[],status:"disconnected"},_f=Sn({name:"system",initialState:y4,reducers:{setSystemStatus:(e,t)=>{e.status=t.payload},handleWsMessage:(e,t)=>{const n=t.payload;if(n.type==="celery_task_update"){const{event:s,task:r}=n,i=Date.now();if(s==="started")e.activeTasks.unshift({...r,status:"STARTED",receivedAt:i}),e.activeTasks.length>100&&e.activeTasks.pop();else if(s==="finished"){const o=e.activeTasks.find(l=>l.id===r.id);o&&(o.state=r.state,o.finishedAt=i)}}else e.celeryStatus=n},pruneTasks:e=>{const t=Date.now();e.activeTasks=e.activeTasks.filter(n=>n.finishedAt?t-n.finishedAt<4e3:!(n.receivedAt&&t-n.receivedAt>15*60*1e3))}},extraReducers:e=>{e.addCase("WS_CONNECTED",(t,n)=>{n.payload.channelKey==="system"&&(t.status="connected")}).addCase("WS_DISCONNECTED",(t,n)=>{n.payload.channelKey==="system"&&(t.status="disconnected")}).addCase("WS_MESSAGE_RECEIVED",(t,n)=>{n.payload.channelKey==="system"&&_f.caseReducers.handleWsMessage(t,{payload:n.payload.msg})})}}),{setSystemStatus:ET,pruneTasks:w4}=_f.actions,j4=e=>e.system.celeryStatus,_4=e=>e.system.status,N4=e=>e.system.activeTasks,k4=_f.reducer,S4=()=>{const e=dt(),t=U(j4),n=U(N4),r=U(_4)==="connected";if(w.useEffect(()=>{const l=setInterval(()=>{e(w4())},1e3);return()=>clearInterval(l)},[e]),w.useEffect(()=>(e(nf("/ws/system/monitor/","system")),()=>{e(Yb("system"))}),[e]),!t)return a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"flex justify-between items-center border-b border-white/5 pb-6",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("h1",{className:"heading-1",children:"System Monitor"}),a.jsxs("span",{className:"badge badge-slate flex items-center gap-2 normal-case font-normal",children:[a.jsx("span",{className:"w-2 h-2 rounded-full bg-slate-500 animate-pulse"})," Connecting..."]})]})}),a.jsxs("div",{className:"p-12 text-center text-slate-500 italic flex flex-col items-center gap-4",children:[a.jsx(Zc,{className:"animate-spin text-slate-700",size:48}),"Waiting for telemetry..."]})]});const i=l=>(l==null?void 0:l.toLocaleString())||0,o=l=>{if(!l)return"Never";const c=Date.now()-new Date(l).getTime(),d=Math.floor(c/6e4);return d<60?`${d}m ago`:`${Math.floor(d/60)}h ago`};return a.jsxs("div",{className:"space-y-8 animate-fade-in",children:[a.jsxs("div",{className:"flex justify-between items-center border-b border-white/5 pb-6",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("h1",{className:"heading-1",children:"System Monitor"}),a.jsxs("span",{className:V("badge flex items-center gap-2 normal-case font-normal transition-all duration-300",r?"badge-green":"badge-red"),children:[a.jsx("span",{className:V("w-2 h-2 rounded-full",r?"bg-green-500 animate-pulse":"bg-red-500")}),r?"Live Stream":"Disconnected"]}),a.jsxs("span",{className:"text-xs text-slate-500 font-mono",children:["Latency: ",t.redis_latency,"ms"]})]}),a.jsxs("button",{onClick:()=>window.location.reload(),className:"btn-secondary text-xs py-1.5 shadow-lg",children:[a.jsx(Jn,{size:16})," Reload Page"]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[a.jsx(io,{label:"Redis Status",value:t.redis_status,sub:t.redis_error?"Error detected":"Operational",icon:a.jsx(Mb,{size:20}),color:t.redis_status==="ONLINE"?"green":"red"}),a.jsx(io,{label:"Message Queue",value:i(t.queue_length),sub:"Pending tasks",icon:a.jsx(Ab,{size:20}),color:t.queue_length>100?"yellow":"blue"}),a.jsx(io,{label:"Processed",value:i(t.total_processed),sub:"Tasks handled",icon:a.jsx(Pu,{size:20}),color:"purple"}),a.jsx(io,{label:"Load",value:`${t.system_load_percent}%`,sub:"Queue Capacity",icon:a.jsx(Zc,{size:20}),color:t.system_load_percent>80?"red":"emerald"})]}),a.jsxs("div",{className:"glass-panel p-6",children:[a.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[a.jsx("div",{className:"w-1 h-6 bg-brand-500 rounded-full"}),"ESI Token Health"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[a.jsxs("div",{className:"flex flex-col items-center justify-center p-4 bg-white/5 rounded-xl border border-white/5",children:[a.jsxs("div",{className:"text-4xl font-black text-white mb-1",children:[t.esi_health_percent,"%"]}),a.jsx("div",{className:"text-xs text-slate-400 uppercase tracking-widest font-bold",children:"Health Score"}),a.jsx("div",{className:"w-full bg-slate-800 h-2 rounded-full mt-4 overflow-hidden",children:a.jsx("div",{className:"h-full bg-gradient-to-r from-red-500 via-yellow-500 to-green-500 transition-all duration-500",style:{width:`${t.esi_health_percent}%`}})}),a.jsxs("div",{className:"flex justify-between w-full mt-4 text-sm text-slate-300",children:[a.jsx("span",{children:"Total Characters:"}),a.jsx("span",{className:"font-mono text-white",children:i(t.total_characters)})]})]}),a.jsxs("div",{className:"md:col-span-2 grid grid-cols-2 gap-4",children:[a.jsx(Pt,{label:"Total Tokens",value:t.total_tokens,color:"purple"}),a.jsx(Pt,{label:"Missing Tokens",value:t.missing_token_count,color:"red"}),a.jsx(Pt,{label:"Idle Tokens",value:t.expired_token_count,color:"blue"}),a.jsx(Pt,{label:"Stale Characters (>1h)",value:t.stale_count,color:"yellow"}),a.jsx(Pt,{label:"Active Users (30d)",value:t.active_site_30d,color:"blue"}),a.jsx(Pt,{label:"ESI API Status",value:t.esi_server_status?"ONLINE":"DOWN",color:t.esi_server_status?"green":"red"})]})]})]}),a.jsxs("div",{className:"glass-panel p-6",children:[a.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[a.jsx("div",{className:"w-1 h-6 bg-blue-500 rounded-full"}),"Operational Health"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[a.jsx(Pt,{label:"Active Fleets",value:t.active_fleets_count,color:t.active_fleets_count>0?"green":"blue"}),a.jsx(Pt,{label:"Pilots Waiting",value:t.pending_pilots_count,color:t.pending_pilots_count>10?"yellow":"blue"}),a.jsx(Pt,{label:"Active Pilots",value:t.active_pilots_count,color:"purple"}),a.jsx(Pt,{label:"Fleet Activity (30d)",value:t.active_waitlist_30d,color:"purple"}),a.jsx(Pt,{label:"Last SRP Sync",value:o(t.last_srp_sync),color:!t.last_srp_sync||o(t.last_srp_sync).includes("h")&&parseInt(o(t.last_srp_sync))>24?"red":"green"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"glass-panel p-6",children:[a.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[a.jsx(Tb,{size:20,className:"text-yellow-400"}),"Queued Tasks (Immediate)"]}),a.jsx(E4,{items:t.queued_breakdown,emptyMsg:"No tasks currently queued."})]}),a.jsxs("div",{className:"glass-panel p-6",children:[a.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[a.jsx("div",{className:"w-1 h-6 bg-purple-500 rounded-full"}),"Celery Workers (",t.worker_count,")"]}),t.workers&&t.workers.length>0?a.jsx("div",{className:"grid grid-cols-1 gap-4",children:t.workers.map(l=>a.jsx(C4,{worker:l},l.name))}):a.jsx("div",{className:"p-8 text-center text-slate-500 bg-white/5 rounded-lg border border-white/5 border-dashed",children:"No workers detected."})]})]}),a.jsxs("div",{className:"glass-panel p-6",children:[a.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[a.jsx(Fb,{size:20,className:"text-blue-400"}),"Live Task Stream"]}),a.jsxs("div",{className:"space-y-2 h-[400px] overflow-y-auto pr-2 custom-scrollbar relative",children:[n.length===0&&a.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-slate-500 italic",children:[a.jsx(Zc,{className:"mb-2 opacity-50"}),"No active tasks processed recently."]}),n.map(l=>a.jsx(T4,{task:l},l.id))]})]})]})},C4=({worker:e})=>a.jsx("div",{className:"bg-slate-900/50 border border-white/10 rounded-lg p-4",children:a.jsxs("div",{className:"flex flex-col md:flex-row justify-between md:items-center gap-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:V("w-3 h-3 rounded-full",e.status==="Active"?"bg-green-500 shadow-[0_0_8px_rgba(34,197,94,0.6)]":"bg-red-500")}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-bold text-white",children:e.name}),a.jsxs("div",{className:"text-xs text-slate-500 font-mono",children:["PID: ",e.pid," | Concurrency: ",e.concurrency]})]})]}),a.jsx("div",{className:"flex gap-4 text-xs",children:a.jsxs("div",{className:"bg-slate-700/50 text-slate-400 px-3 py-1 rounded border border-white/10",children:["Processed: ",a.jsx("b",{children:e.processed.toLocaleString()})]})})]})}),io=({label:e,value:t,sub:n,icon:s,color:r})=>{const i={green:"text-green-400 bg-green-400/10 border-green-400/20",red:"text-red-400 bg-red-400/10 border-red-400/20",yellow:"text-yellow-400 bg-yellow-400/10 border-yellow-400/20",blue:"text-blue-400 bg-blue-400/10 border-blue-400/20",purple:"text-purple-400 bg-purple-400/10 border-purple-400/20",emerald:"text-emerald-400 bg-emerald-400/10 border-emerald-400/20"}[r]||"text-slate-400 bg-slate-400/10 border-slate-400/20";return a.jsxs("div",{className:"glass-panel p-4 flex items-center gap-4 hover:bg-white/5 transition-colors",children:[a.jsx("div",{className:`p-3 rounded-xl border ${i}`,children:s}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-slate-400 font-medium",children:e}),a.jsx("div",{className:"text-xl font-bold text-white leading-tight",children:t}),a.jsx("div",{className:"text-xs text-slate-500 mt-0.5",children:n})]})]})},Pt=({label:e,value:t,color:n})=>{const s={green:"text-green-400",red:"text-red-400",yellow:"text-yellow-400",blue:"text-blue-400"}[n]||"text-white";return a.jsxs("div",{className:"bg-slate-900/50 p-3 rounded-lg border border-white/5 flex flex-col justify-center",children:[a.jsx("span",{className:`text-xl font-mono font-bold ${s}`,children:t}),a.jsx("span",{className:"text-xs text-slate-500 uppercase font-bold tracking-wider",children:e})]})},E4=({items:e,emptyMsg:t})=>!e||e.length===0?a.jsx("div",{className:"text-sm text-slate-500 italic p-4 text-center border border-white/5 rounded-lg border-dashed",children:t}):a.jsx("div",{className:"overflow-hidden rounded-lg border border-white/5",children:a.jsxs("table",{className:"w-full text-sm text-left",children:[a.jsx("thead",{className:"bg-white/5 text-slate-400 uppercase text-xs font-bold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-2",children:"Task Type"}),a.jsx("th",{className:"px-4 py-2 text-right",children:"Count"})]})}),a.jsx("tbody",{className:"divide-y divide-white/5",children:e.map((n,s)=>a.jsxs("tr",{className:"hover:bg-white/5",children:[a.jsx("td",{className:"px-4 py-2 text-slate-300 font-mono",children:n.endpoint_name}),a.jsx("td",{className:"px-4 py-2 text-right text-white font-bold",children:n.pending_count})]},s))})]})}),T4=({task:e})=>{const t=!!e.finishedAt,n=e.state==="SUCCESS",s=e.state==="FAILURE";return a.jsxs("div",{className:V("rounded-lg border flex items-center justify-between gap-4 text-xs overflow-hidden",t?"opacity-0 max-h-0 mb-0 py-0 border-0":"opacity-100 max-h-20 mb-2 py-3 border",s?"bg-red-500/10 border-red-500/20":n?"bg-green-500/10 border-green-500/20":"bg-slate-800/50 border-white/5"),style:{transitionProperty:"all",transitionDuration:"1000ms",transitionDelay:t?"2000ms":"0ms"},children:[a.jsxs("div",{className:"flex items-center gap-3 overflow-hidden px-3",children:[a.jsx("div",{className:V("w-2 h-2 rounded-full shrink-0",s?"bg-red-500":n?"bg-green-500":"bg-blue-400 animate-pulse")}),a.jsxs("div",{className:"flex flex-col overflow-hidden",children:[a.jsx("div",{className:"font-mono text-slate-300 truncate",children:e.name}),a.jsxs("div",{className:"text-slate-500 flex gap-2 truncate",children:[a.jsxs("span",{children:[e.id.slice(0,8),"..."]}),e.worker&&a.jsxs("span",{children:["via ",e.worker]})]})]})]}),(e.enriched_name||e.enriched_info)&&a.jsxs("div",{className:"text-right shrink-0 px-3",children:[e.enriched_name&&a.jsx("div",{className:"font-bold text-brand-400",children:e.enriched_name}),e.enriched_info&&a.jsx("div",{className:"text-slate-500 italic",children:e.enriched_info})]}),t&&a.jsx("div",{className:V("font-bold uppercase tracking-wider text-[10px] pr-3",n?"text-green-500":"text-red-500"),children:e.state})]})},M4=()=>{const[e,t]=w.useState([]),[n,s]=w.useState([]),[r,i]=w.useState(!1),[o,l]=w.useState(!1),[c,d]=w.useState({action:"create",id:"",name:""});w.useEffect(()=>{u()},[]);const u=()=>{W("/api/management/permissions/").then(y=>y.json()).then(y=>{t(y.groups||[]),s(y.capabilities||[]),i(!1)})},h=(y,x)=>{var j;const m=(j=document.cookie.match(/csrftoken=([^;]+)/))==null?void 0:j[1],v=e.map(_=>{if(_.id===y){const N=_.capabilities.includes(x);return{..._,capabilities:N?_.capabilities.filter(S=>S!==x):[..._.capabilities,x]}}return _});t(v),W("/api/mgmt/permissions/toggle/",{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":m},body:JSON.stringify({group_id:y,cap_id:x})}).then(_=>_.json()).then(_=>{_.success||(alert(_.error),u())})},f=(y,x)=>{const m=[...e];x==="up"&&y>0?[m[y-1],m[y]]=[m[y],m[y-1]]:x==="down"&&y<m.length-1&&([m[y+1],m[y]]=[m[y],m[y+1]]),t(m),i(!0)},p=()=>{var x;const y=(x=document.cookie.match(/csrftoken=([^;]+)/))==null?void 0:x[1];W("/api/mgmt/roles/reorder/",{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":y},body:JSON.stringify({ordered_ids:e.map(m=>m.id)})}).then(m=>m.json()).then(m=>{m.success?i(!1):alert(m.error)})},b=()=>{var x;const y=(x=document.cookie.match(/csrftoken=([^;]+)/))==null?void 0:x[1];W("/api/mgmt/groups/",{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":y},body:JSON.stringify(c)}).then(m=>m.json()).then(m=>{m.success?(l(!1),u()):alert(m.error)})},g=(y,x)=>{var v;if(!confirm(`Delete group "${x}"?`))return;const m=(v=document.cookie.match(/csrftoken=([^;]+)/))==null?void 0:v[1];W("/api/mgmt/groups/",{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":m},body:JSON.stringify({action:"delete",id:y})}).then(j=>j.json()).then(j=>{j.success?u():alert(j.error)})};return a.jsxs("div",{className:"flex flex-col gap-6 animate-fade-in pb-20",children:[a.jsxs("div",{className:"flex justify-between items-end border-b border-white/5 pb-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"heading-1",children:"Access Control Matrix"}),a.jsx("p",{className:"text-slate-400 text-sm mt-1",children:"Manage groups and capabilities dynamically."})]}),a.jsxs("div",{className:"flex gap-2",children:[r&&a.jsxs("button",{onClick:p,className:"btn-success py-2 px-4 text-xs shadow-green-500/20 animate-pulse flex items-center gap-2",children:[a.jsx(Ji,{size:14})," Save Order"]}),a.jsxs("button",{onClick:()=>{d({action:"create",id:"",name:""}),l(!0)},className:"btn-primary py-2 px-4 text-xs shadow-brand-500/20 flex items-center gap-2",children:[a.jsx(Sr,{size:14})," Create Group"]})]})]}),a.jsx("div",{className:"glass-panel overflow-hidden flex flex-col",children:a.jsx("div",{className:"overflow-x-auto custom-scrollbar relative",children:a.jsxs("table",{className:"w-full text-sm text-left border-collapse",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"bg-slate-900/90 text-xs uppercase tracking-wider text-slate-300",children:[a.jsx("th",{className:"p-4 sticky left-0 z-30 bg-slate-900/95 border-r border-b border-white/10 w-72 shadow-xl backdrop-blur-md",children:"Role / Group"}),n.map(y=>a.jsxs("th",{className:"p-2 text-center min-w-[60px] max-w-[100px] border-r border-b border-white/10 group relative hover:bg-white/5 transition align-bottom pb-4",children:[a.jsx("div",{className:"absolute inset-0 group-hover:bg-white/5 transition z-0"}),a.jsx("div",{className:"writing-mode-vertical transform rotate-180 text-[10px] font-bold tracking-widest text-slate-400 group-hover:text-white transition cursor-help h-48 flex items-center justify-start relative z-10",title:y.description,children:y.name})]},y.id))]})}),a.jsxs("tbody",{className:"divide-y divide-white/5",children:[e.map((y,x)=>a.jsxs("tr",{className:"hover:bg-white/5 transition group/row",children:[a.jsx("td",{className:"p-4 sticky left-0 z-20 bg-slate-900/95 border-r border-white/10 group-hover/row:bg-white/10 transition backdrop-blur-md shadow-xl",children:a.jsxs("div",{className:"flex justify-between items-center gap-2",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("div",{className:"flex flex-col gap-0.5 opacity-0 group-hover/row:opacity-100 transition",children:[a.jsx("button",{onClick:()=>f(x,"up"),className:"text-slate-600 hover:text-brand-400 leading-none",children:a.jsx(fN,{size:12})}),a.jsx("button",{onClick:()=>f(x,"down"),className:"text-slate-600 hover:text-brand-400 leading-none",children:a.jsx(rc,{size:12})})]}),a.jsx("span",{className:"font-bold text-white text-sm truncate",title:y.name,children:y.name})]}),a.jsxs("div",{className:"flex gap-1 opacity-0 group-hover/row:opacity-100 transition shrink-0",children:[a.jsx("button",{onClick:()=>{d({action:"update",id:y.id,name:y.name}),l(!0)},className:"p-1 hover:bg-blue-500/20 rounded text-slate-500 hover:text-blue-400 transition",title:"Rename",children:a.jsx(ef,{size:12})}),y.name!=="Admin"&&a.jsx("button",{onClick:()=>g(y.id,y.name),className:"p-1 hover:bg-red-500/20 rounded text-slate-500 hover:text-red-400 transition",title:"Delete",children:a.jsx(ma,{size:12})})]})]})}),n.map(m=>a.jsx("td",{className:"p-0 border-r border-white/5 last:border-r-0 relative cursor-pointer hover:bg-white/10 transition",onClick:()=>h(y.id,m.id),title:`${y.name} -> ${m.name}`,children:a.jsx("div",{className:"w-full h-full min-h-[48px] flex items-center justify-center",children:y.capabilities.includes(m.id)?a.jsx("div",{className:"w-3 h-3 rounded-sm bg-green-500 shadow-[0_0_8px_rgba(34,197,94,0.6)] transition-all duration-300 transform scale-100"}):a.jsx("div",{className:"w-1 h-1 rounded-full bg-slate-800 transition-all duration-300 transform scale-100 opacity-50"})})},m.id))]},y.id)),e.length===0&&a.jsx("tr",{children:a.jsx("td",{colSpan:"100%",className:"p-8 text-center text-slate-500 italic",children:"No groups found."})})]})]})})}),o&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-dark-950/80 backdrop-blur-sm px-4",children:a.jsxs("div",{className:"bg-slate-900 border border-white/10 rounded-xl shadow-2xl w-full max-w-md overflow-hidden animate-fade-in",children:[a.jsxs("div",{className:"glass-header px-6 py-4 border-b border-white/5 flex justify-between items-center",children:[a.jsx("h3",{className:"font-bold text-white text-lg",children:c.action==="create"?"Create New Group":"Rename Group"}),a.jsx("button",{onClick:()=>l(!1),className:"text-slate-400 hover:text-white",children:""})]}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"label-text",children:"Group Name"}),a.jsx("input",{type:"text",className:"input-field",placeholder:"e.g. Logistics Commander",value:c.name,onChange:y=>d({...c,name:y.target.value})})]}),a.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[a.jsx("button",{onClick:()=>l(!1),className:"btn-ghost text-xs",children:"Cancel"}),a.jsx("button",{onClick:b,className:"btn-primary text-xs px-6",children:"Save"})]})]})]})}),a.jsx("style",{children:`
                .writing-mode-vertical {
                    writing-mode: vertical-rl;
                    text-orientation: mixed;
                }
            `})]})};var Iv={},Ar={},$t={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.isEventSourceSupported=e.isReactNative=e.ReadyState=e.DEFAULT_HEARTBEAT=e.UNPARSABLE_JSON_OBJECT=e.DEFAULT_RECONNECT_INTERVAL_MS=e.DEFAULT_RECONNECT_LIMIT=e.SOCKET_IO_PING_CODE=e.SOCKET_IO_PATH=e.SOCKET_IO_PING_INTERVAL=e.DEFAULT_EVENT_SOURCE_OPTIONS=e.EMPTY_EVENT_HANDLERS=e.DEFAULT_OPTIONS=void 0;var t=1,n=1e3*t;e.DEFAULT_OPTIONS={},e.EMPTY_EVENT_HANDLERS={},e.DEFAULT_EVENT_SOURCE_OPTIONS={withCredentials:!1,events:e.EMPTY_EVENT_HANDLERS},e.SOCKET_IO_PING_INTERVAL=25*n,e.SOCKET_IO_PATH="/socket.io/?EIO=3&transport=websocket",e.SOCKET_IO_PING_CODE="2",e.DEFAULT_RECONNECT_LIMIT=20,e.DEFAULT_RECONNECT_INTERVAL_MS=5e3,e.UNPARSABLE_JSON_OBJECT={},e.DEFAULT_HEARTBEAT={message:"ping",timeout:6e4,interval:25e3};var s;(function(i){i[i.UNINSTANTIATED=-1]="UNINSTANTIATED",i[i.CONNECTING=0]="CONNECTING",i[i.OPEN=1]="OPEN",i[i.CLOSING=2]="CLOSING",i[i.CLOSED=3]="CLOSED"})(s||(e.ReadyState=s={}));var r=function(){try{return"EventSource"in globalThis}catch{return!1}};e.isReactNative=typeof navigator<"u"&&navigator.product==="ReactNative",e.isEventSourceSupported=!e.isReactNative&&r()})($t);var dc={},uc={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.resetWebSockets=e.sharedWebSockets=void 0,e.sharedWebSockets={};var t=function(n){if(n&&e.sharedWebSockets.hasOwnProperty(n))delete e.sharedWebSockets[n];else for(var s in e.sharedWebSockets)e.sharedWebSockets.hasOwnProperty(s)&&delete e.sharedWebSockets[s]};e.resetWebSockets=t})(uc);var hc={},tn={};Object.defineProperty(tn,"__esModule",{value:!0});tn.setUpSocketIOPing=tn.appendQueryParams=tn.parseSocketIOUrl=void 0;var kl=$t,P4=function(e){if(e){var t=/^https|wss/.test(e),n=e.replace(/^(https?|wss?)(:\/\/)?/,""),s=n.replace(/\/$/,""),r=t?"wss":"ws";return"".concat(r,"://").concat(s).concat(kl.SOCKET_IO_PATH)}else if(e===""){var t=/^https/.test(window.location.protocol),r=t?"wss":"ws",i=window.location.port?":".concat(window.location.port):"";return"".concat(r,"://").concat(window.location.hostname).concat(i).concat(kl.SOCKET_IO_PATH)}return e};tn.parseSocketIOUrl=P4;var O4=function(e,t){t===void 0&&(t={});var n=/\?([\w]+=[\w]+)/,s=n.test(e),r="".concat(Object.entries(t).reduce(function(i,o){var l=o[0],c=o[1];return i+"".concat(l,"=").concat(c,"&")},"").slice(0,-1));return"".concat(e).concat(s?"&":"?").concat(r)};tn.appendQueryParams=O4;var R4=function(e,t){t===void 0&&(t=kl.SOCKET_IO_PING_INTERVAL);var n=function(){return e(kl.SOCKET_IO_PING_CODE)};return window.setInterval(n,t)};tn.setUpSocketIOPing=R4;var fc={};Object.defineProperty(fc,"__esModule",{value:!0});fc.heartbeat=L4;var wd=$t;function D4(e){return Array.isArray(e)?e.reduce(function(t,n){return t.current>n.current?t:n}).current:e.current}function L4(e,t,n){var s=n||{},r=s.interval,i=r===void 0?wd.DEFAULT_HEARTBEAT.interval:r,o=s.timeout,l=o===void 0?wd.DEFAULT_HEARTBEAT.timeout:o,c=s.message,d=c===void 0?wd.DEFAULT_HEARTBEAT.message:c,u=Math.max(100,i/10),h=Date.now(),f=setInterval(function(){var p=Date.now(),b=D4(t);if(b+l<=p)console.warn("Heartbeat timed out, closing connection, last message received ".concat(p-b,"ms ago, last ping sent ").concat(p-h,"ms ago")),e.close();else if(b+i<=p&&h+i<=p)try{typeof d=="function"?e.send(d()):e.send(d),h=p}catch(g){console.error("Heartbeat failed, closing connection",g instanceof Error?g.message:g),e.close()}},u);return e.addEventListener("close",function(){clearInterval(f)}),function(){}}var zr={},pc={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.resetSubscribers=e.removeSubscriber=e.addSubscriber=e.hasSubscribers=e.getSubscribers=void 0;var t={},n=[],s=function(c){return(0,e.hasSubscribers)(c)?Array.from(t[c]):n};e.getSubscribers=s;var r=function(c){var d;return((d=t[c])===null||d===void 0?void 0:d.size)>0};e.hasSubscribers=r;var i=function(c,d){t[c]=t[c]||new Set,t[c].add(d)};e.addSubscriber=i;var o=function(c,d){t[c].delete(d)};e.removeSubscriber=o;var l=function(c){if(c&&t.hasOwnProperty(c))delete t[c];else for(var d in t)t.hasOwnProperty(d)&&delete t[d]};e.resetSubscribers=l})(pc);Object.defineProperty(zr,"__esModule",{value:!0});zr.assertIsWebSocket=F4;zr.resetGlobalState=I4;var A4=uc,z4=pc;function F4(e,t){if(!t&&!(e instanceof WebSocket))throw new Error("")}function I4(e){(0,z4.resetSubscribers)(e),(0,A4.resetWebSockets)(e)}var Sl=ve&&ve.__assign||function(){return Sl=Object.assign||function(e){for(var t,n=1,s=arguments.length;n<s;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Sl.apply(this,arguments)};Object.defineProperty(hc,"__esModule",{value:!0});hc.attachListeners=void 0;var W4=tn,$4=fc,Jt=$t,B4=zr,H4=function(e,t,n,s){e.onmessage=function(r){var i;t.current.onMessage&&t.current.onMessage(r),typeof(s==null?void 0:s.current)=="number"&&(s.current=Date.now()),!(typeof t.current.filter=="function"&&t.current.filter(r)!==!0)&&(t.current.heartbeat&&typeof t.current.heartbeat!="boolean"&&((i=t.current.heartbeat)===null||i===void 0?void 0:i.returnMessage)===r.data||n(r))}},U4=function(e,t,n,s,r){e.onopen=function(i){if(t.current.onOpen&&t.current.onOpen(i),s.current=0,n(Jt.ReadyState.OPEN),t.current.heartbeat&&e instanceof WebSocket){var o=typeof t.current.heartbeat=="boolean"?void 0:t.current.heartbeat;r.current=Date.now(),(0,$4.heartbeat)(e,r,o)}}},V4=function(e,t,n,s,r){if(Jt.isEventSourceSupported&&e instanceof EventSource)return function(){};(0,B4.assertIsWebSocket)(e,t.current.skipAssert);var i;return e.onclose=function(o){var l;if(t.current.onClose&&t.current.onClose(o),n(Jt.ReadyState.CLOSED),t.current.shouldReconnect&&t.current.shouldReconnect(o)){var c=(l=t.current.reconnectAttempts)!==null&&l!==void 0?l:Jt.DEFAULT_RECONNECT_LIMIT;if(r.current<c){var d=typeof t.current.reconnectInterval=="function"?t.current.reconnectInterval(r.current):t.current.reconnectInterval;i=window.setTimeout(function(){r.current++,s()},d??Jt.DEFAULT_RECONNECT_INTERVAL_MS)}else t.current.onReconnectStop&&t.current.onReconnectStop(c),console.warn("Max reconnect attempts of ".concat(c," exceeded"))}},function(){return i&&window.clearTimeout(i)}},Y4=function(e,t,n,s,r){var i;return e.onerror=function(o){var l;if(t.current.onError&&t.current.onError(o),Jt.isEventSourceSupported&&e instanceof EventSource&&(t.current.onClose&&t.current.onClose(Sl(Sl({},o),{code:1006,reason:"An error occurred with the EventSource: ".concat(o),wasClean:!1})),n(Jt.ReadyState.CLOSED),e.close()),t.current.retryOnError)if(r.current<((l=t.current.reconnectAttempts)!==null&&l!==void 0?l:Jt.DEFAULT_RECONNECT_LIMIT)){var c=typeof t.current.reconnectInterval=="function"?t.current.reconnectInterval(r.current):t.current.reconnectInterval;i=window.setTimeout(function(){r.current++,s()},c??Jt.DEFAULT_RECONNECT_INTERVAL_MS)}else t.current.onReconnectStop&&t.current.onReconnectStop(t.current.reconnectAttempts),console.warn("Max reconnect attempts of ".concat(t.current.reconnectAttempts," exceeded"))},function(){return i&&window.clearTimeout(i)}},X4=function(e,t,n,s,r,i,o){var l=t.setLastMessage,c=t.setReadyState,d,u,h;return n.current.fromSocketIO&&(d=(0,W4.setUpSocketIOPing)(o)),H4(e,n,l,i),U4(e,n,c,r,i),u=V4(e,n,c,s,r),h=Y4(e,n,c,s,r),function(){c(Jt.ReadyState.CLOSING),u(),h(),e.close(),d&&clearInterval(d)}};hc.attachListeners=X4;var mc={},Cl=ve&&ve.__assign||function(){return Cl=Object.assign||function(e){for(var t,n=1,s=arguments.length;n<s;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Cl.apply(this,arguments)};Object.defineProperty(mc,"__esModule",{value:!0});mc.attachSharedListeners=void 0;var q4=uc,Ts=$t,ra=pc,G4=tn,K4=fc,Q4=function(e,t,n){e.onmessage=function(s){(0,ra.getSubscribers)(t).forEach(function(r){var i;r.optionsRef.current.onMessage&&r.optionsRef.current.onMessage(s),typeof((i=r==null?void 0:r.lastMessageTime)===null||i===void 0?void 0:i.current)=="number"&&(r.lastMessageTime.current=Date.now()),!(typeof r.optionsRef.current.filter=="function"&&r.optionsRef.current.filter(s)!==!0)&&(n&&typeof n!="boolean"&&(n==null?void 0:n.returnMessage)===s.data||r.setLastMessage(s))})}},J4=function(e,t,n){e.onopen=function(s){var r=(0,ra.getSubscribers)(t);r.forEach(function(i){i.reconnectCount.current=0,i.optionsRef.current.onOpen&&i.optionsRef.current.onOpen(s),i.setReadyState(Ts.ReadyState.OPEN),n&&e instanceof WebSocket&&(i.lastMessageTime.current=Date.now())}),n&&e instanceof WebSocket&&(0,K4.heartbeat)(e,r.map(function(i){return i.lastMessageTime}),typeof n=="boolean"?void 0:n)}},Z4=function(e,t){e instanceof WebSocket&&(e.onclose=function(n){(0,ra.getSubscribers)(t).forEach(function(s){s.optionsRef.current.onClose&&s.optionsRef.current.onClose(n),s.setReadyState(Ts.ReadyState.CLOSED)}),delete q4.sharedWebSockets[t],(0,ra.getSubscribers)(t).forEach(function(s){var r;if(s.optionsRef.current.shouldReconnect&&s.optionsRef.current.shouldReconnect(n)){var i=(r=s.optionsRef.current.reconnectAttempts)!==null&&r!==void 0?r:Ts.DEFAULT_RECONNECT_LIMIT;if(s.reconnectCount.current<i){var o=typeof s.optionsRef.current.reconnectInterval=="function"?s.optionsRef.current.reconnectInterval(s.reconnectCount.current):s.optionsRef.current.reconnectInterval;setTimeout(function(){s.reconnectCount.current++,s.reconnect.current()},o??Ts.DEFAULT_RECONNECT_INTERVAL_MS)}else s.optionsRef.current.onReconnectStop&&s.optionsRef.current.onReconnectStop(s.optionsRef.current.reconnectAttempts),console.warn("Max reconnect attempts of ".concat(i," exceeded"))}})})},eE=function(e,t){e.onerror=function(n){(0,ra.getSubscribers)(t).forEach(function(s){s.optionsRef.current.onError&&s.optionsRef.current.onError(n),Ts.isEventSourceSupported&&e instanceof EventSource&&(s.optionsRef.current.onClose&&s.optionsRef.current.onClose(Cl(Cl({},n),{code:1006,reason:"An error occurred with the EventSource: ".concat(n),wasClean:!1})),s.setReadyState(Ts.ReadyState.CLOSED))}),Ts.isEventSourceSupported&&e instanceof EventSource&&e.close()}},tE=function(e,t,n,s){var r;return n.current.fromSocketIO&&(r=(0,G4.setUpSocketIOPing)(s)),Q4(e,t,n.current.heartbeat),Z4(e,t),J4(e,t,n.current.heartbeat),eE(e,t),function(){r&&clearInterval(r)}};mc.attachSharedListeners=tE;Object.defineProperty(dc,"__esModule",{value:!0});dc.createOrJoinSocket=void 0;var On=uc,ci=$t,nE=hc,sE=mc,$u=pc,rE=function(e,t,n,s,r){return function(){if((0,$u.removeSubscriber)(e,t),!(0,$u.hasSubscribers)(e)){try{var i=On.sharedWebSockets[e];i instanceof WebSocket&&(i.onclose=function(o){n.current.onClose&&n.current.onClose(o),s(ci.ReadyState.CLOSED)}),i.close()}catch{}r&&r(),delete On.sharedWebSockets[e]}}},iE=function(e,t,n,s,r,i,o,l,c){if(!ci.isEventSourceSupported&&s.current.eventSourceOptions)throw ci.isReactNative?new Error("EventSource is not supported in ReactNative"):new Error("EventSource is not supported");if(s.current.share){var d=null;On.sharedWebSockets[t]===void 0?(On.sharedWebSockets[t]=s.current.eventSourceOptions?new EventSource(t,s.current.eventSourceOptions):new WebSocket(t,s.current.protocols),e.current=On.sharedWebSockets[t],n(ci.ReadyState.CONNECTING),d=(0,sE.attachSharedListeners)(On.sharedWebSockets[t],t,s,c)):(e.current=On.sharedWebSockets[t],n(On.sharedWebSockets[t].readyState));var u={setLastMessage:r,setReadyState:n,optionsRef:s,reconnectCount:o,lastMessageTime:l,reconnect:i};return(0,$u.addSubscriber)(t,u),rE(t,u,s,n,d)}else{if(e.current=s.current.eventSourceOptions?new EventSource(t,s.current.eventSourceOptions):new WebSocket(t,s.current.protocols),n(ci.ReadyState.CONNECTING),!e.current)throw new Error("WebSocket failed to be created");return(0,nE.attachListeners)(e.current,{setLastMessage:r,setReadyState:n},s,i.current,o,l,c)}};dc.createOrJoinSocket=iE;var Wv={};(function(e){var t=ve&&ve.__awaiter||function(c,d,u,h){function f(p){return p instanceof u?p:new u(function(b){b(p)})}return new(u||(u=Promise))(function(p,b){function g(m){try{x(h.next(m))}catch(v){b(v)}}function y(m){try{x(h.throw(m))}catch(v){b(v)}}function x(m){m.done?p(m.value):f(m.value).then(g,y)}x((h=h.apply(c,d||[])).next())})},n=ve&&ve.__generator||function(c,d){var u={label:0,sent:function(){if(p[0]&1)throw p[1];return p[1]},trys:[],ops:[]},h,f,p,b=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return b.next=g(0),b.throw=g(1),b.return=g(2),typeof Symbol=="function"&&(b[Symbol.iterator]=function(){return this}),b;function g(x){return function(m){return y([x,m])}}function y(x){if(h)throw new TypeError("Generator is already executing.");for(;b&&(b=0,x[0]&&(u=0)),u;)try{if(h=1,f&&(p=x[0]&2?f.return:x[0]?f.throw||((p=f.return)&&p.call(f),0):f.next)&&!(p=p.call(f,x[1])).done)return p;switch(f=0,p&&(x=[x[0]&2,p.value]),x[0]){case 0:case 1:p=x;break;case 4:return u.label++,{value:x[1],done:!1};case 5:u.label++,f=x[1],x=[0];continue;case 7:x=u.ops.pop(),u.trys.pop();continue;default:if(p=u.trys,!(p=p.length>0&&p[p.length-1])&&(x[0]===6||x[0]===2)){u=0;continue}if(x[0]===3&&(!p||x[1]>p[0]&&x[1]<p[3])){u.label=x[1];break}if(x[0]===6&&u.label<p[1]){u.label=p[1],p=x;break}if(p&&u.label<p[2]){u.label=p[2],u.ops.push(x);break}p[2]&&u.ops.pop(),u.trys.pop();continue}x=d.call(c,u)}catch(m){x=[6,m],f=0}finally{h=p=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}},s=ve&&ve.__spreadArray||function(c,d,u){if(u||arguments.length===2)for(var h=0,f=d.length,p;h<f;h++)(p||!(h in d))&&(p||(p=Array.prototype.slice.call(d,0,h)),p[h]=d[h]);return c.concat(p||Array.prototype.slice.call(d))};Object.defineProperty(e,"__esModule",{value:!0}),e.getUrl=void 0;var r=tn,i=$t,o=function(c){return new Promise(function(d){return window.setTimeout(d,c)})},l=function(c,d){for(var u=[],h=2;h<arguments.length;h++)u[h-2]=arguments[h];return t(void 0,s([c,d],u,!0),void 0,function(f,p,b){var g,y,x,m,v,j,_,N;return b===void 0&&(b=0),n(this,function(S){switch(S.label){case 0:if(typeof f!="function")return[3,10];S.label=1;case 1:return S.trys.push([1,3,,9]),[4,f()];case 2:return g=S.sent(),[3,9];case 3:return S.sent(),p.current.retryOnError?(y=(j=p.current.reconnectAttempts)!==null&&j!==void 0?j:i.DEFAULT_RECONNECT_LIMIT,b<y?(x=typeof p.current.reconnectInterval=="function"?p.current.reconnectInterval(b):p.current.reconnectInterval,[4,o(x??i.DEFAULT_RECONNECT_INTERVAL_MS)]):[3,5]):[3,7];case 4:return S.sent(),[2,(0,e.getUrl)(f,p,b+1)];case 5:return(N=(_=p.current).onReconnectStop)===null||N===void 0||N.call(_,b),[2,null];case 6:return[3,8];case 7:return[2,null];case 8:return[3,9];case 9:return[3,11];case 10:g=f,S.label=11;case 11:return m=p.current.fromSocketIO?(0,r.parseSocketIOUrl)(g):g,v=p.current.queryParams?(0,r.appendQueryParams)(m,p.current.queryParams):m,[2,v]}})})};e.getUrl=l})(Wv);var $v={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.websocketWrapper=void 0;var t=function(n,s){return new Proxy(n,{get:function(r,i){var o=r[i];return i==="reconnect"?s:typeof o=="function"?(console.error("Calling methods directly on the websocket is not supported at this moment. You must use the methods returned by useWebSocket."),function(){}):o},set:function(r,i,o){return/^on/.test(i)?(console.warn("The websocket's event handlers should be defined through the options object passed into useWebSocket."),!1):(r[i]=o,!0)}})};e.websocketWrapper=t,e.default=e.websocketWrapper})($v);var Rn=ve&&ve.__assign||function(){return Rn=Object.assign||function(e){for(var t,n=1,s=arguments.length;n<s;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Rn.apply(this,arguments)},aE=ve&&ve.__awaiter||function(e,t,n,s){function r(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(u){try{d(s.next(u))}catch(h){o(h)}}function c(u){try{d(s.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):r(u.value).then(l,c)}d((s=s.apply(e,t||[])).next())})},oE=ve&&ve.__generator||function(e,t){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},s,r,i,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=l(0),o.throw=l(1),o.return=l(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(d){return function(u){return c([d,u])}}function c(d){if(s)throw new TypeError("Generator is already executing.");for(;o&&(o=0,d[0]&&(n=0)),n;)try{if(s=1,r&&(i=d[0]&2?r.return:d[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,d[1])).done)return i;switch(r=0,i&&(d=[d[0]&2,i.value]),d[0]){case 0:case 1:i=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,r=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(d[0]===6||d[0]===2)){n=0;continue}if(d[0]===3&&(!i||d[1]>i[0]&&d[1]<i[3])){n.label=d[1];break}if(d[0]===6&&n.label<i[1]){n.label=i[1],i=d;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(d);break}i[2]&&n.ops.pop(),n.trys.pop();continue}d=t.call(e,n)}catch(u){d=[6,u],r=0}finally{s=i=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},lE=ve&&ve.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ar,"__esModule",{value:!0});Ar.useWebSocket=void 0;var He=w,jd=Gg,Yt=$t,cE=dc,dE=Wv,uE=lE($v),N0=zr,hE=function(e,t,n){t===void 0&&(t=Yt.DEFAULT_OPTIONS),n===void 0&&(n=!0);var s=(0,He.useState)(null),r=s[0],i=s[1],o=(0,He.useState)({}),l=o[0],c=o[1],d=(0,He.useMemo)(function(){if(!t.disableJson&&r)try{return JSON.parse(r.data)}catch{return Yt.UNPARSABLE_JSON_OBJECT}return null},[r,t.disableJson]),u=(0,He.useRef)(null),h=(0,He.useRef)(null),f=(0,He.useRef)(function(){}),p=(0,He.useRef)(0),b=(0,He.useRef)(Date.now()),g=(0,He.useRef)([]),y=(0,He.useRef)(null),x=(0,He.useRef)(t);x.current=t;var m=u.current&&l[u.current]!==void 0?l[u.current]:e!==null&&n===!0?Yt.ReadyState.CONNECTING:Yt.ReadyState.UNINSTANTIATED,v=t.queryParams?JSON.stringify(t.queryParams):null,j=(0,He.useCallback)(function(S,T){var M;if(T===void 0&&(T=!0),Yt.isEventSourceSupported&&h.current instanceof EventSource){console.warn("Unable to send a message from an eventSource");return}((M=h.current)===null||M===void 0?void 0:M.readyState)===Yt.ReadyState.OPEN?((0,N0.assertIsWebSocket)(h.current,x.current.skipAssert),h.current.send(S)):T&&g.current.push(S)},[]),_=(0,He.useCallback)(function(S,T){T===void 0&&(T=!0),j(JSON.stringify(S),T)},[j]),N=(0,He.useCallback)(function(){return x.current.share!==!0||Yt.isEventSourceSupported&&h.current instanceof EventSource?h.current:(y.current===null&&h.current&&((0,N0.assertIsWebSocket)(h.current,x.current.skipAssert),y.current=(0,uE.default)(h.current,f)),y.current)},[]);return(0,He.useEffect)(function(){if(e!==null&&n===!0){var S,T=!1,M=!0,D=function(){return aE(void 0,void 0,void 0,function(){var C,A,$;return oE(this,function(Y){switch(Y.label){case 0:return C=u,[4,(0,dE.getUrl)(e,x)];case 1:return C.current=Y.sent(),u.current===null?(console.error("Failed to get a valid URL. WebSocket connection aborted."),u.current="ABORTED",(0,jd.flushSync)(function(){return c(function(q){return Rn(Rn({},q),{ABORTED:Yt.ReadyState.CLOSED})})}),[2]):(A=function(q){T||(0,jd.flushSync)(function(){return i(q)})},$=function(q){T||(0,jd.flushSync)(function(){return c(function(G){var J;return Rn(Rn({},G),u.current&&(J={},J[u.current]=q,J))})})},M&&(S=(0,cE.createOrJoinSocket)(h,u.current,$,x,A,f,p,b,j)),[2])}})})};return f.current=function(){T||(y.current&&(y.current=null),S==null||S(),D())},D(),function(){T=!0,M=!1,y.current&&(y.current=null),S==null||S(),i(null)}}else(e===null||n===!1)&&(p.current=0,c(function(C){var A;return Rn(Rn({},C),u.current&&(A={},A[u.current]=Yt.ReadyState.CLOSED,A))}))},[e,n,v,j]),(0,He.useEffect)(function(){m===Yt.ReadyState.OPEN&&g.current.splice(0).forEach(function(S){j(S)})},[m]),{sendMessage:j,sendJsonMessage:_,lastMessage:r,lastJsonMessage:d,readyState:m,getWebSocket:N}};Ar.useWebSocket=hE;var xc={},El=ve&&ve.__assign||function(){return El=Object.assign||function(e){for(var t,n=1,s=arguments.length;n<s;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},El.apply(this,arguments)};Object.defineProperty(xc,"__esModule",{value:!0});xc.useSocketIO=void 0;var k0=w,fE=Ar,pE=$t,_d={type:"empty",payload:null},mE=function(e){if(!e||!e.data)return _d;var t=e.data.match(/\[.*]/);if(!t)return _d;var n=JSON.parse(t);return!Array.isArray(n)||!n[1]?_d:{type:n[0],payload:n[1]}},xE=function(e,t,n){t===void 0&&(t=pE.DEFAULT_OPTIONS),n===void 0&&(n=!0);var s=(0,k0.useMemo)(function(){return El(El({},t),{fromSocketIO:!0})},[]),r=(0,fE.useWebSocket)(e,s,n),i=r.sendMessage,o=r.sendJsonMessage,l=r.lastMessage,c=r.readyState,d=r.getWebSocket,u=(0,k0.useMemo)(function(){return mE(l)},[l]);return{sendMessage:i,sendJsonMessage:o,lastMessage:u,lastJsonMessage:u,readyState:c,getWebSocket:d}};xc.useSocketIO=xE;var gc={},Tl=ve&&ve.__assign||function(){return Tl=Object.assign||function(e){for(var t,n=1,s=arguments.length;n<s;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Tl.apply(this,arguments)},gE=ve&&ve.__rest||function(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(e);r<s.length;r++)t.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(e,s[r])&&(n[s[r]]=e[s[r]]);return n};Object.defineProperty(gc,"__esModule",{value:!0});gc.useEventSource=void 0;var S0=w,bE=Ar,C0=$t,vE=function(e,t,n){t===void 0&&(t=C0.DEFAULT_EVENT_SOURCE_OPTIONS);var s=t.withCredentials,r=t.events,i=gE(t,["withCredentials","events"]);n===void 0&&(n=!0);var o=Tl(Tl({},i),{eventSourceOptions:{withCredentials:s}}),l=(0,S0.useRef)(C0.EMPTY_EVENT_HANDLERS);r&&(l.current=r);var c=(0,bE.useWebSocket)(e,o,n),d=c.lastMessage,u=c.readyState,h=c.getWebSocket;return(0,S0.useEffect)(function(){d!=null&&d.type&&Object.entries(l.current).forEach(function(f){var p=f[0],b=f[1];p===d.type&&b(d)})},[d]),{lastEvent:d,readyState:u,getEventSource:h}};gc.useEventSource=vE;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.resetGlobalState=e.useEventSource=e.ReadyState=e.useSocketIO=e.default=void 0;var t=Ar;Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.useWebSocket}});var n=xc;Object.defineProperty(e,"useSocketIO",{enumerable:!0,get:function(){return n.useSocketIO}});var s=$t;Object.defineProperty(e,"ReadyState",{enumerable:!0,get:function(){return s.ReadyState}});var r=gc;Object.defineProperty(e,"useEventSource",{enumerable:!0,get:function(){return r.useEventSource}});var i=zr;Object.defineProperty(e,"resetGlobalState",{enumerable:!0,get:function(){return i.resetGlobalState}})})(Iv);const yE=A0(Iv),Ns=de("scripts/fetchScripts",async(e,{rejectWithValue:t})=>{try{return await(await W("/api/mgmt/scripts/")).json()}catch(n){return t(n.message)}}),Po=de("scripts/runScript",async({name:e,args:t},{rejectWithValue:n})=>{var s;try{const r=(s=document.cookie.match(/csrftoken=([^;]+)/))==null?void 0:s[1],o=await(await W("/api/mgmt/scripts/run/",{method:"POST",body:JSON.stringify({name:e,args:t}),headers:{"Content-Type":"application/json","X-CSRFToken":r}})).json();return o.success?o:n(o.error)}catch(r){return n(r.message)}}),Oo=de("scripts/stopScript",async(e,{rejectWithValue:t})=>{var n;try{const s=(n=document.cookie.match(/csrftoken=([^;]+)/))==null?void 0:n[1],i=await(await W("/api/mgmt/scripts/stop/",{method:"POST",body:JSON.stringify({script_id:e}),headers:{"Content-Type":"application/json","X-CSRFToken":s}})).json();return i.success?e:t(i.error)}catch(s){return t(s.message)}}),Bv=Sn({name:"scripts",initialState:{available:[],active:[],status:"idle",error:null,runStatus:"idle",stopStatus:"idle"},reducers:{clearScriptError:e=>{e.error=null}},extraReducers:e=>{e.addCase(Ns.pending,t=>{t.status==="idle"&&(t.status="loading")}),e.addCase(Ns.fulfilled,(t,n)=>{var s,r;t.status="succeeded",t.available=Array.isArray((s=n.payload)==null?void 0:s.available)?n.payload.available:[],t.active=Array.isArray((r=n.payload)==null?void 0:r.active)?n.payload.active:[]}),e.addCase(Ns.rejected,(t,n)=>{t.status="failed",t.error=n.payload}),e.addCase(Po.pending,t=>{t.runStatus="loading"}),e.addCase(Po.fulfilled,t=>{t.runStatus="succeeded"}),e.addCase(Po.rejected,(t,n)=>{t.runStatus="failed",t.error=n.payload}),e.addCase(Oo.pending,t=>{t.stopStatus="loading"}),e.addCase(Oo.fulfilled,(t,n)=>{t.stopStatus="succeeded"}),e.addCase(Oo.rejected,(t,n)=>{t.stopStatus="failed",t.error=n.payload})}}),{clearScriptError:TT}=Bv.actions,wE=e=>e.scripts.available||[],jE=e=>e.scripts.active||[],_E=e=>e.scripts.status,NE=Bv.reducer,kE=({scriptId:e,scriptName:t,onClose:n})=>{const[s,r]=w.useState([]),[i,o]=w.useState("connecting"),l=w.useRef(null),c=dt(),d=window.location.protocol==="https:"?"wss:":"ws:",u=window.location.host,h=`${d}//${u}/ws/management/scripts/${e}/`,{lastMessage:f}=yE(h,{shouldReconnect:()=>!0,reconnectAttempts:10,reconnectInterval:3e3,onOpen:()=>o("connected"),onClose:()=>o("disconnected")});w.useEffect(()=>{if(f!==null)try{const b=JSON.parse(f.data);b.type==="log"?r(g=>[...g,b.message]):b.type==="status"&&o(b.status)}catch(b){console.error("WS Parse Error",b)}},[f]),w.useEffect(()=>{l.current&&(l.current.scrollTop=l.current.scrollHeight)},[s]);const p=async()=>{confirm("Are you sure you want to kill this process?")&&await c(Oo(e)).unwrap()};return a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4",children:a.jsxs("div",{className:"bg-slate-900 border border-slate-700 w-full max-w-5xl h-[80vh] rounded-xl flex flex-col shadow-2xl overflow-hidden",children:[a.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-slate-800 border-b border-slate-700",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(wi,{size:18,className:"text-brand-400"}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-white font-mono font-bold text-sm",children:t||"Unknown Script"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:`w-2 h-2 rounded-full ${i==="connected"?"bg-green-500":"bg-red-500"}`}),a.jsx("span",{className:"text-xs text-slate-400 uppercase tracking-wider",children:i})]})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[i!=="completed"&&i!=="failed"&&a.jsxs("button",{onClick:p,className:"flex items-center gap-2 px-3 py-1.5 bg-red-500/10 text-red-400 hover:bg-red-500/20 border border-red-500/20 rounded text-xs font-bold transition",children:[a.jsx(SN,{size:14})," STOP"]}),a.jsx("button",{onClick:n,className:"p-1 hover:bg-white/10 rounded text-slate-400 hover:text-white transition",children:a.jsx(ct,{size:20})})]})]}),a.jsxs("div",{ref:l,className:"flex-grow bg-black p-4 overflow-y-auto font-mono text-xs md:text-sm text-green-400 leading-relaxed custom-scrollbar",children:[s.length===0&&a.jsx("span",{className:"text-slate-600 italic",children:"Connecting to console stream..."}),s.map((b,g)=>a.jsx("div",{className:"whitespace-pre-wrap break-all",children:b},g))]})]})})},SE=()=>{const e=dt(),t=U(wE)||[],n=U(jE)||[],s=U(_E),r=U(m=>m.scripts.error),[i,o]=w.useState(null),[l,c]=w.useState(""),[d,u]=w.useState(!1),[h,f]=w.useState(null),[p,b]=w.useState(null);w.useEffect(()=>{e(Ns());const m=setInterval(()=>{e(Ns())},1e4);return()=>clearInterval(m)},[e]);const g=m=>{o(m),c("")},y=async()=>{if(i)try{const m=await e(Po({name:i.name,args:l})).unwrap();f(m.script_id),b(i.name),u(!0),o(null),e(Ns())}catch(m){alert("Failed to start: "+m)}},x=m=>{f(m.id),b(m.name),u(!0)};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-white tracking-tight",children:"System Scripts"}),a.jsx("p",{className:"text-slate-400",children:"Run backend management commands directly from the dashboard."})]}),a.jsx("button",{onClick:()=>e(Ns()),className:"p-2 bg-white/5 hover:bg-white/10 rounded-lg text-slate-400 hover:text-white transition",children:a.jsx(Jn,{size:20,className:s==="loading"?"animate-spin":""})})]}),s==="failed"&&a.jsxs("div",{className:"bg-red-500/10 border border-red-500/20 text-red-400 p-4 rounded-xl flex items-center gap-3",children:[a.jsx(Zn,{size:20}),a.jsxs("span",{children:["Error loading scripts: ",r||"Unknown error"]})]}),n&&n.length>0&&a.jsxs("div",{className:"bg-slate-800/50 border border-slate-700 rounded-xl p-4",children:[a.jsx("h3",{className:"text-xs font-bold text-slate-500 uppercase tracking-widest mb-3",children:"Currently Running"}),a.jsx("div",{className:"space-y-2",children:n.map(m=>a.jsxs("div",{className:"flex items-center justify-between bg-slate-900/50 p-3 rounded-lg border border-slate-700/50",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:`w-2 h-2 rounded-full ${m.status==="running"?"bg-green-500 animate-pulse":"bg-slate-500"}`}),a.jsxs("div",{children:[a.jsx("span",{className:"text-white font-mono font-bold",children:m.name}),a.jsx("span",{className:"text-slate-500 text-xs ml-2 font-mono",children:m.args})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-xs text-slate-400 mr-2",children:m.status}),a.jsxs("button",{onClick:()=>x(m),className:"flex items-center gap-1.5 px-3 py-1.5 bg-brand-500/10 text-brand-400 hover:bg-brand-500/20 border border-brand-500/20 rounded text-xs font-bold transition",children:[a.jsx(wi,{size:14})," Console"]})]})]},m.id))})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:s==="loading"&&(!t||t.length===0)?a.jsx("div",{className:"text-slate-500 col-span-full py-10 text-center",children:"Loading scripts..."}):(t||[]).length===0&&s==="succeeded"?a.jsxs("div",{className:"text-slate-500 col-span-full py-10 text-center flex flex-col items-center gap-2",children:[a.jsx(wi,{size:32,className:"opacity-20"}),a.jsx("span",{children:"No management scripts found in core/waitlist_data."})]}):(t||[]).map(m=>a.jsxs("div",{className:`group border rounded-xl p-5 transition flex flex-col h-full ${m.is_dangerous?"bg-red-500/5 hover:bg-red-500/10 border-red-500/10 hover:border-red-500/30":"bg-white/5 hover:bg-white/10 border-white/5 hover:border-white/20"}`,children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsx("div",{className:`p-2 rounded-lg border ${m.is_dangerous?"bg-red-900/20 text-red-400 border-red-500/20":"bg-slate-900 text-brand-400 border-white/5"}`,children:m.is_dangerous?a.jsx(Zn,{size:20}):a.jsx(wi,{size:20})}),a.jsx("span",{className:"text-[10px] font-bold bg-slate-800 text-slate-400 px-2 py-1 rounded border border-white/5",children:m.app})]}),a.jsx("h3",{className:"text-white font-bold text-lg mb-1",children:m.name}),a.jsx("p",{className:"text-slate-400 text-sm mb-4 flex-grow line-clamp-3",children:m.help}),m.arguments&&m.arguments.length>0&&a.jsxs("div",{className:"mb-4 space-y-1",children:[a.jsx("span",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest",children:"Arguments"}),a.jsx("div",{className:"flex flex-wrap gap-1",children:m.arguments.map((v,j)=>a.jsx("span",{className:"text-xs bg-black/40 px-1.5 py-0.5 rounded text-slate-300 font-mono border border-white/5",title:v.help,children:v.name},j))})]}),a.jsxs("button",{onClick:()=>g(m),className:`w-full py-2 font-bold rounded-lg transition flex items-center justify-center gap-2 group-hover:shadow-lg ${m.is_dangerous?"bg-red-600 hover:bg-red-500 text-white group-hover:shadow-red-500/20":"bg-brand-600 hover:bg-brand-500 text-white group-hover:shadow-brand-500/20"}`,children:[a.jsx(nm,{size:16})," Run Script"]})]},m.name))}),i&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4",children:a.jsx("div",{className:`bg-slate-900 border w-full max-w-lg rounded-xl shadow-2xl overflow-hidden animate-in fade-in zoom-in duration-200 ${i.is_dangerous?"border-red-500/30":"border-slate-700"}`,children:a.jsxs("div",{className:"p-6",children:[a.jsxs("h2",{className:"text-xl font-bold text-white mb-2 flex items-center gap-2",children:[i.is_dangerous&&a.jsx(Zn,{className:"text-red-500",size:24}),"Run ",a.jsx("span",{className:"font-mono text-brand-400",children:i.name})]}),a.jsx("p",{className:"text-slate-400 text-sm mb-4",children:"Configure arguments for this command."}),i.arguments&&i.arguments.length>0?a.jsxs("div",{className:"mb-6 p-3 bg-black/30 rounded-lg border border-white/5 space-y-2 max-h-40 overflow-y-auto custom-scrollbar",children:[a.jsx("h4",{className:"text-xs font-bold text-slate-500 uppercase",children:"Available Options"}),i.arguments.map((m,v)=>a.jsxs("div",{className:"text-xs",children:[a.jsx("span",{className:"font-mono text-brand-400 font-bold mr-2",children:m.name}),a.jsx("span",{className:"text-slate-400",children:m.help})]},v))]}):a.jsx("p",{className:"text-xs text-slate-500 mb-6 italic",children:"No arguments detected."}),a.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-wider mb-2",children:"Arguments Input"}),a.jsx("input",{type:"text",value:l,onChange:m=>c(m.target.value),placeholder:"e.g. --users 5 --loops 10",className:"w-full bg-black/50 border border-slate-700 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-brand-500 focus:ring-1 focus:ring-brand-500 transition font-mono text-sm mb-6"}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("button",{onClick:()=>o(null),className:"flex-1 py-2.5 bg-slate-800 hover:bg-slate-700 text-slate-300 font-bold rounded-lg transition",children:"Cancel"}),a.jsxs("button",{onClick:y,className:`flex-1 py-2.5 font-bold rounded-lg transition flex items-center justify-center gap-2 ${i.is_dangerous?"bg-red-600 hover:bg-red-500 text-white":"bg-brand-600 hover:bg-brand-500 text-white"}`,children:[a.jsx(nm,{size:16})," Execute"]})]})]})})}),d&&h&&a.jsx(kE,{scriptId:h,scriptName:p,onClose:()=>{u(!1),f(null)}})]})},Ei=de("command/fetchCommandWorkflows",async({limit:e=20,offset:t=0}={},{rejectWithValue:n})=>{try{return await(await W(`/api/management/command/?limit=${e}&offset=${t}`)).json()}catch(s){return n(s.message)}}),Hv=de("command/deleteCommandWorkflow",async(e,{rejectWithValue:t})=>{var n;try{const s=(n=document.cookie.match(/csrftoken=([^;]+)/))==null?void 0:n[1],r=await W(`/api/management/command/${e}/`,{method:"DELETE",headers:{"Content-Type":"application/json","X-CSRFToken":s}}),i=await r.json();if(!r.ok||!i.success)throw new Error(i.error||"Delete failed");return e}catch(s){return t(s.message)}}),Uv=de("command/createCommandWorkflow",async(e,{rejectWithValue:t})=>{var n;try{const s=(n=document.cookie.match(/csrftoken=([^;]+)/))==null?void 0:n[1],r=await W("/api/management/command/",{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":s},body:JSON.stringify(e)}),i=await r.json();if(!r.ok)throw new Error(i.error||"Request failed");return i}catch(s){return t(s.message)}}),Ti=de("command/updateCommandStep",async({entryId:e,step:t,value:n,meta:s},{rejectWithValue:r})=>{var i;try{const o=(i=document.cookie.match(/csrftoken=([^;]+)/))==null?void 0:i[1],l=await W(`/api/management/command/${e}/step/`,{method:"PATCH",headers:{"Content-Type":"application/json","X-CSRFToken":o},body:JSON.stringify({step:t,value:n,meta:s})}),c=await l.json();if(!l.ok||c.error)throw new Error(c.error||"Update failed");return{entryId:e,step:t,value:n}}catch(o){return r(o.message)}}),CE=Sn({name:"command",initialState:{items:[],total:0,workflowSteps:[],status:"idle",error:null,stepUpdateStatus:{}},reducers:{},extraReducers:e=>{e.addCase(Ei.pending,t=>{t.status="loading"}).addCase(Ei.fulfilled,(t,n)=>{t.status="succeeded",t.items=n.payload.items||[],t.total=n.payload.total||0,t.workflowSteps=n.payload.workflow_steps||[],t.error=null}).addCase(Ei.rejected,(t,n)=>{t.status="failed",t.error=n.payload,t.items||(t.items=[]),t.workflowSteps||(t.workflowSteps=[])}).addCase(Uv.fulfilled,t=>{}).addCase(Ti.pending,(t,n)=>{const{entryId:s,step:r}=n.meta.arg;t.stepUpdateStatus[`${s}-${r}`]="pending"}).addCase(Ti.fulfilled,(t,n)=>{const{entryId:s,step:r,value:i}=n.payload;t.stepUpdateStatus[`${s}-${r}`]="success";const o=t.items.find(l=>l.id===s);o&&(o.checklist[r]=i)}).addCase(Ti.rejected,(t,n)=>{const{entryId:s,step:r}=n.meta.arg;t.stepUpdateStatus[`${s}-${r}`]="error"}).addCase(Hv.fulfilled,(t,n)=>{t.items=t.items.filter(s=>s.id!==n.payload),t.total-=1})}}),EE=CE.reducer,Vv=6048e5,TE=864e5,E0=Symbol.for("constructDateFrom");function os(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&E0 in e?e[E0](t):e instanceof Date?new e.constructor(t):new Date(t)}function Bt(e,t){return os(t||e,e)}let ME={};function bc(){return ME}function ia(e,t){var l,c,d,u;const n=bc(),s=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((u=(d=n.locale)==null?void 0:d.options)==null?void 0:u.weekStartsOn)??0,r=Bt(e,t==null?void 0:t.in),i=r.getDay(),o=(i<s?7:0)+i-s;return r.setDate(r.getDate()-o),r.setHours(0,0,0,0),r}function Ml(e,t){return ia(e,{...t,weekStartsOn:1})}function Yv(e,t){const n=Bt(e,t==null?void 0:t.in),s=n.getFullYear(),r=os(n,0);r.setFullYear(s+1,0,4),r.setHours(0,0,0,0);const i=Ml(r),o=os(n,0);o.setFullYear(s,0,4),o.setHours(0,0,0,0);const l=Ml(o);return n.getTime()>=i.getTime()?s+1:n.getTime()>=l.getTime()?s:s-1}function T0(e){const t=Bt(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function PE(e,...t){const n=os.bind(null,t.find(s=>typeof s=="object"));return t.map(n)}function M0(e,t){const n=Bt(e,t==null?void 0:t.in);return n.setHours(0,0,0,0),n}function OE(e,t,n){const[s,r]=PE(n==null?void 0:n.in,e,t),i=M0(s),o=M0(r),l=+i-T0(i),c=+o-T0(o);return Math.round((l-c)/TE)}function RE(e,t){const n=Yv(e,t),s=os(e,0);return s.setFullYear(n,0,4),s.setHours(0,0,0,0),Ml(s)}function DE(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function LE(e){return!(!DE(e)&&typeof e!="number"||isNaN(+Bt(e)))}function AE(e,t){const n=Bt(e,t==null?void 0:t.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const zE={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},FE=(e,t,n)=>{let s;const r=zE[e];return typeof r=="string"?s=r:t===1?s=r.one:s=r.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+s:s+" ago":s};function Nd(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const IE={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},WE={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},$E={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},BE={date:Nd({formats:IE,defaultWidth:"full"}),time:Nd({formats:WE,defaultWidth:"full"}),dateTime:Nd({formats:$E,defaultWidth:"full"})},HE={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},UE=(e,t,n,s)=>HE[e];function Jr(e){return(t,n)=>{const s=n!=null&&n.context?String(n.context):"standalone";let r;if(s==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,l=n!=null&&n.width?String(n.width):o;r=e.formattingValues[l]||e.formattingValues[o]}else{const o=e.defaultWidth,l=n!=null&&n.width?String(n.width):e.defaultWidth;r=e.values[l]||e.values[o]}const i=e.argumentCallback?e.argumentCallback(t):t;return r[i]}}const VE={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},YE={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},XE={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},qE={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},GE={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},KE={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},QE=(e,t)=>{const n=Number(e),s=n%100;if(s>20||s<10)switch(s%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},JE={ordinalNumber:QE,era:Jr({values:VE,defaultWidth:"wide"}),quarter:Jr({values:YE,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Jr({values:XE,defaultWidth:"wide"}),day:Jr({values:qE,defaultWidth:"wide"}),dayPeriod:Jr({values:GE,defaultWidth:"wide",formattingValues:KE,defaultFormattingWidth:"wide"})};function Zr(e){return(t,n={})=>{const s=n.width,r=s&&e.matchPatterns[s]||e.matchPatterns[e.defaultMatchWidth],i=t.match(r);if(!i)return null;const o=i[0],l=s&&e.parsePatterns[s]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?e3(l,h=>h.test(o)):ZE(l,h=>h.test(o));let d;d=e.valueCallback?e.valueCallback(c):c,d=n.valueCallback?n.valueCallback(d):d;const u=t.slice(o.length);return{value:d,rest:u}}}function ZE(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function e3(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function t3(e){return(t,n={})=>{const s=t.match(e.matchPattern);if(!s)return null;const r=s[0],i=t.match(e.parsePattern);if(!i)return null;let o=e.valueCallback?e.valueCallback(i[0]):i[0];o=n.valueCallback?n.valueCallback(o):o;const l=t.slice(r.length);return{value:o,rest:l}}}const n3=/^(\d+)(th|st|nd|rd)?/i,s3=/\d+/i,r3={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},i3={any:[/^b/i,/^(a|c)/i]},a3={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},o3={any:[/1/i,/2/i,/3/i,/4/i]},l3={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},c3={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},d3={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},u3={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},h3={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},f3={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},p3={ordinalNumber:t3({matchPattern:n3,parsePattern:s3,valueCallback:e=>parseInt(e,10)}),era:Zr({matchPatterns:r3,defaultMatchWidth:"wide",parsePatterns:i3,defaultParseWidth:"any"}),quarter:Zr({matchPatterns:a3,defaultMatchWidth:"wide",parsePatterns:o3,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Zr({matchPatterns:l3,defaultMatchWidth:"wide",parsePatterns:c3,defaultParseWidth:"any"}),day:Zr({matchPatterns:d3,defaultMatchWidth:"wide",parsePatterns:u3,defaultParseWidth:"any"}),dayPeriod:Zr({matchPatterns:h3,defaultMatchWidth:"any",parsePatterns:f3,defaultParseWidth:"any"})},m3={code:"en-US",formatDistance:FE,formatLong:BE,formatRelative:UE,localize:JE,match:p3,options:{weekStartsOn:0,firstWeekContainsDate:1}};function x3(e,t){const n=Bt(e,t==null?void 0:t.in);return OE(n,AE(n))+1}function g3(e,t){const n=Bt(e,t==null?void 0:t.in),s=+Ml(n)-+RE(n);return Math.round(s/Vv)+1}function Xv(e,t){var u,h,f,p;const n=Bt(e,t==null?void 0:t.in),s=n.getFullYear(),r=bc(),i=(t==null?void 0:t.firstWeekContainsDate)??((h=(u=t==null?void 0:t.locale)==null?void 0:u.options)==null?void 0:h.firstWeekContainsDate)??r.firstWeekContainsDate??((p=(f=r.locale)==null?void 0:f.options)==null?void 0:p.firstWeekContainsDate)??1,o=os((t==null?void 0:t.in)||e,0);o.setFullYear(s+1,0,i),o.setHours(0,0,0,0);const l=ia(o,t),c=os((t==null?void 0:t.in)||e,0);c.setFullYear(s,0,i),c.setHours(0,0,0,0);const d=ia(c,t);return+n>=+l?s+1:+n>=+d?s:s-1}function b3(e,t){var l,c,d,u;const n=bc(),s=(t==null?void 0:t.firstWeekContainsDate)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((u=(d=n.locale)==null?void 0:d.options)==null?void 0:u.firstWeekContainsDate)??1,r=Xv(e,t),i=os((t==null?void 0:t.in)||e,0);return i.setFullYear(r,0,s),i.setHours(0,0,0,0),ia(i,t)}function v3(e,t){const n=Bt(e,t==null?void 0:t.in),s=+ia(n,t)-+b3(n,t);return Math.round(s/Vv)+1}function oe(e,t){const n=e<0?"-":"",s=Math.abs(e).toString().padStart(t,"0");return n+s}const En={y(e,t){const n=e.getFullYear(),s=n>0?n:1-n;return oe(t==="yy"?s%100:s,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):oe(n+1,2)},d(e,t){return oe(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return oe(e.getHours()%12||12,t.length)},H(e,t){return oe(e.getHours(),t.length)},m(e,t){return oe(e.getMinutes(),t.length)},s(e,t){return oe(e.getSeconds(),t.length)},S(e,t){const n=t.length,s=e.getMilliseconds(),r=Math.trunc(s*Math.pow(10,n-3));return oe(r,t.length)}},Us={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},P0={G:function(e,t,n){const s=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(s,{width:"abbreviated"});case"GGGGG":return n.era(s,{width:"narrow"});case"GGGG":default:return n.era(s,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const s=e.getFullYear(),r=s>0?s:1-s;return n.ordinalNumber(r,{unit:"year"})}return En.y(e,t)},Y:function(e,t,n,s){const r=Xv(e,s),i=r>0?r:1-r;if(t==="YY"){const o=i%100;return oe(o,2)}return t==="Yo"?n.ordinalNumber(i,{unit:"year"}):oe(i,t.length)},R:function(e,t){const n=Yv(e);return oe(n,t.length)},u:function(e,t){const n=e.getFullYear();return oe(n,t.length)},Q:function(e,t,n){const s=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(s);case"QQ":return oe(s,2);case"Qo":return n.ordinalNumber(s,{unit:"quarter"});case"QQQ":return n.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(s,{width:"wide",context:"formatting"})}},q:function(e,t,n){const s=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(s);case"qq":return oe(s,2);case"qo":return n.ordinalNumber(s,{unit:"quarter"});case"qqq":return n.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(s,{width:"wide",context:"standalone"})}},M:function(e,t,n){const s=e.getMonth();switch(t){case"M":case"MM":return En.M(e,t);case"Mo":return n.ordinalNumber(s+1,{unit:"month"});case"MMM":return n.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(s,{width:"wide",context:"formatting"})}},L:function(e,t,n){const s=e.getMonth();switch(t){case"L":return String(s+1);case"LL":return oe(s+1,2);case"Lo":return n.ordinalNumber(s+1,{unit:"month"});case"LLL":return n.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(s,{width:"wide",context:"standalone"})}},w:function(e,t,n,s){const r=v3(e,s);return t==="wo"?n.ordinalNumber(r,{unit:"week"}):oe(r,t.length)},I:function(e,t,n){const s=g3(e);return t==="Io"?n.ordinalNumber(s,{unit:"week"}):oe(s,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):En.d(e,t)},D:function(e,t,n){const s=x3(e);return t==="Do"?n.ordinalNumber(s,{unit:"dayOfYear"}):oe(s,t.length)},E:function(e,t,n){const s=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(s,{width:"short",context:"formatting"});case"EEEE":default:return n.day(s,{width:"wide",context:"formatting"})}},e:function(e,t,n,s){const r=e.getDay(),i=(r-s.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return oe(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(r,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(r,{width:"short",context:"formatting"});case"eeee":default:return n.day(r,{width:"wide",context:"formatting"})}},c:function(e,t,n,s){const r=e.getDay(),i=(r-s.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return oe(i,t.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(r,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(r,{width:"narrow",context:"standalone"});case"cccccc":return n.day(r,{width:"short",context:"standalone"});case"cccc":default:return n.day(r,{width:"wide",context:"standalone"})}},i:function(e,t,n){const s=e.getDay(),r=s===0?7:s;switch(t){case"i":return String(r);case"ii":return oe(r,t.length);case"io":return n.ordinalNumber(r,{unit:"day"});case"iii":return n.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(s,{width:"short",context:"formatting"});case"iiii":default:return n.day(s,{width:"wide",context:"formatting"})}},a:function(e,t,n){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(e,t,n){const s=e.getHours();let r;switch(s===12?r=Us.noon:s===0?r=Us.midnight:r=s/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(e,t,n){const s=e.getHours();let r;switch(s>=17?r=Us.evening:s>=12?r=Us.afternoon:s>=4?r=Us.morning:r=Us.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let s=e.getHours()%12;return s===0&&(s=12),n.ordinalNumber(s,{unit:"hour"})}return En.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):En.H(e,t)},K:function(e,t,n){const s=e.getHours()%12;return t==="Ko"?n.ordinalNumber(s,{unit:"hour"}):oe(s,t.length)},k:function(e,t,n){let s=e.getHours();return s===0&&(s=24),t==="ko"?n.ordinalNumber(s,{unit:"hour"}):oe(s,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):En.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):En.s(e,t)},S:function(e,t){return En.S(e,t)},X:function(e,t,n){const s=e.getTimezoneOffset();if(s===0)return"Z";switch(t){case"X":return R0(s);case"XXXX":case"XX":return vs(s);case"XXXXX":case"XXX":default:return vs(s,":")}},x:function(e,t,n){const s=e.getTimezoneOffset();switch(t){case"x":return R0(s);case"xxxx":case"xx":return vs(s);case"xxxxx":case"xxx":default:return vs(s,":")}},O:function(e,t,n){const s=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+O0(s,":");case"OOOO":default:return"GMT"+vs(s,":")}},z:function(e,t,n){const s=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+O0(s,":");case"zzzz":default:return"GMT"+vs(s,":")}},t:function(e,t,n){const s=Math.trunc(+e/1e3);return oe(s,t.length)},T:function(e,t,n){return oe(+e,t.length)}};function O0(e,t=""){const n=e>0?"-":"+",s=Math.abs(e),r=Math.trunc(s/60),i=s%60;return i===0?n+String(r):n+String(r)+t+oe(i,2)}function R0(e,t){return e%60===0?(e>0?"-":"+")+oe(Math.abs(e)/60,2):vs(e,t)}function vs(e,t=""){const n=e>0?"-":"+",s=Math.abs(e),r=oe(Math.trunc(s/60),2),i=oe(s%60,2);return n+r+t+i}const D0=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},qv=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},y3=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],s=n[1],r=n[2];if(!r)return D0(e,t);let i;switch(s){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",D0(s,t)).replace("{{time}}",qv(r,t))},w3={p:qv,P:y3},j3=/^D+$/,_3=/^Y+$/,N3=["D","DD","YY","YYYY"];function k3(e){return j3.test(e)}function S3(e){return _3.test(e)}function C3(e,t,n){const s=E3(e,t,n);if(console.warn(s),N3.includes(e))throw new RangeError(s)}function E3(e,t,n){const s=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${s} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const T3=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,M3=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,P3=/^'([^]*?)'?$/,O3=/''/g,R3=/[a-zA-Z]/;function D3(e,t,n){var u,h,f,p;const s=bc(),r=s.locale??m3,i=s.firstWeekContainsDate??((h=(u=s.locale)==null?void 0:u.options)==null?void 0:h.firstWeekContainsDate)??1,o=s.weekStartsOn??((p=(f=s.locale)==null?void 0:f.options)==null?void 0:p.weekStartsOn)??0,l=Bt(e,n==null?void 0:n.in);if(!LE(l))throw new RangeError("Invalid time value");let c=t.match(M3).map(b=>{const g=b[0];if(g==="p"||g==="P"){const y=w3[g];return y(b,r.formatLong)}return b}).join("").match(T3).map(b=>{if(b==="''")return{isToken:!1,value:"'"};const g=b[0];if(g==="'")return{isToken:!1,value:L3(b)};if(P0[g])return{isToken:!0,value:b};if(g.match(R3))throw new RangeError("Format string contains an unescaped latin alphabet character `"+g+"`");return{isToken:!1,value:b}});r.localize.preprocessor&&(c=r.localize.preprocessor(l,c));const d={firstWeekContainsDate:i,weekStartsOn:o,locale:r};return c.map(b=>{if(!b.isToken)return b.value;const g=b.value;(S3(g)||k3(g))&&C3(g,t,String(e));const y=P0[g[0]];return y(l,g,r.localize,d)}).join("")}function L3(e){const t=e.match(P3);return t?t[1].replace(O3,"'"):e}let A3={data:""},z3=e=>{if(typeof window=="object"){let t=(e?e.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return t.nonce=window.__nonce__,t.parentNode||(e||document.head).appendChild(t),t.firstChild}return e||A3},F3=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,I3=/\/\*[^]*?\*\/|  +/g,L0=/\n+/g,An=(e,t)=>{let n="",s="",r="";for(let i in e){let o=e[i];i[0]=="@"?i[1]=="i"?n=i+" "+o+";":s+=i[1]=="f"?An(o,i):i+"{"+An(o,i[1]=="k"?"":t)+"}":typeof o=="object"?s+=An(o,t?t.replace(/([^,])+/g,l=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,l):l?l+" "+c:c)):i):o!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),r+=An.p?An.p(i,o):i+":"+o+";")}return n+(t&&r?t+"{"+r+"}":r)+s},sn={},Gv=e=>{if(typeof e=="object"){let t="";for(let n in e)t+=n+Gv(e[n]);return t}return e},W3=(e,t,n,s,r)=>{let i=Gv(e),o=sn[i]||(sn[i]=(c=>{let d=0,u=11;for(;d<c.length;)u=101*u+c.charCodeAt(d++)>>>0;return"go"+u})(i));if(!sn[o]){let c=i!==e?e:(d=>{let u,h,f=[{}];for(;u=F3.exec(d.replace(I3,""));)u[4]?f.shift():u[3]?(h=u[3].replace(L0," ").trim(),f.unshift(f[0][h]=f[0][h]||{})):f[0][u[1]]=u[2].replace(L0," ").trim();return f[0]})(e);sn[o]=An(r?{["@keyframes "+o]:c}:c,n?"":"."+o)}let l=n&&sn.g?sn.g:null;return n&&(sn.g=sn[o]),((c,d,u,h)=>{h?d.data=d.data.replace(h,c):d.data.indexOf(c)===-1&&(d.data=u?c+d.data:d.data+c)})(sn[o],t,s,l),o},$3=(e,t,n)=>e.reduce((s,r,i)=>{let o=t[i];if(o&&o.call){let l=o(n),c=l&&l.props&&l.props.className||/^go/.test(l)&&l;o=c?"."+c:l&&typeof l=="object"?l.props?"":An(l,""):l===!1?"":l}return s+r+(o??"")},"");function vc(e){let t=this||{},n=e.call?e(t.p):e;return W3(n.unshift?n.raw?$3(n,[].slice.call(arguments,1),t.p):n.reduce((s,r)=>Object.assign(s,r&&r.call?r(t.p):r),{}):n,z3(t.target),t.g,t.o,t.k)}let Kv,Bu,Hu;vc.bind({g:1});let jn=vc.bind({k:1});function B3(e,t,n,s){An.p=t,Kv=e,Bu=n,Hu=s}function hs(e,t){let n=this||{};return function(){let s=arguments;function r(i,o){let l=Object.assign({},i),c=l.className||r.className;n.p=Object.assign({theme:Bu&&Bu()},l),n.o=/ *go\d+/.test(c),l.className=vc.apply(n,s)+(c?" "+c:"");let d=e;return e[0]&&(d=l.as||e,delete l.as),Hu&&d[0]&&Hu(l),Kv(d,l)}return r}}var H3=e=>typeof e=="function",Uu=(e,t)=>H3(e)?e(t):e,U3=(()=>{let e=0;return()=>(++e).toString()})(),V3=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),Y3=20,Qv="default",Jv=(e,t)=>{let{toastLimit:n}=e.settings;switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,n)};case 1:return{...e,toasts:e.toasts.map(o=>o.id===t.toast.id?{...o,...t.toast}:o)};case 2:let{toast:s}=t;return Jv(e,{type:e.toasts.find(o=>o.id===s.id)?1:0,toast:s});case 3:let{toastId:r}=t;return{...e,toasts:e.toasts.map(o=>o.id===r||r===void 0?{...o,dismissed:!0,visible:!1}:o)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(o=>o.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let i=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(o=>({...o,pauseDuration:o.pauseDuration+i}))}}},X3=[],q3={toasts:[],pausedAt:void 0,settings:{toastLimit:Y3}},mr={},Zv=(e,t=Qv)=>{mr[t]=Jv(mr[t]||q3,e),X3.forEach(([n,s])=>{n===t&&s(mr[t])})},ey=e=>Object.keys(mr).forEach(t=>Zv(e,t)),G3=e=>Object.keys(mr).find(t=>mr[t].toasts.some(n=>n.id===e)),Nf=(e=Qv)=>t=>{Zv(t,e)},K3=(e,t="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...n,id:(n==null?void 0:n.id)||U3()}),ga=e=>(t,n)=>{let s=K3(t,e,n);return Nf(s.toasterId||G3(s.id))({type:2,toast:s}),s.id},be=(e,t)=>ga("blank")(e,t);be.error=ga("error");be.success=ga("success");be.loading=ga("loading");be.custom=ga("custom");be.dismiss=(e,t)=>{let n={type:3,toastId:e};t?Nf(t)(n):ey(n)};be.dismissAll=e=>be.dismiss(void 0,e);be.remove=(e,t)=>{let n={type:4,toastId:e};t?Nf(t)(n):ey(n)};be.removeAll=e=>be.remove(void 0,e);be.promise=(e,t,n)=>{let s=be.loading(t.loading,{...n,...n==null?void 0:n.loading});return typeof e=="function"&&(e=e()),e.then(r=>{let i=t.success?Uu(t.success,r):void 0;return i?be.success(i,{id:s,...n,...n==null?void 0:n.success}):be.dismiss(s),r}).catch(r=>{let i=t.error?Uu(t.error,r):void 0;i?be.error(i,{id:s,...n,...n==null?void 0:n.error}):be.dismiss(s)}),e};var Q3=jn`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,J3=jn`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Z3=jn`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,eT=hs("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Q3} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${J3} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${Z3} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,tT=jn`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,nT=hs("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${tT} 1s linear infinite;
`,sT=jn`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,rT=jn`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,iT=hs("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${sT} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${rT} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,aT=hs("div")`
  position: absolute;
`,oT=hs("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,lT=jn`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,cT=hs("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${lT} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,dT=({toast:e})=>{let{icon:t,type:n,iconTheme:s}=e;return t!==void 0?typeof t=="string"?w.createElement(cT,null,t):t:n==="blank"?null:w.createElement(oT,null,w.createElement(nT,{...s}),n!=="loading"&&w.createElement(aT,null,n==="error"?w.createElement(eT,{...s}):w.createElement(iT,{...s})))},uT=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,hT=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,fT="0%{opacity:0;} 100%{opacity:1;}",pT="0%{opacity:1;} 100%{opacity:0;}",mT=hs("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,xT=hs("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,gT=(e,t)=>{let n=e.includes("top")?1:-1,[s,r]=V3()?[fT,pT]:[uT(n),hT(n)];return{animation:t?`${jn(s)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${jn(r)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}};w.memo(({toast:e,position:t,style:n,children:s})=>{let r=e.height?gT(e.position||t||"top-center",e.visible):{opacity:0},i=w.createElement(dT,{toast:e}),o=w.createElement(xT,{...e.ariaProps},Uu(e.message,e));return w.createElement(mT,{className:e.className,style:{...r,...n,...e.style}},typeof s=="function"?s({icon:i,message:o}):w.createElement(w.Fragment,null,i,o))});B3(w.createElement);vc`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`;const bT=()=>{const e=dt(),{items:t,total:n,workflowSteps:s,status:r,stepUpdateStatus:i}=U(C=>C.command),[o,l]=w.useState(1),[c,d]=w.useState(20),[u,h]=w.useState(!1),[f,p]=w.useState({target_user_id:"",program:"Resident",action:"Confirmed"}),[b,g]=w.useState(""),[y,x]=w.useState([]),[m,v]=w.useState({open:!1,entryId:null,step:null}),[j,_]=w.useState("");w.useEffect(()=>{e(Ei({limit:c,offset:(o-1)*c}))},[e,o,c]);const N=async C=>{if(g(C),C.length>2)try{const $=await(await W(`/api/mgmt/search_users/?q=${C}`)).json();x($.results||[])}catch(A){console.error(A)}else x([])},S=async C=>{if(C.preventDefault(),!f.target_user_id){be.error("Please select a user");return}await e(Uv(f)),h(!1),p({target_user_id:"",program:"Resident",action:"Confirmed"}),g(""),e(Ei({limit:c,offset:(o-1)*c})),be.success("Workflow Entry Created")},T=(C,A)=>{const $=C.checklist[A];if(A==="Waitlist"&&!$&&["Park","Ban"].includes(C.action)){v({open:!0,entryId:C.id,step:A});return}e(Ti({entryId:C.id,step:A,value:!$})).unwrap().then(()=>be.success("Updated")).catch(Y=>be.error(`Failed: ${Y}`))},M=()=>{e(Ti({entryId:m.entryId,step:m.step,value:!0,meta:{reason:j}})).unwrap().then(()=>{be.success("Ban Applied & Step Updated"),v({open:!1,entryId:null,step:null}),_("")}).catch(C=>be.error(`Failed: ${C}`))},D=C=>{confirm("Are you sure you want to delete this entry?")&&e(Hv(C)).unwrap().then(()=>be.success("Entry Deleted")).catch(A=>be.error(A))};return a.jsxs("div",{className:"p-4",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h1",{className:"text-xl font-bold text-slate-100",children:"Command Onboarding"}),a.jsxs("button",{onClick:()=>h(!0),className:"btn btn-primary btn-sm flex items-center gap-2",children:[a.jsx(Sr,{size:16})," New Entry"]})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full text-left border-collapse",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-slate-700 text-slate-400 text-xs uppercase",children:[a.jsx("th",{className:"p-2",children:"Date"}),a.jsx("th",{className:"p-2",children:"Target"}),a.jsx("th",{className:"p-2",children:"Program"}),a.jsx("th",{className:"p-2",children:"Action"}),s.map(C=>a.jsx("th",{className:"p-2 text-center whitespace-nowrap",children:C},C)),a.jsx("th",{className:"p-2",children:"Issuer"}),a.jsx("th",{className:"p-2 text-right",children:"Actions"})]})}),a.jsx("tbody",{children:t.map(C=>a.jsxs("tr",{className:"border-b border-slate-800 hover:bg-slate-800/30 text-sm",children:[a.jsx("td",{className:"p-2 text-slate-300 whitespace-nowrap text-xs",children:D3(new Date(C.created_at),"yyyy-MM-dd")}),a.jsx("td",{className:"p-2 text-slate-200 font-medium",children:C.target_username}),a.jsx("td",{className:"p-2 text-blue-400 text-xs",children:C.program}),a.jsx("td",{className:"p-2 text-yellow-400 text-xs",children:C.action}),s.map(A=>{const $=C.checklist[A],q=i[`${C.id}-${A}`]==="pending",G=A==="Waitlist";return a.jsx("td",{className:"p-2 text-center",children:a.jsx("button",{onClick:()=>T(C,A),disabled:q,className:`
                          w-5 h-5 rounded border flex items-center justify-center transition-colors mx-auto
                          ${$?"bg-green-600 border-green-500 text-white":"bg-slate-800 border-slate-600 text-transparent hover:border-slate-400"}
                          ${G&&!$?"border-blue-500":""}
                        `,title:G?"Click to trigger automated permissions":"",children:q?a.jsx(yN,{size:12,className:"animate-spin text-white"}):a.jsx(hN,{size:12})})},A)}),a.jsx("td",{className:"p-2 text-slate-400 text-xs",children:C.issuer_username}),a.jsx("td",{className:"p-2 text-right",children:a.jsx("button",{onClick:()=>D(C.id),className:"text-slate-500 hover:text-red-400 transition-colors p-1",title:"Delete Entry",children:a.jsx(EN,{size:14})})})]},C.id))})]})}),a.jsx("div",{className:"mt-4",children:a.jsx(hl,{currentPage:o,totalItems:n,pageSize:c,onPageChange:l})}),u&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm",children:a.jsxs("div",{className:"bg-slate-900 border border-slate-700 rounded-lg p-6 w-full max-w-md shadow-xl",children:[a.jsx("h2",{className:"text-xl font-bold mb-4 text-white",children:"New Workflow Entry"}),a.jsxs("form",{onSubmit:S,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-slate-400 mb-1",children:"Target User"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"text",className:"w-full bg-slate-950 border border-slate-700 rounded p-2 text-white",placeholder:"Search pilot...",value:b,onChange:C=>N(C.target.value)}),y.length>0&&a.jsx("div",{className:"absolute top-full left-0 right-0 bg-slate-800 border border-slate-600 mt-1 max-h-48 overflow-y-auto rounded z-10",children:y.map(C=>a.jsxs("div",{className:"p-2 hover:bg-slate-700 cursor-pointer text-slate-200",onClick:()=>{p({...f,target_user_id:C.id}),g(`${C.username} (Main: ${C.main_character})`),x([])},children:[C.username," ",a.jsxs("span",{className:"text-slate-500 text-xs",children:["Main: ",C.main_character]})]},C.id))})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-slate-400 mb-1",children:"Program"}),a.jsx("select",{className:"w-full bg-slate-950 border border-slate-700 rounded p-2 text-white",value:f.program,onChange:C=>p({...f,program:C.target.value}),children:["Resident","LC","TFC","FC","Training CT","Certified Trainer","Officer","Leadership","Line Pilot"].map(C=>a.jsx("option",{value:C,children:C},C))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-slate-400 mb-1",children:"Action"}),a.jsx("select",{className:"w-full bg-slate-950 border border-slate-700 rounded p-2 text-white",value:f.action,onChange:C=>p({...f,action:C.target.value}),children:["Confirmed","Denied","Review","Removal-CC","Demotion","Park","Un-Park","Ban"].map(C=>a.jsx("option",{value:C,children:C},C))})]})]}),a.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[a.jsx("button",{type:"button",onClick:()=>h(!1),className:"px-4 py-2 text-slate-300 hover:text-white",children:"Cancel"}),a.jsx("button",{type:"submit",className:"btn btn-primary",children:"Create"})]})]})]})}),m.open&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm",children:a.jsxs("div",{className:"bg-slate-900 border border-red-900/50 rounded-lg p-6 w-full max-w-md shadow-xl",children:[a.jsxs("h2",{className:"text-xl font-bold mb-4 text-red-400 flex items-center gap-2",children:[a.jsx(Zn,{size:20})," Ban Confirmation"]}),a.jsx("p",{className:"text-slate-300 mb-4 text-sm",children:"This action will apply a system ban to the user. Please provide a reason."}),a.jsx("textarea",{className:"w-full bg-slate-950 border border-slate-700 rounded p-2 text-white min-h-[100px]",placeholder:"Enter ban reason...",value:j,onChange:C=>_(C.target.value)}),a.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[a.jsx("button",{onClick:()=>v({open:!1,entryId:null,step:null}),className:"px-4 py-2 text-slate-300",children:"Cancel"}),a.jsx("button",{onClick:M,disabled:!j.trim(),className:"btn bg-red-600 hover:bg-red-500 text-white",children:"Confirm Ban"})]})]})})]})};function vT(){return a.jsx(aN,{children:a.jsx(Pj,{children:a.jsx(DN,{children:a.jsx(zN,{children:a.jsxs(jj,{children:[a.jsx(ie,{path:"/",element:a.jsx(im,{})}),a.jsx(ie,{path:"/landing/",element:a.jsx(im,{})}),a.jsx(ie,{path:"/auth/login",element:a.jsx(FN,{})}),a.jsx(ie,{path:"/doctrines",element:a.jsx(IN,{})}),a.jsx(ie,{path:"/profile",element:a.jsx(VN,{})}),a.jsx(ie,{path:"/fleet/:token",element:a.jsx(C2,{})}),a.jsx(ie,{path:"/access_denied",element:a.jsx(E2,{})}),a.jsx(ie,{path:"/banned",element:a.jsx(T2,{})}),a.jsxs(ie,{path:"/management",element:a.jsx(M2,{}),children:[a.jsx(ie,{index:!0,element:a.jsx(P2,{})}),a.jsx(ie,{path:"users",element:a.jsx(H2,{})}),a.jsx(ie,{path:"fleets",element:a.jsx(U2,{})}),a.jsx(ie,{path:"fleets/setup",element:a.jsx(J2,{})}),a.jsx(ie,{path:"fleets/:token/settings",element:a.jsx(Z2,{})}),a.jsx(ie,{path:"fleets/:token/history",element:a.jsx(ek,{})}),a.jsx(ie,{path:"srp",element:a.jsx(u4,{})}),a.jsx(ie,{path:"srp/config",element:a.jsx(m4,{})}),a.jsx(ie,{path:"bans",element:a.jsx(tk,{})}),a.jsx(ie,{path:"bans/audit",element:a.jsx(nk,{})}),a.jsx(ie,{path:"doctrines",element:a.jsx(x4,{})}),a.jsx(ie,{path:"skills",element:a.jsx(g4,{})}),a.jsx(ie,{path:"rules",element:a.jsx(b4,{})}),a.jsx(ie,{path:"sde",element:a.jsx(v4,{})}),a.jsx(ie,{path:"celery",element:a.jsx(S4,{})}),a.jsx(ie,{path:"permissions",element:a.jsx(M4,{})}),a.jsx(ie,{path:"scripts",element:a.jsx(SE,{})}),a.jsx(ie,{path:"command",element:a.jsx(bT,{})}),a.jsx(ie,{path:"*",element:a.jsx("div",{className:"p-10 text-slate-500",children:"Page Not Found"})})]}),a.jsx(ie,{path:"*",element:a.jsx("div",{className:"p-10 text-center text-slate-500",children:"Page Not Found"})})]})})})})})}const yT=z_({reducer:{ui:RN,auth:iN,fleet:f2,system:k4,srp:d4,profile:UN,users:B2,scripts:NE,command:EE},middleware:e=>e().concat(g2())});kd.createRoot(document.getElementById("root")).render(a.jsx(Ol.StrictMode,{children:a.jsx(n_,{store:yT,children:a.jsx(vT,{})})}));
